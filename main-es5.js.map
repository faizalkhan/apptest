{"version":3,"sources":["webpack:///src/app/header/basket/basket/basket.component.ts","webpack:///src/app/header/basket/basket/basket.component.html","webpack:///src/app/services/preventive-maintenance/preventive-maintenance.types.ts","webpack:///src/app/services/preventive-maintenance/preventive-maintenance.service.ts","webpack:///src/utils/observableUtils.ts","webpack:///src/app/services/basket/basket.types.ts","webpack:///src/app/services/toast/toast.service.ts","webpack:///src/environments/environment.ts","webpack:///src/app/dashboard/index.ts","webpack:///src/app/services/asset/asset.service.ts","webpack:///src/app/guards/jwt.interceptor.ts","webpack:///src/app/DependencyResolver.ts","webpack:///src/app/services/check-lists/check-lists.types.ts","webpack:///src/app/services/user-account/permissions.ts","webpack:///src/app/services/asset/asset.types.ts","webpack:///src/app/services/workorder/workorder.service.ts","webpack:///src/app/header/function-bar/user-flyout/user-flyout.component.ts","webpack:///src/app/header/function-bar/user-flyout/user-flyout.component.html","webpack:///src/app/services/workorder/workorder.types.ts","webpack:///src/app/services/check-lists/check-lists.service.ts","webpack:///src/app/dashboard/dashboard.component.ts","webpack:///src/app/dashboard/dashboard.component.html","webpack:///src/app/guards/permission.guard.ts","webpack:///src/app/header/function-bar/nav/nav.component.ts","webpack:///src/app/header/function-bar/nav/nav.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/toast/toast.component.ts","webpack:///src/app/toast/toast.component.html","webpack:///src/app/guards/auth.guard.ts","webpack:///src/app/header/function-bar/search/search.component.ts","webpack:///src/app/header/function-bar/search/search.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/guards/index.ts","webpack:///src/app/header/header.component.ts","webpack:///src/app/header/header.component.html","webpack:///src/app/header/function-bar/function-bar.component.ts","webpack:///src/app/header/function-bar/function-bar.component.html","webpack:///src/app/services/search-filter/search-filter.service.ts","webpack:///src/app/services/filehandler/filehandler.service.ts","webpack:///src/app/services/user-account/user.ts","webpack:///src/app/services/basket/basket.service.ts","webpack:///src/app/services/index.ts","webpack:///src/app/services/site/site.service.ts","webpack:///src/app/services/navigation/navigation.service.ts","webpack:///src/app/services/authentication/authentication.service.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/app/services/filehandler/filehandler.type.ts","webpack:///src/app/guards/error.interceptor.ts","webpack:///src/main.ts","webpack:///src/app/services/sku/sku.service.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["BasketComponent","basketService","cdRef","basketLength","basket$","subscribe","basket","items","length","markForCheck","PreventiveMaintenanceStatus","PreventiveMaintenance","preventiveMaintenance","maintenanceAssets","id","siteId","number","numberWithPrefix","title","frequency","assetName","status","assignedTo","startDate","endDate","instruction","nextDue","PreventiveMaintenanceService","http","authenticationService","preventiveMaintenanceUrl","apiBaseUrl","userProfile","currentUserProfile$","getValue","primarySite","args","currentUserProfile","params","append","offset","toString","take","searchText","includeExpired","get","createdBy","getCurrentUserIdAndName","body","post","preventiveMaintenanceGuId","extendedPreventiveMaintenance","userId","put","safelyUnsubscribeFrom","subscription","closed","unsubscribe","AutoUnsubscribe","subcribeFnList","constructor","original","prototype","ngOnDestroy","prop","hasOwnProperty","property","includes","apply","arguments","BasketItem","item","createdByUserId","createdByUserName","skuId","skuDescription","uom","qty","Basket","map","lastUpdatedTimestampUtc","ToastType","Toast","message","type","Success","ToastService","activeToast","toastStack","toast","noActiveToast","toastStackEmpty","setNextToast","push","showToast","Danger","next","setTimeout","loadNextToastFromStack","toastDuration","nextToast","shift","environment","uiBaseUrl","production","AssetService","httpClient","assetUrl","primarySiteId","text","Id","updateAsset","JwtInterceptor","request","user","userValue","isLoggedIn","Api_Key","isApiUrl","url","startsWith","clone","setHeaders","Authorization","handle","DependencyResolver","userProfileService","route","state","Promise","resolve","interval","setInterval","_","value","clearInterval","CheckListStatus","CheckList","checkList","task","name","AssetsPermissions","SparesPermissions","WorkOrdersPermissions","PreventiveMaintenancePermissions","CheckListPermissions","PermissionGroup","permissionGroupToPermissionSet","Assets","Spares","WorkOrders","emptyPermissionSet","Role","roleString","role","roleWords","slice","join","hasPermission","permission","permissionSubSet","profileHasPermission","requiredPermissions","userPermissionSet","assetsPermissions","userRole","findIndex","module","moduleName","permissionValue","sparesPermissions","workOrdersPermissions","preventiveMaintenancePermissions","checkListPermissions","permissionGroup","AssetType","Phase","IAssetStatus","Asset","asset","assetId","assetCode","description","statusId","location","Group","group","SubGroup","subGroup","ExtendedAsset","iExtendedAsset","supplier","nextMaintenanceDate","model","manufacturer","assetGroup","assetSubGroup","assetType","kw","volts","phase","loadFactor","specifications","vendorId","frequencyDays","validFromDate","validToDate","attachedFiles","AssetGroupAndSubGroup","WorkordersService","workOrderURL","workOrderId","workOrderGuId","extendedWorkOrder","dueDate","Number","assignedToUser","createdTimestampUtc","reportedOn","priorityId","priority","categoryId","category","serviceDetails","workOrderAssets","workOrderCheckLists","workOrderChecklists","UpdatedBy","workOrderNumber","workOrderServiceDetail","patch","getSpareUrl","workOrderSpares","options","responseType","UserFlyoutComponent","elementRef","changeDetectorRef","authentication","userFlyoutOpen","isSignedIn","isConfirmingSignOut","data","isConfirmed","logout","e","nativeElement","contains","target","onUserFlyoutClick","Workorder","workorder","WorkorderStatus","WorkOrderPriority","WorkOrderCheckList","CheckListsService","checkListUrl","includeObsolete","checkListId","extendedCheckList","DashboardComponent","navigationService","dashItems","sub","getNavigationTree","pipe","x","navItems","populateDashItems","iterateDashItems","navItem","children","childItem","showOnDash","PermissionGuard","toastService","router","requiredPermission","permissionsRequired","currentUserHasPermission","navigate","NavComponent","navigationExpanded","navExpanded","toggleNavigation","window","innerWidth","handleHamburgerClick","AppComponent","ToastComponent","AuthGuard","queryParams","returnUrl","SearchComponent","AppModule","provide","useClass","multi","HeaderComponent","Organisation","JSON","parse","localStorage","getItem","undefined","detectChanges","FunctionBarComponent","CanViewBasket","canViewBasket","SearchFilterService","searchWOTextValue","searchPMTextValue","searchPMFilterValue","searchWOTextValueCache","searchPMTextValueCache","searchPMFilterValueCache","searchCLFilterValue","searchCLTextValue","searchCLFilterValueCache","searchCLTextValueCache","FilehandlerService","filehandlerUrl","dataId","ModuleName","fileCollection","formData","FormData","forEach","srcFile","filePath","getFileUrl","httpHeader","headers","isDeleteAllFiles","deleteFileUrl","UserProfile","givenName","surName","displayName","lastLogon","commonCodeIdentifier","sites","emailAddress","User","BasketService","basketUrl$","userProfileSub","getBasket","basketUrl","basketItem","iBasket","deletedByUserId","NavigationService","navigationExpanded$","asObservable","navigationTree","label","dashPanelColour","CanViewWorkOrders","CanViewPreventiveMaintenance","CanViewAssetsList","isLandingPage","landingPageDescription","CanViewStockList","CanViewOrderHistory","CanViewCheckList","routePrefix","slug","replace","toLowerCase","expanded","toggleExpanded","icon","dashIllustration","child","addFieldsByConvention","removeItemsBasedOnPermissions","filter","includeHiddenItems","generatedNavTreeCache","generatedNavTreeCacheWithHiddenItems","navTree","hidden","AuthenticationService","userid","password","header","set","setItem","stringify","handleError","groupName","Manager","error","ErrorEvent","console","removeItem","concat","substring","accountModule","then","AccountModule","assetsRequiredPermissions","workordersRequiredPermissions","routes","path","component","canActivate","loadChildren","m","AssetsModule","dependenciesResolved","SparesModule","WorkOrdersModule","PreventiveMaintenanceModule","CheckListsModule","AppRoutingModule","forRoot","Modules","ErrorInterceptor","err","bootstrapModule","SkuService","skuStockItemUrl","sparesGroupUrl","sparesGroupId","sparesSubGroupId","sparesGroups","groups","split","webpackEmptyAsyncContext","req","Error","code","keys","exports"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { BasketService } from 'src/app/services';\r\nimport { Basket } from 'src/app/services/basket/basket.types';\r\n\r\n@Component({\r\n  selector: 'app-basket',\r\n  templateUrl: './basket.component.html',\r\n  styleUrls: ['./basket.component.scss']\r\n})\r\nexport class BasketComponent implements OnInit {\r\n  public basketLength = 0;\r\n\r\n  constructor(\r\n    private basketService: BasketService,\r\n    private cdRef: ChangeDetectorRef\r\n  ) {\r\n    this.basketService.basket$.subscribe((basket: Basket) => {\r\n      if (basket && basket.items) {\r\n        this.basketLength = basket.items.length;\r\n        this.cdRef.markForCheck();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n}\r\n","<a routerLink=\"/spares/order-basket\" *ngIf=\"basketLength > 0\">\r\n  <div class=\"basket-length\">\r\n    {{basketLength}}\r\n  </div>\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18.141 19.88\"><g transform=\"translate(21691.521 3947.093)\"><path d=\"M-21687.919-3932.679a.587.587 0 0 1-.621.621h-.5a.587.587 0 0 1-.621-.621v-13.793a.587.587 0 0 1 .624-.621h.5a.587.587 0 0 1 .621.621zM-21679.842-3940.632a.587.587 0 0 1-.621.621h-1.74a.587.587 0 0 1-.621-.621v-5.84a.587.587 0 0 1 .621-.621h1.615a.587.587 0 0 1 .621.621v5.84z\"/><path d=\"M-21674.127-3933.798a.587.587 0 0 1 .621.621v.5a.587.587 0 0 1-.621.621h-14.91a.587.587 0 0 1-.621-.621v-.5a.587.587 0 0 1 .621-.621zM-21688.539-3947.093a.587.587 0 0 1 .618.621v.5a.587.587 0 0 1-.621.621h-2.358a.587.587 0 0 1-.621-.624v-.5a.587.587 0 0 1 .621-.618z\"/><ellipse cx=\"1.988\" cy=\"1.988\" rx=\"1.988\" ry=\"1.988\" transform=\"translate(-21689.658 -3931.188)\"/><ellipse cx=\"1.988\" cy=\"1.988\" rx=\"1.988\" ry=\"1.988\" transform=\"translate(-21677.357 -3931.188)\"/><path d=\"M-21680.961-3935.538a.451.451 0 0 1-.745 0c-2.228-2.362-4.095-4.538-4.225-4.721s-.124-.373.248-.373h8.7c.373 0 .5.249.248.5-.002 0-2.363 2.482-4.226 4.594z\"/></g></svg>\r\n</a>\r\n","import { IAssets } from '../asset/asset.types';\r\n\r\nexport enum PreventiveMaintenanceStatus {\r\n  'Active' = 1,\r\n  'Expired' = 2\r\n}\r\n\r\nexport interface IPreventiveMaintenance {\r\n  assetName: string;\r\n  id: string;\r\n  title?: string;\r\n  number: number;\r\n  numberWithPrefix: string;\r\n  siteId?: string;\r\n  endDate: string;\r\n  startDate: string;\r\n  frequency: number;\r\n  status: number;\r\n  assignedTo: string;\r\n  instruction: string;\r\n  nextDue?: string;\r\n  maintenanceAssets?: IAssets[];\r\n}\r\n\r\nexport class PreventiveMaintenance {\r\n  public id: string;\r\n  public number: number;\r\n  public numberWithPrefix: string;\r\n  public siteId: string;\r\n  public assetName: string;\r\n  public title?: string;\r\n  public startDate: string;\r\n  public endDate: string;\r\n  public status: number;\r\n  public frequency: number;\r\n  public assignedTo: string;\r\n  public instruction: string;\r\n  public nextDue?: string;\r\n  public maintenanceAssets?: IAssets[] = [];\r\n\r\n  constructor(preventiveMaintenance?: IPreventiveMaintenance) {\r\n    if (preventiveMaintenance) {\r\n      this.id = preventiveMaintenance.id;\r\n      this.siteId = preventiveMaintenance.siteId;\r\n      this.number = preventiveMaintenance.number;\r\n      this.numberWithPrefix = preventiveMaintenance.numberWithPrefix;\r\n      this.title = preventiveMaintenance.title;\r\n      this.frequency = preventiveMaintenance.frequency;\r\n      this.title = preventiveMaintenance.assetName;\r\n      this.status = preventiveMaintenance.status;\r\n      this.assignedTo = preventiveMaintenance.assignedTo;\r\n      this.startDate = preventiveMaintenance.startDate;\r\n      this.endDate = preventiveMaintenance.endDate;\r\n      this.maintenanceAssets = preventiveMaintenance.maintenanceAssets;\r\n      this.instruction = preventiveMaintenance.instruction;\r\n      this.nextDue = preventiveMaintenance.nextDue;\r\n    }\r\n  }\r\n}\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\nimport { IUserProfile } from '../user-account/user';\r\nimport {\r\n  IPreventiveMaintenance,\r\n  PreventiveMaintenance,\r\n  PreventiveMaintenanceStatus\r\n} from './preventive-maintenance.types';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PreventiveMaintenanceService {\r\n  private preventiveMaintenanceUrl = `${environment.apiBaseUrl}/preventivemaintenance/scheduler`;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  private get currentUserProfile(): IUserProfile {\r\n    const userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n    if (userProfile && userProfile.primarySite) {\r\n      return userProfile;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public getPreventiveMaintenanceList(\r\n    args: {\r\n      offset: number;\r\n      take: number;\r\n      searchText: string;\r\n      includeExpired: boolean;\r\n    },\r\n    siteId = this.currentUserProfile.primarySite.id\r\n  ): Observable<IPreventiveMaintenance[]> {\r\n    let params = new HttpParams();\r\n    params = params.append('offset', args.offset.toString());\r\n    params = params.append('take', args.take.toString());\r\n    params = params.append('searchText', args.searchText.toString());\r\n    params = params.append(\r\n      'includeExpiredSchedule',\r\n      args.includeExpired.toString()\r\n    );\r\n    return this.http.get<IPreventiveMaintenance[]>(\r\n      `${this.preventiveMaintenanceUrl}/schedules/${siteId}?`,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  public createSchedule(args: {\r\n    title: string;\r\n    endDate: string;\r\n    startDate: string;\r\n    frequency: string;\r\n    status: PreventiveMaintenanceStatus;\r\n    assignedTo: string;\r\n    instruction: string;\r\n    assetName: string;\r\n    maintenanceAssets?: string[];\r\n    siteId?: string;\r\n  }): Observable<PreventiveMaintenance> {\r\n    const createdBy: string = this.authenticationService.getCurrentUserIdAndName();\r\n    args.siteId = this.currentUserProfile.primarySite.id;\r\n    const body = args;\r\n    return this.http.post<PreventiveMaintenance>(\r\n      `${this.preventiveMaintenanceUrl}?userId=${createdBy}`,\r\n      body\r\n    );\r\n  }\r\n\r\n  public viewPreventiveMaintenanceDetailForId(\r\n    preventiveMaintenanceGuId: string\r\n  ) {\r\n    return this.http.get<IPreventiveMaintenance>(\r\n      `${this.preventiveMaintenanceUrl}/${preventiveMaintenanceGuId}`\r\n    );\r\n  }\r\n\r\n  public updatePreventiveMaintenanceDetailForId(\r\n    preventiveMaintenanceGuId: string,\r\n    extendedPreventiveMaintenance: IPreventiveMaintenance,\r\n    userId = this.authenticationService.getCurrentUserIdAndName()\r\n  ): Observable<IPreventiveMaintenance> {\r\n    return this.http.put<IPreventiveMaintenance>(\r\n      `${this.preventiveMaintenanceUrl}/${preventiveMaintenanceGuId}/${userId}`,\r\n      extendedPreventiveMaintenance\r\n    );\r\n  }\r\n}\r\n","import { Subscription } from 'rxjs';\r\n\r\nexport const safelyUnsubscribeFrom = (subscription: Subscription) => {\r\n  subscription && !subscription.closed && subscription.unsubscribe();\r\n};\r\n\r\nexport function AutoUnsubscribe(subcribeFnList = []) {\r\n  return function(constructor) {\r\n    const original = constructor.prototype.ngOnDestroy;\r\n\r\n    constructor.prototype.ngOnDestroy = function() {\r\n      for (const prop in this) {\r\n        if (this.hasOwnProperty(prop)) {\r\n          const property = this[prop];\r\n          if (!subcribeFnList.includes(prop)) {\r\n            if (property && typeof property.unsubscribe === 'function') {\r\n              property.unsubscribe();\r\n            }\r\n          }\r\n        }\r\n      }\r\n      original &&\r\n        typeof original === 'function' &&\r\n        original.apply(this, arguments);\r\n    };\r\n  };\r\n}","export interface IBasketItem {\r\n  createdByUserId: string;\r\n  createdByUserName: string;\r\n  skuId: string;\r\n  skuDescription: string;\r\n  uom: string;\r\n  qty: number;\r\n}\r\n\r\nexport class BasketItem implements IBasketItem {\r\n  public createdByUserId: string;\r\n  public createdByUserName: string;\r\n  public skuId: string;\r\n  public skuDescription: string;\r\n  public uom: string;\r\n  public qty: number;\r\n\r\n  constructor(item: IBasketItem) {\r\n    this.createdByUserId = item.createdByUserId;\r\n    this.createdByUserName = item.createdByUserName;\r\n    this.skuId = item.skuId;\r\n    this.skuDescription = item.skuDescription;\r\n    this.uom = item.uom;\r\n    this.qty = item.qty;\r\n  }\r\n}\r\n\r\nexport interface IBasket {\r\n  siteId: string;\r\n  items: IBasketItem[];\r\n  lastUpdatedTimestampUtc: string;\r\n}\r\n\r\nexport class Basket implements IBasket {\r\n  siteId: string;\r\n  items: IBasketItem[];\r\n  lastUpdatedTimestampUtc: string;\r\n\r\n  constructor(basket: IBasket) {\r\n    this.siteId = basket.siteId;\r\n    this.items = basket.items.map(item => new BasketItem(item));\r\n    this.lastUpdatedTimestampUtc = basket.lastUpdatedTimestampUtc;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nexport enum ToastType {\r\n  Success = 'success',\r\n  Danger = 'danger'\r\n}\r\n\r\nexport class Toast {\r\n  public message: string;\r\n  public type: ToastType;\r\n\r\n  constructor(message: string, type = ToastType.Success) {\r\n    this.message = message;\r\n    this.type = type;\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ToastService {\r\n  private activeToast = new BehaviorSubject<Toast>(null);\r\n  private toastStack = [];\r\n  public get toastDuration() {\r\n    return 3500;\r\n  }\r\n\r\n  public showToast(toast: Toast) {\r\n    const noActiveToast = this.activeToast.getValue() === null;\r\n    const toastStackEmpty = this.toastStack.length === 0;\r\n\r\n    if (noActiveToast && toastStackEmpty) {\r\n      this.setNextToast(toast);\r\n    } else {\r\n      this.toastStack.push(toast);\r\n    }\r\n  }\r\n\r\n  public showErrorToast(message = 'Sorry something went wrong') {\r\n    this.showToast(new Toast(message, ToastType.Danger));\r\n  }\r\n\r\n  private setNextToast(toast: Toast) {\r\n    this.activeToast.next(toast);\r\n    setTimeout(() => {\r\n      // The toast needs to be set to null briefly so that the CSS\r\n      // animation is triggered by the toast being removed and added\r\n      // back to the DOM\r\n      this.activeToast.next(null);\r\n      setTimeout(() => this.loadNextToastFromStack(), 50);\r\n    }, this.toastDuration);\r\n  }\r\n\r\n  private loadNextToastFromStack() {\r\n    if (this.toastStack.length > 0) {\r\n      const nextToast = this.toastStack.shift();\r\n      this.setNextToast(nextToast);\r\n    }\r\n  }\r\n}\r\n","export const environment = {\r\n  uiBaseUrl: 'http://localhost:5010',\r\n  production: false,\r\n  apiBaseUrl: 'https://dev-upkeep-api.texmocastings.com'\r\n};\r\n","export * from './dashboard.component';\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\nimport { Asset, ExtendedAsset, IUpdateAsset } from './asset.types';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AssetService {\r\n  private assetUrl = `${environment.apiBaseUrl}/asset`;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  private get primarySiteId(): string {\r\n    const userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n    if (userProfile && userProfile.primarySite) {\r\n      return userProfile.primarySite.id;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public listAssets(\r\n    args: {\r\n      offset: number;\r\n      take: number;\r\n      text: string;\r\n    },\r\n    siteId = this.primarySiteId\r\n  ): Observable<Asset[]> {\r\n    let params = new HttpParams();\r\n    params = params.append('offset', args.offset.toString());\r\n    params = params.append('take', args.take.toString());\r\n    params = params.append('text', args.text.toString());\r\n    params = params.append('siteId', siteId);\r\n\r\n    return this.httpClient.get<Asset[]>(`${this.assetUrl}`, {\r\n      params\r\n    });\r\n  }\r\n\r\n  public viewAssetForId(Id: string): Observable<ExtendedAsset> {\r\n    return this.httpClient.get<ExtendedAsset>(`${this.assetUrl}/${Id}`);\r\n  }\r\n\r\n  public updateAssetForId(\r\n    updateAsset: IUpdateAsset\r\n  ): Observable<ExtendedAsset> {\r\n    return this.httpClient.put<ExtendedAsset>(`${this.assetUrl}`, updateAsset);\r\n  }\r\n\r\n  public getAssetGroup(text: string) {\r\n    return this.httpClient.get(\r\n      `${this.assetUrl}/AssetGroupAndSubGroups?Text=${text}`\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  HttpRequest,\r\n  HttpHandler,\r\n  HttpEvent,\r\n  HttpInterceptor\r\n} from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { environment } from './../../environments/environment';\r\nimport { AuthenticationService } from './../services';\r\n\r\n@Injectable()\r\nexport class JwtInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) {}\r\n\r\n  intercept(\r\n    request: HttpRequest<any>,\r\n    next: HttpHandler\r\n  ): Observable<HttpEvent<any>> {\r\n    // add auth header with jwt if user is logged in and request is to the api url\r\n    const user = this.authenticationService.userValue;\r\n    const isLoggedIn = user && user.userId;\r\n    const Api_Key =\r\n      '418413972367e5976207eeb05530ec52213d3b0a0bfcb55001fa00eb0f1c4225';\r\n    const isApiUrl = request.url.startsWith(environment.apiBaseUrl);\r\n    if (isLoggedIn && isApiUrl) {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          Authorization: `Bearer ${user.userId}`,\r\n          Api_Key: Api_Key\r\n        }\r\n      });\r\n    }\r\n\r\n    return next.handle(request);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { AuthenticationService } from './services';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DependencyResolver implements Resolve<boolean> {\r\n  constructor(private userProfileService: AuthenticationService) {}\r\n\r\n  public resolve(route: ActivatedRouteSnapshot, state): Promise<boolean> {\r\n    return new Promise<boolean>(resolve => {\r\n      const interval = setInterval(_ => {\r\n        if (this.userProfileService.currentUserProfile$.value !== null) {\r\n          clearInterval(interval);\r\n          return resolve(true);\r\n        }\r\n      }, 100);\r\n    });\r\n  }\r\n}\r\n","export enum CheckListStatus {\r\n  'Active' = 1,\r\n  'Obsolete' = 2\r\n}\r\n\r\nexport interface ITask {\r\n  id?: string;\r\n  sequenceNumber?: number;\r\n  description: string;\r\n  isDeleted?: boolean;\r\n}\r\n\r\nexport interface ICheckList {\r\n  id: string;\r\n  number: number;\r\n  numberWithPrefix?: string;\r\n  siteId?: string;\r\n  name: string;\r\n  status?: CheckListStatus;\r\n}\r\n\r\nexport class CheckList {\r\n  public id: string;\r\n  public number: number;\r\n  public numberWithPrefix?: string;\r\n  public siteId?: string;\r\n  public name: string;\r\n  public task?: ITask[];\r\n  public status?: CheckListStatus;\r\n\r\n  constructor(checkList?: ICheckList, task?: ITask[]) {\r\n    if (checkList) {\r\n      this.id = checkList.id;\r\n      this.number = checkList.number;\r\n      this.numberWithPrefix = checkList.numberWithPrefix;\r\n      this.name = checkList.name;\r\n      this.task = task;\r\n      this.status = checkList.status;\r\n    }\r\n  }\r\n}\r\n\r\nexport interface IExtendedTask extends ITask {\r\n  isCompleted: boolean;\r\n}\r\n","import words from 'lodash-es/words';\r\nimport { IUserProfile } from './user';\r\n\r\nexport enum AssetsPermissions {\r\n  None = 0,\r\n  CanViewAssetsList = 1 << 0,\r\n  CanViewAssetDetails = 1 << 1,\r\n  CanModifyAssetDetails = 1 << 2\r\n}\r\n\r\nexport enum SparesPermissions {\r\n  None = 0,\r\n  CanViewStockList = 1 << 0,\r\n  CanViewBasket = 1 << 1,\r\n  CanAddToBasket = 1 << 2,\r\n  CanModifyBasket = 1 << 3,\r\n  CanViewOrderHistory = 1 << 4,\r\n  CanPlaceOrder = 1 << 5,\r\n  CanManageOrder = 1 << 6,\r\n  CanTransferStock = 1 << 7\r\n}\r\n\r\nexport enum WorkOrdersPermissions {\r\n  None = 0,\r\n  CanViewWorkOrders = 1 << 0,\r\n  CanViewOrderHistory = 1 << 1,\r\n  CanEditWorkOrder = 1 << 2,\r\n  CanCreateWorkOrder = 1 << 3\r\n}\r\n\r\nexport enum PreventiveMaintenancePermissions {\r\n  None = 0,\r\n  CanViewPreventiveMaintenance = 1 << 0,\r\n  CanEditPreventiveMaintenance = 1 << 1,\r\n  CanCreatePreventiveMaintenance = 1 << 2\r\n}\r\n\r\nexport enum CheckListPermissions {\r\n  None = 0,\r\n  CanViewCheckList = 1 << 0,\r\n  CanEditCheckList = 1 << 1,\r\n  CanCreateCheckList = 1 << 2\r\n}\r\n\r\nexport enum PermissionGroup {\r\n  Assets = 'assetsPermissions',\r\n  Spares = 'sparesPermissions',\r\n  WorkOrders = 'workOrdersPermissions',\r\n  PreventiveMaintenance = 'preventiveMaintenancePermissions',\r\n  CheckList = 'checkListPermissions'\r\n}\r\n\r\nexport interface IPermissionSet {\r\n  [PermissionGroup.Assets]: number;\r\n  [PermissionGroup.Spares]: number;\r\n  [PermissionGroup.WorkOrders]: number;\r\n  [PermissionGroup.PreventiveMaintenance]: number;\r\n  [PermissionGroup.CheckList]: number;\r\n}\r\n\r\nexport interface IRequiredPermissions {\r\n  [permissionGroup: string]:\r\n    | AssetsPermissions[]\r\n    | SparesPermissions[]\r\n    | WorkOrdersPermissions[]\r\n    | PreventiveMaintenancePermissions[]\r\n    | CheckListPermissions[];\r\n}\r\n\r\nexport const permissionGroupToPermissionSet = {\r\n  [PermissionGroup.Assets]: AssetsPermissions,\r\n  [PermissionGroup.Spares]: SparesPermissions,\r\n  [PermissionGroup.WorkOrders]: WorkOrdersPermissions,\r\n  [PermissionGroup.PreventiveMaintenance]: PreventiveMaintenancePermissions,\r\n  [PermissionGroup.CheckList]: CheckListPermissions\r\n};\r\n\r\nexport const emptyPermissionSet: IPermissionSet = {\r\n  [PermissionGroup.Assets]: 0,\r\n  [PermissionGroup.Spares]: 0,\r\n  [PermissionGroup.WorkOrders]: 0,\r\n  [PermissionGroup.PreventiveMaintenance]: 0,\r\n  [PermissionGroup.CheckList]: 0\r\n};\r\n\r\nexport enum Role {\r\n  None = 'NA',\r\n  Manager = 'upkeep_manager',\r\n  Technician = 'upkeep_technician',\r\n  Reviewer = 'upkeep_reviewer'\r\n}\r\n\r\nexport function roleString(role: Role): string {\r\n  const roleWords: string[] = words(Role[role]);\r\n  return roleWords.slice(1).join(' ');\r\n}\r\n\r\nexport function hasPermission(permission, permissionSubSet) {\r\n  return (permissionSubSet & permission) === permission;\r\n}\r\n\r\nexport function profileHasPermission(\r\n  user: IUserProfile,\r\n  requiredPermissions: IRequiredPermissions\r\n) {\r\n  const userPermissionSet = {\r\n    assetsPermissions:\r\n      user.userRole.permission.findIndex(\r\n        module => module.moduleName === 'Assets'\r\n      ) > -1\r\n        ? user.userRole.permission[\r\n            user.userRole.permission.findIndex(\r\n              module => module.moduleName === 'Assets'\r\n            )\r\n          ].permissionValue\r\n        : 0,\r\n    sparesPermissions:\r\n      user.userRole.permission.findIndex(\r\n        module => module.moduleName === 'Spares'\r\n      ) > -1\r\n        ? user.userRole.permission[\r\n            user.userRole.permission.findIndex(\r\n              module => module.moduleName === 'Spares'\r\n            )\r\n          ].permissionValue\r\n        : 0,\r\n    workOrdersPermissions:\r\n      user.userRole.permission.findIndex(\r\n        module => module.moduleName === 'WorkOrders'\r\n      ) > -1\r\n        ? user.userRole.permission[\r\n            user.userRole.permission.findIndex(\r\n              module => module.moduleName === 'WorkOrders'\r\n            )\r\n          ].permissionValue\r\n        : 0,\r\n    preventiveMaintenancePermissions:\r\n      user.userRole.permission.findIndex(\r\n        module => module.moduleName === 'PreventiveMaintenance'\r\n      ) > -1\r\n        ? user.userRole.permission[\r\n            user.userRole.permission.findIndex(\r\n              module => module.moduleName === 'PreventiveMaintenance'\r\n            )\r\n          ].permissionValue\r\n        : 0,\r\n    checkListPermissions:\r\n      user.userRole.permission.findIndex(\r\n        module => module.moduleName === 'CheckList'\r\n      ) > -1\r\n        ? user.userRole.permission[\r\n            user.userRole.permission.findIndex(\r\n              module => module.moduleName === 'CheckList'\r\n            )\r\n          ].permissionValue\r\n        : 0\r\n  };\r\n  for (const permissionGroup in requiredPermissions) {\r\n    for (const permission of requiredPermissions[permissionGroup]) {\r\n      if (!hasPermission(permission, userPermissionSet[permissionGroup])) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n}\r\n","export enum AssetType {\r\n  Critical = '2',\r\n  Major = '3'\r\n}\r\n\r\nexport enum Phase {\r\n  Single = '1',\r\n  Three = '3'\r\n}\r\n\r\nexport enum IAssetStatus {\r\n  Active = 0,\r\n  Obsolete = 1\r\n}\r\n\r\nexport interface IAsset {\r\n  id: string;\r\n  assetId: number;\r\n  assetCode: string;\r\n  name: string;\r\n  description: string;\r\n  statusId?: number;\r\n  location?: string;\r\n}\r\n\r\nexport class Asset {\r\n  public id: string;\r\n  public assetId: number;\r\n  public assetCode: string;\r\n  public name: string;\r\n  public description: string;\r\n  public statusId?: number;\r\n  public location?: string;\r\n\r\n  constructor(asset?: IAsset) {\r\n    if (asset) {\r\n      this.id = asset.id;\r\n      this.assetId = asset.assetId;\r\n      this.assetCode = asset.assetCode;\r\n      this.name = asset.name;\r\n      this.description = asset.description;\r\n      this.statusId = asset.statusId;\r\n      this.location = asset.location;\r\n    }\r\n  }\r\n}\r\n\r\nexport interface IGroup {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport class Group {\r\n  public id: number;\r\n  public name: string;\r\n\r\n  constructor(group?: IGroup) {\r\n    if (group) {\r\n      this.id = group.id;\r\n      this.name = group.name;\r\n    }\r\n  }\r\n}\r\n\r\nexport interface ISubGroup {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport class SubGroup {\r\n  public id: number;\r\n  public name: string;\r\n\r\n  constructor(subGroup?: ISubGroup) {\r\n    if (subGroup) {\r\n      this.id = subGroup.id;\r\n      this.name = subGroup.name;\r\n    }\r\n  }\r\n}\r\n\r\nexport interface IAssetType {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport interface IExtendedAsset {\r\n  id: string;\r\n  assetId: number;\r\n  assetCode: string;\r\n  name: string;\r\n  description: string;\r\n  supplier?: string;\r\n  location?: string;\r\n  nextMaintenanceDate?: string;\r\n  model?: string;\r\n  manufacturer?: string;\r\n  assetGroup?: IGroup;\r\n  assetSubGroup?: ISubGroup;\r\n  assetType?: IAssetType;\r\n  kw?: number;\r\n  volts?: number;\r\n  phase?: string;\r\n  loadFactor?: number;\r\n  specifications?: string;\r\n  vendorId?: string;\r\n  frequencyDays?: number;\r\n  validFromDate?: string;\r\n  validToDate?: string;\r\n  attachedFiles?: string[];\r\n}\r\n\r\nexport class ExtendedAsset implements IExtendedAsset {\r\n  public id: string;\r\n  public assetId: number;\r\n  public assetCode: string;\r\n  public name: string;\r\n  public description: string;\r\n  public supplier: string;\r\n  public location: string;\r\n  public nextMaintenanceDate: string;\r\n  public model: string;\r\n  public manufacturer: string;\r\n  public assetGroup: IGroup;\r\n  public assetSubGroup: ISubGroup;\r\n  public assetType: IAssetType;\r\n  public kw: number;\r\n  public volts: number;\r\n  public phase: string;\r\n  public loadFactor: number;\r\n  public specifications: string;\r\n  public vendorId: string;\r\n  public frequencyDays: number;\r\n  public validFromDate: string;\r\n  public validToDate: string;\r\n  public attachedFiles?: string[];\r\n\r\n  constructor(iExtendedAsset?: IExtendedAsset) {\r\n    if (iExtendedAsset) {\r\n      this.id = iExtendedAsset.id;\r\n      this.assetId = iExtendedAsset.assetId;\r\n      this.assetCode = iExtendedAsset.assetCode;\r\n      this.name = iExtendedAsset.name;\r\n      this.description = iExtendedAsset.description;\r\n      this.supplier = iExtendedAsset.supplier;\r\n      this.location = iExtendedAsset.location;\r\n      this.nextMaintenanceDate = iExtendedAsset.nextMaintenanceDate;\r\n      this.model = iExtendedAsset.model;\r\n      this.manufacturer = iExtendedAsset.manufacturer;\r\n      this.assetGroup = iExtendedAsset.assetGroup;\r\n      this.assetSubGroup = iExtendedAsset.assetSubGroup;\r\n      this.assetType = iExtendedAsset.assetType;\r\n      this.kw = iExtendedAsset.kw;\r\n      this.volts = iExtendedAsset.volts;\r\n      this.phase = iExtendedAsset.phase;\r\n      this.loadFactor = iExtendedAsset.loadFactor;\r\n      this.specifications = iExtendedAsset.specifications;\r\n      this.vendorId = iExtendedAsset.vendorId;\r\n      this.frequencyDays = iExtendedAsset.frequencyDays;\r\n      this.validFromDate = iExtendedAsset.validFromDate;\r\n      this.validToDate = iExtendedAsset.validToDate;\r\n      this.attachedFiles = iExtendedAsset.attachedFiles;\r\n    }\r\n  }\r\n}\r\n\r\nexport interface IUpdateAsset {\r\n  id: string;\r\n  model?: string;\r\n  manufacturer?: string;\r\n  assetGroupId?: number;\r\n  assetSubGroupId?: number;\r\n  assetTypeId?: number;\r\n  kw?: number;\r\n  volts?: number;\r\n  phase?: string;\r\n  loadFactor?: number;\r\n  specifications?: string;\r\n  vendorId?: string;\r\n  frequencyDays?: number;\r\n  validFromDate?: string;\r\n  validToDate?: string;\r\n}\r\n\r\nexport class AssetGroupAndSubGroup {\r\n  public id: number;\r\n  public name: string;\r\n  public assetSubGroups: ISubGroup[];\r\n}\r\n\r\nexport interface IFileCollection {\r\n  src: string;\r\n  caption: string;\r\n  thumb: string;\r\n  path?: string;\r\n  file?: File;\r\n  name: string;\r\n}\r\n\r\nexport interface IAssets extends IAsset {\r\n  referenceId: string;\r\n  isDelete?: boolean;\r\n  isNew?: boolean;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport {\r\n  IWorkorder,\r\n  IWorkOrderServiceDetail,\r\n  IWorkOrderSpares\r\n} from './workorder.types';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { IExtendedWorkOrder } from './workorder.types';\r\nimport { IUserProfile } from '../user-account/user';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WorkordersService {\r\n  private workOrderURL = `${environment.apiBaseUrl}/work-order`;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  private get currentUserProfile(): IUserProfile {\r\n    const userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n    if (userProfile && userProfile.primarySite) {\r\n      return userProfile;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public listWorkorders(\r\n    args: {\r\n      offset: number;\r\n      take: number;\r\n      text: string;\r\n    },\r\n    siteId = this.currentUserProfile.primarySite.id\r\n  ): Observable<IWorkorder[]> {\r\n    let params = new HttpParams();\r\n    params = params.append('offset', args.offset.toString());\r\n    params = params.append('take', args.take.toString());\r\n    params = params.append('searchText', args.text.toString());\r\n\r\n    return this.httpClient.get<IWorkorder[]>(\r\n      `${this.workOrderURL}/${siteId}?`,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  public viewWorkOrderForId(\r\n    workOrderId: string,\r\n    siteId = this.currentUserProfile.primarySite.id\r\n  ) {\r\n    return this.httpClient.get<IExtendedWorkOrder>(\r\n      `${this.workOrderURL}/${siteId}/${workOrderId}`\r\n    );\r\n  }\r\n\r\n  public updateWorkOrderForId(\r\n    workOrderGuId: string,\r\n    extendedWorkOrder: IExtendedWorkOrder,\r\n    userId = this.authenticationService.getCurrentUserIdAndName()\r\n  ): Observable<IExtendedWorkOrder> {\r\n    const userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n    const body = {\r\n      id: extendedWorkOrder.id,\r\n      number: extendedWorkOrder.number,\r\n      siteId: extendedWorkOrder.siteId,\r\n      dueDate: extendedWorkOrder.dueDate,\r\n      status: Number(extendedWorkOrder.status),\r\n      assignedToUser: extendedWorkOrder.assignedToUser,\r\n      createdTimestampUtc: extendedWorkOrder.createdTimestampUtc,\r\n      lastUpdatedTimestampUtc: extendedWorkOrder.lastUpdatedTimestampUtc,\r\n      title: extendedWorkOrder.title,\r\n      description: extendedWorkOrder.description,\r\n      reportedOn: extendedWorkOrder.reportedOn,\r\n      priorityId: extendedWorkOrder.priority,\r\n      categoryId: extendedWorkOrder.category.id,\r\n      serviceDetails: extendedWorkOrder.serviceDetails,\r\n      workOrderAssets: extendedWorkOrder.workOrderAssets,\r\n      workOrderCheckLists: extendedWorkOrder.workOrderChecklists,\r\n      UpdatedBy: userProfile\r\n    };\r\n    return this.httpClient.put<IExtendedWorkOrder>(\r\n      `${this.workOrderURL}/${workOrderGuId}/${userId}`,\r\n      body\r\n    );\r\n  }\r\n\r\n  public viewWorkOrderServiceDetailForId(\r\n    workOrderNumber: string,\r\n    siteId = this.currentUserProfile.primarySite.id\r\n  ) {\r\n    return this.httpClient.get<IWorkOrderServiceDetail[]>(\r\n      `${this.workOrderURL}/servicedetail/${siteId}/${workOrderNumber}`\r\n    );\r\n  }\r\n\r\n  public updateWorkOrderService(\r\n    workOrderServiceDetail: IWorkOrderServiceDetail\r\n  ) {\r\n    return this.httpClient.patch<IWorkOrderServiceDetail[]>(\r\n      `${this.workOrderURL}/servicedetail/${workOrderServiceDetail.id}`,\r\n      workOrderServiceDetail\r\n    );\r\n  }\r\n  public getWorkOrderSpares(\r\n    workOrderNumber: string,\r\n    siteId = this.currentUserProfile.primarySite.id\r\n  ): Observable<IWorkOrderSpares> {\r\n    const getSpareUrl = `${this.workOrderURL}/spares/Site/${siteId}`;\r\n    let params = new HttpParams();\r\n    params = params.append('workOrderNumber', workOrderNumber);\r\n    return this.httpClient.get<IWorkOrderSpares>(`${getSpareUrl}`, { params });\r\n  }\r\n\r\n  public updateWorkOrderSpares(\r\n    workOrderSpares: IWorkOrderSpares\r\n  ): Observable<IWorkOrderSpares> {\r\n    const userId = this.authenticationService.getCurrentUserIdAndName();\r\n    const getSpareUrl = `${this.workOrderURL}/spares/${userId}`;\r\n    return this.httpClient.post<IWorkOrderSpares>(\r\n      `${getSpareUrl}`,\r\n      workOrderSpares\r\n    );\r\n  }\r\n  public listWorkOrderCategory() {\r\n    return this.httpClient.get(`${this.workOrderURL}/categories`);\r\n  }\r\n\r\n  public createWorkOrder(args: {\r\n    assignedToUser?: string;\r\n    title: string;\r\n    description: string;\r\n    priorityId: number;\r\n    categoryId: number;\r\n    reportedOn: string;\r\n    dueDate: string;\r\n    workOrderAssets?: string[];\r\n    workOrderChecklists?: string[];\r\n    createdBy?: string;\r\n    siteId?: string;\r\n  }) {\r\n    args.createdBy = this.authenticationService.getCurrentUserIdAndName();\r\n    args.siteId = this.currentUserProfile.primarySite.id;\r\n\r\n    const body = args;\r\n\r\n    return this.httpClient.post<IExtendedWorkOrder>(\r\n      `${this.workOrderURL}`,\r\n      body\r\n    );\r\n  }\r\n\r\n  public getWorkorderCSV(\r\n    siteId: string = this.currentUserProfile.primarySite.id\r\n  ): Observable<any> {\r\n    const options = {\r\n      responseType: 'text' as 'text'\r\n    };\r\n    return this.httpClient.get(\r\n      `${this.workOrderURL}/exportcsv/${siteId}`,\r\n      options\r\n    );\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  OnInit\r\n} from '@angular/core';\r\nimport { AuthenticationService, IUserProfile } from './../../../services';\r\n\r\n@Component({\r\n  selector: 'app-user-flyout',\r\n  templateUrl: './user-flyout.component.html',\r\n  styleUrls: ['./user-flyout.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class UserFlyoutComponent implements OnInit {\r\n  public userFlyoutOpen = false;\r\n  public isSignedIn = false;\r\n  public canManageUsers: boolean;\r\n  public userProfile: IUserProfile;\r\n  public isConfirmingSignOut = false;\r\n\r\n  constructor(\r\n    private elementRef: ElementRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    private authentication: AuthenticationService\r\n  ) {\r\n    this.authentication.user.subscribe(data => {\r\n      this.isSignedIn = data ? true : false;\r\n      this.userProfile = data;\r\n      this.changeDetectorRef.markForCheck();\r\n    });\r\n  }\r\n\r\n  public ngOnInit() {}\r\n\r\n  public handleConfirmSignOut(isConfirmed: boolean) {\r\n    this.isConfirmingSignOut = false;\r\n    if (isConfirmed) {\r\n      this.authentication.logout();\r\n    }\r\n  }\r\n\r\n  public closeFlyout(): void {\r\n    this.userFlyoutOpen = false;\r\n  }\r\n\r\n  /**\r\n   * Toggle the userFlyout state\r\n   */\r\n  public onUserFlyoutClick() {\r\n    this.userFlyoutOpen = !this.userFlyoutOpen;\r\n  }\r\n\r\n  /**\r\n   * Close the flyout when a click occurs outside of it\r\n   */\r\n  @HostListener('document:click', ['$event'])\r\n  public onDocumentClick(e) {\r\n    if (!this.elementRef.nativeElement.contains(e.target)) {\r\n      this.userFlyoutOpen = false;\r\n    }\r\n  }\r\n}\r\n","<div class=\"user-flyout\" [ngClass]=\"userFlyoutOpen ? 'open' : ''\">\r\n  <!-- <div class=\"user-flyout-name col-md-10 col-8\">\r\n    {{userProfile.userId}}\r\n  </div> -->\r\n  <div class=\"btn-user-flyout col-md-2 col-4\">\r\n    <button (click)=\"onUserFlyoutClick()\" class=\"user-flyout-toggle\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17.717 19.031\">\r\n        <g id=\"Group_453\" data-name=\"Group 453\" transform=\"translate(0.002)\">\r\n          <g id=\"Group_227\" data-name=\"Group 227\" transform=\"translate(4.309 0)\">\r\n            <circle id=\"Ellipse_163\" data-name=\"Ellipse 163\" class=\"cls-14\" cx=\"4.429\" cy=\"4.429\" r=\"4.429\" />\r\n          </g>\r\n          <g id=\"Group_228\" data-name=\"Group 228\" transform=\"translate(-0.002 10.174)\">\r\n            <path id=\"Path_308\" data-name=\"Path 308\" class=\"cls-14\" d=\"M17.715,17.357c0-4.907-.239-8.857-8.857-8.857C-.359,8.5,0,12.45,0,17.357Z\"\r\n              transform=\"translate(0.002 -8.5)\" />\r\n          </g>\r\n        </g>\r\n      </svg>\r\n    </button>\r\n  </div>\r\n<nav>\r\n  <a  (click)=\"handleConfirmSignOut(true)\" *ngIf=\"isSignedIn\">Logout</a>\r\n</nav>\r\n</div>\r\n\r\n","import { IAssets } from '../asset/asset.types';\r\nimport {\r\n  CheckListStatus,\r\n  ICheckList,\r\n  IExtendedTask\r\n} from '../check-lists/check-lists.types';\r\nimport { ISkuStock } from '../sku/sku.types';\r\n\r\nexport interface IWorkorder {\r\n  id: string;\r\n  number: number;\r\n  dueDate: string;\r\n  status: number;\r\n  assignedToUser: string;\r\n  createdTimestampUtc: string;\r\n  lastUpdatedTimestampUtc: string;\r\n  title?: string;\r\n}\r\nexport class Workorder {\r\n  public id: string;\r\n  public number: number;\r\n  public title?: string;\r\n  public dueDate: string;\r\n  public status: number;\r\n  public assignedToUser: string;\r\n  public createdTimestampUtc: string;\r\n  public lastUpdatedTimestampUtc: string;\r\n\r\n  constructor(workorder?: IWorkorder) {\r\n    if (workorder) {\r\n      this.id = workorder.id;\r\n      this.number = workorder.number;\r\n      this.title = workorder.title;\r\n      this.dueDate = workorder.dueDate;\r\n      this.status = workorder.status;\r\n      this.assignedToUser = workorder.assignedToUser;\r\n      this.createdTimestampUtc = workorder.createdTimestampUtc;\r\n      this.lastUpdatedTimestampUtc = workorder.lastUpdatedTimestampUtc;\r\n    }\r\n  }\r\n}\r\nexport interface ISpares {\r\n  sku: ISkuStock;\r\n  quantity: number;\r\n}\r\nexport interface IWorkOrderSpares {\r\n  siteId: string;\r\n  workOrderNumber: number;\r\n  spareSkus: ISpares[];\r\n}\r\nexport interface IExtendedWorkOrder extends IWorkorder {\r\n  siteId: string;\r\n  workOrderNumber?: string;\r\n  description?: string;\r\n  reportedOn?: string;\r\n  priority?: number;\r\n  category?: IWorkOrderCategory;\r\n  workOrderAssets?: IAssets[];\r\n  attachedFiles?: string[];\r\n  serviceDetails?: string;\r\n  workOrderChecklists?: WorkOrderCheckList[];\r\n}\r\n\r\nexport enum WorkorderStatus {\r\n  'Open' = 1,\r\n  'In-progress' = 2,\r\n  'Complete' = 3,\r\n  'Closed' = 4\r\n}\r\n\r\nexport interface IWorkOrderServiceDetail {\r\n  id: string;\r\n  workOrderId: string;\r\n  serviceDetail: string;\r\n  userId: string;\r\n  createdTimestampUtc: string;\r\n}\r\n\r\nexport enum WorkOrderPriority {\r\n  Critical = 1,\r\n  Major = 2,\r\n  Minor = 3\r\n}\r\nexport interface IWorkOrderCategory {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport class WorkOrderCheckList {\r\n  public id: string;\r\n  public number: number;\r\n  public numberWithPrefix?: string;\r\n  public siteId?: string;\r\n  public name: string;\r\n  public task?: IExtendedTask[];\r\n  public status?: CheckListStatus;\r\n\r\n  constructor(checkList?: ICheckList, task?: IExtendedTask[]) {\r\n    if (checkList) {\r\n      this.id = checkList.id;\r\n      this.number = checkList.number;\r\n      this.numberWithPrefix = checkList.numberWithPrefix;\r\n      this.name = checkList.name;\r\n      this.task = task;\r\n      this.status = checkList.status;\r\n    }\r\n  }\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { CheckList, ITask } from './check-lists.types';\r\nimport { Injectable } from '@angular/core';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\nimport { IUserProfile } from '../user-account/user';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CheckListsService {\r\n  private checkListUrl = `${environment.apiBaseUrl}/check-list`;\r\n  constructor(\r\n    private http: HttpClient,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  private get currentUserProfile(): IUserProfile {\r\n    const userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n    if (userProfile && userProfile.primarySite) {\r\n      return userProfile;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public getCheckListsList(\r\n    args: {\r\n      offset: number;\r\n      take: number;\r\n      searchText: string;\r\n      includeObsolete: boolean;\r\n    },\r\n    siteId = this.currentUserProfile.primarySite.id\r\n  ): Observable<CheckList[]> {\r\n    let params = new HttpParams();\r\n    params = params.append('offset', args.offset.toString());\r\n    params = params.append('take', args.take.toString());\r\n    params = params.append('searchText', args.searchText.toString());\r\n    params = params.append('includeObsolete', args.includeObsolete.toString());\r\n\r\n    return this.http.get<CheckList[]>(`${this.checkListUrl}/${siteId}?`, {\r\n      params\r\n    });\r\n  }\r\n\r\n  public createCheckList(args: {\r\n    name: string;\r\n    siteId?: string;\r\n    task?: ITask[];\r\n  }): Observable<CheckList> {\r\n    args.siteId = this.currentUserProfile.primarySite.id;\r\n    const createdBy: string = this.authenticationService.getCurrentUserIdAndName();\r\n    const body = args;\r\n    return this.http.post<CheckList>(\r\n      `${this.checkListUrl}?createdBy=${createdBy}`,\r\n      body\r\n    );\r\n  }\r\n\r\n  public viewCheckListForId(\r\n    checkListId: number,\r\n    siteId = this.currentUserProfile.primarySite.id\r\n  ) {\r\n    return this.http.get<CheckList>(\r\n      `${this.checkListUrl}/${siteId}/${checkListId}`\r\n    );\r\n  }\r\n\r\n  public updateCheckListDetailForId(\r\n    extendedCheckList: CheckList,\r\n    userId = this.authenticationService.getCurrentUserIdAndName()\r\n  ): Observable<CheckList> {\r\n    return this.http.put<CheckList>(\r\n      `${this.checkListUrl}?updatedBy=${userId}`,\r\n      extendedCheckList\r\n    );\r\n  }\r\n}\r\n","import { NavigationService } from '../services/navigation/navigation.service';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { filter, take } from 'rxjs/operators';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.scss']\r\n})\r\nexport class DashboardComponent implements OnInit, OnDestroy {\r\n  public dashItems = [];\r\n  private sub: Subscription;\r\n\r\n  constructor(private navigationService: NavigationService) {}\r\n\r\n  public ngOnInit(): void {\r\n    this.sub = this.navigationService\r\n      .getNavigationTree()\r\n      .pipe(\r\n        filter(x => x.length > 0),\r\n        take(1)\r\n      )\r\n      .subscribe(navItems => {\r\n        this.dashItems = this.populateDashItems(navItems);\r\n      });\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.sub && !this.sub.closed && this.sub.unsubscribe();\r\n  }\r\n\r\n  public populateDashItems(navItems: Array<object>) {\r\n    const dashItems = [];\r\n\r\n    const iterateDashItems = navItem => {\r\n      if (navItem.children) {\r\n        navItem.children.map(childItem => iterateDashItems(childItem));\r\n      }\r\n\r\n      if (navItem.showOnDash) {\r\n        dashItems.push(navItem);\r\n      }\r\n    };\r\n\r\n    navItems.map(navItem => iterateDashItems(navItem));\r\n    return dashItems;\r\n  }\r\n}\r\n","<a *ngFor=\"let dashItem of dashItems\" routerLink=\"{{dashItem.route}}\">\r\n  <div [style.backgroundColor]=\"dashItem.dashPanelColour\" class=\"dash-item-panel\">\r\n    <img src=\"{{dashItem.dashIllustration}}\" alt=\"{{dashItem.label}}\">\r\n  </div>\r\n  <div class=\"dash-item-text\">\r\n    <img src=\"/assets/img/icon-arrow-right.svg\" alt=\"Right pointing arrow\">\r\n    {{dashItem.label}}\r\n  </div>\r\n</a>\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  CanActivate,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  Router\r\n} from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\nimport { mergeMap } from 'rxjs/operators';\r\nimport {\r\n  AuthenticationService,\r\n  IRequiredPermissions,\r\n  Toast,\r\n  ToastService,\r\n  ToastType\r\n} from '../services';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PermissionGuard implements CanActivate {\r\n  constructor(\r\n    private toastService: ToastService,\r\n    private router: Router,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  public canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean> {\r\n    const requiredPermission: IRequiredPermissions =\r\n      route.data.permissionsRequired;\r\n\r\n    return this.authenticationService\r\n      .currentUserHasPermission(requiredPermission)\r\n      .pipe(\r\n        mergeMap(hasPermission => {\r\n          if (hasPermission) {\r\n            return of(true);\r\n          }\r\n          this.toastService.showToast(\r\n            new Toast('Access denied', ToastType.Danger)\r\n          );\r\n          this.router.navigate(['dashboard']);\r\n          return of(false);\r\n        })\r\n      );\r\n  }\r\n}\r\n","import {\r\n  NavigationService,\r\n  NavItem\r\n} from '../../../services/navigation/navigation.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { filter, take } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-nav',\r\n  templateUrl: './nav.component.html',\r\n  styleUrls: ['./nav.component.scss']\r\n})\r\nexport class NavComponent implements OnInit {\r\n  public navExpanded: Boolean;\r\n  public navItems: NavItem[];\r\n\r\n  constructor(public navigationService: NavigationService) {}\r\n\r\n  public ngOnInit() {\r\n    this.navigationService\r\n      .getNavigationTree()\r\n      .pipe(\r\n        filter(x => x.length > 0),\r\n        take(1)\r\n      )\r\n      .subscribe(navItems => {\r\n        this.navItems = navItems;\r\n      });\r\n    this.navigationService.navigationExpanded.subscribe(\r\n      navExpanded => (this.navExpanded = navExpanded)\r\n    );\r\n  }\r\n\r\n  public handleHamburgerClick() {\r\n    this.navigationService.toggleNavigation();\r\n  }\r\n\r\n  public handleNavItemClick() {\r\n    if (window.innerWidth <= 768 && this.navExpanded) {\r\n      this.navigationService.toggleNavigation();\r\n    }\r\n  }\r\n}\r\n","<div class=\"nav-toggle-container\">\r\n  <button (click)=\"handleHamburgerClick()\" class=\"nav-toggle\">\r\n    <div class=\"hamburger-icon\" [class.open]=\"navExpanded\">\r\n      <span></span>\r\n      <span></span>\r\n      <span></span>\r\n    </div>\r\n  </button>\r\n</div>\r\n\r\n<nav class=\"app-nav\">\r\n  <ul>\r\n    <li *ngFor=\"let navItem of navItems\" [class.expanded]=\"navItem.expanded\">\r\n      <a routerLink=\"{{navItem.route}}\" (click)=\"handleNavItemClick()\">\r\n        <div class=\"icon-container\">\r\n          <img src=\"{{navItem.icon}}\" onerror=\"this.src = '/assets/img/module-icons/circle.svg'\">\r\n        </div>\r\n        <span>{{navItem.shortLabel ? navItem.shortLabel : navItem.label}}</span>\r\n      </a>\r\n      <button class=\"row-toggle\" *ngIf=\"navItem.children\" (click)=\"navItem.toggleExpanded()\">\r\n        <div>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 8.797 5.194\">\r\n            <path d=\"M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z\"/>\r\n          </svg>\r\n        </div>\r\n      </button>\r\n      <ul *ngIf=\"navItem.children\">\r\n        <li *ngFor=\"let navItem of navItem.children\">\r\n          <a routerLink=\"{{navItem.route}}\" (click)=\"handleNavItemClick()\">{{navItem.shortLabel ? navItem.shortLabel : navItem.label}}</a>\r\n        </li>\r\n      </ul>\r\n    </li>\r\n  </ul>\r\n</nav>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { NavigationService } from './services/navigation/navigation.service';\r\nimport { AuthenticationService } from './services';\r\nimport { UserProfile } from './services';\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  public navExpanded;\r\n  public userProfile: UserProfile;\r\n\r\n  constructor(\r\n    private authenticationService: AuthenticationService,\r\n    private navigationService: NavigationService\r\n  ) {\r\n    this.authenticationService.user.subscribe(\r\n      data => (this.userProfile = data)\r\n    );\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.navigationService.navigationExpanded.subscribe(\r\n      navExpanded => (this.navExpanded = navExpanded)\r\n    );\r\n  }\r\n}\r\n","<div class=\"app-wrapper\" [class.nav-expanded]=\"navExpanded\">\r\n  <app-toast></app-toast>\r\n  <app-header></app-header>\r\n  <div class=\"app-content-area\">\r\n    <router-outlet>\r\n    </router-outlet>\r\n  </div>\r\n\r\n</div>\r\n","import { ToastService, ToastType } from '../services';\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-toast',\r\n  templateUrl: './toast.component.html',\r\n  styleUrls: ['./toast.component.scss']\r\n})\r\nexport class ToastComponent implements OnInit {\r\n  private toastService;\r\n  public activeToast;\r\n  public ToastType = ToastType;\r\n\r\n  constructor(toastService: ToastService) {\r\n    this.toastService = toastService;\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.toastService.activeToast.subscribe(\r\n      toast => (this.activeToast = toast)\r\n    );\r\n  }\r\n}\r\n","<div *ngIf=\"activeToast\" class=\"taro-toast\" [class.danger]=\"activeToast.type === ToastType.Danger\">\r\n  <div class=\"toast-icon\"><svg *ngIf=\"activeToast.type === ToastType.Success\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17.5 14\"><path d=\"M1.1 7.3l4.6 4.6L16.5 1.1\" fill=\"none\" stroke-width=\"3\"/></svg>\r\n  <svg *ngIf=\"activeToast.type === ToastType.Danger\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64.9 64.9\"><path d=\"M57.2 11.3c-.5-.6-1.1-1.2-1.7-1.8-.6-.6-1.2-1.2-1.8-1.7C40.9-3.1 21.6-2.6 9.5 9.5S-3.1 40.9 7.8 53.6c.5.6 1.1 1.2 1.7 1.8s1.2 1.2 1.8 1.7C24.1 68 43.4 67.5 55.4 55.4s12.7-31.3 1.8-44.1zM13 13C23.2 2.9 39.3 2.3 50.1 11.4L11.4 50.1C2.3 39.3 2.9 23.2 13 13zm1.9 40.6l38.7-38.7c9 10.8 8.4 26.9-1.7 37.1s-26.2 10.6-37 1.6z\"/></svg></div>\r\n  <div class=\"toast-message\">{{activeToast.message}}</div>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  Router,\r\n  CanActivate,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot\r\n} from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\nimport { AuthenticationService } from './../services';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(\r\n    private router: Router,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  public canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean> {\r\n    const user = this.authenticationService.userValue;\r\n\r\n    if (user && user.userRole) {\r\n      // authorised so return true\r\n      return of(true);\r\n    }\r\n\r\n    // not logged in so redirect to login page with the return url\r\n    this.router.navigate(['/account/login'], {\r\n      queryParams: { returnUrl: state.url }\r\n    });\r\n    return of(false);\r\n  }\r\n}\r\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class SearchComponent implements OnInit {\r\n  constructor() {}\r\n\r\n  public ngOnInit() {}\r\n}\r\n","<div class=\"search-bar\">\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\">\r\n    <path d=\"M2,7A4.951,4.951,0,0,1,7,2a4.951,4.951,0,0,1,5,5,4.951,4.951,0,0,1-5,5A4.951,4.951,0,0,1,2,7Zm12.3,8.7a.99.99,0,0,0,1.4-1.4l-3.1-3.1A6.847,6.847,0,0,0,14,7,6.957,6.957,0,0,0,7,0,6.957,6.957,0,0,0,0,7a6.957,6.957,0,0,0,7,7,6.847,6.847,0,0,0,4.2-1.4Z\"/>\r\n  </svg>\r\n\r\n  <form action=\"/search\">\r\n    <!-- TODO: Hook up with placeholder when real search implemented\r\n    <input type=\"text\" placeholder=\"Search\"> -->\r\n    <input type=\"text\" disabled>\r\n  </form>\r\n</div>\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { JwtInterceptor, ErrorInterceptor } from './guards';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { ToastComponent } from './toast/toast.component';\r\nimport { FunctionBarComponent } from './header/function-bar/function-bar.component';\r\nimport { UserFlyoutComponent } from './header/function-bar/user-flyout/user-flyout.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { NavComponent } from './header/function-bar/nav/nav.component';\r\nimport { SearchComponent } from './header/function-bar/search/search.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BasketComponent } from './header/basket/basket/basket.component';\r\nimport { HashLocationStrategy, LocationStrategy } from '@angular/common';\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    HeaderComponent,\r\n    ToastComponent,\r\n    FunctionBarComponent,\r\n    UserFlyoutComponent,\r\n    DashboardComponent,\r\n    NavComponent,\r\n    SearchComponent,\r\n    BasketComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    ReactiveFormsModule,\r\n    HttpClientModule,\r\n    BrowserAnimationsModule,\r\n    AppRoutingModule,\r\n    CommonModule\r\n  ],\r\n  providers: [\r\n    { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true },\r\n    { provide: LocationStrategy, useClass: HashLocationStrategy }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {}\r\n","export * from './auth.guard';\r\nexport * from './error.interceptor';\r\nexport * from './jwt.interceptor';\r\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { AuthenticationService, Organisation } from '../services/index';\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss']\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n  public isLoggedIn: boolean = false;\r\n  public user: any;\r\n  public Organisation = Organisation;\r\n\r\n  constructor(\r\n    private authenticationService: AuthenticationService,\r\n    private cdRef: ChangeDetectorRef\r\n  ) {}\r\n\r\n  public ngOnInit() {\r\n    this.authenticationService.user.subscribe(user => {\r\n      this.isLoggedIn = user ? true : false;\r\n      this.user = user ? JSON.parse(localStorage.getItem('user')) : undefined;\r\n      this.cdRef.detectChanges();\r\n    });\r\n  }\r\n}\r\n","<header class='app-header'>\r\n  <div>\r\n    <a routerLink='/' class='app-logo'>\r\n      <img *ngIf=\"!isLoggedIn\" src='/assets/img/Texmo-Group-Logo.svg' alt='Texmo Group' />\r\n      <img *ngIf=\"isLoggedIn && user && user.primarySite.organisationId === Organisation.TPC_INDIA\" src='/assets/img/texmo-precision-logo.svg' alt='Texmo Precision' />\r\n      <img *ngIf=\"isLoggedIn && user && user.primarySite.organisationId === Organisation.TPC_US\" src='/assets/img/texmo-precision-logo.svg' alt='Texmo Precision' />\r\n      <img *ngIf=\"isLoggedIn && user && user.primarySite.organisationId === Organisation.TPC_UK\" src='/assets/img/texmo-precision-logo.svg' alt='Texmo Precision' />\r\n      <img *ngIf=\"isLoggedIn && user && user.primarySite.organisationId === Organisation.TEXMO\" src='/assets/img/TaroPumpsLogo--Linear.svg' alt='Taro Pumps' />\r\n      <img *ngIf=\"isLoggedIn && user && user.primarySite.organisationId === Organisation.RGMT\" src='/assets/img/RGMT-Logo.svg' alt='RGMT' />\r\n    </a>\r\n  </div>\r\n  <div>\r\n\r\n  </div>\r\n</header>\r\n<app-function-bar *ngIf=\"isLoggedIn\"></app-function-bar>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  AuthenticationService,\r\n  PermissionGroup,\r\n  SparesPermissions\r\n} from 'src/app/services';\r\n\r\n@Component({\r\n  selector: 'app-function-bar',\r\n  templateUrl: './function-bar.component.html',\r\n  styleUrls: ['./function-bar.component.scss']\r\n})\r\nexport class FunctionBarComponent implements OnInit {\r\n  public canViewBasket: boolean;\r\n  constructor(private authenticationService: AuthenticationService) {}\r\n\r\n  public ngOnInit() {\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.Spares]: [SparesPermissions.CanViewBasket]\r\n      })\r\n      .subscribe(hasPermission => {\r\n        this.canViewBasket = hasPermission;\r\n      });\r\n  }\r\n}\r\n","<div class=\"function-bar col-12\">\r\n  <app-nav></app-nav>\r\n  <app-search></app-search>\r\n  <app-basket *ngIf=\"canViewBasket\"></app-basket>\r\n  <app-user-flyout></app-user-flyout>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchFilterService {\r\n  constructor() {}\r\n\r\n  public searchWOTextValue: string = '';\r\n  public searchPMTextValue: string = '';\r\n  public searchPMFilterValue: boolean = false;\r\n  public searchWOTextValueCache: string = '';\r\n  public searchPMTextValueCache: string = '';\r\n  public searchPMFilterValueCache: boolean = false;\r\n  public searchCLFilterValue: boolean = false;\r\n  public searchCLTextValue: string = '';\r\n  public searchCLFilterValueCache: boolean = false;\r\n  public searchCLTextValueCache: string = '';\r\n\r\n  public initiateWOSearchFilter() {\r\n    this.searchWOTextValue = '';\r\n  }\r\n\r\n  public assignWOSearchFilterCache() {\r\n    this.searchWOTextValue = this.searchWOTextValueCache;\r\n  }\r\n\r\n  public initiatePMSearchFilter() {\r\n    this.searchPMTextValue = '';\r\n    this.searchPMFilterValue = false;\r\n  }\r\n\r\n  public clearWOFilter() {\r\n    this.searchWOTextValueCache = '';\r\n  }\r\n\r\n  public assignPMSearchFilterCache() {\r\n    this.searchPMTextValue = this.searchPMTextValueCache;\r\n    this.searchPMFilterValue = this.searchPMFilterValueCache;\r\n  }\r\n\r\n  public assignCLSearchFilterCache() {\r\n    this.searchCLTextValue = this.searchCLTextValueCache;\r\n    this.searchCLFilterValue = this.searchCLFilterValueCache;\r\n  }\r\n\r\n  public clearCLFilter() {\r\n    this.searchCLTextValue = '';\r\n    this.searchCLFilterValue = false;\r\n  }\r\n\r\n  public clearPMFilter() {\r\n    this.searchPMTextValueCache = '';\r\n    this.searchPMFilterValueCache = false;\r\n  }\r\n}\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\nimport { Observable } from 'rxjs';\r\nimport { IFilehandler } from './filehandler.type';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FilehandlerService {\r\n  private filehandlerUrl = `${environment.apiBaseUrl}/filehandler`;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  public get primarySiteId(): string {\r\n    const userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n    if (userProfile && userProfile.primarySite) {\r\n      return userProfile.primarySite.id;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public uploadFiles(\r\n    dataId: number,\r\n    ModuleName: number,\r\n    fileCollection: any,\r\n    siteId = this.primarySiteId\r\n  ): Observable<IFilehandler> {\r\n    const formData = new FormData();\r\n    (fileCollection ? fileCollection : []).forEach(srcFile => {\r\n      formData.append('Attachments', srcFile);\r\n    });\r\n    formData.append('SiteId', siteId);\r\n    formData.append('Id', dataId.toString());\r\n    formData.append('ModuleName', ModuleName.toString());\r\n\r\n    return this.httpClient.post<IFilehandler>(\r\n      `${this.filehandlerUrl}/upload`,\r\n      formData\r\n    );\r\n  }\r\n\r\n  public getFile(filePath: string): Observable<any> {\r\n    const getFileUrl = `${this.filehandlerUrl}/getfile`;\r\n    let httpHeader = new HttpHeaders();\r\n    httpHeader = httpHeader.append('accept', 'text/plain');\r\n    httpHeader = httpHeader.append('filePath', filePath);\r\n\r\n    const options = {\r\n      responseType: 'blob' as 'blob',\r\n      headers: httpHeader\r\n    };\r\n    return this.httpClient.get(getFileUrl, options);\r\n  }\r\n\r\n  public deleteFile(filePath: string, isDeleteAllFiles: boolean) {\r\n    const deleteFileUrl = `${\r\n      this.filehandlerUrl\r\n    }/delete?isDeleteAllFiles=${isDeleteAllFiles.toString()}`;\r\n    let httpHeader = new HttpHeaders();\r\n    httpHeader = httpHeader.append('accept', 'text/plain');\r\n    httpHeader = httpHeader.append('path', filePath);\r\n\r\n    const options = {\r\n      responseType: 'text' as 'text',\r\n      headers: httpHeader\r\n    };\r\n    return this.httpClient.delete(deleteFileUrl, options);\r\n  }\r\n}\r\n","import { Site } from '../';\r\n\r\nexport interface IModulePersmission {\r\n  moduleName: string;\r\n  permissionValue: number;\r\n}\r\n\r\nexport interface IUserProfile {\r\n  name: string;\r\n  userId?: string;\r\n  givenName?: string;\r\n  displayName?: string;\r\n  surName?: string;\r\n  lastLogon?: string;\r\n  userRole?: {\r\n    name: string;\r\n    groupName: string;\r\n    permission: IModulePersmission[];\r\n  };\r\n  commonCodeIdentifier?: string;\r\n  primarySite?: Site;\r\n  sites?: Site[];\r\n  emailAddress?: string;\r\n}\r\nexport class UserProfile implements IUserProfile {\r\n  public name: string;\r\n  public userRole?: {\r\n    name: string;\r\n    groupName: string;\r\n    permission: IModulePersmission[];\r\n  };\r\n  public userId?: string;\r\n  public password?: string;\r\n  public givenName?: string;\r\n  public surName?: string;\r\n  public lastLogon?: string;\r\n  public displayName?: string;\r\n  public commonCodeIdentifier?: string;\r\n  public primarySite?: Site;\r\n  public sites?: Site[];\r\n  public emailAddress?: string;\r\n\r\n  constructor(userProfile: IUserProfile) {\r\n    this.name = userProfile.name;\r\n    this.userRole = userProfile.userRole;\r\n    this.userId = userProfile.userId;\r\n    this.givenName = userProfile.givenName;\r\n    this.surName = userProfile.surName;\r\n    this.displayName = userProfile.displayName;\r\n    this.lastLogon = userProfile.lastLogon;\r\n    this.commonCodeIdentifier = userProfile.commonCodeIdentifier;\r\n    this.primarySite = userProfile.primarySite;\r\n    this.sites = userProfile.sites;\r\n    this.emailAddress = userProfile.emailAddress;\r\n  }\r\n}\r\n\r\nexport class User {\r\n  userId: string;\r\n  username: string;\r\n  password: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  token: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable, Subscription, of } from 'rxjs';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Basket, IBasket, IBasketItem } from './basket.types';\r\nimport { UserProfile } from '../user-account/user';\r\nimport {\r\n  PermissionGroup,\r\n  SparesPermissions,\r\n  profileHasPermission\r\n} from '../user-account/permissions';\r\nimport { environment } from 'src/environments/environment';\r\nimport { safelyUnsubscribeFrom } from 'src/utils/observableUtils';\r\nimport { mergeMap } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BasketService {\r\n  public basket$: BehaviorSubject<Basket> = new BehaviorSubject(null);\r\n  public basketUrl$: BehaviorSubject<string> = new BehaviorSubject(null);\r\n  public userProfileSub: Subscription;\r\n  public userId: string;\r\n  constructor(\r\n    private authenticationService: AuthenticationService,\r\n    private httpClient: HttpClient\r\n  ) {\r\n    this.userProfileSub = this.authenticationService.currentUserProfile$.subscribe(\r\n      (userProfile: UserProfile) => {\r\n        const canViewBasket = profileHasPermission(userProfile, {\r\n          [PermissionGroup.Spares]: [SparesPermissions.CanViewBasket]\r\n        });\r\n        if (\r\n          userProfile &&\r\n          userProfile.primarySite &&\r\n          userProfile.primarySite.id &&\r\n          canViewBasket &&\r\n          this.basketUrl$.getValue() === null\r\n        ) {\r\n          this.userId = userProfile.userId;\r\n          const siteId = userProfile.primarySite.id;\r\n          this.basketUrl$.next(\r\n            `${environment.apiBaseUrl}/order-basket/${siteId}`\r\n          );\r\n          safelyUnsubscribeFrom(this.userProfileSub);\r\n        }\r\n      }\r\n    );\r\n\r\n    this.getBasket().subscribe((data: IBasket) => {\r\n      if (data) {\r\n        this.basket$.next(new Basket(data));\r\n      }\r\n    });\r\n  }\r\n\r\n  public getBasket(): Observable<IBasket> {\r\n    return this.basketUrl$.pipe(\r\n      mergeMap((basketUrl: string) => {\r\n        if (basketUrl) {\r\n          return this.httpClient.get<IBasket>(basketUrl);\r\n        }\r\n        return of(null);\r\n      })\r\n    );\r\n  }\r\n\r\n  public addToBasket(\r\n    basketItem: IBasketItem,\r\n    siteId: string\r\n  ): Observable<boolean> {\r\n    const basketUrl = `${environment.apiBaseUrl}/order-basket`;\r\n    const body = {\r\n      siteId: siteId,\r\n      createdByUserId: basketItem.createdByUserId,\r\n      createdByUserName: basketItem.createdByUserName,\r\n      skuId: basketItem.skuId,\r\n      skuDescription: basketItem.skuDescription,\r\n      uom: basketItem.uom,\r\n      qty: basketItem.qty\r\n    };\r\n    return this.httpClient.post<IBasket>(basketUrl, body).pipe(\r\n      mergeMap((iBasket: IBasket) => {\r\n        const basket = new Basket(iBasket);\r\n        this.basket$.next(basket);\r\n        return of(true);\r\n      })\r\n    );\r\n  }\r\n\r\n  public updateBasketItem(skuId: string, qty: number): Observable<boolean> {\r\n    const basketUrl = this.basketUrl$.getValue();\r\n    return this.httpClient\r\n      .patch<IBasket>(\r\n        `${basketUrl}?skuId=${skuId}&userId=${this.userId}&qty=${qty}`,\r\n        {}\r\n      )\r\n      .pipe(\r\n        mergeMap((iBasket: IBasket) => {\r\n          const basket = new Basket(iBasket);\r\n          this.basket$.next(basket);\r\n          return of(true);\r\n        })\r\n      );\r\n  }\r\n\r\n  public deleteBasketItem(\r\n    skuId: string,\r\n    createdByUserId: string,\r\n    deletedByUserId: string\r\n  ): Observable<boolean> {\r\n    const basketUrl = this.basketUrl$.getValue();\r\n    return this.httpClient\r\n      .delete<IBasket>(\r\n        `${basketUrl}?skuId=${skuId}&createdByUserId=${createdByUserId}&deletedByUserId=${deletedByUserId}`\r\n      )\r\n      .pipe(\r\n        mergeMap((iBasket: IBasket) => {\r\n          const basket = new Basket(iBasket);\r\n          this.basket$.next(basket);\r\n          return of(true);\r\n        })\r\n      );\r\n  }\r\n}\r\n","export * from './toast/toast.service';\r\nexport * from './authentication/authentication.service';\r\nexport * from './user-account/user';\r\nexport * from './user-account/permissions';\r\nexport * from './site/site.service';\r\nexport * from './sku/sku.types';\r\nexport * from './sku/sku.service';\r\nexport * from './basket/basket.service';\r\nexport * from './asset/asset.service';\r\nexport * from './asset/asset.types';\r\nexport * from './workorder/workorder.types';\r\nexport * from './search-filter/search-filter.service';\r\nexport * from './workorder/workorder.service';\r\nexport * from './filehandler/filehandler.service';\r\nexport * from './filehandler/filehandler.type';\r\nexport * from './preventive-maintenance/preventive-maintenance.service';\r\nexport * from './preventive-maintenance/preventive-maintenance.types';\r\nexport * from './check-lists/check-lists.service';\r\nexport * from './check-lists/check-lists.types';\r\n","export enum Organisation {\r\n  TEXMO = '10TI',\r\n  TPC_INDIA = '30TPCIN',\r\n  TPC_UK = '31TPCUK',\r\n  TPC_US = '32TPCUS',\r\n  RGMT = '20RGH'\r\n}\r\n\r\nexport interface Site {\r\n  id: string;\r\n  name: string;\r\n  organisationId: string;\r\n  organisationName: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport { mergeMap } from 'rxjs/operators';\r\nimport { IUserProfile } from '../user-account/user';\r\nimport {\r\n  AssetsPermissions,\r\n  CheckListPermissions,\r\n  IRequiredPermissions,\r\n  PermissionGroup,\r\n  PreventiveMaintenancePermissions,\r\n  profileHasPermission,\r\n  SparesPermissions,\r\n  WorkOrdersPermissions\r\n} from '..';\r\nimport { AuthenticationService } from '..';\r\n\r\n// TODO: Possibly refactor interface into a class with getters for the conventional fields\r\nexport interface NavItem {\r\n  label: string;\r\n  route?: string;\r\n  slug?: string;\r\n  icon?: string;\r\n  expanded?: boolean;\r\n  showOnDash?: boolean;\r\n  dashPanelColour?: string;\r\n  dashIllustration?: string;\r\n  isLandingPage?: boolean;\r\n  landingPageDescription?: string;\r\n  routePrefix?: string;\r\n  children?: NavItem[];\r\n  toggleExpanded?: Function;\r\n  permissionsRequired?: IRequiredPermissions;\r\n  hidden?: boolean;\r\n  shortLabel?: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NavigationService {\r\n  public navigationExpanded = new BehaviorSubject<boolean>(false);\r\n  public navigationExpanded$ = this.navigationExpanded.asObservable();\r\n  private generatedNavTreeCache: NavItem[];\r\n  private generatedNavTreeCacheWithHiddenItems: NavItem[];\r\n\r\n  private navigationTree: NavItem[] = [\r\n    {\r\n      label: 'Work Orders',\r\n      showOnDash: true,\r\n      dashPanelColour: '#EFEEDA',\r\n      permissionsRequired: {\r\n        [PermissionGroup.WorkOrders]: [WorkOrdersPermissions.CanViewWorkOrders]\r\n      }\r\n    },\r\n    {\r\n      label: 'Preventive Maintenance',\r\n      showOnDash: true,\r\n      dashPanelColour: '#D6E5D8',\r\n      permissionsRequired: {\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanViewPreventiveMaintenance\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      label: 'Assets',\r\n      route: './assets',\r\n      showOnDash: false,\r\n      dashPanelColour: '#D6E5D8',\r\n      permissionsRequired: {\r\n        [PermissionGroup.Assets]: [AssetsPermissions.CanViewAssetsList]\r\n      }\r\n    },\r\n    {\r\n      label: 'Spares',\r\n      isLandingPage: true,\r\n      landingPageDescription: `\r\n      Within this module you can perform many functions related to spares stock, ranging from\r\n      something as simple as viewing a list of your stock, right up to ordering spare\r\n      to a purchase or stores.\r\n      `,\r\n      children: [\r\n        {\r\n          label: 'Stock List',\r\n          showOnDash: true,\r\n          dashPanelColour: '#D4DADD',\r\n          permissionsRequired: {\r\n            [PermissionGroup.Spares]: [SparesPermissions.CanViewStockList]\r\n          }\r\n        },\r\n        {\r\n          label: 'Transfer Stock',\r\n          showOnDash: false,\r\n          dashPanelColour: '#D4DADD',\r\n          permissionsRequired: {\r\n            [PermissionGroup.Spares]: [SparesPermissions.CanViewStockList]\r\n          }\r\n        },\r\n        {\r\n          label: 'Order History',\r\n          showOnDash: false,\r\n          dashPanelColour: '#D4DADD',\r\n          permissionsRequired: {\r\n            [PermissionGroup.Spares]: [SparesPermissions.CanViewOrderHistory]\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Check Lists',\r\n      route: './check-list',\r\n      showOnDash: false,\r\n      dashPanelColour: '#D6E5D8',\r\n      permissionsRequired: {\r\n        [PermissionGroup.CheckList]: [CheckListPermissions.CanViewCheckList]\r\n      }\r\n    }\r\n  ];\r\n\r\n  constructor(public authenticationService: AuthenticationService) {}\r\n\r\n  public toggleNavigation() {\r\n    this.navigationExpanded.next(!this.navigationExpanded.getValue());\r\n  }\r\n\r\n  public addFieldsByConvention(navItem, routePrefix = '/') {\r\n    // The slug is a lower case, hyphenated version of the label\r\n    const slug = navItem.label.replace(/\\s+/g, '-').toLowerCase();\r\n    const route = navItem.route ? navItem.route : routePrefix + slug;\r\n    return {\r\n      ...navItem,\r\n      route,\r\n      expanded: false,\r\n      toggleExpanded: function() {\r\n        this.expanded = !this.expanded;\r\n      },\r\n      icon: `/assets/img/module-icons/${slug}.svg`,\r\n      ...(navItem.showOnDash && {\r\n        dashIllustration: `/assets/img/module-icons/dash-illustrations/${slug}.svg`\r\n      }),\r\n      ...(navItem.children && {\r\n        children: navItem.children.map(child =>\r\n          this.addFieldsByConvention(child, `${route}/`)\r\n        )\r\n      })\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @param roleTemplate The users role template\r\n   * @param additionalPermissions The users additional permissions\r\n   * @param navItem The nav item to check permissions on - recursively also checks children\r\n   * @returns either a navItem with its children appropriately filtered or null - use with map then filter top level nulls afterwards\r\n   */\r\n  private removeItemsBasedOnPermissions(\r\n    user: IUserProfile,\r\n    navItem: NavItem\r\n  ): NavItem {\r\n    if (\r\n      navItem.permissionsRequired &&\r\n      !profileHasPermission(user, navItem.permissionsRequired)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let children = [];\r\n\r\n    if (navItem.children) {\r\n      children = navItem.children\r\n        .map(child => this.removeItemsBasedOnPermissions(user, child))\r\n        .filter(item => item); // Remove undefined items\r\n    }\r\n\r\n    if (navItem.children && children.length === 0) {\r\n      return;\r\n    }\r\n\r\n    return {\r\n      ...navItem,\r\n      ...(navItem.children && { children })\r\n    };\r\n  }\r\n\r\n  public getNavigationTree(includeHiddenItems = false): Observable<NavItem[]> {\r\n    if (this.generatedNavTreeCache && !includeHiddenItems) {\r\n      return of(this.generatedNavTreeCache);\r\n    }\r\n\r\n    if (this.generatedNavTreeCacheWithHiddenItems && includeHiddenItems) {\r\n      return of(this.generatedNavTreeCacheWithHiddenItems);\r\n    }\r\n\r\n    return this.authenticationService.currentUserProfile$.pipe(\r\n      mergeMap(userProfile => {\r\n        if (!userProfile) {\r\n          return of([]);\r\n        }\r\n        const navTree = this.navigationTree\r\n          .map(navItem =>\r\n            this.removeItemsBasedOnPermissions(userProfile, navItem)\r\n          )\r\n          .filter(item => item) // Remove undefined items\r\n          .filter(item => !item.hidden || (includeHiddenItems && item.hidden))\r\n          .map(navItem => this.addFieldsByConvention(navItem));\r\n        if (includeHiddenItems) {\r\n          this.generatedNavTreeCacheWithHiddenItems = navTree;\r\n        } else {\r\n          this.generatedNavTreeCache = navTree;\r\n        }\r\n        return of(navTree);\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport {\r\n  HttpClient,\r\n  HttpErrorResponse,\r\n  HttpHeaders\r\n} from '@angular/common/http';\r\nimport { BehaviorSubject, Observable, of, throwError } from 'rxjs';\r\nimport { catchError, filter, map, mergeMap } from 'rxjs/operators';\r\nimport { environment } from './../../../environments/environment';\r\nimport { IUserProfile, UserProfile } from './../user-account/user';\r\nimport {\r\n  IRequiredPermissions,\r\n  profileHasPermission,\r\n  Role\r\n} from '../user-account/permissions';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthenticationService {\r\n  public currentUserProfile$: BehaviorSubject<UserProfile>;\r\n  public user: Observable<UserProfile>;\r\n\r\n  constructor(private router: Router, private http: HttpClient) {\r\n    this.currentUserProfile$ = new BehaviorSubject<UserProfile>(\r\n      JSON.parse(localStorage.getItem('user'))\r\n    );\r\n    this.user = this.currentUserProfile$.asObservable();\r\n  }\r\n\r\n  public get userValue(): UserProfile {\r\n    return this.currentUserProfile$.value;\r\n  }\r\n\r\n  public login(userid, password) {\r\n    const body = {\r\n      userId: userid,\r\n      password: password\r\n    };\r\n    const Api_Key =\r\n      '418413972367e5976207eeb05530ec52213d3b0a0bfcb55001fa00eb0f1c4225';\r\n    let header = new HttpHeaders().set('content-type', 'application/json');\r\n    header = header.append('Api_Key', Api_Key);\r\n    return this.http\r\n      .post<IUserProfile>(`${environment.apiBaseUrl}/userauthorization`, body, {\r\n        headers: header\r\n      })\r\n      .pipe(\r\n        map(userProfile => {\r\n          localStorage.setItem('user', JSON.stringify(userProfile));\r\n          this.currentUserProfile$.next(userProfile);\r\n          return userProfile;\r\n        }),\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  public currentUserHasPermission(\r\n    requiredPermissions: IRequiredPermissions\r\n  ): Observable<boolean> {\r\n    return this.currentUserProfile$.pipe(\r\n      filter(userProfile => userProfile !== null),\r\n      mergeMap(userProfile => {\r\n        if (!profileHasPermission(userProfile, requiredPermissions)) {\r\n          return of(false);\r\n        }\r\n        return of(true);\r\n      })\r\n    );\r\n  }\r\n\r\n  public currentUserIsManager(): Observable<boolean> {\r\n    return this.currentUserProfile$.pipe(\r\n      filter(userProfile => userProfile !== null),\r\n      mergeMap(userProfile => {\r\n        if (userProfile.userRole.groupName !== Role.Manager) {\r\n          return of(false);\r\n        }\r\n        return of(true);\r\n      })\r\n    );\r\n  }\r\n\r\n  private handleError(error: HttpErrorResponse) {\r\n    if (error.error instanceof ErrorEvent) {\r\n      console.error('An error occurred:', error.error.message);\r\n    } else {\r\n      console.error(\r\n        `Backend returned code ${error.status}, ` +\r\n          `body was: ${error.error.message}`\r\n      );\r\n    }\r\n    return throwError('Something bad happened; please try again later.');\r\n  }\r\n\r\n  public logout() {\r\n    localStorage.removeItem('user');\r\n    this.currentUserProfile$.next(null);\r\n    this.router.navigate(['/account/login']);\r\n  }\r\n\r\n  public getCurrentUserIdAndName(): string {\r\n    const userProfile: IUserProfile = this.currentUserProfile$.getValue();\r\n\r\n    if (userProfile) {\r\n      return userProfile.userId\r\n        .concat('-', userProfile.displayName)\r\n        .substring(0, 50);\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { DashboardComponent } from './dashboard';\r\nimport { AuthGuard } from './guards';\r\nimport { DependencyResolver } from './DependencyResolver';\r\nimport {\r\n  AssetsPermissions,\r\n  IRequiredPermissions,\r\n  PermissionGroup,\r\n  WorkOrdersPermissions,\r\n  PreventiveMaintenancePermissions,\r\n  CheckListPermissions\r\n} from './services';\r\nimport { PermissionGuard } from './guards/permission.guard';\r\n\r\nconst accountModule = () =>\r\n  import('./user-account/account.module').then(x => x.AccountModule);\r\n\r\nexport const assetsRequiredPermissions: IRequiredPermissions = {\r\n  [PermissionGroup.Assets]: [AssetsPermissions.CanViewAssetsList]\r\n};\r\n\r\nexport const workordersRequiredPermissions: IRequiredPermissions = {\r\n  [PermissionGroup.WorkOrders]: [WorkOrdersPermissions.CanViewWorkOrders]\r\n};\r\n\r\nexport const preventiveMaintenancePermissions: IRequiredPermissions = {\r\n  [PermissionGroup.PreventiveMaintenance]: [\r\n    PreventiveMaintenancePermissions.CanViewPreventiveMaintenance\r\n  ]\r\n};\r\n\r\nexport const checkListPermissions: IRequiredPermissions = {\r\n  [PermissionGroup.CheckList]: [CheckListPermissions.CanViewCheckList]\r\n};\r\n\r\nexport const routes: Routes = [\r\n  { path: '', component: DashboardComponent, canActivate: [AuthGuard] },\r\n  { path: 'account', loadChildren: accountModule },\r\n  {\r\n    path: 'dashboard',\r\n    component: DashboardComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  {\r\n    path: 'assets',\r\n    canActivate: [AuthGuard, PermissionGuard],\r\n    loadChildren: () =>\r\n      import('./assets/assets.module').then(m => m.AssetsModule),\r\n    resolve: {\r\n      dependenciesResolved: DependencyResolver\r\n    },\r\n    data: {\r\n      permissionsRequired: assetsRequiredPermissions\r\n    }\r\n  },\r\n  {\r\n    path: 'spares',\r\n    canActivate: [AuthGuard],\r\n    loadChildren: () =>\r\n      import('./spares/spares.module').then(m => m.SparesModule),\r\n    resolve: {\r\n      dependenciesResolved: DependencyResolver\r\n    }\r\n  },\r\n  {\r\n    path: 'work-orders',\r\n    canActivate: [AuthGuard, PermissionGuard],\r\n    loadChildren: () =>\r\n      import('./work-orders/work-orders.module').then(m => m.WorkOrdersModule),\r\n    resolve: {\r\n      dependenciesResolved: DependencyResolver\r\n    },\r\n    data: {\r\n      permissionsRequired: workordersRequiredPermissions\r\n    }\r\n  },\r\n  {\r\n    path: 'preventive-maintenance',\r\n    canActivate: [AuthGuard, PermissionGuard],\r\n    loadChildren: () =>\r\n      import('./preventive-maintenance/preventive-maintenance.module').then(\r\n        m => m.PreventiveMaintenanceModule\r\n      ),\r\n    resolve: {\r\n      dependenciesResolved: DependencyResolver\r\n    },\r\n    data: {\r\n      permissionsRequired: preventiveMaintenancePermissions\r\n    }\r\n  },\r\n  {\r\n    path: 'check-list',\r\n    canActivate: [AuthGuard, PermissionGuard],\r\n    loadChildren: () =>\r\n      import('./check-lists/check-lists.module').then(m => m.CheckListsModule),\r\n    resolve: {\r\n      dependenciesResolved: DependencyResolver\r\n    },\r\n    data: {\r\n      permissionsRequired: checkListPermissions\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule],\r\n  providers: []\r\n})\r\nexport class AppRoutingModule {}\r\n","export enum Modules {\r\n  Asset = 0,\r\n  WorkOrder = 1\r\n}\r\n\r\nexport interface IFilehandler {\r\n  siteId: string;\r\n  id: number;\r\n  attachments: [string];\r\n  moduleName: number;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  HttpRequest,\r\n  HttpHandler,\r\n  HttpEvent,\r\n  HttpInterceptor\r\n} from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nimport { AuthenticationService } from './../services';\r\n\r\n@Injectable()\r\nexport class ErrorInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) {}\r\n\r\n  intercept(\r\n    request: HttpRequest<any>,\r\n    next: HttpHandler\r\n  ): Observable<HttpEvent<any>> {\r\n    return next.handle(request).pipe(\r\n      catchError(err => {\r\n        if (\r\n          [401, 403].includes(err.status) &&\r\n          this.authenticationService.userValue\r\n        ) {\r\n          // auto logout if 401 or 403 response returned from api\r\n          this.authenticationService.logout();\r\n        }\r\n\r\n        const error = err.error.message || err.error;\r\n        console.error(err);\r\n        return throwError(error);\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { ISkuStock, SparesGroup } from './sku.types';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SkuService {\r\n  public skuStockItemUrl = `${environment.apiBaseUrl}/stock`;\r\n  public sparesGroupUrl = `${environment.apiBaseUrl}/stock/sparegroup`;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  public get primarySiteId(): string {\r\n    const userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n    if (userProfile && userProfile.primarySite) {\r\n      return userProfile.primarySite.id;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public getSkuStockForSparesGroup(\r\n    sparesGroupId: string,\r\n    sparesSubGroupId: string,\r\n    take: Number,\r\n    offset: Number,\r\n    siteId: string,\r\n    text?: string\r\n  ): Observable<ISkuStock[]> {\r\n    let params = new HttpParams();\r\n    params = params\r\n      .append('GroupId', sparesGroupId)\r\n      .append('SubGroupId', sparesSubGroupId)\r\n      .append('take', take.toString())\r\n      .append('offset', offset.toString())\r\n      .append('siteId', siteId);\r\n\r\n    if (text) {\r\n      params = params.append('text', text);\r\n    }\r\n    return this.http.get<ISkuStock[]>(`${this.skuStockItemUrl}`, {\r\n      params\r\n    });\r\n  }\r\n\r\n  public getSkuStockForSpares(\r\n    sparesGroups: string,\r\n    text?: string,\r\n    siteId?: string\r\n  ): Observable<ISkuStock[]> {\r\n    siteId =\r\n      siteId ||\r\n      this.authenticationService.currentUserProfile$.value.primarySite.id;\r\n    let params = new HttpParams();\r\n    if (sparesGroups !== '') {\r\n      const groups = sparesGroups.split('~', 2);\r\n      params = params.append('GroupId', groups[0]);\r\n      params = params.append('SubGroupId', groups[1]);\r\n    }\r\n    params = params.append('siteId', siteId);\r\n    params = params.append('text', text);\r\n\r\n    return this.http.get<ISkuStock[]>(`${this.skuStockItemUrl}`, {\r\n      params\r\n    });\r\n  }\r\n\r\n  public getSparesGroups(\r\n    text?: string,\r\n    siteId?: string\r\n  ): Observable<SparesGroup[]> {\r\n    siteId =\r\n      siteId ||\r\n      this.authenticationService.currentUserProfile$.value.primarySite.id;\r\n\r\n    let params = new HttpParams();\r\n    params = params.append('siteId', siteId);\r\n    if (text) {\r\n      params = params.append('text', text);\r\n    }\r\n    return this.http.get<SparesGroup[]>(`${this.sparesGroupUrl}/`, {\r\n      params\r\n    });\r\n  }\r\n\r\n  public getSkuStockForSkuId(\r\n    skuId: string,\r\n    siteId: string = this.primarySiteId\r\n  ): Observable<ISkuStock[]> {\r\n    let params = new HttpParams();\r\n    params = params.append('text', skuId.toString()).append('siteId', siteId);\r\n    return this.http.get<ISkuStock[]>(`${this.skuStockItemUrl}`, {\r\n      params\r\n    });\r\n  }\r\n}\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}