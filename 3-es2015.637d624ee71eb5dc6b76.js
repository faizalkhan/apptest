(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Xi4i:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var s=n("fXoL"),o=n("Kj3r"),i=n("pLZG"),c=n("lw6W"),r=n("3Pt+"),a=n("ofXK");const l=["searchInput"],d=["searchResult"];function g(t,e){if(1&t){const t=s.lc();s.kc(0,"button",12,13),s.rc("keyup",function(e){s.Ic(t);return s.vc(3).handleUsersListResultKeyUp(e)})("click",function(){s.Ic(t);const n=e.$implicit;return s.vc(3).handleUsersListResultClick(n)}),s.Pc(2),s.jc()}if(2&t){const t=e.$implicit;s.Ub("data-sitename",t.name),s.Tb(2),s.Sc(" ",t.userId,"-",t.displayName," ")}}function u(t,e){if(1&t&&(s.kc(0,"div",10),s.Oc(1,g,3,3,"button",11),s.jc()),2&t){const t=s.vc(2);s.Tb(1),s.Ac("ngForOf",t.listUsersResults)}}function h(t,e){1&t&&(s.kc(0,"div",14),s.Pc(1," No users found "),s.jc())}function p(t,e){1&t&&(s.kc(0,"div",15),s.fc(1,"div",16),s.jc())}function f(t,e){if(1&t&&(s.kc(0,"div"),s.Oc(1,u,2,1,"div",7),s.Oc(2,h,2,0,"div",8),s.Oc(3,p,2,0,"div",9),s.jc()),2&t){const t=s.vc();s.Tb(1),s.Ac("ngIf",!t.isUsersSearching),s.Tb(1),s.Ac("ngIf",0===t.listUsersResults.length&&!t.isUsersSearching),s.Tb(1),s.Ac("ngIf",t.isUsersSearching)}}class m{constructor(t,e){this.formBuilder=t,this.userService=e,this.listUsersResultsVisible=!1,this.isUsersSearching=!1,this.listUsersResults=[],this.isUsersSelected=!1,this.isEditable=!0,this.selectedUserId=new s.t,this.listUsersForm=this.formBuilder.group({text:"",userId:this.userName})}ngOnInit(){this.listUsersForm.get("text").valueChanges.pipe(Object(o.a)(700),Object(i.a)(t=>t.length>=3),Object(i.a)(t=>!this.userNameIsInListResults(t))).subscribe(()=>this.listUsers()),this.listUsersForm.get("text").valueChanges.pipe(Object(o.a)(700),Object(i.a)(t=>t.length<3)).subscribe(()=>{this.listUsersResultsVisible=!1}),this.listUsersForm.get("text").valueChanges.pipe(Object(o.a)(700),Object(i.a)(t=>0===t.length)).subscribe(()=>{this.selectedUserId.emit("")}),this.userName&&this.listUsersForm.setValue({text:this.userName,userId:""})}listUsers(){this.listUsersSubscription&&!this.listUsersSubscription.closed&&this.listUsersSubscription.unsubscribe();const t=this.listUsersForm.get("text").value;!1===this.isUsersSelected&&(this.isUsersSearching=!0,this.listUsersResultsVisible=!!this.listUsersForm.get("text").dirty,this.listUsersSubscription=this.userService.getUserList(t).subscribe(t=>{this.listUsersResults=t,this.isUsersSearching=!1}))}handleUsersListKeyUp(t){switch(this.isUsersSelected=!1,t.key){case"ArrowDown":const t=this.searchResultElements.toArray();t.length>0&&t[0].nativeElement.focus();break;case"Escape":this.clearlistUsersForm()}}handleUsersListResultKeyUp(t){switch(t.key){case"ArrowUp":const e=this.searchResultElements.toArray()[0].nativeElement;t.target===e?this.searchInputElement.nativeElement.focus():t.target.previousSibling.focus();break;case"ArrowDown":null!=t.target.nextElementSibling&&t.target.nextSibling&&t.target.nextSibling.focus();break;case"Escape":this.clearlistUsersForm()}}handleUsersListResultClick(t){const e=t.userId.concat("-",t.displayName).substring(0,50);this.listUsersForm.setValue({text:e,userId:e}),this.listUsersResultsVisible=!1,this.isUsersSelected=!0,this.selectedUserId.emit(e)}handleUsersListBlur(){this.isEditable&&setTimeout(()=>{const t=this.listUsersForm.get("text").value,e=document.activeElement;this.userNameIsInListResults(t)||e.dataset.sitename||t||this.clearlistUsersForm()},0)}userNameIsInListResults(t){let e=!1;for(const n of this.listUsersResults){n.userId.concat("-",n.displayName).substring(0,50)===t&&(e=!0)}return e}clearlistUsersForm(){this.listUsersForm.setValue({text:"",userId:null}),this.listUsersResultsVisible=!1}ngOnDestroy(){this.listUsersSubscription&&!this.listUsersSubscription.closed&&this.listUsersSubscription.unsubscribe()}}m.\u0275fac=function(t){return new(t||m)(s.ec(r.d),s.ec(c.a))},m.\u0275cmp=s.Yb({type:m,selectors:[["app-list-users"]],viewQuery:function(t,e){if(1&t&&(s.Tc(l,1),s.Tc(d,1)),2&t){let t;s.Fc(t=s.sc())&&(e.searchInputElement=t.first),s.Fc(t=s.sc())&&(e.searchResultElements=t)}},inputs:{userName:"userName",isEditable:"isEditable"},outputs:{selectedUserId:"selectedUserId"},decls:8,vars:5,consts:[[1,"row","form-row",3,"formGroup"],[1,"form-group"],[1,"find-as-you-type"],["formControlName","text","type","text",1,"form-control","text-display",3,"readonly","blur","keyup"],["searchInput",""],["formControlName","userId","type","hidden"],[4,"ngIf"],["class","find-as-you-type__results dropdown-scroll",4,"ngIf"],["class","find-as-you-type__no-results",4,"ngIf"],["class","find-as-you-type__spinner-container",4,"ngIf"],[1,"find-as-you-type__results","dropdown-scroll"],["class","select-Users-btn",3,"keyup","click",4,"ngFor","ngForOf"],[1,"select-Users-btn",3,"keyup","click"],["searchResult",""],[1,"find-as-you-type__no-results"],[1,"find-as-you-type__spinner-container"],[1,"spinner"]],template:function(t,e){1&t&&(s.kc(0,"form",0),s.kc(1,"div"),s.kc(2,"div",1),s.kc(3,"div",2),s.kc(4,"input",3,4),s.rc("blur",function(){return e.handleUsersListBlur()})("keyup",function(t){return e.handleUsersListKeyUp(t)}),s.jc(),s.fc(6,"input",5),s.Oc(7,f,4,3,"div",6),s.jc(),s.jc(),s.jc(),s.jc()),2&t&&(s.Ac("formGroup",e.listUsersForm),s.Tb(3),s.Wb("find-as-you-type--suggestions-visible",e.isUsersSearching||e.listUsersResultsVisible),s.Tb(1),s.Ac("readonly",!e.isEditable),s.Tb(3),s.Ac("ngIf",e.listUsersResultsVisible))},directives:[r.w,r.n,r.g,r.c,r.m,r.f,a.k,a.j],styles:[".find-as-you-type[_ngcontent-%COMP%]{position:relative;z-index:5}.find-as-you-type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.find-as-you-type__no-results[_ngcontent-%COMP%], .find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .find-as-you-type__spinner-container[_ngcontent-%COMP%]{padding:.8em 1.2em;background-color:#f2f2f2;border:1px solid #ced4da;display:block}.find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;text-align:left}.find-as-you-type[_ngcontent-%COMP%]   .dropdown-scroll[_ngcontent-%COMP%]{max-height:150px;border-bottom:2px solid #ced4da;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}.find-as-you-type[_ngcontent-%COMP%]   .dropdown-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.find-as-you-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(106,149,91,.25);position:relative;background-color:#fff;z-index:5}.find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.find-as-you-type[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto}.find-as-you-type--suggestions-visible[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}"]})},eQ4o:function(t,e,n){"use strict";n.d(e,"a",function(){return w});var s=n("fXoL"),o=n("Kj3r"),i=n("pLZG"),c=n("o0su"),r=n("3Pt+"),a=n("ofXK");function l(t,e){if(1&t&&(s.kc(0,"td",3),s.kc(1,"span"),s.kc(2,"strong"),s.Pc(3),s.jc(),s.fc(4,"br"),s.jc(),s.kc(5,"span"),s.kc(6,"strong"),s.Pc(7,"ID "),s.jc(),s.Pc(8),s.jc(),s.jc()),2&t){const t=s.vc();s.Tb(3),s.Qc(t.assetItem.name),s.Tb(5),s.Qc(t.assetItem.assetId)}}function d(t,e){if(1&t&&(s.kc(0,"td",4),s.kc(1,"span"),s.Pc(2),s.jc(),s.jc()),2&t){const t=s.vc();s.Tb(2),s.Qc(t.assetItem.location)}}function g(t,e){if(1&t){const t=s.lc();s.kc(0,"td",5),s.kc(1,"button",6),s.rc("click",function(){s.Ic(t);const e=s.vc();return e.handleDeleteAssetItem(e.assetItem)}),s.uc(),s.kc(2,"svg",7),s.fc(3,"defs"),s.fc(4,"path",8),s.fc(5,"path",9),s.fc(6,"path",10),s.fc(7,"path",11),s.fc(8,"path",12),s.jc(),s.jc(),s.jc()}}class u{constructor(){this.deleteAssetItem=new s.t}ngOnInit(){}handleDeleteAssetItem(t){this.deleteAssetItem.emit(t)}}u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=s.Yb({type:u,selectors:[["app-pick-asset-item"]],inputs:{assetItem:"assetItem"},outputs:{deleteAssetItem:"deleteAssetItem"},decls:3,vars:3,consts:[["class","asset-name-cell",4,"ngIf"],["class","asset-location-cell",4,"ngIf"],["class","delete-row-cell",4,"ngIf"],[1,"asset-name-cell"],[1,"asset-location-cell"],[1,"delete-row-cell"],[1,"delete-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 14 18"],["d","M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z","transform","translate(.2 1.267)",1,"cls-1"],["d","M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z",1,"cls-1"],["d","M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z","transform","translate(1.567 2)",1,"cls-1"],["d","M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z","transform","translate(.9 1.967)",1,"cls-1"],["d","M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z","transform","translate(2.125 1.991)",1,"cls-1"]],template:function(t,e){1&t&&(s.Oc(0,l,9,2,"td",0),s.Oc(1,d,3,1,"td",1),s.Oc(2,g,9,0,"td",2)),2&t&&(s.Ac("ngIf",!e.assetItem.isDelete),s.Tb(1),s.Ac("ngIf",!e.assetItem.isDelete),s.Tb(1),s.Ac("ngIf",!e.assetItem.isDelete))},directives:[a.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}[_nghost-%COMP%]{display:table-row;background-color:#f2f2f2;line-height:1.1;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em;text-align:center;vertical-align:middle;height:5em;border-bottom:2px solid #fff;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:left;width:55%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:35%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){background-color:#dedede;font-weight:600}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0 auto;font-size:1.5em}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.1)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]{opacity:.3;background-color:transparent}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(1);transition:all .2s ease-in-out}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}@media screen and (max-width:768px){[_nghost-%COMP%]{margin-bottom:3.5em;display:flex;align-items:center;border-bottom:none}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{display:none;border-bottom:none;height:auto}[_nghost-%COMP%]   td.asset-location-cell[_ngcontent-%COMP%], [_nghost-%COMP%]   td.asset-name-cell[_ngcontent-%COMP%], [_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   td.asset-name-cell[_ngcontent-%COMP%]{flex-grow:1;text-align:left;width:55%}[_nghost-%COMP%]   td.asset-location-cell[_ngcontent-%COMP%]{flex-grow:1;text-align:left;width:45%}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]{display:block;width:calc(100% + 2px);position:absolute;top:100%;margin:-1px;background-color:transparent}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[_ngcontent-%COMP%]{background:#eaeaea;padding:1.5em 0;border-bottom-left-radius:.5em;border-bottom-right-radius:.5em;border:1px solid rgba(0,0,0,.05);border-top:none}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#666667}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5}}"]});const h=["searchInput"],p=["searchResult"];function f(t,e){if(1&t&&(s.kc(0,"span"),s.Pc(1),s.jc()),2&t){const t=s.vc();s.Tb(1),s.Rc("(",t.itemCount," item)")}}function m(t,e){if(1&t&&(s.kc(0,"span"),s.Pc(1),s.jc()),2&t){const t=s.vc();s.Tb(1),s.Rc("(",t.itemCount," items)")}}function b(t,e){1&t&&s.fc(0,"div",4)}function O(t,e){if(1&t){const t=s.lc();s.kc(0,"button",17,18),s.rc("keyup",function(e){s.Ic(t);return s.vc(4).handleSearchResultKeyUp(e)})("click",function(){s.Ic(t);const n=e.$implicit;return s.vc(4).handleSearchResultClick(n)}),s.Pc(2),s.jc()}if(2&t){const t=e.$implicit;s.Ub("data-assetname",t.name),s.Tb(2),s.Sc(" ",t.assetId," - ",t.name," ")}}function _(t,e){if(1&t&&(s.kc(0,"div",15),s.Oc(1,O,3,3,"button",16),s.jc()),2&t){const t=s.vc(3);s.Tb(1),s.Ac("ngForOf",t.searchResults)}}function C(t,e){1&t&&(s.kc(0,"div",19),s.Pc(1," No assets found "),s.jc())}function P(t,e){1&t&&(s.kc(0,"div",20),s.fc(1,"div",4),s.jc())}function M(t,e){if(1&t&&(s.kc(0,"div"),s.Oc(1,_,2,1,"div",12),s.Oc(2,C,2,0,"div",13),s.Oc(3,P,2,0,"div",14),s.jc()),2&t){const t=s.vc(2);s.Tb(1),s.Ac("ngIf",!t.isSearching),s.Tb(1),s.Ac("ngIf",0===t.searchResults.length&&!t.isSearching),s.Tb(1),s.Ac("ngIf",t.isSearching)}}function y(t,e){if(1&t){const t=s.lc();s.kc(0,"app-pick-asset-item",23),s.rc("deleteAssetItem",function(e){s.Ic(t);return s.vc(3).deleteAssetItem(e)}),s.jc()}if(2&t){const t=e.$implicit;s.Ac("assetItem",t)}}function k(t,e){if(1&t&&(s.kc(0,"div"),s.kc(1,"table"),s.kc(2,"thead"),s.kc(3,"th"),s.Pc(4,"Name"),s.jc(),s.kc(5,"th"),s.Pc(6,"Location"),s.jc(),s.fc(7,"th"),s.jc(),s.jc(),s.kc(8,"table"),s.kc(9,"tbody"),s.Oc(10,y,1,1,"app-pick-asset-item",21),s.kc(11,"tr"),s.kc(12,"td",22),s.Pc(13," \xa0 "),s.jc(),s.jc(),s.jc(),s.jc(),s.jc()),2&t){const t=s.vc(2);s.Tb(10),s.Ac("ngForOf",t.listAssets)}}function v(t,e){if(1&t){const t=s.lc();s.kc(0,"div"),s.kc(1,"form",5),s.kc(2,"div",6),s.kc(3,"div"),s.kc(4,"div",7),s.kc(5,"div",8),s.kc(6,"input",9,10),s.rc("blur",function(){s.Ic(t);return s.vc().handleSearchBlur()})("keyup",function(e){s.Ic(t);return s.vc().handleSearchKeyUp(e)}),s.jc(),s.fc(8,"input",11),s.Oc(9,M,4,3,"div",0),s.jc(),s.jc(),s.jc(),s.jc(),s.jc(),s.kc(10,"div"),s.Oc(11,k,14,1,"div",0),s.jc(),s.jc()}if(2&t){const t=s.vc();s.Tb(1),s.Ac("formGroup",t.searchForm),s.Tb(4),s.Wb("find-as-you-type--suggestions-visible",t.isAssetsSelected||t.searchResultsVisible),s.Tb(4),s.Ac("ngIf",t.searchResultsVisible),s.Tb(2),s.Ac("ngIf",t.listAssets.length>0)}}class w{constructor(t,e,n){this.formBuilder=t,this.assetService=e,this.toastService=n,this.isLoading=!1,this.isSearching=!1,this.searchResults=[],this.isAssetsSelected=!1,this.searchResultsVisible=!1,this.listAssets=[],this.addedAssets=new s.t,this.searchForm=this.formBuilder.group({text:"",assets:null})}ngOnInit(){this.searchForm.get("text").valueChanges.pipe(Object(o.a)(700),Object(i.a)(t=>t.length>=3),Object(i.a)(t=>!this.assetsNameIsInSearchResults(t))).subscribe(()=>{this.searchAssets()}),this.searchForm.get("text").valueChanges.pipe(Object(o.a)(700),Object(i.a)(t=>t.length<3)).subscribe(()=>this.searchResultsVisible=!1),this.listAssets.push(...this.existingAssets),this.countAssetItems()}assetsNameIsInSearchResults(t){let e=!1;for(const n of this.searchResults)n.assetId+" - "+n.name===t&&(e=!0);return e}searchAssets(){this.searchAssetsSubscription&&!this.searchAssetsSubscription.closed&&this.searchAssetsSubscription.unsubscribe();const t=this.searchForm.get("text").value;0==this.isAssetsSelected&&(this.isSearching=!0,this.searchResultsVisible=!0,this.searchAssetsSubscription=this.assetService.listAssets({offset:0,take:100,text:t}).subscribe(t=>{this.searchResults=[],t.forEach(t=>{const e={referenceId:null,id:t.id,location:t.location,assetId:t.assetId,assetCode:t.assetCode,name:t.name,description:t.description,isDelete:!1,isNew:!0};this.searchResults.push(e)}),this.isSearching=!1})),this.isLoading=!1}clearSearchForm(){this.searchForm.setValue({text:"",assets:null}),this.searchResultsVisible=!1}handleSearchKeyUp(t){switch(this.isAssetsSelected=!1,t.key){case"ArrowDown":const t=this.searchResultElements.toArray();t.length>0&&t[0].nativeElement.focus();break;case"Escape":this.clearSearchForm()}}handleSearchBlur(){setTimeout(()=>{const t=this.searchForm.get("text").value,e=document.activeElement;this.assetsNameIsInSearchResults(t)||e.dataset.assetname||this.clearSearchForm()},0)}handleSearchResultKeyUp(t){switch(t.key){case"ArrowUp":const e=this.searchResultElements.toArray()[0].nativeElement;t.target===e?this.searchInputElement.nativeElement.focus():t.target.previousSibling.focus();break;case"ArrowDown":t.target.nextSibling&&t.target.nextSibling.focus();break;case"Escape":this.clearSearchForm()}}handleSearchResultClick(t){return this.searchForm.setValue({text:t.assetId+" - "+t.name,assets:t.assetId}),0!==this.listAssets.filter(e=>t.assetId===e.assetId&&e.isDelete).length?(this.listAssets.find(e=>t.assetId===e.assetId&&e.isDelete).isDelete=!1,this.clearSearchForm(),void(this.searchResultsVisible=!1)):0!==this.listAssets.filter(e=>t.assetId===e.assetId&&!e.isDelete).length?(this.toastService.showErrorToast(`${t.assetId} Asset already selected`),this.clearSearchForm(),void(this.searchResultsVisible=!1)):(this.addAssetsList(t),this.searchResultsVisible=!1,void(this.isAssetsSelected=!0))}addAssetsList(t){t.isNew=!0,this.listAssets.push(t),this.countAssetItems(),this.searchForm.setValue({text:"",assets:null})}deleteAssetItem(t){t.isNew?this.listAssets.splice(this.listAssets.indexOf(t),1):this.listAssets.find(e=>e.id===t.id).isDelete=!0,this.countAssetItems()}addAssets(){this.addedAssets.emit(this.listAssets)}countAssetItems(){this.itemCount=this.listAssets.filter(t=>!0!==t.isDelete).length}}w.\u0275fac=function(t){return new(t||w)(s.ec(r.d),s.ec(c.a),s.ec(c.v))},w.\u0275cmp=s.Yb({type:w,selectors:[["app-pick-assets"]],viewQuery:function(t,e){if(1&t&&(s.Tc(h,1),s.Tc(p,1)),2&t){let t;s.Fc(t=s.sc())&&(e.searchInputElement=t.first),s.Fc(t=s.sc())&&(e.searchResultElements=t)}},inputs:{existingAssets:"existingAssets"},outputs:{addedAssets:"addedAssets"},decls:10,vars:7,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"form-actions","done-btn"],[1,"btn","btn-primary","btn-block","col-12",3,"disabled","click"],[1,"spinner"],[1,"search-form",3,"formGroup"],[1,"row"],[1,"form-group"],[1,"find-as-you-type","input-with-search-wrapper"],["type","text","formControlName","text","placeholder","Search assets by id or name",1,"form-control","form-control--search-prefix",3,"blur","keyup"],["searchInput",""],["formControlName","assets","type","hidden"],["class","find-as-you-type__results",4,"ngIf"],["class","find-as-you-type__no-results",4,"ngIf"],["class","find-as-you-type__spinner-container",4,"ngIf"],[1,"find-as-you-type__results"],["class","select-assets-btn",3,"keyup","click",4,"ngFor","ngForOf"],[1,"select-assets-btn",3,"keyup","click"],["searchResult",""],[1,"find-as-you-type__no-results"],[1,"find-as-you-type__spinner-container"],[3,"assetItem","deleteAssetItem",4,"ngFor","ngForOf"],[1,"bg-white"],[3,"assetItem","deleteAssetItem"]],template:function(t,e){1&t&&(s.kc(0,"h1"),s.Pc(1,"Picking Assets "),s.Oc(2,f,2,1,"span",0),s.Oc(3,m,2,1,"span",0),s.jc(),s.Oc(4,b,1,0,"div",1),s.Oc(5,v,12,5,"div",0),s.kc(6,"footer"),s.kc(7,"div",2),s.kc(8,"button",3),s.rc("click",function(){return e.addAssets()}),s.Pc(9," Done "),s.jc(),s.jc(),s.jc()),2&t&&(s.Tb(2),s.Ac("ngIf",1===e.itemCount),s.Tb(1),s.Ac("ngIf",e.itemCount>1),s.Tb(1),s.Ac("ngIf",e.isLoading),s.Tb(1),s.Ac("ngIf",!e.isLoading),s.Tb(2),s.Wb("visible",!0),s.Tb(1),s.Ac("disabled",0===e.listAssets.length))},directives:[a.k,r.w,r.n,r.g,r.c,r.m,r.f,a.j,u],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}table[_ngcontent-%COMP%]{width:100%;position:relative}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-transform:uppercase}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8em}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:55%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:35%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{line-height:1.1}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f2f2f2;padding:.8em;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff}@media screen and (max-width:768px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:0}}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:1.6em 1em;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);text-align:center}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}@media screen and (max-width:768px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{display:block;top:100%;width:100%;padding:.2em;height:2.1em;background-color:#6b6d6e}}footer[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{left:0!important;width:100%;background-color:#fff;box-shadow:none;padding:1rem 3rem 3rem!important;z-index:1}@media screen and (max-width:768px){footer[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem!important;box-shadow:none}}.search-form[_ngcontent-%COMP%]{margin-bottom:1.5em}.find-as-you-type[_ngcontent-%COMP%]{position:relative;z-index:5}.find-as-you-type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.find-as-you-type__no-results[_ngcontent-%COMP%], .find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .find-as-you-type__spinner-container[_ngcontent-%COMP%]{padding:.8em 1.2em;background-color:#f2f2f2;border:1px solid #ced4da;display:block}.find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;text-align:left}.find-as-you-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(106,149,91,.25);position:relative;background-color:#fff;z-index:5}.find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.find-as-you-type[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto}.find-as-you-type--suggestions-visible[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.asset-list[_ngcontent-%COMP%]{margin-top:.6em;padding:0;list-style:none}.asset-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff;background-color:#f2f2f2;line-height:1.1;padding:.8em}.asset-list[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{background-color:#fff;padding:1em;height:3em;text-transform:uppercase;font-weight:600;display:flex}.asset-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:1.6em 1em;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);text-align:center;height:100%}.asset-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}.asset-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}.asset-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}"]})},lw6W:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var s=n("AytR"),o=n("ri4K"),i=n("fXoL"),c=n("tk/3");class r{constructor(t,e){this.httpClient=t,this.authenticationService=e,this.userListURL=`${s.a.apiBaseUrl}/user/filter/tech-mngr/sites`}get primarySiteId(){const t=this.authenticationService.currentUserProfile$.getValue();return t&&t.primarySite?t.primarySite.id:null}get primaryOrganisationId(){const t=this.authenticationService.currentUserProfile$.getValue();return t&&t.primarySite?t.primarySite.organisationId:null}getUserList(t){return this.httpClient.get(`${this.userListURL}/${this.primarySiteId}?OrganisationId=${this.primaryOrganisationId}&searchText=${t}`)}}r.\u0275fac=function(t){return new(t||r)(i.oc(c.b),i.oc(o.a))},r.\u0275prov=i.ac({token:r,factory:r.\u0275fac,providedIn:"root"})},oeRM:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var s=n("fXoL"),o=n("ofXK");function i(t,e){if(1&t&&(s.kc(0,"div",6),s.kc(1,"div",7),s.Pc(2),s.jc(),s.jc()),2&t){const t=s.vc();s.Tb(2),s.Rc(" ",t.modalTitleText," ")}}function c(t,e){if(1&t){const t=s.lc();s.kc(0,"button",8),s.rc("click",function(){s.Ic(t);return s.vc().modalShouldClose.emit()}),s.uc(),s.kc(1,"svg",9),s.kc(2,"g",10),s.kc(3,"g",11),s.fc(4,"path",12),s.jc(),s.jc(),s.jc(),s.jc()}}const r=["*",[["","footer",""]]];class a{constructor(t){this.renderer=t,this.hideModalTitle=!1,this.modalTitleText="",this.modalShouldClose=new s.t,this.needsBackdrop=!0}ngOnInit(){this.needsBackdrop=!document.documentElement.classList.contains("no-scroll"),this.needsBackdrop&&this.renderer.addClass(document.documentElement,"no-scroll")}ngOnDestroy(){this.needsBackdrop&&this.renderer.removeClass(document.documentElement,"no-scroll")}}a.\u0275fac=function(t){return new(t||a)(s.ec(s.T))},a.\u0275cmp=s.Yb({type:a,selectors:[["app-modal"]],inputs:{hideModalTitle:"hideModalTitle",modalTitleText:"modalTitleText"},outputs:{modalShouldClose:"modalShouldClose"},ngContentSelectors:["*","[footer]"],decls:8,vars:2,consts:[[1,"taro-modal-wrapper"],[1,"taro-modal"],["class","modal-title",4,"ngIf"],["title","Close","class","taro-modal-close",3,"click",4,"ngIf"],[1,"taro-modal-content"],[1,"taro-modal-click-behind",3,"click"],[1,"modal-title"],[1,"title-text"],["title","Close",1,"taro-modal-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 10.781 10.782"],["data-name","Group 620"],["data-name","Symbol 85 \u2013 1"],["data-name","Union 3","d","M5.391 6.371L.98 10.782 0 9.8l4.411-4.409L0 .98.98 0l4.411 4.411L9.8 0l.981.98-4.41 4.411L10.782 9.8l-.981.981z","fill","#424244"]],template:function(t,e){1&t&&(s.zc(r),s.kc(0,"div",0),s.kc(1,"div",1),s.Oc(2,i,3,1,"div",2),s.Oc(3,c,5,0,"button",3),s.kc(4,"div",4),s.yc(5),s.jc(),s.yc(6,1),s.jc(),s.kc(7,"button",5),s.rc("click",function(){return e.modalShouldClose.emit()}),s.jc(),s.jc()),2&t&&(s.Tb(2),s.Ac("ngIf",e.hideModalTitle),s.Tb(1),s.Ac("ngIf",!e.hideModalTitle))},directives:[o.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}.modal-title[_ngcontent-%COMP%]{color:#fff;font-size:1.25em;font-weight:600;padding:.5em}.modal-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{margin-left:1em}.taro-modal[_ngcontent-%COMP%]{position:fixed;z-index:400;width:calc(100% - 2em);height:calc(100% - 2em);left:50%;top:50%;backface-visibility:hidden;transform:scale(1) translate3d(-50%,-50%,0);border:1px solid #afafaf;background-color:#fff;box-shadow:0 3px 20px 5px #0000001f;border-radius:5px;animation:expand .2s ease-in-out;transform-origin:top left;max-width:35rem;max-height:40rem}.taro-modal[_ngcontent-%COMP%]   .taro-modal-content[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;padding:3rem;overflow-y:scroll;-webkit-overflow-scrolling:touch}.taro-modal[_ngcontent-%COMP%]   .taro-modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media screen and (max-width:768px){.taro-modal[_ngcontent-%COMP%]   .taro-modal-content[_ngcontent-%COMP%]{padding:1.5rem}}  .quagga-output-visible .taro-modal{left:0;top:0;transform:scale(1) translateZ(0);max-width:100%;width:100%;max-height:100%;height:100%}@keyframes expand{0%{transform:scale(.6) translate3d(-50%,-20%,0);opacity:0}to{transform:scale(1) translate3d(-50%,-50%,0);opacity:1}}.taro-modal-wrapper[_ngcontent-%COMP%]{position:fixed;top:0;right:0;z-index:400}.taro-modal-close[_ngcontent-%COMP%]{position:absolute;z-index:2;right:0;top:0;width:1.8em;height:1.8em;font-size:1.2em;padding:.55em;border:none;background:none;line-height:0;transition:all .1s ease-in-out}.taro-modal-close[_ngcontent-%COMP%]:hover{padding:.45em;opacity:1}.taro-modal-click-behind[_ngcontent-%COMP%]{background:none;border:none;cursor:auto;display:none}@media screen and (min-width:600px){.no-scroll[_nghost-%COMP%]   .taro-modal-click-behind[_ngcontent-%COMP%], .no-scroll   [_nghost-%COMP%]   .taro-modal-click-behind[_ngcontent-%COMP%]{position:fixed;display:block;width:100%;height:100%;top:0;left:0;cursor:auto}}"]})}}]);