!function(){function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)}function e(t,n){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,n)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,c=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(c,arguments,o)}else n=c.apply(this,arguments);return i(this,n)}}function i(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,c=function(){};return{s:c,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function a(t,e,n){return(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,g(i.key),i)}}function p(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{CycE:function(e,i,r){"use strict";r.r(i),r.d(i,"WorkOrdersModule",function(){return Cn});var l=r("ofXK"),d=r("3Pt+"),u=r("QYs8"),g=r("tyNb"),f=r("Y4NF"),m=r("KP8F"),b=r("NWDC"),k=r("o0su"),v=r("Kj3r"),O=r("pLZG"),C=r("gXUA"),_=r("fXoL"),P=function(){function t(){h(this,t)}return p(t,[{key:"reset",value:function(){this.workOrder=void 0}}]),t}();P.\u0275fac=function(t){return new(t||P)},P.\u0275prov=_.ac({token:P,factory:P.\u0275fac,providedIn:"root"});var M=r("OeDX");function w(t,e){if(1&t){var n=_.lc();_.kc(0,"li",23),_.rc("click",function(){_.Ic(n);var t=e.$implicit;return _.vc().handleSelectedWorkorderClick(t.number,t)}),_.kc(1,"div"),_.kc(2,"span"),_.Pc(3),_.jc(),_.jc(),_.kc(4,"div"),_.kc(5,"span",24),_.Pc(6),_.jc(),_.kc(7,"span",25),_.Pc(8),_.jc(),_.jc(),_.kc(9,"div"),_.kc(10,"span"),_.Pc(11),_.jc(),_.jc(),_.kc(12,"div"),_.kc(13,"span"),_.Pc(14),_.jc(),_.jc(),_.kc(15,"div"),_.kc(16,"span"),_.Pc(17),_.jc(),_.jc(),_.kc(18,"div",26),_.kc(19,"div"),_.uc(),_.kc(20,"svg",27),_.fc(21,"path",28),_.jc(),_.jc(),_.jc(),_.jc()}if(2&t){var i=e.$implicit,c=_.vc();_.Vb("status-",i.status?c.WorkorderStatus[i.status]:"Open",""),_.Tb(3),_.Qc(i.number),_.Tb(3),_.Qc(c.standardFormattedDate(i.dueDate,!0)),_.Tb(2),_.Qc(c.standardFormattedDateNoYear(i.dueDate,!0)),_.Tb(3),_.Qc(i.title),_.Tb(3),_.Qc(c.WorkorderStatus[i.status]),_.Tb(3),_.Qc(c.getUserName(i.assignedToUser))}}function y(t,e){1&t&&(_.kc(0,"div"),_.Pc(1," No workorders found\n"),_.jc())}function x(t,e){if(1&t){var n=_.lc();_.kc(0,"div",29),_.kc(1,"button",30),_.rc("click",function(){return _.Ic(n),_.vc().loadNextWorkorders()}),_.Pc(2,"Load more"),_.jc(),_.jc()}}function S(t,e){1&t&&(_.kc(0,"div"),_.fc(1,"div",31),_.jc())}var j=function(){function t(e,n,i,c,r,o,a){h(this,t),this.formBuilder=e,this.workorderService=n,this.router=i,this.authenticationService=c,this.searchFilterService=r,this.workOrderWizard=o,this.toastService=a,this.offset=0,this.take=10,this.shouldGetNextWorkorders=!0,this.workorders=[],this.standardFormattedDate=f.b,this.standardFormattedDateNoYear=f.c,this.WorkorderStatus=b.b}return p(t,[{key:"ngOnInit",value:function(){this.setPermissionBooleans(),this.searchForm=this.formBuilder.group({text:this.searchFilterService.searchWOTextValue}),this.initiateFreshSearchSettings(),this.formChangeEvent(),this.loadNextWorkorders()}},{key:"formChangeEvent",value:function(){var t=this;this.searchForm.get("text").valueChanges.pipe(Object(v.a)(700),Object(O.a)(function(t){return t.length>=3||0===t.length})).subscribe(function(){t.submitSearch()})}},{key:"initiateFreshSearchSettings",value:function(){this.workorders=[],this.workOrderWizard.reset(),this.offset=0,this.shouldGetNextWorkorders=!0}},{key:"loadNextWorkorders",value:function(){var t=this;this.isLoadingWorkorders=!0,this.workorderService.listWorkorders({offset:this.offset,take:this.take,text:this.searchForm.value.text}).subscribe(function(e){var n;t.searchFilterService.searchWOTextValueCache=t.searchForm.value.text,(n=t.workorders).push.apply(n,s(e)),t.offset+=t.take,e.length<t.take&&(t.shouldGetNextWorkorders=!1),t.isLoadingWorkorders=!1})}},{key:"submitSearch",value:function(){this.initiateFreshSearchSettings(),this.loadNextWorkorders()}},{key:"handleSelectedWorkorderClick",value:function(t,e){this.workOrderWizard.workOrder=e,this.workOrderWizard.workOrder&&this.router.navigate(["work-orders","WO"+t])}},{key:"createWorkOrder",value:function(){this.router.navigate(["work-orders","create-work-order"])}},{key:"setPermissionBooleans",value:function(){var t=this;this.authenticationService.currentUserHasPermission(a({},k.l.WorkOrders,[k.y.CanCreateWorkOrder])).subscribe(function(e){return t.canCreateWorkOrder=e})}},{key:"ngOnDestroy",value:function(){this.searchFilterService.initiateWOSearchFilter()}},{key:"getUserName",value:function(t){return t&&t.includes("-")?t.split("-")[1]:t}},{key:"getWorkOrderCSV",value:function(){var t=this;this.workorderService.getWorkorderCSV().subscribe(function(t){var e=new Blob([t],{type:"text/csv"}),n=new Date(Date.now()).toLocaleString("en-IN",{year:"numeric",month:"numeric",day:"numeric"}),i=window.document.createElement("a");i.href=window.URL.createObjectURL(e),i.download="workorder-".concat(n,".csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},function(e){t.toastService.showErrorToast("Unable to download the work orders CSV file.")})}}]),t}();j.\u0275fac=function(t){return new(t||j)(_.ec(d.d),_.ec(m.a),_.ec(g.c),_.ec(k.d),_.ec(C.a),_.ec(P),_.ec(k.v))},j.\u0275cmp=_.Yb({type:j,selectors:[["app-work-orders"]],decls:48,vars:7,consts:[[3,"customCurrentPageTitle"],[1,"search-filter-form",3,"formGroup"],[1,"input-with-search-wrapper"],["type","text","formControlName","text","placeholder","Search by work order id, title or asset name",1,"form-control","form-control--search-prefix"],[1,"workorder-source-filter"],[1,"btn",3,"disabled","click"],["type","button",1,"btn-download-csv",3,"click"],["viewBox","0 0 15.375 19.188"],["id","Group_1558","data-name","Group 1558","transform","translate(-299.063 -288.813)"],["id","Path_783","data-name","Path 783",1,"cls-1"],["d","M940.063 237.334v19.188h15.375v-14.313l-4.875-4.875h-10.5z","transform","translate(-641 51.479)",1,"cls-3"],["d","M954.438 255.521v-12.898l-4.29-4.289h-9.085v17.187h13.375m1 1h-15.375v-19.187h10.5l4.875 4.875v14.312z","transform","translate(-641 51.479)",1,"cls-4"],["id","Path_784","d","M954.918 242.288h-5.043v-5.079","data-name","Path 784","transform","translate(-640.959 51.604)",1,"cls-2"],["id","Path_785","data-name","Path 785",1,"cls-1"],["d","M943.5 245.334h8.563v7.25H943.5z","transform","translate(-641 51.479)",1,"cls-3"],["d","M951.063 251.584v-5.25H944.5v5.25h6.563m1 1H943.5v-7.25h8.563v7.25z","transform","translate(-641 51.479)",1,"cls-4"],["id","Path_786","d","M946.5 245.084v7.25","data-name","Path 786","transform","translate(-641.064 51.729)",1,"cls-2"],["id","Path_787","d","M952.063 247.834H944","data-name","Path 787","transform","translate(-641 51.479)",1,"cls-2"],["id","Path_788","d","M951.938 250.4h-8.562","data-name","Path 788","transform","translate(-640.875 51.479)",1,"cls-2"],[1,"workorder-list"],[3,"class","click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","text-center",4,"ngIf"],[3,"click"],[1,"desktop-view"],[1,"mobile-view"],[1,"row-toggle"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 8.797 5.194"],["d","M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z"],[1,"text-center"],[1,"btn","btn-link",3,"click"],[1,"spinner"]],template:function(t,e){1&t&&(_.fc(0,"app-section-header",0),_.kc(1,"h1"),_.Pc(2,"Work Orders"),_.jc(),_.kc(3,"form",1),_.kc(4,"div",2),_.fc(5,"input",3),_.jc(),_.kc(6,"div",4),_.kc(7,"button",5),_.rc("click",function(){return e.createWorkOrder()}),_.kc(8,"span"),_.Pc(9,"Create Work Order"),_.jc(),_.jc(),_.jc(),_.kc(10,"div"),_.kc(11,"button",6),_.rc("click",function(){return e.getWorkOrderCSV()}),_.uc(),_.kc(12,"svg",7),_.fc(13,"defs"),_.kc(14,"g",8),_.kc(15,"g",9),_.fc(16,"path",10),_.fc(17,"path",11),_.jc(),_.fc(18,"path",12),_.kc(19,"g",13),_.fc(20,"path",14),_.fc(21,"path",15),_.jc(),_.fc(22,"path",16),_.fc(23,"path",17),_.fc(24,"path",18),_.jc(),_.jc(),_.tc(),_.kc(25,"h2"),_.Pc(26,"CSV"),_.jc(),_.jc(),_.jc(),_.jc(),_.kc(27,"ul",19),_.kc(28,"li"),_.kc(29,"div"),_.kc(30,"span"),_.Pc(31,"id"),_.jc(),_.jc(),_.kc(32,"div"),_.kc(33,"span"),_.Pc(34,"due"),_.jc(),_.jc(),_.kc(35,"div"),_.kc(36,"span"),_.Pc(37,"title"),_.jc(),_.jc(),_.kc(38,"div"),_.kc(39,"span"),_.Pc(40,"status"),_.jc(),_.jc(),_.kc(41,"div"),_.kc(42,"span"),_.Pc(43,"assigned to"),_.jc(),_.jc(),_.jc(),_.Oc(44,w,22,9,"li",20),_.jc(),_.Oc(45,y,2,0,"div",21),_.Oc(46,x,3,0,"div",22),_.Oc(47,S,2,0,"div",21)),2&t&&(_.Ac("customCurrentPageTitle","Work Orders"),_.Tb(3),_.Ac("formGroup",e.searchForm),_.Tb(4),_.Ac("disabled",!e.canCreateWorkOrder),_.Tb(37),_.Ac("ngForOf",e.workorders),_.Tb(1),_.Ac("ngIf",0===e.workorders.length&&!e.isLoadingWorkorders),_.Tb(1),_.Ac("ngIf",e.shouldGetNextWorkorders&&!e.isLoadingWorkorders),_.Tb(1),_.Ac("ngIf",e.isLoadingWorkorders))},directives:[M.a,d.w,d.n,d.g,d.c,d.m,d.f,l.j,l.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}h1[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-top:-.8em;margin-bottom:1em}.search-filter-form[_ngcontent-%COMP%]{display:flex;padding-bottom:1em}.search-filter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#424244;font-weight:200}.search-filter-form[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:default}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]{width:100%}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:75%}.search-filter-form[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{width:360px;text-align:right}@media screen and (min-width:768px) and (max-width:800px){.search-filter-form[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{width:425px;text-align:right}}@media screen and (min-width:320px) and (max-width:360px){.search-filter-form[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{float:left;text-align:left;width:auto}}@media screen and (min-width:361px) and (max-width:420px){.search-filter-form[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{float:left;text-align:left;width:86%}}@media screen and (max-width:610px){.search-filter-form[_ngcontent-%COMP%]{display:block}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%], .search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{padding-top:1em;width:100%}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.workorder-list[_ngcontent-%COMP%]{margin-top:.6em;padding:0;list-style:none}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:stretch;background-color:#fff;transition:all .2s ease-in-out;margin-bottom:.15em;position:relative;cursor:pointer;padding:1em .2em}.workorder-list[_ngcontent-%COMP%]   li.status-Complete[_ngcontent-%COMP%]{background-color:#f2f2f2}.workorder-list[_ngcontent-%COMP%]   li.status-Complete[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.05)}.workorder-list[_ngcontent-%COMP%]   li.status-Complete[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.workorder-list[_ngcontent-%COMP%]   li.status-In-progress[_ngcontent-%COMP%]{background-color:#d1decd}.workorder-list[_ngcontent-%COMP%]   li.status-In-progress[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#a8b7a2}.workorder-list[_ngcontent-%COMP%]   li.status-Open[_ngcontent-%COMP%]{background-color:#efe6d9}.workorder-list[_ngcontent-%COMP%]   li.status-Open[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#c9bea0}.workorder-list[_ngcontent-%COMP%]   li.status-Closed[_ngcontent-%COMP%]{background-color:#f8f8f8}.workorder-list[_ngcontent-%COMP%]   li.status-Closed[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:rgba(44,44,44,.05)}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;border-right:1px solid rgba(0,0,0,.22);display:flex;align-items:center;padding:.7em .8em}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:4.5em}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:9em}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   .desktop-view[_ngcontent-%COMP%]{display:block}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   .mobile-view[_ngcontent-%COMP%]{display:none}@media screen and (max-width:415px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:5em}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   .desktop-view[_ngcontent-%COMP%]{display:none}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   .mobile-view[_ngcontent-%COMP%]{display:block}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){width:50%;word-break:break-all}@media screen and (min-width:320px) and (max-width:767px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){width:40%}}@media screen and (min-width:768px) and (max-width:800px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){width:30%}}@media screen and (max-width:415px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){display:none}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){width:8em;word-break:break-all}@media screen and (max-width:415px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){width:7em}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){width:25%;word-break:break-all;border-right:none}@media screen and (min-width:320px) and (max-width:360px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){width:26%;padding:.7em .3em}}@media screen and (min-width:361px) and (max-width:575px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){width:35%}}@media screen and (min-width:768px) and (max-width:800px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){width:23%}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(n+6){border-right:none}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;padding:1.6em 1em;top:0;right:0;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);height:100%;display:flex;align-items:center}@media screen and (max-width:610px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{padding:1.6em .7em}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(-90deg)}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-transform:uppercase;font-weight:900;cursor:auto;padding:0}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{border-right:none}@media screen and (max-width:610px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{display:block}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:nth-child(4){width:7em}}@media screen and (max-width:415px){.workorder-list[_ngcontent-%COMP%]{font-size:.85em}}@media screen and (max-width:768px){.form-control[_ngcontent-%COMP%]{margin-bottom:1em}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:1rem}button.btn-download-csv[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:.25rem}}@media screen and (min-width:361px) and (max-width:420px){.btn[_ngcontent-%COMP%]{width:100%}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:.5rem}}button.btn-download-csv[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-end;display:flex;color:#000!important;border:none;margin-left:20px;margin-top:6px;background:none!important}@media screen and (min-width:320px) and (max-width:360px){button.btn-download-csv[_ngcontent-%COMP%]{margin-top:-9px;padding-left:31px}}@media screen and (min-width:361px) and (max-width:420px){button.btn-download-csv[_ngcontent-%COMP%]{padding-left:18px}}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.4rem;height:auto}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-1[_ngcontent-%COMP%], button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-2[_ngcontent-%COMP%]{fill:none}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-2[_ngcontent-%COMP%]{stroke:#424244}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-3[_ngcontent-%COMP%], button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-4[_ngcontent-%COMP%]{stroke:none}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-4[_ngcontent-%COMP%]{fill:#424244}button.btn-download-csv[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.875em;font-weight:600;margin-bottom:.5em}button.btn-download-csv[_ngcontent-%COMP%]:hover{text-decoration:underline}button.btn-download-csv[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.025)}@media screen and (min-width:800px){  .input-with-search-wrapper:before{top:47%!important}}"]});var I=r("pA2v"),A=r("2Vo4"),T=r("lJxs"),F=r("svQ6"),W=r("ZaN7"),D=r("iadO"),L=r("kmnG"),E=r("Xi4i"),R=r("87/D");function U(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.jc()),2&t){var n=_.vc().$implicit;_.Tb(1),_.Qc(n.name)}}function V(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.jc()),2&t){var n=_.vc().index;_.Tb(1),_.Rc("file-",n,"")}}function N(t,e){if(1&t){var n=_.lc();_.kc(0,"div",2),_.fc(1,"div",3),_.kc(2,"div",4),_.kc(3,"a",5),_.rc("click",function(){_.Ic(n);var t=e.$implicit;return _.vc().handleOpenFile(t)}),_.Oc(4,U,2,1,"span",6),_.Oc(5,V,2,1,"span",6),_.jc(),_.jc(),_.kc(6,"div",7),_.kc(7,"button",8),_.rc("click",function(){_.Ic(n);var t=e.index;return _.vc().handleDeleteItem(t)}),_.uc(),_.kc(8,"svg",9),_.fc(9,"defs"),_.fc(10,"path",10),_.fc(11,"path",11),_.fc(12,"path",12),_.fc(13,"path",13),_.fc(14,"path",14),_.jc(),_.jc(),_.jc(),_.jc()}if(2&t){var i=e.$implicit,c=e.index,r=_.vc();_.Ac("ngClass",r.fileCollection.length>1?"rows-"+r.fileCollection.length+"-file-"+c:""),_.Tb(4),_.Ac("ngIf",i.name),_.Tb(1),_.Ac("ngIf",!i.name),_.Tb(2),_.Ac("disabled",!r.isEditable)}}var z=function(){function t(){h(this,t),this.deletedFileIndex=new _.t}return p(t,[{key:"ngOnInit",value:function(){}},{key:"handleOpenFile",value:function(t){var e;e=t.file?URL.createObjectURL(t.file):URL.createObjectURL(t),window.open(e,"_blank")}},{key:"ngOnChanges",value:function(t){var e=this;t.attachedFileCollection&&this.attachedFileCollection&&this.attachedFileCollection.subscribe(function(t){setTimeout(function(){e.fileCollection=t})})}},{key:"handleDeleteItem",value:function(t){this.deletedFileIndex.emit(t)}}]),t}();function q(t,e){if(1&t){var n=_.lc();_.kc(0,"table",2),_.kc(1,"tbody"),_.kc(2,"tr"),_.kc(3,"td",3),_.kc(4,"span"),_.Pc(5),_.jc(),_.jc(),_.kc(6,"td",4),_.kc(7,"span"),_.Pc(8),_.jc(),_.jc(),_.kc(9,"td",5),_.kc(10,"div",6),_.kc(11,"div",7),_.kc(12,"label",8),_.kc(13,"input",9),_.rc("change",function(t){_.Ic(n);var e=_.vc();return e.handleSelectChecklistTask(t,e.taskItem)}),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc()}if(2&t){var i=_.vc();_.Tb(5),_.Qc(i.taskItem.sequenceNumber),_.Tb(3),_.Qc(i.taskItem.description),_.Tb(5),_.Ac("disabled",i.isTaskEditable)("checked",i.taskItem.isCompleted)}}z.\u0275fac=function(t){return new(t||z)},z.\u0275cmp=_.Yb({type:z,selectors:[["app-view-attached-files"]],inputs:{attachedFileCollection:"attachedFileCollection",isEditable:"isEditable"},outputs:{deletedFileIndex:"deletedFileIndex"},features:[_.Rb],decls:2,vars:1,consts:[[1,"row","d-flex","file-attach"],["class","file-details",3,"ngClass",4,"ngFor","ngForOf"],[1,"file-details",3,"ngClass"],[1,"col-4","blank-color"],[1,"file-link","col-6"],["target","_blank",3,"click"],[4,"ngIf"],[1,"col-2"],[1,"delete-btn",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 14 18"],["d","M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z","transform","translate(.2 1.267)",1,"cls-1"],["d","M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z",1,"cls-1"],["d","M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z","transform","translate(1.567 2)",1,"cls-1"],["d","M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z","transform","translate(.9 1.967)",1,"cls-1"],["d","M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z","transform","translate(2.125 1.991)",1,"cls-1"]],template:function(t,e){1&t&&(_.kc(0,"div",0),_.Oc(1,N,15,4,"div",1),_.jc()),2&t&&(_.Tb(1),_.Ac("ngForOf",e.fileCollection))},directives:[l.j,l.i,l.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}.file-details[_ngcontent-%COMP%]{display:flex;padding-left:1.75em}.file-details[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3), .file-details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){background-color:#f2f2f2;padding:.6em 0 0 .8em;border:1px solid #ced4da;border-radius:.25em}.file-details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-right-width:0;border-right-color:#9f5858;border-top-right-radius:0;border-bottom-right-radius:0}.file-details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-left-width:0;border-left-color:#f2f2f2;border-top-left-radius:0;border-bottom-left-radius:0}.file-details[_ngcontent-%COMP%]:first-child{border-top-width:0;padding-left:1.75em}.rows-2-file-0[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-bottom-width:0;border-bottom-left-radius:0}.rows-2-file-0[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-bottom-width:0;border-bottom-right-radius:0}.rows-2-file-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;border-top-left-radius:0}.rows-2-file-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-top-width:0;border-top-right-radius:0}.rows-2-file-1[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;padding-left:1.75em}.rows-3-file-0[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-bottom-width:0;border-bottom-left-radius:0}.rows-3-file-0[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-bottom-width:0;border-bottom-right-radius:0}.rows-3-file-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;border-top-left-radius:0;border-bottom-width:0;border-bottom-left-radius:0}.rows-3-file-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-top-width:0;border-top-right-radius:0;border-bottom-width:0;border-bottom-right-radius:0}.rows-3-file-1[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;padding-left:1.75em}.rows-3-file-2[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;border-top-left-radius:0}.rows-3-file-2[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-top-width:0;border-top-right-radius:0}.rows-3-file-2[_ngcontent-%COMP%]:nth-child(3){border-top-width:0;padding-left:1.75em}.file-attach[_ngcontent-%COMP%]{display:flex}.file-attach[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}.file-text[_ngcontent-%COMP%]{margin-left:1em}.delete-btn[_ngcontent-%COMP%]{border:none;background:transparent;padding-bottom:.25em;float:right;margin-right:11px}.delete-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;transform:scale(1)}.delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}.delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.125)}.delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:default}.file-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-size:.85em;display:inline-block;white-space:nowrap;width:95%;text-overflow:ellipsis;overflow:hidden!important;padding-top:.4em 0 .2em 0}"]});var B=function(t){return{"addtask-wrapper":t}},Q=function(){function t(){h(this,t),this.taskSelected=new _.t}return p(t,[{key:"ngOnInit",value:function(){}},{key:"handleSelectChecklistTask",value:function(t,e){e.isCompleted=!e.isCompleted,t.currentTarget.checked=e.isCompleted,this.taskSelected.emit()}}]),t}();Q.\u0275fac=function(t){return new(t||Q)},Q.\u0275cmp=_.Yb({type:Q,selectors:[["app-checklist-task-item"]],inputs:{taskItem:"taskItem",firstItem:"firstItem",isTaskEditable:"isTaskEditable"},outputs:{taskSelected:"taskSelected"},decls:2,vars:4,consts:[[3,"ngClass"],["width","100%",4,"ngIf"],["width","100%"],[1,"task-id-cell"],[1,"task-description-cell"],[1,"task-iscompleted-cell"],[1,"form-group"],[1,"radio","custom"],["for","includeObsolete",1,"custom-control-label","label-align"],["type","checkbox",1,"custom-control-input",3,"disabled","checked","change"]],template:function(t,e){1&t&&(_.fc(0,"div",0),_.Oc(1,q,14,4,"table",1)),2&t&&(_.Ac("ngClass",_.Ec(2,B,e.firstItem)),_.Tb(1),_.Ac("ngIf",e.taskItem))},directives:[l.i,l.k],styles:['@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}[_nghost-%COMP%]{display:table-row;background-color:#f2f2f2;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;height:5em;border-bottom:2px solid #fff;position:relative;background:#f2f2f2;padding:.5em 0}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:center;width:5em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:88%;padding-left:1em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){font-weight:600;width:5em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   input[_ngcontent-%COMP%]{width:18px;margin-top:22px;height:18px}@media screen and (max-width:768px){[_nghost-%COMP%]{display:flex;align-items:center;border-bottom:none}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:auto;text-align:center;vertical-align:middle;height:5em;border-bottom:2px solid #fff;position:relative;background:#f2f2f2}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:center;width:3em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:80%;padding-left:.5em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){font-weight:600;width:3em;padding-right:.4em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   input[_ngcontent-%COMP%]{width:15px;height:15px}}.task-id-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding:.5em}.task-description-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-right:1px solid #c3bbbb;border-left:1px solid #c3bbbb;display:block;padding:.5em}.addtask-wrapper[_ngcontent-%COMP%]{box-shadow:1px 4px 3px hsla(0,1%,86%,.75);margin-top:-6px;width:100%;display:block;clear:both;float:left;height:6px;position:absolute;z-index:9;top:0}.custom[_ngcontent-%COMP%]{margin-bottom:16px}.custom.checkbox[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:relative;cursor:pointer;padding-left:20px}.custom[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:relative;margin-left:-1;cursor:pointer}.custom[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{content:"";position:absolute;left:-.5;width:21px;height:19px;background:#fff;border:1px solid #938e8e;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%]:before{transition:transform .4s cubic-bezier(.45,1.8,.5,.75);transform:rotate(-45deg) scale(0);content:"";position:absolute;left:4px;top:3px;z-index:1;width:13px;height:8px;border-color:#5e5b5b;border-style:none none solid solid;border-width:3px}input[type=checkbox][_ngcontent-%COMP%]:checked:before{transform:rotate(-45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%]:after{border-radius:2px}']});var G=r("oeRM"),K=r("eQ4o"),$=["fileUploadInput"];function Z(t,e){1&t&&(_.kc(0,"div"),_.fc(1,"div",2),_.jc())}function H(t,e){1&t&&_.fc(0,"app-loading-modal")}function Y(t,e){1&t&&(_.kc(0,"div",62),_.fc(1,"div",63),_.kc(2,"div",64),_.Pc(3," You must specify title "),_.jc(),_.jc())}function X(t,e){1&t&&(_.kc(0,"div",65),_.fc(1,"div",63),_.kc(2,"div",66),_.Pc(3," You must specify description "),_.jc(),_.jc())}function J(t,e){if(1&t&&(_.kc(0,"option",67),_.Pc(1),_.jc()),2&t){var n=e.$implicit,i=e.index,c=_.vc(2);_.Ac("value",c.workOrderStatusValues[i])("selected",c.workOrderStatusValues[i]===c.extendedWorkOrder.status),_.Tb(1),_.Rc(" ",c.WorkOrderStatus[n]," ")}}function tt(t,e){1&t&&_.fc(0,"div",68)}function et(t,e){1&t&&_.fc(0,"div",68)}function nt(t,e){1&t&&_.fc(0,"div",68)}function it(t,e){if(1&t&&(_.kc(0,"option",69),_.Pc(1),_.jc()),2&t){var n=e.$implicit;_.Ac("value",n.id),_.Tb(1),_.Rc("",n.name," ")}}function ct(t,e){if(1&t&&(_.kc(0,"option",67),_.Pc(1),_.jc()),2&t){var n=e.$implicit,i=_.vc(2);_.Ac("value",n)("selected",n===i.extendedWorkOrder.priority),_.Tb(1),_.Rc(" ",i.priorityString(n)," ")}}function rt(t,e){1&t&&(_.kc(0,"div",80),_.Pc(1," Allowed file types are doc, docx, xls, xlsx, csv, pdf, jpeg, png, bmp. Max file size allowed 2 MB. "),_.jc())}function ot(t,e){if(1&t&&(_.kc(0,"div",80),_.Pc(1),_.jc()),2&t){var n=_.vc(3);_.Tb(1),_.Rc(" Too many files selected. Total number of files cannot exceed ",n.filesLimit,". ")}}function at(t,e){1&t&&(_.kc(0,"span"),_.Pc(1,"No file selected"),_.jc())}function st(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.jc()),2&t){var n=_.vc(3);_.Tb(1),_.Rc("",n.fileCount," file added")}}function lt(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.jc()),2&t){var n=_.vc(3);_.Tb(1),_.Rc("",n.fileCount," files added")}}function dt(t,e){if(1&t){var n=_.lc();_.uc(),_.tc(),_.kc(0,"form",70),_.kc(1,"div",26),_.kc(2,"div",71,72),_.Oc(4,rt,2,0,"div",73),_.Oc(5,ot,2,1,"div",73),_.jc(),_.kc(6,"div",74),_.kc(7,"div",75),_.kc(8,"label"),_.Oc(9,at,2,0,"span",1),_.Oc(10,st,2,1,"span",1),_.Oc(11,lt,2,1,"span",1),_.jc(),_.jc(),_.kc(12,"div",76),_.kc(13,"button",77),_.rc("click",function(){return _.Ic(n),_.vc(2).launchFileInput()}),_.Pc(14,"Choose file"),_.jc(),_.jc(),_.kc(15,"input",78,79),_.rc("change",function(){return _.Ic(n),_.vc(2).handleFileInputChange()}),_.jc(),_.jc(),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Ac("formGroup",i.fileUploadForm),_.Tb(4),_.Ac("ngIf",i.fileUploadForm.controls.files.hasError("acceptableFileType")||i.fileUploadForm.controls.files.hasError("acceptableFileSize")),_.Tb(1),_.Ac("ngIf",i.fileUploadForm.controls.files.hasError("acceptableNumberOfFiles")&&i.fileCount>3),_.Tb(4),_.Ac("ngIf",0===i.fileCount),_.Tb(1),_.Ac("ngIf",1===i.fileCount),_.Tb(1),_.Ac("ngIf",i.fileCount>1),_.Tb(2),_.Ac("disabled",i.fileCount>2||!i.isEditable||i.fileUploadForm.controls.files.hasError("acceptableFileType")||i.fileUploadForm.controls.files.hasError("acceptableFileSize")),_.Tb(2),_.Ac("readonly",!i.isEditable)}}function ht(t,e){if(1&t){var n=_.lc();_.uc(),_.tc(),_.kc(0,"div",81),_.kc(1,"app-view-attached-files",82),_.rc("deletedFileIndex",function(t){return _.Ic(n),_.vc(2).handleDeleteFileAttached(t)}),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Tb(1),_.Ac("attachedFileCollection",i.attachedFileCollection)("isEditable",i.isEditable)}}function ut(t,e){1&t&&(_.uc(),_.tc(),_.fc(0,"div",83))}function pt(t,e){1&t&&(_.uc(),_.tc(),_.fc(0,"div",83))}function gt(t,e){1&t&&(_.uc(),_.tc(),_.fc(0,"div",83))}function ft(t,e){1&t&&(_.kc(0,"div",80),_.Pc(1," You must specify an asset "),_.jc())}function mt(t,e){if(1&t&&(_.uc(),_.tc(),_.kc(0,"div",21),_.kc(1,"div",84),_.kc(2,"div",85),_.kc(3,"label",24),_.Pc(4,"Asset"),_.jc(),_.kc(5,"div",25),_.kc(6,"div",26),_.kc(7,"div",86),_.Oc(8,ft,2,0,"div",73),_.jc(),_.jc(),_.fc(9,"input",87),_.jc(),_.jc(),_.jc(),_.kc(10,"div",84),_.kc(11,"div",85),_.kc(12,"label",24),_.Pc(13,"Location"),_.jc(),_.kc(14,"div",88),_.fc(15,"input",89),_.uc(),_.kc(16,"svg",90),_.kc(17,"g",91),_.fc(18,"path",92),_.fc(19,"path",93),_.fc(20,"path",94),_.fc(21,"path",95),_.fc(22,"path",96),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc()),2&t){var n=_.vc(2);_.Tb(8),_.Ac("ngIf",!n.isAssetAvailable)}}function bt(t,e){if(1&t){var n=_.lc();_.kc(0,"div",21),_.kc(1,"div",84),_.kc(2,"div",85),_.kc(3,"label",24),_.Pc(4,"Asset"),_.jc(),_.kc(5,"div",25),_.fc(6,"input",87),_.jc(),_.jc(),_.jc(),_.kc(7,"div",84),_.kc(8,"div",85),_.kc(9,"label",24),_.Pc(10,"Location"),_.jc(),_.kc(11,"div",88),_.fc(12,"input",97),_.kc(13,"button",98),_.rc("click",function(){_.Ic(n);var t=_.vc().index;return _.vc(2).handleDeleteItem(t)}),_.uc(),_.kc(14,"svg",99),_.kc(15,"g",91),_.fc(16,"path",92),_.fc(17,"path",93),_.fc(18,"path",94),_.fc(19,"path",95),_.fc(20,"path",96),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc()}if(2&t){var i=_.vc().$implicit,c=_.vc(2);_.Tb(6),_.Ac("value",i.assetId+" - "+i.name),_.Tb(6),_.Ac("value",i.location),_.Tb(1),_.Ac("disabled",!c.isEditable)}}function kt(t,e){if(1&t&&(_.uc(),_.tc(),_.kc(0,"div"),_.Oc(1,bt,21,3,"div",50),_.jc()),2&t){var n=e.$implicit;_.Tb(1),_.Ac("ngIf",!n.isDelete)}}var vt=function(t){return{"last-item":t}};function Ot(t,e){if(1&t){var n=_.lc();_.kc(0,"div"),_.kc(1,"app-checklist-task-item",100),_.rc("taskSelected",function(t){return _.Ic(n),_.vc(3).handleSelectedChecklistTask(t)}),_.jc(),_.jc()}if(2&t){var i=e.$implicit,c=e.first,r=e.last,o=_.vc(3);_.Tb(1),_.Ac("taskItem",i)("firstItem",c)("isTaskEditable",!o.isEditable)("ngClass",_.Ec(4,vt,r))}}function Ct(t,e){if(1&t&&(_.kc(0,"div"),_.kc(1,"app-accordion",57),_.Oc(2,Ot,2,6,"div",51),_.jc(),_.jc()),2&t){var n=e.$implicit;_.Tb(1),_.Ac("titleDetails","Checklist  "+n.numberWithPrefix+" - "+n.name),_.Tb(1),_.Ac("ngForOf",n.task)}}function _t(t,e){if(1&t){var n=_.lc();_.kc(0,"span"),_.Pc(1),_.kc(2,"a",101),_.rc("click",function(){_.Ic(n);var t=_.vc().$implicit;return _.vc(2).handleViewMoreClick(t)}),_.Pc(3,"View More"),_.jc(),_.jc()}if(2&t){var i=_.vc().$implicit,c=_.vc(2);_.Tb(1),_.Rc("",i.serviceDetail.substring(0,c.textMaxLength-10),"... ")}}function Pt(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.jc()),2&t){var n=_.vc().$implicit;_.Tb(1),_.Qc(n.serviceDetail)}}function Mt(t,e){if(1&t&&(_.kc(0,"tr"),_.kc(1,"td"),_.Pc(2),_.jc(),_.kc(3,"td"),_.Pc(4),_.jc(),_.kc(5,"td"),_.Oc(6,_t,4,1,"span",1),_.Oc(7,Pt,2,1,"span",1),_.jc(),_.jc()),2&t){var n=e.$implicit,i=_.vc(2);_.Tb(2),_.Qc(i.getUserName(n.userId)),_.Tb(2),_.Qc(i.standardFormattedDate(n.createdTimestampUtc,!0)),_.Tb(2),_.Ac("ngIf",n.serviceDetail.length>i.textMaxLength),_.Tb(1),_.Ac("ngIf",n.serviceDetail.length<=i.textMaxLength)}}function wt(t,e){if(1&t){var n=_.lc();_.kc(0,"span",110),_.rc("click",function(){_.Ic(n);var t=_.vc(3);return t.enableServiceTextarea=!t.enableServiceTextarea,t.isShowEditIcon=!1}),_.uc(),_.kc(1,"svg",111),_.kc(2,"g",112),_.fc(3,"path",113),_.fc(4,"path",114),_.jc(),_.jc(),_.jc()}}function yt(t,e){if(1&t){var n=_.lc();_.ic(0),_.kc(1,"button",115),_.rc("click",function(){return _.Ic(n),_.vc(3).handleServiceSaveButton()}),_.kc(2,"span"),_.Pc(3,"Save"),_.jc(),_.jc(),_.hc()}if(2&t){var i=_.vc(3);_.Tb(1),_.Ac("disabled",i.isSubmitDisabled)}}function xt(t,e){if(1&t){var n=_.lc();_.kc(0,"app-modal",102),_.rc("modalShouldClose",function(){return _.Ic(n),_.vc(2).handleDetailsModalClose()})("contextmenu",function(t){return _.Ic(n),_.vc(2).disableRightClick(t)}),_.kc(1,"header",21),_.kc(2,"div",25),_.kc(3,"strong"),_.Pc(4),_.jc(),_.jc(),_.kc(5,"div",103),_.Pc(6),_.jc(),_.jc(),_.kc(7,"div",104),_.kc(8,"div",21),_.kc(9,"div",105),_.Pc(10),_.jc(),_.kc(11,"div",106),_.Oc(12,wt,5,0,"span",107),_.jc(),_.jc(),_.kc(13,"textarea",108),_.rc("ngModelChange",function(t){return _.Ic(n),_.vc(2).selectedWorkOrderServiceDetails.serviceDetail=t})("input",function(){return _.Ic(n),_.vc(2).handleTextAreaInput()}),_.Pc(14,"        "),_.jc(),_.jc(),_.kc(15,"div",109),_.Oc(16,yt,4,1,"ng-container",1),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Tb(4),_.Rc("Service Details"," (#"+i.extendedWorkOrder.number+")",""),_.Tb(2),_.Rc(" ",i.getUserName(i.selectedWorkOrderServiceDetails.userId)," "),_.Tb(4),_.Rc(" ",i.standardFormattedDate(i.selectedWorkOrderServiceDetails.createdTimestampUtc,!0)," "),_.Tb(2),_.Ac("ngIf",i.isShowEditIcon),_.Tb(1),_.Wb("modal-details-textarea-focus",i.enableServiceTextarea),_.Ac("ngModel",i.selectedWorkOrderServiceDetails.serviceDetail)("readOnly",!i.enableServiceTextarea),_.Tb(3),_.Ac("ngIf",i.enableServiceTextarea)}}function St(t,e){if(1&t){var n=_.lc();_.kc(0,"app-modal",102),_.rc("modalShouldClose",function(){return _.Ic(n),_.vc(2).handleDetailsModalClose()})("contextmenu",function(t){return _.Ic(n),_.vc(2).disableRightClick(t)}),_.kc(1,"app-pick-assets",116),_.rc("addedAssets",function(t){return _.Ic(n),_.vc(2).handleAddedWorkOrderAssets(t)}),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Tb(1),_.Ac("existingAssets",i.extendedWorkOrder.workOrderAssets)}}function jt(t,e){if(1&t){var n=_.lc();_.kc(0,"div",117),_.kc(1,"button",118),_.rc("click",function(){return _.Ic(n),_.vc(2).updateWorkOrder()}),_.kc(2,"span"),_.Pc(3,"Save all changes"),_.jc(),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Wb("visible",!i.isUpdatingWorkOrder&&i.showSaveButton)}}function It(t,e){if(1&t){var n=_.lc();_.kc(0,"article"),_.kc(1,"header"),_.kc(2,"h1"),_.Pc(3),_.jc(),_.jc(),_.kc(4,"form",3),_.kc(5,"div",4),_.kc(6,"div",5),_.kc(7,"div",6),_.kc(8,"button",7),_.rc("click",function(){_.Ic(n);var t=_.vc();return t.handlesPickSpares(t.workOrderNumber)}),_.Pc(9,"Pick Spares"),_.jc(),_.jc(),_.fc(10,"div",8),_.jc(),_.Oc(11,Y,4,0,"div",9),_.kc(12,"div",10),_.kc(13,"div",11),_.kc(14,"label"),_.Pc(15,"Title"),_.jc(),_.jc(),_.kc(16,"div",12),_.kc(17,"input",13),_.rc("paste",function(t){return _.Ic(n),_.vc().handleClipboard(t)}),_.jc(),_.jc(),_.fc(18,"div",14),_.kc(19,"div",15),_.kc(20,"div",6),_.kc(21,"button",16),_.rc("click",function(){_.Ic(n);var t=_.vc();return t.handlesPickSpares(t.workOrderNumber,t.workOrderStatus)}),_.Pc(22,"Pick Spares"),_.jc(),_.jc(),_.jc(),_.jc(),_.Oc(23,X,4,0,"div",17),_.kc(24,"div",18),_.kc(25,"div",11),_.kc(26,"label"),_.Pc(27,"Description"),_.jc(),_.jc(),_.kc(28,"div",19),_.fc(29,"textarea",20),_.jc(),_.jc(),_.kc(30,"div",21),_.kc(31,"div",22),_.kc(32,"div",23),_.kc(33,"label",24),_.Pc(34,"Reported On"),_.jc(),_.kc(35,"div",25),_.kc(36,"div",26),_.kc(37,"div",27),_.fc(38,"input",28),_.fc(39,"mat-datepicker-toggle",29),_.fc(40,"mat-datepicker",null,30),_.jc(),_.jc(),_.jc(),_.jc(),_.kc(42,"div",23),_.kc(43,"label",24),_.Pc(44,"Due On"),_.jc(),_.kc(45,"div",25),_.kc(46,"div",26),_.kc(47,"div",27),_.fc(48,"input",31),_.fc(49,"mat-datepicker-toggle",29),_.fc(50,"mat-datepicker",null,32),_.jc(),_.jc(),_.jc(),_.jc(),_.kc(52,"div",23),_.kc(53,"label",24),_.Pc(54,"Assigned To"),_.jc(),_.kc(55,"div",25),_.fc(56,"input",33),_.kc(57,"app-list-users",34),_.rc("selectedUserId",function(t){return _.Ic(n),_.vc().selectedUserId(t)}),_.jc(),_.jc(),_.jc(),_.kc(58,"div",23),_.kc(59,"label",24),_.Pc(60,"Status"),_.jc(),_.kc(61,"div",25),_.kc(62,"select",35),_.Oc(63,J,2,3,"option",36),_.jc(),_.jc(),_.jc(),_.Oc(64,tt,1,0,"div",37),_.Oc(65,et,1,0,"div",37),_.Oc(66,nt,1,0,"div",37),_.jc(),_.kc(67,"div",22),_.kc(68,"div",23),_.kc(69,"label",24),_.Pc(70,"Category"),_.jc(),_.kc(71,"div",25),_.kc(72,"select",38),_.Oc(73,it,2,2,"option",39),_.jc(),_.jc(),_.jc(),_.kc(74,"div",23),_.kc(75,"label",24),_.Pc(76,"Priority"),_.jc(),_.kc(77,"div",25),_.kc(78,"select",40),_.Oc(79,ct,2,3,"option",36),_.jc(),_.jc(),_.jc(),_.kc(80,"div",41),_.kc(81,"label",42),_.Pc(82,"Attachments "),_.kc(83,"span",43),_.uc(),_.kc(84,"svg",44),_.fc(85,"path",45),_.kc(86,"g"),_.fc(87,"path",46),_.jc(),_.jc(),_.jc(),_.jc(),_.Oc(88,dt,17,8,"form",47),_.jc(),_.Oc(89,ht,2,2,"div",48),_.Oc(90,ut,1,0,"div",49),_.Oc(91,pt,1,0,"div",49),_.Oc(92,gt,1,0,"div",49),_.jc(),_.jc(),_.Oc(93,mt,23,1,"div",50),_.Oc(94,kt,2,1,"div",51),_.tc(),_.kc(95,"div",52),_.kc(96,"button",53),_.rc("click",function(){return _.Ic(n),_.vc().handlePickAssets()}),_.Pc(97,"Add Asset"),_.jc(),_.jc(),_.jc(),_.kc(98,"div",4),_.kc(99,"table"),_.kc(100,"tbody"),_.kc(101,"tr"),_.Oc(102,Ct,3,2,"div",51),_.jc(),_.jc(),_.jc(),_.jc(),_.kc(103,"div",4),_.kc(104,"div",52),_.kc(105,"button",54),_.Pc(106,"Add Checklist"),_.jc(),_.jc(),_.jc(),_.kc(107,"div",55),_.kc(108,"div",11),_.kc(109,"label"),_.Pc(110,"Service Details"),_.jc(),_.jc(),_.kc(111,"div",19),_.fc(112,"textarea",56),_.jc(),_.jc(),_.jc(),_.kc(113,"div",4),_.kc(114,"app-accordion",57),_.kc(115,"div",58),_.kc(116,"div",59),_.kc(117,"table"),_.kc(118,"thead"),_.kc(119,"tr"),_.kc(120,"td"),_.Pc(121,"User ID"),_.jc(),_.kc(122,"td"),_.Pc(123,"Date"),_.jc(),_.kc(124,"td"),_.Pc(125,"Details"),_.jc(),_.jc(),_.jc(),_.kc(126,"tbody"),_.Oc(127,Mt,8,4,"tr",51),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.Oc(128,xt,17,9,"app-modal",60),_.jc(),_.Oc(129,St,2,1,"app-modal",60),_.kc(130,"footer"),_.Oc(131,jt,4,2,"div",61),_.jc(),_.jc()}if(2&t){var i=_.Gc(41),c=_.Gc(51),r=_.vc();_.Tb(3),_.Qc("#WO"+r.workOrderNumber),_.Tb(1),_.Ac("formGroup",r.form),_.Tb(7),_.Ac("ngIf",r.submitAttempted&&r.form.controls.title.errors),_.Tb(12),_.Ac("ngIf",r.submitAttempted&&r.form.controls.description.errors),_.Tb(6),_.Ac("readOnly",!r.isEditable),_.Tb(9),_.Ac("matDatepicker",i),_.Tb(1),_.Ac("for",i),_.Tb(9),_.Ac("matDatepicker",c),_.Tb(1),_.Ac("for",c),_.Tb(7),_.Ac("readOnly",!r.isEditable),_.Tb(1),_.Ac("isEditable",r.isEditable)("userName",r.extendedWorkOrder.assignedToUser),_.Tb(6),_.Ac("ngForOf",r.workOrderStatusValues),_.Tb(1),_.Ac("ngIf",r.fileSrcCollection&&r.fileSrcCollection.length>1),_.Tb(1),_.Ac("ngIf",r.fileSrcCollection&&r.fileSrcCollection.length>1),_.Tb(1),_.Ac("ngIf",r.fileSrcCollection&&r.fileSrcCollection.length>1),_.Tb(7),_.Ac("ngForOf",r.workOrderCategories),_.Tb(6),_.Ac("ngForOf",r.workOrderPriorities),_.Tb(9),_.Ac("ngIf",r.fileUploadForm),_.Tb(1),_.Ac("ngIf",r.fileSrcCollection&&r.fileSrcCollection.length>0),_.Tb(1),_.Ac("ngIf",r.fileSrcCollection&&r.fileSrcCollection.length>1),_.Tb(1),_.Ac("ngIf",r.fileSrcCollection&&r.fileSrcCollection.length>1),_.Tb(1),_.Ac("ngIf",r.fileSrcCollection&&r.fileSrcCollection.length>1),_.Tb(1),_.Ac("ngIf",!r.extendedWorkOrder.workOrderAssets||0===r.extendedWorkOrder.workOrderAssets.length||!r.isAssetAvailable),_.Tb(1),_.Ac("ngForOf",r.extendedWorkOrder.workOrderAssets),_.Tb(2),_.Ac("disabled",!r.isEditable),_.Tb(6),_.Ac("ngForOf",r.extendedWorkOrder.workOrderChecklists),_.Tb(10),_.Ac("readOnly",!r.isEditable),_.Tb(2),_.Ac("titleDetails","Order Service History"),_.Tb(13),_.Ac("ngForOf",r.workOrderServiceDetails),_.Tb(1),_.Ac("ngIf",r.detailsModalVisible),_.Tb(1),_.Ac("ngIf",r.addAssetsModalVisible),_.Tb(2),_.Ac("ngIf",r.form)}}var At=function(){function t(e,n,i,c,r,o,a){h(this,t),this.workOrdersService=e,this.formBuilder=n,this.router=i,this.fileUploadService=c,this.authenticationService=r,this.toastService=o,this.workOrderWizard=a,this.isLoading=!0,this.attachedFileCollection=new A.a([]),this.standardFormattedDate=f.b,this.workOrderPriorities=Object(I.b)(k.x),this.WorkOrderStatus=k.z,this.workOrderStatusValues=Object(I.b)(k.z),this.standardFormattedDateTime=f.d,this.detailsModalVisible=!1,this.textMaxLength=90,this.fileCount=0,this.fileSrcCollection=[],this.isEditable=!1,this.isUpdatingWorkOrder=!1,this.isNewFilesAdded=!1,this.showSaveButton=!1,this.filesLimit=3,this.filePathCollection=[],this.fileTypes=["image/jpeg","image/png","application/msword","jpeg","jpg","png","doc","docx","xls","csv","application/ms-excel","xlsx","pdf","bmp"],this.addAssetsModalVisible=!1,this.isAssetAvailable=!0,this.enableServiceTextarea=!1,this.isShowEditIcon=!0,this.submitAttempted=!1,this.expanded=!1,this.workOrderWizard.workOrder?(this.workOrderStatus=this.workOrderWizard.workOrder.status.toString(),this.workOrderNumber=this.workOrderWizard.workOrder.number.toString(),this.checkUserEditRights()):this.router.navigate(["work-orders"])}return p(t,[{key:"ngOnInit",value:function(){this.viewWorkOrderForId(),this.viewWorkOrderServiceDetailForId(),this.listCategory()}},{key:"createForm",value:function(){var t,e=this;t=this.extendedWorkOrder,e.form=e.formBuilder.group({title:new d.e({value:t.title,disabled:!e.isEditable},d.v.compose([d.v.maxLength(50),d.v.required,d.v.pattern("^[a-zA-Z0-9 ]*")])),description:new d.e({value:t.description,disabled:!e.isEditable},d.v.compose([d.v.maxLength(4e3),d.v.required])),category:new d.e({value:t.category.id,disabled:!e.isEditable}),reportedOn:new d.e({value:t.reportedOn,disabled:!0},d.v.compose([d.v.required])),dueDate:new d.e({value:t.dueDate,disabled:!0},d.v.compose([d.v.required])),priority:new d.e({value:t.priority,disabled:!e.isEditable}),assignedToUser:new d.e({value:t.assignedToUser,disabled:!e.isEditable},d.v.compose([d.v.maxLength(50)])),status:new d.e({value:t.status,disabled:!e.isEditable},d.v.compose([d.v.required])),serviceDetails:new d.e({value:"",disabled:!e.isEditable},d.v.compose([d.v.maxLength(4e3)]))}),this.form.valueChanges.subscribe(function(){setTimeout(function(){e.updateFormChanges()},100)}),this.fileUploadForm=this.formBuilder.group({files:[null,[d.v.required,Object(F.b)(this.fileTypes),Object(F.a)(2e6)],Object(F.c)(this.filesLimit)]})}},{key:"viewWorkOrderForId",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isLoading=!0,this.workOrdersService.viewWorkOrderForId(this.workOrderNumber.toString()).pipe(Object(T.a)(function(n){return t.extendedWorkOrder=n,e&&t.createForm(),n.attachedFiles})).subscribe(function(e){t.fileCount=e?e.length:0;var n=[];t.fileSrcCollection=[],t.filePathCollection=[],e&&(e.forEach(function(e){var i=e.replace(/^.*[\\\/]/,""),c=i.substring(0,i.length);"blob"!==c&&(t.filePathCollection.push(e),t.fileUploadService.getFile(e).subscribe(function(e){e.name=c,t.fileSrcCollection.push(e),t.fileCount=t.fileSrcCollection?t.fileSrcCollection.length:0,n.push(e)}))}),t.fileUploadForm.setValue({files:t.fileSrcCollection}),t.attachedFileCollection.next(t.fileSrcCollection)),t.isLoading=!1})}},{key:"viewWorkOrderServiceDetailForId",value:function(){var t=this;this.workOrdersService.viewWorkOrderServiceDetailForId(this.workOrderWizard.workOrder.number.toString()).subscribe(function(e){t.workOrderServiceDetails=e})}},{key:"listCategory",value:function(){var t=this;this.workOrdersService.listWorkOrderCategory().subscribe(function(e){t.workOrderCategories=e})}},{key:"handleViewMoreClick",value:function(t){this.detailsModalVisible=!0,this.isShowEditIcon=this.isEditable,this.selectedWorkOrderServiceDetails=t}},{key:"handleDetailsModalClose",value:function(){this.detailsModalVisible=!1,this.enableServiceTextarea=!1,this.addAssetsModalVisible=!1}},{key:"disableRightClick",value:function(t){t.preventDefault()}},{key:"handlesPickSpares",value:function(t){this.router.navigate(["work-orders","#WO"+t,"PickSpares"])}},{key:"checkUserEditRights",value:function(){var t=this;this.isGettingUserRights=!0,this.authenticationService.currentUserProfile$.pipe(Object(T.a)(function(t){return t})).subscribe(function(e){t.authenticationService.currentUserHasPermission(a({},k.l.WorkOrders,[k.y.CanEditWorkOrder])).subscribe(function(n){e.userRole.groupName!==k.q.Technician?t.isEditable=n&&Number(t.workOrderStatus)!==k.z.Closed:t.isEditable=n&&Number(t.workOrderStatus)!==k.z.Closed&&Number(t.workOrderStatus)!==k.z.Complete,t.isGettingUserRights=!1})})}},{key:"launchFileInput",value:function(){this.fileUploadForm.reset({}),this.fileUploadInput.nativeElement.value="",this.fileUploadInput.nativeElement.click()}},{key:"updateFormChanges",value:function(){this.extendedWorkOrder.status=this.form.get("status").value,this.extendedWorkOrder.assignedToUser=this.form.get("assignedToUser").value?this.form.get("assignedToUser").value.toString():"",this.extendedWorkOrder.title=this.form.get("title").value.toString(),this.extendedWorkOrder.description=this.form.get("description").value.toString(),this.extendedWorkOrder.priority=this.form.get("priority").value,this.extendedWorkOrder.dueDate=this.form.get("dueDate").value,this.extendedWorkOrder.reportedOn=this.form.get("reportedOn").value;var t=this.form.get("category").value;this.extendedWorkOrder.category=this.workOrderCategories.filter(function(e){return e.id===Number(t)})[0],this.extendedWorkOrder.serviceDetails=this.form.get("serviceDetails").value.toString(),this.showSaveButton=!0,this.form.markAsDirty()}},{key:"selectedUserId",value:function(t){this.form.get("assignedToUser").setValue(t),this.showSaveButton=!0}},{key:"updateWorkOrder",value:function(){var t=this;if(this.submitAttempted=!0,!this.isUpdatingWorkOrder){if(this.isUpdatingWorkOrder=!0,this.isAssetAvailable=this.extendedWorkOrder.workOrderAssets.filter(function(t){return!0!==t.isDelete}).length>0,!this.form.valid||!this.isAssetAvailable)return this.isNewFilesAdded=!1,this.showSaveButton=!1,this.isUpdatingWorkOrder=!1,void this.form.markAsPristine();if(this.showSaveButton=!1,this.form.get("serviceDetails").setValue(""),this.form.valid&&this.form.dirty){var e=[];return this.extendedWorkOrder.workOrderAssets.forEach(function(n){(!0===n.isDelete||n.isNew)&&(n.referenceId=t.extendedWorkOrder.id,e.push(n))}),this.extendedWorkOrder.workOrderAssets=[],this.extendedWorkOrder.workOrderAssets=e,this.form.markAsPristine(),void this.workOrdersService.updateWorkOrderForId(this.extendedWorkOrder.id,this.extendedWorkOrder).subscribe(function(e){t.toastService.showToast(new k.u("Work Order ("+e.workOrderNumber+") saved successfully")),t.fileUploadForm.valid&&t.isNewFilesAdded?t.fileUploadService.uploadFiles(Number(t.extendedWorkOrder.number),k.j.WorkOrder,t.fileSrcCollection).subscribe(function(e){t.savedFileSrcCollection=e,t.filePathCollection=e.attachments,t.viewWorkOrderForId(!1),t.viewWorkOrderServiceDetailForId()},function(e){t.isUpdatingWorkOrder=!1,t.toastService.showErrorToast("Unable to save workorder files.")}):(t.viewWorkOrderForId(!1),t.viewWorkOrderServiceDetailForId(),t.isUpdatingWorkOrder=!1),t.isNewFilesAdded=!1,t.showSaveButton=!1,t.extendedWorkOrder=e},function(e){t.isNewFilesAdded=!1,t.showSaveButton=!1,t.isUpdatingWorkOrder=!1;var n=e[0];t.toastService.showErrorToast(n)},function(){t.errorMessage="Sorry something went wrong... please try again later",t.isUpdatingWorkOrder=!1,t.isNewFilesAdded=!1,t.showSaveButton=!1})}this.fileUploadForm.valid&&this.isNewFilesAdded&&!this.form.dirty&&this.fileUploadService.uploadFiles(Number(this.extendedWorkOrder.number),k.j.WorkOrder,this.fileSrcCollection).subscribe(function(e){t.savedFileSrcCollection=e,t.savedFileSrcCollection.attachments?(t.filePathCollection=e.attachments,t.viewWorkOrderForId(!1),t.viewWorkOrderServiceDetailForId(),t.toastService.showToast(new k.u("Workorder files saved successfully"))):t.toastService.showErrorToast("Files not saved"),t.isUpdatingWorkOrder=!1,t.isNewFilesAdded=!1,t.showSaveButton=!1}),this.fileUploadForm.valid||!this.isNewFilesAdded||this.form.dirty||this.toastService.showErrorToast("Files not saved"),this.isUpdatingWorkOrder=!1,this.showSaveButton=!1}}},{key:"handleDeleteItem",value:function(t){this.extendedWorkOrder&&this.extendedWorkOrder.workOrderAssets&&(this.extendedWorkOrder.workOrderAssets[t].isDelete=!0,this.isAssetAvailable=this.extendedWorkOrder.workOrderAssets.filter(function(t){return!0!==t.isDelete}).length>0,this.form.markAsDirty(),this.showSaveButton=!0)}},{key:"handleFileInputChange",value:function(){var t=this;this.showSaveButton=!0,this.isNewFilesAdded=!0;for(var e=0===this.fileSrcCollection.length,n=this.fileUploadInput.nativeElement.files,i=function(e){0===t.fileSrcCollection.filter(function(t){return t.name===n[e].name}).length?(t.fileSrcCollection.push(n[e]),t.filePathCollection.push("NewFile")):t.toastService.showErrorToast("Cannot upload duplicate file.")},c=0;c<n.length;c++)i(c);this.clearFileFormErrors(),e?this.fileUploadForm.setValue({files:this.fileSrcCollection}):this.fileUploadForm.patchValue({files:this.fileSrcCollection}),(this.fileUploadForm.controls.files.hasError("acceptableFileType")||this.fileUploadForm.controls.files.hasError("acceptableNumberOfFiles")||this.fileUploadForm.controls.files.hasError("acceptableFileSize"))&&(this.showSaveButton=!1),this.fileCount=this.fileSrcCollection.length,this.attachedFileCollection.next(this.fileSrcCollection)}},{key:"handleDeleteFileAttached",value:function(t){var e=this,n=this.filePathCollection[t];this.isUpdatingWorkOrder=!0,"NewFile"===n?(this.fileSrcCollection.splice(t,1),this.filePathCollection.splice(t,1),this.fileCount=this.fileSrcCollection.length,this.attachedFileCollection.next([]),this.attachedFileCollection.next(this.fileSrcCollection),this.fileUploadForm.patchValue({files:this.fileSrcCollection}),this.toastService.showToast(new k.u("File has been deleted.")),this.isUpdatingWorkOrder=!1,this.resetSaveButtonDisplay()):(this.fileUploadService.deleteFile(n,!1).subscribe(function(){e.fileSrcCollection.splice(t,1),e.filePathCollection.splice(t,1),e.fileCount=e.fileSrcCollection.length,e.attachedFileCollection.next([]),e.attachedFileCollection.next(e.fileSrcCollection),e.toastService.showToast(new k.u("File has been deleted.")),e.isUpdatingWorkOrder=!1,e.resetSaveButtonDisplay()},function(t){e.toastService.showErrorToast("Unable to delete the file.")}),this.fileUploadForm.patchValue({files:this.fileSrcCollection})),this.fileUploadForm.markAsPristine(),this.fileUploadForm.markAsUntouched(),this.fileUploadForm.updateValueAndValidity()}},{key:"resetSaveButtonDisplay",value:function(){0===this.fileSrcCollection.length&&(this.showSaveButton=!1),3===this.fileSrcCollection.length&&(this.showSaveButton=!0)}},{key:"priorityString",value:function(t){return Object(I.a)(k.x,t)}},{key:"handlePickAssets",value:function(){this.addAssetsModalVisible=!0}},{key:"handleAddedWorkOrderAssets",value:function(t){this.addAssetsModalVisible=!1,this.extendedWorkOrder.workOrderAssets=t,this.isAssetAvailable=this.extendedWorkOrder.workOrderAssets.filter(function(t){return!0!==t.isDelete}).length>0,this.form.markAsDirty(),this.showSaveButton=!0}},{key:"handleClipboard",value:function(t){t.preventDefault()}},{key:"clearFileFormErrors",value:function(){this.fileUploadForm.controls.files.setErrors({acceptableFileType:!1,acceptableFileSize:!1})}},{key:"getUserName",value:function(t){return t&&t.includes("-")?t.split("-")[1]:t}},{key:"handleTextAreaInput",value:function(){this.isSubmitDisabled=""===this.selectedWorkOrderServiceDetails.serviceDetail.trim()}},{key:"handleServiceSaveButton",value:function(){var t=this;this.enableServiceTextarea=!1,this.isLoading=!0,this.workOrdersService.updateWorkOrderService(this.selectedWorkOrderServiceDetails).subscribe(function(){t.viewWorkOrderServiceDetailForId(),t.toastService.showToast(new k.u("Workorder service history saved successfully")),t.isLoading=!1,t.detailsModalVisible=!1},function(e){t.viewWorkOrderServiceDetailForId(),t.toastService.showErrorToast("Unable to save workorder service history"),t.isLoading=!1})}},{key:"handleShowCheckListContent",value:function(t){this.expanded===t?this.expanded=null:this.expanded=t}},{key:"handleSelectedChecklistTask",value:function(){this.showSaveButton=!0,this.form.markAsDirty()}}]),t}();function Tt(t,e){1&t&&(_.kc(0,"div",24),_.kc(1,"span"),_.Pc(2,"Quantity is greater than instock quantity"),_.jc(),_.jc())}At.\u0275fac=function(t){return new(t||At)(_.ec(k.A),_.ec(d.d),_.ec(g.c),_.ec(k.i),_.ec(k.d),_.ec(k.v),_.ec(P))},At.\u0275cmp=_.Yb({type:At,selectors:[["app-view-workorder"]],viewQuery:function(t,e){var n;(1&t&&_.Tc($,1),2&t)&&(_.Fc(n=_.sc())&&(e.fileUploadInput=n.first))},decls:4,vars:5,consts:[[3,"customPreviousPageTitle","customCurrentPageTitle"],[4,"ngIf"],[1,"spinner"],[3,"formGroup"],[1,"core-info","mt-4"],[1,"col-12","spares-button","mobile-btn"],[1,"btn-pick-spares"],[1,"btn","btn-primary",3,"click"],[1,"col-2","col-sm-3"],["class","d-flex  align-items-center",4,"ngIf"],[1,"row","align-items-center","mb-sm-4","mb-2"],[1,"col-sm-2","col-4"],[1,"col-md-6","col-sm-10","col-8"],["type","text","pattern","^[a-zA-Z0-9 ]*","formControlName","title","maxlength","50",1,"form-control",3,"paste"],[1,"gap"],[1,"col-sm-4","spares-button","tab-view"],[1,"btn","btn-primary","px-md-5",3,"click"],["class","d-flex",4,"ngIf"],[1,"row","mb-sm-4","mb-2"],[1,"col-sm-10","col-8"],["formControlName","description","rows","8","maxlength","4000",1,"form-control",3,"readOnly"],[1,"row"],[1,"col-sm-6"],[1,"row","align-items-center","d-flex","mb-2","mb-sm-3"],[1,"col-4"],[1,"col-8"],[1,"form-group"],[1,"taro-material-datepicker"],["matInput","","formControlName","reportedOn",1,"form-control",3,"matDatepicker"],["matSuffix","",3,"for"],["datePicker",""],["matInput","","formControlName","dueDate",1,"form-control",3,"matDatepicker"],["datePickerDueDate",""],["type","hidden","formControlName","assignedToUser","maxlength","50",1,"form-control",3,"readOnly"],[3,"isEditable","userName","selectedUserId"],["formControlName","status",1,"custom-select","form-control"],["class","form-control",3,"value","selected",4,"ngFor","ngForOf"],["class","row d-flex mb-sm-3 mobile-view",4,"ngIf"],["formControlName","category",1,"custom-select","form-control"],["class","form-control",3,"value",4,"ngFor","ngForOf"],["formControlName","priority",1,"custom-select","form-control"],[1,"row","d-flex","align-items-center","mb-2","mb-sm-3","file-attach"],[1,"col-4","attachment-icon"],["tooltip-danger","Allowed file types are doc, docx, xls, xlsx, csv, pdf, jpeg, png, bmp. Max file size allowed 2 MB."],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 19.199 19.2","width","14","height","14"],["d","M0 9.6a9.6 9.6 0 0 0 18.5 3.6 8.571 8.571 0 0 0 .7-3.6A9.6 9.6 0 1 0 0 9.6z","fill","#fff","stroke","#ff422e"],["d","M9.6 4a1.184 1.184 0 0 1 1.2 1.3 1.2 1.2 0 1 1-2.4 0A1.24 1.24 0 0 1 9.6 4zm-1 3.3h2.1v7.9H8.6z","fill","#ff422e"],["class","col-8",3,"formGroup",4,"ngIf"],["class","row  d-flex  file-row",4,"ngIf"],["class","row  d-flex mb-sm-3",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mb-2","mb-sm-3"],[1,"btn","btn-link","p-0","add-asset",3,"disabled","click"],[1,"btn","btn-link","p-0","add-checklist"],[1,"row","mb-sm-4","mb-2","service-details-text"],["formControlName","serviceDetails","rows","8","maxlength","4000",1,"form-control",3,"readOnly"],[3,"titleDetails"],[1,"row","pl-10"],[1,"col-sm-12","service-history"],[3,"modalShouldClose","contextmenu",4,"ngIf"],["class","form-actions",3,"visible",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"col-4","col-sm-2","width-17"],[1,"col-md-6","col-sm-10","col-8","width-49","alert","alert-danger","arrow-alert"],[1,"d-flex"],[1,"col-md-6","col-sm-10","col-8","width-83","alert","alert-danger","arrow-alert"],[1,"form-control",3,"value","selected"],[1,"row","d-flex","mb-sm-3","mobile-view"],[1,"form-control",3,"value"],[1,"col-8",3,"formGroup"],[1,"alert-msgs"],["alertElementRef",""],["class","alert alert-danger arrow-alert",4,"ngIf"],[1,"file-input"],[1,"col-7"],[1,"col-5"],[1,"btn-file-upload",3,"disabled","click"],["hidden","","multiple","","type","file",3,"readonly","change"],["fileUploadInput",""],[1,"alert","alert-danger","arrow-alert"],[1,"row","d-flex","file-row"],[3,"attachedFileCollection","isEditable","deletedFileIndex"],[1,"row","d-flex","mb-sm-3"],[1,"col-sm-6","mb-2","mb-sm-3"],[1,"row","d-flex","align-items-center"],[1,"asset-alert-msgs"],["type","text","readonly","",1,"readonly","form-control",3,"value"],[1,"col-8","d-flex","align-items-center"],["type","text","readonly","",1,"form-control","readonly",3,"value"],["xmlns","http://www.w3.org/2000/svg","width","15.002","height","19.003","viewBox","0 0 14.002 18.003",1,"del-icon","opacity-50"],["id","wrench","transform","translate(0.001 0)"],["id","Path_1563","data-name","Path 1563","d","M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z","transform","translate(0.2 1.267)"],["id","Path_1564","data-name","Path 1564","d","M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z"],["id","Path_1565","data-name","Path 1565","d","M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z","transform","translate(1.567 2)"],["id","Path_1566","data-name","Path 1566","d","M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z","transform","translate(0.9 1.967)"],["id","Path_1567","data-name","Path 1567","d","M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z","transform","translate(2.125 1.991)"],["type","text","readonly","",1,"form-control","readonly","location-input",3,"value"],[1,"delete-btn",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","15.002","height","19.003","viewBox","0 0 14.002 18.003",1,"del-icon"],[1,"addtask-expanded",3,"taskItem","firstItem","isTaskEditable","ngClass","taskSelected"],[1,"clickView",3,"click"],[3,"modalShouldClose","contextmenu"],[1,"col-4","text-end"],[1,"col-12","modal-details","mb-2"],[1,"col","float-start"],[1,"col","text-end"],[3,"click",4,"ngIf"],["row","8","maxlength","4000",1,"modal-details-textarea",3,"ngModel","readOnly","ngModelChange","input"],[1,"modal-details-footer"],[3,"click"],["id","edit-button-svgrepo-com","xmlns","http://www.w3.org/2000/svg","width","15.583","height","14.969","viewBox","0 0 15.583 14.969"],["id","Group_3267","data-name","Group 3267"],["id","Path_1568","data-name","Path 1568","d","M12.274,86.27a.384.384,0,0,0-.384.384v7.02a1.347,1.347,0,0,1-1.346,1.345H2.114A1.347,1.347,0,0,1,.769,93.674v-8.43A1.347,1.347,0,0,1,2.114,83.9h8.43a.384.384,0,1,0,0-.769H2.114A2.117,2.117,0,0,0,0,85.244v8.43a2.117,2.117,0,0,0,2.114,2.114h8.43a2.117,2.117,0,0,0,2.114-2.114v-7.02A.384.384,0,0,0,12.274,86.27Z","transform","translate(0 -80.82)","fill","#424244"],["id","Path_1569","data-name","Path 1569","d","M196.426,10.1a1.19,1.19,0,0,0-1.681,0l-6.585,6.585a.892.892,0,0,0-.134.17l-.912,2.049a.384.384,0,0,0,.508.508l2.049-.912a.9.9,0,0,0,.17-.134l6.585-6.585a1.188,1.188,0,0,0,0-1.681Zm-.544,1.137L189.3,17.823l0,0-1.07.476.476-1.07,0,0,6.585-6.585a.429.429,0,0,1,.593,0,.419.419,0,0,1,0,.593Z","transform","translate(-181.191 -9.753)","fill","#424244"],[1,"btn","btn-primary","mt-4","handlesServicesSaveBtn",3,"disabled","click"],[3,"existingAssets","addedAssets"],[1,"form-actions"],[1,"btn","btn-primary","btn-block","col-12",3,"click"]],template:function(t,e){1&t&&(_.fc(0,"app-section-header",0),_.Oc(1,Z,2,0,"div",1),_.Oc(2,H,1,0,"app-loading-modal",1),_.Oc(3,It,132,33,"article",1)),2&t&&(_.Ac("customPreviousPageTitle","Work Orders")("customCurrentPageTitle","#WO"+e.workOrderNumber),_.Tb(1),_.Ac("ngIf",e.isLoading||e.isGettingUserRights),_.Tb(1),_.Ac("ngIf",e.isUpdatingWorkOrder),_.Tb(1),_.Ac("ngIf",!e.isLoading&&!e.isGettingUserRights&&!e.isUpdatingWorkOrder))},directives:[M.a,l.k,W.a,d.w,d.n,d.g,d.c,d.s,d.m,d.f,d.i,D.b,D.d,L.e,D.a,E.a,d.u,l.j,R.a,d.q,d.x,z,Q,l.i,G.a,d.p,K.a],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}article[_ngcontent-%COMP%]{margin-bottom:6em}article[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:left!important;padding:.8em}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:flex;background-color:#f2f2f2;height:3.8em;font-size:.85em;border:1px solid #ced4da;border-radius:.25em}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:.8em 0 0 .7em;font-weight:400;text-transform:none;font-size:1.2em!important}@media screen and (max-width:355px){article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1em;font-size:1.1em!important}}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .btn-file-upload[_ngcontent-%COMP%]{border:1px solid #ced4da;border-width:1px 0;background-color:#ddd;height:3.7em;width:100%}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .btn-file-upload[disabled][_ngcontent-%COMP%]{cursor:default}article[_ngcontent-%COMP%]   .file-attach[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex}article[_ngcontent-%COMP%]   .file-attach[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:.25em}article[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-bottom:0;height:auto}@media screen and (max-width:767px){article[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-bottom:.7em}}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){text-align:center}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{transform:scale(1.25)}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .btn-pick-spares[_ngcontent-%COMP%]{float:right}@media only screen and (max-width:540px){article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .btn-pick-spares[_ngcontent-%COMP%]{margin:.5em 0 0 9.5em;float:none}}@media only screen and (min-width:541px){article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:540px){article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{clear:both;display:block}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .location-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:200px}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{padding:0}}@media only screen and (max-width:360px){article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .btn-pick-spares[_ngcontent-%COMP%]{margin-left:0}}article[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:none;background:transparent;padding-bottom:.25em;transition:all .2s ease-in-out;margin-left:.25em}article[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;transform:scale(1);transition:all .2s ease-in-out}article[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}article[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.125)}article[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:default}article[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{border:none;background:transparent;padding-bottom:.25em;transition:all .2s ease-in-out;margin-left:.25em}article[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;transform:scale(1);transition:all .2s ease-in-out}article[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}article[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.125)}article[_ngcontent-%COMP%]   .edit-btn[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:default}article[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #dedede;margin-bottom:1em;padding-bottom:.5em}article[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:1em}article[_ngcontent-%COMP%]   .core-info[_ngcontent-%COMP%]   .del-icon[_ngcontent-%COMP%]{margin-left:.5em}article[_ngcontent-%COMP%]   .core-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], article[_ngcontent-%COMP%]   .service-details-text[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}article[_ngcontent-%COMP%]   .readonly[_ngcontent-%COMP%]{pointer-events:none;background-color:hsla(0,0%,92%,.295);color:#9c9a9a}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]{padding:1em}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;border:1px solid #bcbcbc;width:100%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#e4e4e4;font-weight:700}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #bcbcbc;padding:10px}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:center;width:15%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:center;width:20%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){word-break:break-all;width:65%}@media screen and (max-width:610px){article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:none}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:60%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .desktop-time-view[_ngcontent-%COMP%]{display:none}}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6a955b;text-decoration:underline;font-size:small}article[_ngcontent-%COMP%]   .modal-details-textarea[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em;background-color:#f2f2f2;padding:1.5em;text-align:justify;border-radius:5px;min-height:100%;width:100%;border:0;outline-style:none;box-shadow:none;border-color:transparent}article[_ngcontent-%COMP%]   .modal-details-textarea-focus[_ngcontent-%COMP%]{color:#424244;background-color:#fff!important;border:1px solid #b5caad!important;border-color:#b5caad;outline:0;box-shadow:0 0 0 .25rem rgba(106,149,91,.25)}article[_ngcontent-%COMP%]   .modal-details-textarea[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}article[_ngcontent-%COMP%]   .modal-details[_ngcontent-%COMP%]{height:78%!important}article[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;position:relative}article[_ngcontent-%COMP%]   .addtask-expanded[_ngcontent-%COMP%]{background:none;display:flex}@media screen and (max-width:576px){.mobile-view[_ngcontent-%COMP%]{display:none!important}}@media screen and (max-width:767px){.mobile-btn[_ngcontent-%COMP%]{display:block;margin-bottom:1.5rem}.mobile-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.tab-view[_ngcontent-%COMP%]{display:none!important}}@media screen and (min-width:767px){.mobile-btn[_ngcontent-%COMP%]{display:none!important}}.alertMessage[_ngcontent-%COMP%]{height:67px}@media screen and (max-width:576px){.alertMessage[_ngcontent-%COMP%]{height:0}.alertMessages[_ngcontent-%COMP%]{height:90px}}  .alert{padding:.9em 0 1em}@media screen and (max-width:800px){  .alert{padding:1em .2em}}  .form-group{position:relative}  .form-group .alert-msgs{position:absolute;bottom:2.5em}  .form-group .asset-alert-msgs{position:absolute;bottom:0;width:100%;margin-bottom:-.35em}  .find-as-you-type .text-display{padding-left:.8em}.modal-details-footer[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}@media screen and (max-width:567px){.width-17[_ngcontent-%COMP%]{width:36%}.width-49[_ngcontent-%COMP%], .width-83[_ngcontent-%COMP%]{width:64%}}@media screen and (min-width:767px){.width-49[_ngcontent-%COMP%]{width:49%}.width-17[_ngcontent-%COMP%]{width:17%}.width-83[_ngcontent-%COMP%]{width:83%}}  .breadcrumb li:nth-child(2) a{text-transform:uppercase}  .detail-container{margin-top:0!important}  .title-block{margin-top:.3em!important}@media screen and (min-width:320px) and (max-width:420px){  .title-block h2{font-size:.85rem!important}}"]});var Ft=function(){function t(e){h(this,t),this.formBuilder=e,this.isSkuDeleted=new _.t,this.handlesQtyChange=new _.t,this.isQtyInValid=new _.t}return p(t,[{key:"ngOnInit",value:function(){var t=this;this.qtyForm=this.formBuilder.group({qty:[this.sparesSku.quantity,[d.v.min(1),d.v.max(this.sparesSku.sku.quantities.inStock),d.v.required]]}),this.qtyForm.get("qty").valueChanges.pipe(Object(v.a)(700),Object(O.a)(function(e){return e<=t.sparesSku.sku.quantities.inStock})).subscribe(function(e){t.handlesQtyChange.emit(e),t.isQtyInValid.emit(t.qtyForm.value.qty>t.sparesSku.sku.quantities.inStock)})}},{key:"handleQtyClipboard",value:function(t){t.preventDefault()}},{key:"disableRightClick",value:function(t){t.preventDefault()}},{key:"handleQtyInputKeyUp",value:function(t){this.isQtyInValid.emit(this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock),"Enter"===t.key&&this.qtyForm.value.qty>0&&this.qtyForm.value.qty.toString().length>0&&this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock&&t.preventDefault()}},{key:"handleQtyInputKeyDown",value:function(t){var e=this.qtyForm.value.qty.toString().length>=4;if(!(this.qtyForm.valid&&this.qtyForm.get("qty").value>0&&this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock&&"Enter"===t.key)&&"Backspace"!==t.key&&"Delete"!==t.key){(e||isNaN(t.key)||32===t.keyCode)&&t.preventDefault();var n=this.qtyForm.get("qty").value;this.handlesQtyChange.emit(n),this.isQtyInValid.emit(this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock)}}},{key:"handleDeleteItem",value:function(){this.isSkuDeleted.emit(!0)}},{key:"handlesDecreaseQty",value:function(){var t=this.qtyForm.get("qty").value;(t-=1)<=0||(this.qtyForm.setValue({qty:t}),this.handlesQtyChange.emit(t),this.isQtyInValid.emit(this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock))}},{key:"handlesIncreaseQty",value:function(){var t=Number(this.qtyForm.get("qty").value);(t+=1)>this.sparesSku.sku.quantities.inStock||(this.qtyForm.setValue({qty:t}),this.handlesQtyChange.emit(t),this.isQtyInValid.emit(this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock))}}]),t}();Ft.\u0275fac=function(t){return new(t||Ft)(_.ec(d.d))},Ft.\u0275cmp=_.Yb({type:Ft,selectors:[["app-spares-skus"]],inputs:{sparesSku:"sparesSku",isEditable:"isEditable"},outputs:{isSkuDeleted:"isSkuDeleted",handlesQtyChange:"handlesQtyChange",isQtyInValid:"isQtyInValid"},decls:41,vars:10,consts:[[1,"spare-name-cell"],[1,"sku-uom-cell","mobile-only"],[1,"sku-qty-cell"],[1,"spares-row",3,"formGroup"],[1,"btn-decrease",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","20"],["data-name","Group 3136","transform","translate(-556 -289.5)"],["cx","8","cy","8","r","8","fill","#777","data-name","Ellipse 284","transform","translate(556 292)"],["fill","#fff","data-name","-","font-family","Kohinoor-Book, Kohinoor","font-size","15","transform","translate(561.5 304.5)"],["x","0","y","0"],["formControlName","qty","type","text","pattern","[0-9]*","inputmode","numeric","ng-pattern","[0-9]*","maxlength","4",1,"form-control","qty-text-input",3,"readOnly","paste","contextmenu","keydown","keyup"],["class","alert alert-danger arrow-alert",4,"ngIf"],[1,"btn-increase",3,"disabled","click"],["data-name","Group 3138","transform","translate(-946 -724.2)"],["cx","8","cy","8","r","8","fill","#777","data-name","Ellipse 285","transform","translate(946 726)"],["fill","#fff","data-name","+","font-family","Kohinoor-Book, Kohinoor","font-size","15","transform","translate(950 739.2)"],[1,"delete-row-cell"],[1,"delete-btn",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 14 18"],["d","M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z","transform","translate(.2 1.267)",1,"cls-1"],["d","M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z",1,"cls-1"],["d","M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z","transform","translate(1.567 2)",1,"cls-1"],["d","M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z","transform","translate(.9 1.967)",1,"cls-1"],["d","M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z","transform","translate(2.125 1.991)",1,"cls-1"],[1,"alert","alert-danger","arrow-alert"]],template:function(t,e){1&t&&(_.kc(0,"td",0),_.kc(1,"span"),_.kc(2,"strong"),_.Pc(3),_.jc(),_.fc(4,"br"),_.jc(),_.kc(5,"span"),_.kc(6,"strong"),_.Pc(7,"ID "),_.jc(),_.Pc(8),_.fc(9,"br"),_.Pc(10),_.jc(),_.jc(),_.kc(11,"td",1),_.kc(12,"span"),_.Pc(13),_.jc(),_.jc(),_.kc(14,"td",2),_.kc(15,"form",3),_.kc(16,"button",4),_.rc("click",function(){return e.handlesDecreaseQty()}),_.uc(),_.kc(17,"svg",5),_.kc(18,"g",6),_.fc(19,"circle",7),_.kc(20,"text",8),_.kc(21,"tspan",9),_.Pc(22,"-"),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.tc(),_.kc(23,"input",10),_.rc("paste",function(t){return e.handleQtyClipboard(t)})("contextmenu",function(t){return e.disableRightClick(t)})("keydown",function(t){return e.handleQtyInputKeyDown(t)})("keyup",function(t){return e.handleQtyInputKeyUp(t)}),_.jc(),_.Oc(24,Tt,3,0,"div",11),_.kc(25,"button",12),_.rc("click",function(){return e.handlesIncreaseQty()}),_.uc(),_.kc(26,"svg",5),_.kc(27,"g",13),_.fc(28,"circle",14),_.kc(29,"text",15),_.kc(30,"tspan",9),_.Pc(31,"+"),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.tc(),_.kc(32,"td",16),_.kc(33,"button",17),_.rc("click",function(){return e.handleDeleteItem()}),_.uc(),_.kc(34,"svg",18),_.fc(35,"defs"),_.fc(36,"path",19),_.fc(37,"path",20),_.fc(38,"path",21),_.fc(39,"path",22),_.fc(40,"path",23),_.jc(),_.jc(),_.jc()),2&t&&(_.Tb(3),_.Qc(e.sparesSku.sku.sparesGroupName),_.Tb(5),_.Qc(e.sparesSku.sku.id),_.Tb(2),_.Rc(" ",e.sparesSku.sku.description," "),_.Tb(3),_.Qc(e.sparesSku.sku.uom),_.Tb(2),_.Ac("formGroup",e.qtyForm),_.Tb(1),_.Ac("disabled",!e.isEditable),_.Tb(7),_.Ac("readOnly",!e.isEditable),_.Tb(1),_.Ac("ngIf",e.qtyForm.value.qty>e.sparesSku.sku.quantities.inStock&&e.qtyForm.dirty&&""!==e.qtyForm.value),_.Tb(1),_.Ac("disabled",!e.isEditable),_.Tb(8),_.Ac("disabled",!e.isEditable))},directives:[d.w,d.n,d.g,d.c,d.m,d.f,d.s,d.i,l.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}[_nghost-%COMP%]{display:table-row;background-color:#f2f2f2;line-height:1.1;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em;text-align:center;vertical-align:middle;height:5em;border-bottom:2px solid #fff;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:left;width:40%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:10%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:20%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:4%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){background-color:#dedede;font-weight:600}[_nghost-%COMP%]   td[_ngcontent-%COMP%]   .mobile-only[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sku-qty-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;background-color:transparent}[_nghost-%COMP%]   .sku-qty-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}[_nghost-%COMP%]   .sku-qty-cell[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:default}[_nghost-%COMP%]   .sku-qty-cell[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{position:absolute;top:-80%;width:100%;left:0;z-index:999}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0 auto;font-size:1.5em}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.1)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]{opacity:.3;background-color:transparent;cursor:default}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(1);transition:all .2s ease-in-out}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}@media screen and (max-width:480px){[_nghost-%COMP%]{padding-right:0!important}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:50%}[_nghost-%COMP%]   .spares-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:80px}}@media screen and (max-width:768px){[_nghost-%COMP%]{margin-bottom:3.5em;padding-right:7em;display:flex;align-items:center;border:1px solid rgba(0,0,0,.1);border-bottom:none}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{display:none;border-bottom:none;height:auto}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%], [_nghost-%COMP%]   td.qty-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   td.sku-qty-cell[_ngcontent-%COMP%], [_nghost-%COMP%]   td.spare-name-cell[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   td.spare-name-cell[_ngcontent-%COMP%]{flex-grow:1;text-align:left}[_nghost-%COMP%]   td.spare-name-cell[_ngcontent-%COMP%] > .mobile-only[_ngcontent-%COMP%]{display:block;font-weight:500}[_nghost-%COMP%]   td.sku-qty-cell[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]   td.sku-qty-cell[_ngcontent-%COMP%]   .mobile-only[_ngcontent-%COMP%]{display:inline-block;font-weight:700;margin-left:.5em}[_nghost-%COMP%]   td.sku-qty-cell[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{white-space:normal}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]{display:block;width:calc(100% + 2px);position:absolute;top:100%;margin:-1px;background-color:transparent}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[_ngcontent-%COMP%]{background:#eaeaea;padding:1.5em 0;border-bottom-left-radius:.5em;border-bottom-right-radius:.5em;border:1px solid rgba(0,0,0,.05);border-top:none}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#666667}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5}}.spares-row[_ngcontent-%COMP%]{margin-top:.4em;text-align:center}.spares-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{padding-right:.5em}.spares-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:center;background-color:#fff;width:80px;display:inline-block}"]});var Wt=["searchInput"],Dt=["searchResult"];function Lt(t,e){1&t&&(_.kc(0,"span"),_.Pc(1,"s"),_.jc())}function Et(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.Oc(2,Lt,2,0,"span",1),_.Pc(3,")"),_.jc()),2&t){var n=_.vc();_.Tb(1),_.Rc("(",n.workOrderSpares.spareSkus.length," item"),_.Tb(1),_.Ac("ngIf",n.workOrderSpares.spareSkus.length>1)}}function Rt(t,e){1&t&&_.fc(0,"div",3)}function Ut(t,e){if(1&t){var n=_.lc();_.kc(0,"button",20,21),_.rc("keyup",function(t){return _.Ic(n),_.vc(4).handleSearchResultKeyUp(t)})("click",function(){_.Ic(n);var t=e.$implicit;return _.vc(4).handleSearchResultClick(t)}),_.Pc(2),_.jc()}if(2&t){var i=e.$implicit;_.Ub("data-sparesname",i.sparesGroupName),_.Tb(2),_.Sc(" ",i.id," - ",i.description," ")}}function Vt(t,e){if(1&t&&(_.kc(0,"div",18),_.Oc(1,Ut,3,3,"button",19),_.jc()),2&t){var n=_.vc(3);_.Tb(1),_.Ac("ngForOf",n.searchResults)}}function Nt(t,e){1&t&&(_.kc(0,"div",22),_.Pc(1," No spares found "),_.jc())}function zt(t,e){1&t&&(_.kc(0,"div",23),_.fc(1,"div",3),_.jc())}function qt(t,e){if(1&t&&(_.kc(0,"div"),_.Oc(1,Vt,2,1,"div",15),_.Oc(2,Nt,2,0,"div",16),_.Oc(3,zt,2,0,"div",17),_.jc()),2&t){var n=_.vc(2);_.Tb(1),_.Ac("ngIf",!n.isSearching),_.Tb(1),_.Ac("ngIf",0===n.searchResults.length&&!n.isSearching),_.Tb(1),_.Ac("ngIf",n.isSearching)}}function Bt(t,e){if(1&t&&(_.kc(0,"option",24),_.Pc(1),_.jc()),2&t){var n=e.$implicit;_.Ac("value",n.value),_.Tb(1),_.Rc(" ",n.label," ")}}function Qt(t,e){1&t&&(_.kc(0,"div",25),_.Pc(1," No spares added to this work order. "),_.jc())}function Gt(t,e){if(1&t){var n=_.lc();_.kc(0,"app-spares-skus",28),_.rc("isSkuDeleted",function(t){_.Ic(n);var i=e.index;return _.vc(3).handleDeleteSparesSku(t,i)})("handlesQtyChange",function(t){_.Ic(n);var i=e.index;return _.vc(3).handleSkuQtyChange(t,i)})("isQtyInValid",function(t){return _.Ic(n),_.vc(3).handleInValidQty(t)}),_.jc()}if(2&t){var i=e.$implicit,c=_.vc(3);_.Ac("sparesSku",i)("isEditable",c.isEditable)}}function Kt(t,e){if(1&t&&(_.kc(0,"div"),_.kc(1,"table"),_.kc(2,"thead"),_.kc(3,"th"),_.Pc(4,"Name"),_.jc(),_.kc(5,"th"),_.Pc(6,"UOM"),_.jc(),_.kc(7,"th"),_.Pc(8,"Quantity"),_.jc(),_.fc(9,"th"),_.jc(),_.kc(10,"tbody"),_.Oc(11,Gt,1,2,"app-spares-skus",26),_.kc(12,"tr",27),_.fc(13,"td"),_.fc(14,"td"),_.fc(15,"td"),_.fc(16,"td"),_.jc(),_.jc(),_.jc(),_.jc()),2&t){var n=_.vc(2);_.Tb(11),_.Ac("ngForOf",n.workOrderSpares.spareSkus)}}function $t(t,e){if(1&t){var n=_.lc();_.kc(0,"div"),_.kc(1,"form",4),_.kc(2,"div",5),_.kc(3,"div",6),_.kc(4,"div",7),_.kc(5,"div",8),_.kc(6,"input",9),_.rc("blur",function(){return _.Ic(n),_.vc().handleSearchBlur()})("keyup",function(t){return _.Ic(n),_.vc().handleSearchKeyUp(t)}),_.jc(),_.fc(7,"input",10),_.Oc(8,qt,4,3,"div",1),_.jc(),_.jc(),_.jc(),_.kc(9,"div",6),_.kc(10,"select",11),_.kc(11,"option",12),_.Pc(12,"All Spare Group"),_.jc(),_.Oc(13,Bt,2,2,"option",13),_.jc(),_.jc(),_.jc(),_.Oc(14,Qt,2,0,"div",14),_.Oc(15,Kt,17,1,"div",1),_.jc(),_.jc()}if(2&t){var i=_.vc();_.Tb(1),_.Ac("formGroup",i.searchForm),_.Tb(7),_.Ac("ngIf",i.searchResultsVisible),_.Tb(3),_.Ac("value",i.allSpareGroupOption),_.Tb(2),_.Ac("ngForOf",i.sparesGroupOptions),_.Tb(1),_.Ac("ngIf",!i.workOrderSpares||!i.workOrderSpares.spareSkus||0===i.workOrderSpares.spareSkus.length),_.Tb(1),_.Ac("ngIf",i.workOrderSpares&&i.workOrderSpares.spareSkus&&i.workOrderSpares.spareSkus.length>0)}}function Zt(t,e){1&t&&(_.kc(0,"span"),_.Pc(1,"Save picked list"),_.jc())}function Ht(t,e){1&t&&_.fc(0,"div",32)}function Yt(t,e){if(1&t){var n=_.lc();_.kc(0,"footer"),_.kc(1,"div",29),_.kc(2,"button",30),_.rc("click",function(){return _.Ic(n),_.vc().handleUpdateSpares()}),_.Oc(3,Zt,2,0,"span",1),_.Oc(4,Ht,1,0,"div",31),_.jc(),_.jc(),_.jc()}if(2&t){var i=_.vc();_.Tb(1),_.Wb("visible",i.showSaveButton),_.Tb(1),_.Ac("disabled",i.isQtyFormInvalid),_.Tb(1),_.Ac("ngIf",!i.isUpdatingSpares),_.Tb(1),_.Ac("ngIf",i.isUpdatingSpares)}}var Xt=function(){function t(e,n,i,c,r,o){h(this,t),this.formBuilder=e,this.skuService=n,this.workOrderService=i,this.toastService=c,this.authenticationService=r,this.workOrderWizard=o,this.allSpareGroupOption="",this.sparesGroupOptions=[],this.sparesGroups=[],this.WorkOrderStatus=k.z,this.isLoading=!0,this.showSaveButton=!1,this.isUpdatingSpares=!1,this.isSparesSelected=!1,this.searchResultsVisible=!1,this.searchResults=[],this.isSearching=!1,this.isGettingUserRights=!0,this.isQtyFormInvalid=!1,this.workOrderStatus=this.workOrderWizard.workOrder.status.toString(),this.wordOrderNumber=this.workOrderWizard.workOrder.number.toString(),this.viewWorkOrderForId(),this.getSpares(this.wordOrderNumber)}return p(t,[{key:"ngOnInit",value:function(){this.getSearchGroupOptions()}},{key:"viewWorkOrderForId",value:function(){var t=this,e=this.workOrderWizard.workOrder.number.toString();this.workOrderService.viewWorkOrderForId(e).subscribe(function(e){t.extendedWorkOrder=e,t.checkUserEditRights()})}},{key:"searchSpares",value:function(){var t=this;this.searchSparesSubscription&&!this.searchSparesSubscription.closed&&this.searchSparesSubscription.unsubscribe();var e=this.searchForm.get("text").value;!1===this.isSparesSelected&&(this.isSearching=!0,this.searchResultsVisible=!0,this.searchSparesSubscription=this.skuService.getSkuStockForSpares(this.searchForm.get("sparesGroup").value,e).subscribe(function(e){t.searchResults=e,t.isSearching=!1}))}},{key:"getSearchGroupOptions",value:function(){var t=this;this.skuService.getSparesGroups().subscribe(function(e){t.sparesGroups=e,t.sparesGroups.map(function(e){var n;t.sparesGroupOptions.push({label:(n=e.name,(n=n.toLocaleLowerCase()).replace(/(?:^\w|[A-Z]|\b\w)/g,function(t){return t.toUpperCase()}).replace(/\s+/g," ")),value:e.groupId+"~"+e.subGroupId})}),t.isLoading=!1})}},{key:"handleDeleteSparesSku",value:function(t,e){this.showSaveButton=!0,t&&this.workOrderSpares.spareSkus.splice(e,1)}},{key:"getSpares",value:function(t){var e=this;this.workOrderService.getWorkOrderSpares(t).subscribe(function(t){var n=[];t.spareSkus.forEach(function(t){if(t){var e=t.sku.quantities.inStock,i=t.quantity;t.sku.quantities.inStock=e+i,n.push(t)}}),e.workOrderSpares={siteId:t.siteId,workOrderNumber:t.workOrderNumber,spareSkus:n}})}},{key:"handleSkuQtyChange",value:function(t,e){var n=this;this.workOrderSpares.spareSkus[e].quantity=t,this.workOrderSpares.spareSkus.forEach(function(t){t.quantity>t.sku.quantities.inStock?n.showSaveButton=!1:n.showSaveButton=!0})}},{key:"handleUpdateSpares",value:function(){var t=this;this.isUpdatingSpares=!0,this.workOrderService.updateWorkOrderSpares(this.workOrderSpares).subscribe(function(e){t.workOrderSpares=e,t.isUpdatingSpares=!1,t.showSaveButton=!1,t.toastService.showToast(new k.u("Updated spares for this work order."))},function(e){t.toastService.showErrorToast("Unable to update spares."),t.isUpdatingSpares=!1,t.showSaveButton=!1})}},{key:"clearSearchForm",value:function(){this.searchForm.get("text").setValue(""),this.searchForm.get("spares").setValue(null),this.searchResultsVisible=!1}},{key:"handleSearchKeyUp",value:function(t){switch(this.isSparesSelected=!1,t.key){case"ArrowDown":var e=this.searchResultElements.toArray();e.length>0&&e[0].nativeElement.focus();break;case"Escape":this.clearSearchForm()}}},{key:"sparesNameIsInSearchResults",value:function(t){var e,n=!1,i=o(this.searchResults);try{for(i.s();!(e=i.n()).done;){var c=e.value;c.id+" - "+c.description===t&&(n=!0)}}catch(r){i.e(r)}finally{i.f()}return n}},{key:"handleSearchBlur",value:function(){var t=this;setTimeout(function(){var e=t.searchForm.get("text").value,n=document.activeElement;t.sparesNameIsInSearchResults(e)||n.dataset.sparesname||t.clearSearchForm()},0)}},{key:"handleSearchResultKeyUp",value:function(t){switch(t.key){case"ArrowUp":var e=this.searchResultElements.toArray()[0].nativeElement;t.target===e?this.searchInputElement.nativeElement.focus():t.target.previousSibling.focus();break;case"ArrowDown":t.target.nextSibling&&t.target.nextSibling.focus();break;case"Escape":this.clearSearchForm()}}},{key:"handleSearchResultClick",value:function(t){return 0!==this.workOrderSpares.spareSkus.filter(function(e){return e.sku.id===t.id}).length?(this.toastService.showErrorToast("Item ".concat(t.id," Spare already selected")),this.clearSearchForm(),this.searchResultsVisible=!1,void(this.isSparesSelected=!0)):0===t.quantities.inStock?(this.toastService.showErrorToast("Item ".concat(t.id," does not have stock")),this.clearSearchForm(),this.searchResultsVisible=!1,void(this.isSparesSelected=!0)):(this.workOrderSpares.spareSkus.push({sku:t,quantity:t.quantities.inStock>0?1:0}),this.clearSearchForm(),this.searchResultsVisible=!1,this.isSparesSelected=!0,void(this.showSaveButton=!0))}},{key:"checkUserEditRights",value:function(){var t=this;this.isGettingUserRights=!0,this.authenticationService.currentUserProfile$.pipe(Object(T.a)(function(t){return t})).subscribe(function(e){t.authenticationService.currentUserHasPermission(a({},k.l.WorkOrders,[k.y.CanEditWorkOrder])).subscribe(function(n){e.userRole.groupName!==k.q.Technician?t.isEditable=n&&Number(t.workOrderStatus)!==k.z.Closed:t.isEditable=n&&Number(t.workOrderStatus)!==k.z.Closed&&Number(t.workOrderStatus)!==k.z.Complete,t.isGettingUserRights=!1})}),this.searchForm=this.formBuilder.group({text:new d.e({value:"",disabled:!this.isEditable}),spares:null,sparesGroup:new d.e({value:this.allSpareGroupOption,disabled:!this.isEditable})}),this.searchForm.get("text").valueChanges.pipe(Object(v.a)(700),Object(O.a)(function(t){return t.length>=3}),Object(O.a)(function(e){return!t.sparesNameIsInSearchResults(e)})).subscribe(function(){return t.searchSpares()})}},{key:"handleInValidQty",value:function(t){this.isQtyFormInvalid=t}}]),t}();Xt.\u0275fac=function(t){return new(t||Xt)(_.ec(d.d),_.ec(k.s),_.ec(k.A),_.ec(k.v),_.ec(k.d),_.ec(P))},Xt.\u0275cmp=_.Yb({type:Xt,selectors:[["app-pick-workorder-spares"]],viewQuery:function(t,e){var n;(1&t&&(_.Tc(Wt,1),_.Tc(Dt,1)),2&t)&&(_.Fc(n=_.sc())&&(e.searchInputElement=n.first),_.Fc(n=_.sc())&&(e.searchResultElements=n))},decls:8,vars:6,consts:[[3,"customCurrentPageTitle"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"spinner"],[1,"search-form",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"find-as-you-type","input-with-search-wrapper"],["type","text","formControlName","text","placeholder","Search spares by id or name",1,"form-control","form-control--search-prefix",3,"blur","keyup"],["formControlName","spares","type","hidden"],["formControlName","sparesGroup",1,"custom-select"],["default","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","text-center mt-5",4,"ngIf"],["class","find-as-you-type__results",4,"ngIf"],["class","find-as-you-type__no-results mt-2",4,"ngIf"],["class","find-as-you-type__spinner-container",4,"ngIf"],[1,"find-as-you-type__results"],["class","select-spares-btn",3,"keyup","click",4,"ngFor","ngForOf"],[1,"select-spares-btn",3,"keyup","click"],["searchResult",""],[1,"find-as-you-type__no-results","mt-2"],[1,"find-as-you-type__spinner-container"],[3,"value"],[1,"text-center","mt-5"],[3,"sparesSku","isEditable","isSkuDeleted","handlesQtyChange","isQtyInValid",4,"ngFor","ngForOf"],[1,"non-sku-row"],[3,"sparesSku","isEditable","isSkuDeleted","handlesQtyChange","isQtyInValid"],[1,"form-actions"],[1,"btn","btn-primary","btn-block","col-12",3,"disabled","click"],["class","spinner light",4,"ngIf"],[1,"spinner","light"]],template:function(t,e){1&t&&(_.fc(0,"app-section-header",0),_.kc(1,"h1"),_.Pc(2),_.Oc(3,Et,4,2,"span",1),_.jc(),_.Oc(4,Rt,1,0,"div",2),_.Oc(5,$t,16,6,"div",1),_.kc(6,"article"),_.Oc(7,Yt,5,5,"footer",1),_.jc()),2&t&&(_.Ac("customCurrentPageTitle","Pick Spares"),_.Tb(2),_.Rc(" Picking spares for WO",e.wordOrderNumber," "),_.Tb(1),_.Ac("ngIf",e.workOrderSpares&&e.workOrderSpares.spareSkus&&e.workOrderSpares.spareSkus.length>0),_.Tb(1),_.Ac("ngIf",e.isLoading||e.isGettingUserRights),_.Tb(1),_.Ac("ngIf",!e.isLoading&&!e.isGettingUserRights),_.Tb(2),_.Ac("ngIf",e.showSaveButton))},directives:[M.a,l.k,d.w,d.n,d.g,d.c,d.m,d.f,d.u,d.q,d.x,l.j,Ft],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}.search-form[_ngcontent-%COMP%]{padding-bottom:1.5em;margin-bottom:1.5em}.search-form[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%], .search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;font-size:1rem;font-weight:400;line-height:1.5;height:calc(1.5em + 1.5rem + 2px)}.search-form[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{display:inline-block;width:100%;color:#495057;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}@media screen and (max-width:768px){.search-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-bottom:1em}}table[_ngcontent-%COMP%]{width:100%;margin-top:2em}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.875em;text-align:center}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40%;text-align:left;padding-left:14px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:20%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:4%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:last-child){background-color:#f2f2f2;line-height:1.1}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:last-child)   td[_ngcontent-%COMP%]{padding:.8em;text-align:center;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff}table[_ngcontent-%COMP%]   .non-sku-row[_ngcontent-%COMP%]{line-height:1.1}table[_ngcontent-%COMP%]   .non-sku-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em;text-align:center;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff}@media screen and (max-width:768px){table[_ngcontent-%COMP%]{margin-top:1em}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:block}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){display:none}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:60%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:40%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block}}footer[_ngcontent-%COMP%]{position:fixed;z-index:1;bottom:0;padding:2em;left:7.9em;width:calc(100% - 7.9em);background-color:#f2f2f2;box-shadow:0 0 3px #c3c3c3;transition:all .2s ease-out}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width:800px){footer[_ngcontent-%COMP%]{left:0;width:100%}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.3rem}}.find-as-you-type[_ngcontent-%COMP%]{position:relative;z-index:5}.find-as-you-type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.find-as-you-type__no-results[_ngcontent-%COMP%], .find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .find-as-you-type__spinner-container[_ngcontent-%COMP%]{padding:.8em 1.2em;background-color:#f2f2f2;border:1px solid #ced4da;display:block}.find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;text-align:left}.find-as-you-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(106,149,91,.25);position:relative;background-color:#fff;z-index:5}.find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.find-as-you-type[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto}.find-as-you-type--suggestions-visible[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}  .nav-expanded.nav-expanded.nav-expanded app-pick-workorder-spares article footer{left:20em;width:calc(100% - 20em)}@media screen and (max-width:480px){  .nav-expanded.nav-expanded.nav-expanded app-pick-workorder-spares article footer{left:0;width:0;z-index:1}}"]});var Jt=r("FtGj"),te=r("FKr1"),ee=r("8LU1"),ne=r("nLfN"),ie=r("R1ws"),ce=r("XNiG"),re=r("VRyK"),oe=r("IzEk"),ae=r("1G5W"),se=r("JX91"),le=r("u47x"),de=r("cH1L"),he=r("0EQZ"),ue=new _.B("MatChipRemove"),pe=new _.B("MatChipAvatar"),ge=new _.B("MatChipTrailingIcon"),fe=Object(te.o)(Object(te.k)(Object(te.l)(function(){return p(function t(e){h(this,t),this._elementRef=e})}()),"primary"),-1),me=p(function t(){h(this,t)});me.\u0275fac=function(t){return new(t||me)},me.\u0275dir=_.Zb({type:me,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:[1,"mat-chip-avatar"],features:[_.Sb([{provide:pe,useExisting:me}])]});var be=p(function t(){h(this,t)});be.\u0275fac=function(t){return new(t||be)},be.\u0275dir=_.Zb({type:be,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:[1,"mat-chip-trailing-icon"],features:[_.Sb([{provide:ge,useExisting:be}])]});var ke=function(e){t(r,e);var i=n(r);function r(t,e,n,o,a,s,l,d){var u;return h(this,r),(u=i.call(this,t))._elementRef=t,u._ngZone=e,u._changeDetectorRef=a,u._hasFocus=!1,u.chipListSelectable=!0,u._chipListMultiple=!1,u._chipListDisabled=!1,u._selected=!1,u._selectable=!0,u._disabled=!1,u._removable=!0,u._onFocus=new ce.a,u._onBlur=new ce.a,u.selectionChange=new _.t,u.destroyed=new _.t,u.removed=new _.t,u._addHostClassName(),u._chipRippleTarget=s.createElement("div"),u._chipRippleTarget.classList.add("mat-chip-ripple"),u._elementRef.nativeElement.appendChild(u._chipRippleTarget),u._chipRipple=new te.j(c(u),e,u._chipRippleTarget,n),u._chipRipple.setupTriggerEvents(t),u.rippleConfig=o||{},u._animationsDisabled="NoopAnimations"===l,u.tabIndex=null!=d&&parseInt(d)||-1,u}return p(r,[{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(t){var e=Object(ee.b)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(t){this._value=t}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(t){this._selectable=Object(ee.b)(t)}},{key:"disabled",get:function(){return this._chipListDisabled||this._disabled},set:function(t){this._disabled=Object(ee.b)(t)}},{key:"removable",get:function(){return this._removable},set:function(t){this._removable=Object(ee.b)(t)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}},{key:"_addHostClassName",value:function(){var t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}},{key:"ngOnDestroy",value:function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}},{key:"select",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}},{key:"selectViaInteraction",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}},{key:"toggleSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}},{key:"focus",value:function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}},{key:"remove",value:function(){this.removable&&this.removed.emit({chip:this})}},{key:"_handleClick",value:function(t){this.disabled?t.preventDefault():t.stopPropagation()}},{key:"_handleKeydown",value:function(t){if(!this.disabled)switch(t.keyCode){case Jt.c:case Jt.b:this.remove(),t.preventDefault();break;case Jt.n:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}},{key:"_blur",value:function(){var t=this;this._ngZone.onStable.pipe(Object(oe.a)(1)).subscribe(function(){t._ngZone.run(function(){t._hasFocus=!1,t._onBlur.next({chip:t})})})}},{key:"_dispatchSelectionChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}]),r}(fe);ke.\u0275fac=function(t){return new(t||ke)(_.ec(_.r),_.ec(_.M),_.ec(ne.a),_.ec(te.d,8),_.ec(_.j),_.ec(l.c),_.ec(ie.a,8),_.pc("tabindex"))},ke.\u0275dir=_.Zb({type:ke,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,n){var i;(1&t&&(_.Xb(n,pe,1),_.Xb(n,ge,1),_.Xb(n,ue,1)),2&t)&&(_.Fc(i=_.sc())&&(e.avatar=i.first),_.Fc(i=_.sc())&&(e.trailingIcon=i.first),_.Fc(i=_.sc())&&(e.removeIcon=i.first))},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&_.rc("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(_.Ub("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),_.Wb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[_.Qb]}),ke.ctorParameters=function(){return[{type:_.r},{type:_.M},{type:ne.a},{type:void 0,decorators:[{type:_.N},{type:_.y,args:[te.d]}]},{type:_.j},{type:void 0,decorators:[{type:_.y,args:[l.c]}]},{type:String,decorators:[{type:_.N},{type:_.y,args:[ie.a]}]},{type:String,decorators:[{type:_.h,args:["tabindex"]}]}]},ke.propDecorators={avatar:[{type:_.n,args:[pe]}],trailingIcon:[{type:_.n,args:[ge]}],removeIcon:[{type:_.n,args:[ue]}],selected:[{type:_.D}],value:[{type:_.D}],selectable:[{type:_.D}],disabled:[{type:_.D}],removable:[{type:_.D}],selectionChange:[{type:_.O}],destroyed:[{type:_.O}],removed:[{type:_.O}]};var ve=function(){function t(e,n){h(this,t),this._parentChip=e,"BUTTON"===n.nativeElement.nodeName&&n.nativeElement.setAttribute("type","button")}return p(t,[{key:"_handleClick",value:function(t){var e=this._parentChip;e.removable&&!e.disabled&&e.remove(),t.stopPropagation()}}]),t}();ve.\u0275fac=function(t){return new(t||ve)(_.ec(ke),_.ec(_.r))},ve.\u0275dir=_.Zb({type:ve,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,e){1&t&&_.rc("click",function(t){return e._handleClick(t)})},features:[_.Sb([{provide:ue,useExisting:ve}])]}),ve.ctorParameters=function(){return[{type:ke},{type:_.r}]};var Oe=new _.B("mat-chips-default-options"),Ce=Object(te.n)(function(){return p(function t(e,n,i,c){h(this,t),this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=i,this.ngControl=c})}()),_e=0,Pe=p(function t(e,n){h(this,t),this.source=e,this.value=n}),Me=function(e){t(r,e);var i=n(r);function r(t,e,n,o,a,s,l){var d;return h(this,r),(d=i.call(this,s,o,a,l))._elementRef=t,d._changeDetectorRef=e,d._dir=n,d.ngControl=l,d.controlType="mat-chip-list",d._lastDestroyedChipIndex=null,d._destroyed=new ce.a,d._uid="mat-chip-list-"+_e++,d._tabIndex=0,d._userTabIndex=null,d._onTouched=function(){},d._onChange=function(){},d._multiple=!1,d._compareWith=function(t,e){return t===e},d._required=!1,d._disabled=!1,d.ariaOrientation="horizontal",d._selectable=!0,d.change=new _.t,d.valueChange=new _.t,d.ngControl&&(d.ngControl.valueAccessor=c(d)),d}return p(r,[{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"role",get:function(){return this.empty?null:"listbox"}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=Object(ee.b)(t),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(t){this.writeValue(t),this._value=t}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){return this._required},set:function(t){this._required=Object(ee.b)(t),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Object(ee.b)(t),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(t){var e=this;this._selectable=Object(ee.b)(t),this.chips&&this.chips.forEach(function(t){return t.chipListSelectable=e._selectable})}},{key:"tabIndex",set:function(t){this._userTabIndex=t,this._tabIndex=t}},{key:"chipSelectionChanges",get:function(){return Object(re.a).apply(void 0,s(this.chips.map(function(t){return t.selectionChange})))}},{key:"chipFocusChanges",get:function(){return Object(re.a).apply(void 0,s(this.chips.map(function(t){return t._onFocus})))}},{key:"chipBlurChanges",get:function(){return Object(re.a).apply(void 0,s(this.chips.map(function(t){return t._onBlur})))}},{key:"chipRemoveChanges",get:function(){return Object(re.a).apply(void 0,s(this.chips.map(function(t){return t.destroyed})))}},{key:"ngAfterContentInit",value:function(){var t=this;this._keyManager=new le.e(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(ae.a)(this._destroyed)).subscribe(function(e){return t._keyManager.withHorizontalOrientation(e)}),this._keyManager.tabOut.pipe(Object(ae.a)(this._destroyed)).subscribe(function(){t._allowFocusEscape()}),this.chips.changes.pipe(Object(se.a)(null),Object(ae.a)(this._destroyed)).subscribe(function(){t.disabled&&Promise.resolve().then(function(){t._syncChipsState()}),t._resetChips(),t._initializeSelection(),t._updateTabIndex(),t._updateFocusForDestroyedChips(),t.stateChanges.next()})}},{key:"ngOnInit",value:function(){this._selectionModel=new he.b(this.multiple,void 0,!1),this.stateChanges.next()}},{key:"ngDoCheck",value:function(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}},{key:"registerInput",value:function(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}},{key:"setDescribedByIds",value:function(t){this._ariaDescribedby=t.join(" ")}},{key:"writeValue",value:function(t){this.chips&&this._setSelectionByValue(t,!1)}},{key:"registerOnChange",value:function(t){this._onChange=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t,this.stateChanges.next()}},{key:"onContainerClick",value:function(t){this._originatesFromChip(t)||this.focus()}},{key:"focus",value:function(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}},{key:"_focusInput",value:function(t){this._chipInput&&this._chipInput.focus(t)}},{key:"_keydown",value:function(t){var e=t.target;t.keyCode===Jt.b&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}},{key:"_updateTabIndex",value:function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}},{key:"_updateFocusForDestroyedChips",value:function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}},{key:"_isValidIndex",value:function(t){return t>=0&&t<this.chips.length}},{key:"_isInputEmpty",value:function(t){return!(!t||"input"!==t.nodeName.toLowerCase())&&!t.value}},{key:"_setSelectionByValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._clearSelection(),this.chips.forEach(function(t){return t.deselect()}),Array.isArray(t))t.forEach(function(t){return e._selectValue(t,n)}),this._sortValues();else{var i=this._selectValue(t,n);i&&n&&this._keyManager.setActiveItem(i)}}},{key:"_selectValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.chips.find(function(n){return null!=n.value&&e._compareWith(n.value,t)});return i&&(n?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}},{key:"_initializeSelection",value:function(){var t=this;Promise.resolve().then(function(){(t.ngControl||t._value)&&(t._setSelectionByValue(t.ngControl?t.ngControl.value:t._value,!1),t.stateChanges.next())})}},{key:"_clearSelection",value:function(t){this._selectionModel.clear(),this.chips.forEach(function(e){e!==t&&e.deselect()}),this.stateChanges.next()}},{key:"_sortValues",value:function(){var t=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach(function(e){e.selected&&t._selectionModel.select(e)}),this.stateChanges.next())}},{key:"_propagateChanges",value:function(t){var e;e=Array.isArray(this.selected)?this.selected.map(function(t){return t.value}):this.selected?this.selected.value:t,this._value=e,this.change.emit(new Pe(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}},{key:"_blur",value:function(){var t=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(function(){t.focused||t._markAsTouched()}):this._markAsTouched())}},{key:"_markAsTouched",value:function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_allowFocusEscape",value:function(){var t=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(function(){t._tabIndex=t._userTabIndex||0,t._changeDetectorRef.markForCheck()}))}},{key:"_resetChips",value:function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}},{key:"_dropSubscriptions",value:function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}},{key:"_listenToChipsSelection",value:function(){var t=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(function(e){e.source.selected?t._selectionModel.select(e.source):t._selectionModel.deselect(e.source),t.multiple||t.chips.forEach(function(e){!t._selectionModel.isSelected(e)&&e.selected&&e.deselect()}),e.isUserInput&&t._propagateChanges()})}},{key:"_listenToChipsFocus",value:function(){var t=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe(function(e){var n=t.chips.toArray().indexOf(e.chip);t._isValidIndex(n)&&t._keyManager.updateActiveItem(n),t.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(function(){t._blur(),t.stateChanges.next()})}},{key:"_listenToChipsRemoved",value:function(){var t=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(function(e){var n=e.chip,i=t.chips.toArray().indexOf(e.chip);t._isValidIndex(i)&&n._hasFocus&&(t._lastDestroyedChipIndex=i)})}},{key:"_originatesFromChip",value:function(t){for(var e=t.target;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}},{key:"_hasFocusedChip",value:function(){return this.chips&&this.chips.some(function(t){return t._hasFocus})}},{key:"_syncChipsState",value:function(){var t=this;this.chips&&this.chips.forEach(function(e){e._chipListDisabled=t._disabled,e._chipListMultiple=t.multiple})}}]),r}(Ce);Me.\u0275fac=function(t){return new(t||Me)(_.ec(_.r),_.ec(_.j),_.ec(de.b,8),_.ec(d.o,8),_.ec(d.g,8),_.ec(te.b),_.ec(d.l,10))},Me.\u0275cmp=_.Yb({type:Me,selectors:[["mat-chip-list"]],contentQueries:function(t,e,n){var i;(1&t&&_.Xb(n,ke,1),2&t)&&(_.Fc(i=_.sc())&&(e.chips=i))},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&_.rc("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(_.nc("id",e._uid),_.Ub("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),_.Wb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[_.Sb([{provide:L.c,useExisting:Me}]),_.Qb],ngContentSelectors:["*"],decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(_.zc(),_.kc(0,"div",0),_.yc(1),_.jc())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),Me.ctorParameters=function(){return[{type:_.r},{type:_.j},{type:de.b,decorators:[{type:_.N}]},{type:d.o,decorators:[{type:_.N}]},{type:d.g,decorators:[{type:_.N}]},{type:te.b},{type:d.l,decorators:[{type:_.N},{type:_.Y}]}]},Me.propDecorators={errorStateMatcher:[{type:_.D}],multiple:[{type:_.D}],compareWith:[{type:_.D}],value:[{type:_.D}],required:[{type:_.D}],placeholder:[{type:_.D}],disabled:[{type:_.D}],ariaOrientation:[{type:_.D,args:["aria-orientation"]}],selectable:[{type:_.D}],tabIndex:[{type:_.D}],change:[{type:_.O}],valueChange:[{type:_.O}],chips:[{type:_.o,args:[ke,{descendants:!0}]}]};var we=0,ye=function(){function t(e,n){h(this,t),this._elementRef=e,this._defaultOptions=n,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new _.t,this.placeholder="",this.id="mat-chip-list-input-"+we++,this._disabled=!1,this._inputElement=this._elementRef.nativeElement}return p(t,[{key:"chipList",set:function(t){t&&(this._chipList=t,this._chipList.registerInput(this))}},{key:"addOnBlur",get:function(){return this._addOnBlur},set:function(t){this._addOnBlur=Object(ee.b)(t)}},{key:"disabled",get:function(){return this._disabled||this._chipList&&this._chipList.disabled},set:function(t){this._disabled=Object(ee.b)(t)}},{key:"empty",get:function(){return!this._inputElement.value}},{key:"ngOnChanges",value:function(){this._chipList.stateChanges.next()}},{key:"_keydown",value:function(t){t&&t.keyCode===Jt.o&&!Object(Jt.s)(t,"shiftKey")&&this._chipList._allowFocusEscape(),this._emitChipEnd(t)}},{key:"_blur",value:function(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}},{key:"_focus",value:function(){this.focused=!0,this._chipList.stateChanges.next()}},{key:"_emitChipEnd",value:function(t){!this._inputElement.value&&t&&this._chipList._keydown(t),t&&!this._isSeparatorKey(t)||(this.chipEnd.emit({input:this._inputElement,value:this._inputElement.value}),t&&t.preventDefault())}},{key:"_onInput",value:function(){this._chipList.stateChanges.next()}},{key:"focus",value:function(t){this._inputElement.focus(t)}},{key:"_isSeparatorKey",value:function(t){return!Object(Jt.s)(t)&&new Set(this.separatorKeyCodes).has(t.keyCode)}}]),t}();ye.\u0275fac=function(t){return new(t||ye)(_.ec(_.r),_.ec(Oe))},ye.\u0275dir=_.Zb({type:ye,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(t,e){1&t&&_.rc("keydown",function(t){return e._keydown(t)})("blur",function(){return e._blur()})("focus",function(){return e._focus()})("input",function(){return e._onInput()}),2&t&&(_.nc("id",e.id),_.Ub("disabled",e.disabled||null)("placeholder",e.placeholder||null)("aria-invalid",e._chipList&&e._chipList.ngControl?e._chipList.ngControl.invalid:null)("aria-required",e._chipList&&e._chipList.required||null))},inputs:{separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[_.Rb]}),ye.ctorParameters=function(){return[{type:_.r},{type:void 0,decorators:[{type:_.y,args:[Oe]}]}]},ye.propDecorators={chipList:[{type:_.D,args:["matChipInputFor"]}],addOnBlur:[{type:_.D,args:["matChipInputAddOnBlur"]}],separatorKeyCodes:[{type:_.D,args:["matChipInputSeparatorKeyCodes"]}],chipEnd:[{type:_.O,args:["matChipInputTokenEnd"]}],placeholder:[{type:_.D}],id:[{type:_.D}],disabled:[{type:_.D}]};var xe={separatorKeyCodes:[Jt.f]},Se=p(function t(){h(this,t)});function je(t,e){if(1&t){var n=_.lc();_.kc(0,"span"),_.Pc(1),_.kc(2,"a",10),_.rc("click",function(){return _.Ic(n),_.vc(2).handleViewMoreClick()}),_.Pc(3,"View More"),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Tb(1),_.Rc("",i.taskItem.description.substring(0,i.textMaxLength-10),"... ")}}function Ie(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.jc()),2&t){var n=_.vc(2);_.Tb(1),_.Qc(n.taskItem.description)}}function Ae(t,e){if(1&t){var n=_.lc();_.kc(0,"span"),_.Pc(1),_.kc(2,"a",10),_.rc("click",function(){return _.Ic(n),_.vc(2).handleViewMoreClick()}),_.fc(3,"br"),_.Pc(4," View Less"),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Tb(1),_.Rc("",i.taskItem.description," ")}}function Te(t,e){if(1&t&&(_.kc(0,"table",2),_.kc(1,"tbody"),_.kc(2,"tr"),_.kc(3,"td",3),_.kc(4,"span"),_.Pc(5),_.jc(),_.jc(),_.kc(6,"td",4),_.Oc(7,je,4,1,"span",5),_.Oc(8,Ie,2,1,"span",5),_.Oc(9,Ae,5,1,"span",5),_.jc(),_.kc(10,"td",6),_.kc(11,"div",7),_.kc(12,"label",8),_.fc(13,"input",9),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc()),2&t){var n=_.vc();_.Tb(5),_.Qc(n.taskItem.sequenceNumber),_.Tb(2),_.Ac("ngIf",n.taskItem.description.length>n.textMaxLength&&!n.isViewTaskItemDetail),_.Tb(1),_.Ac("ngIf",n.taskItem.description.length<=n.textMaxLength),_.Tb(1),_.Ac("ngIf",n.isViewTaskItemDetail)}}Se.\u0275fac=function(t){return new(t||Se)},Se.\u0275mod=_.cc({type:Se}),Se.\u0275inj=_.bc({providers:[te.b,{provide:Oe,useValue:xe}],imports:[[te.e]]});var Fe=function(t){return{"addtask-wrapper":t}},We=function(){function t(){h(this,t),this.textMaxLength=90,this.isViewTaskItemDetail=!1}return p(t,[{key:"ngOnInit",value:function(){}},{key:"handleViewMoreClick",value:function(){this.isViewTaskItemDetail=!this.isViewTaskItemDetail}}]),t}();We.\u0275fac=function(t){return new(t||We)},We.\u0275cmp=_.Yb({type:We,selectors:[["app-pick-task-item"]],inputs:{taskItem:"taskItem",firstItem:"firstItem"},decls:2,vars:4,consts:[[3,"ngClass"],["width","100%",4,"ngIf"],["width","100%"],[1,"task-id-cell"],[1,"task-description-cell"],[4,"ngIf"],[1,"task-iscompleted-cell"],[1,"form-group"],["for","includeObsolete",1,"custom-control-label","label-align"],["disabled","","type","checkbox",1,"custom-control-input"],[1,"clickView",3,"click"]],template:function(t,e){1&t&&(_.fc(0,"div",0),_.Oc(1,Te,14,4,"table",1)),2&t&&(_.Ac("ngClass",_.Ec(2,Fe,e.firstItem)),_.Tb(1),_.Ac("ngIf",e.taskItem))},directives:[l.i,l.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}[_nghost-%COMP%]{display:table-row;background-color:#f2f2f2;line-height:1.1;position:relative}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:-1em}@media screen and (max-width:768px){[_nghost-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em 1.3em .8em .8em;text-align:center;vertical-align:middle;border-bottom:2px solid #fff;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:center;width:13%;line-height:32px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:78%;line-height:32px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){font-weight:600;width:20%;line-height:32px}@media screen and (max-width:768px){.delete-row-cell[_ngcontent-%COMP%]{left:102%}[_nghost-%COMP%]{margin-bottom:0;display:flex;align-items:center;border-bottom:none}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em .5em .8em .1em;text-align:center;vertical-align:middle;border-bottom:2px solid #fff;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:center;width:13%;line-height:32px;padding-right:0}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:77%;line-height:32px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){font-weight:600;width:20%;line-height:32px}}.task-id-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:30px}@media screen and (max-width:768px){.task-id-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:auto;line-height:22px;align-items:center;border-right:0 solid #c3bbbb}}.task-description-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-right:1px solid #c3bbbb;border-left:1px solid #c3bbbb;display:block;min-height:30px;padding:0 1em}@media screen and (max-width:768px){.task-description-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:auto;line-height:22px;display:flex;padding-left:5px;border-left:1px solid #c3bbbb}}.addtask-wrapper[_ngcontent-%COMP%]{box-shadow:1px 4px 3px hsla(0,1%,86%,.75);margin-top:27px;width:100%;display:block;clear:both;float:left;height:5px;top:-18px;position:absolute}@media screen and (max-width:768px){.addtask-wrapper[_ngcontent-%COMP%]{top:-41px}}.custom-control-input[_ngcontent-%COMP%]{height:19px;width:19px;margin-top:10px}"]});var De=["searchInput"],Le=["searchResult"];function Ee(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.jc()),2&t){var n=_.vc();_.Tb(1),_.Rc("(",n.itemCount," item)")}}function Re(t,e){if(1&t&&(_.kc(0,"span"),_.Pc(1),_.jc()),2&t){var n=_.vc();_.Tb(1),_.Rc("(",n.itemCount," items)")}}function Ue(t,e){1&t&&_.fc(0,"div",4)}function Ve(t,e){if(1&t){var n=_.lc();_.kc(0,"button",18,19),_.rc("keyup",function(t){return _.Ic(n),_.vc(4).handleSearchResultKeyUp(t)})("click",function(){_.Ic(n);var t=e.$implicit;return _.vc(4).handleSearchResultClick(t)}),_.Pc(2),_.jc()}if(2&t){var i=e.$implicit;_.Ub("data-checklisttaskname",i.name),_.Tb(2),_.Sc(" ",i.numberWithPrefix," - ",i.name," ")}}function Ne(t,e){if(1&t&&(_.kc(0,"div",16),_.Oc(1,Ve,3,3,"button",17),_.jc()),2&t){var n=_.vc(3);_.Tb(1),_.Ac("ngForOf",n.searchResults)}}function ze(t,e){1&t&&(_.kc(0,"div",20),_.Pc(1," No checklists found "),_.jc())}function qe(t,e){1&t&&(_.kc(0,"div",21),_.fc(1,"div",4),_.jc())}function Be(t,e){if(1&t&&(_.kc(0,"div"),_.Oc(1,Ne,2,1,"div",13),_.Oc(2,ze,2,0,"div",14),_.Oc(3,qe,2,0,"div",15),_.jc()),2&t){var n=_.vc(2);_.Tb(1),_.Ac("ngIf",!n.isSearching),_.Tb(1),_.Ac("ngIf",0===n.searchResults.length&&!n.isSearching),_.Tb(1),_.Ac("ngIf",n.isSearching)}}function Qe(t,e){if(1&t&&(_.kc(0,"h2"),_.Pc(1),_.jc()),2&t){var n=_.vc().$implicit;_.Tb(1),_.Sc(" ",n.numberWithPrefix," - ",n.name," ")}}var Ge=function(t){return{"last-item":t}};function Ke(t,e){if(1&t&&_.fc(0,"app-pick-task-item",39),2&t){var n=_.vc(),i=n.$implicit,c=n.first,r=n.last;_.Ac("taskItem",i)("firstItem",c)("ngClass",_.Ec(3,Ge,r))}}function $e(t,e){if(1&t&&(_.uc(),_.tc(),_.kc(0,"div",37),_.Oc(1,Ke,1,5,"app-pick-task-item",38),_.jc()),2&t){var n=_.vc().$implicit,i=_.vc(3);_.Tb(1),_.Ac("ngIf",n===i.expanded)}}var Ze=function(t){return{expanded:t}};function He(t,e){if(1&t){var n=_.lc();_.kc(0,"div"),_.kc(1,"div",24),_.Oc(2,Qe,2,2,"h2",0),_.kc(3,"button",25),_.rc("click",function(){_.Ic(n);var t=e.$implicit;return _.vc(3).handleShowCheckListContent(t)}),_.kc(4,"div"),_.uc(),_.kc(5,"svg",26),_.fc(6,"path",27),_.jc(),_.jc(),_.jc(),_.tc(),_.kc(7,"div",28),_.kc(8,"button",29),_.rc("click",function(){_.Ic(n);var t=e.$implicit;return _.vc(3).handleDeleteCheckListItem(t)}),_.uc(),_.kc(9,"svg",30),_.fc(10,"defs"),_.fc(11,"path",31),_.fc(12,"path",32),_.fc(13,"path",33),_.fc(14,"path",34),_.fc(15,"path",35),_.jc(),_.jc(),_.jc(),_.Oc(16,$e,2,1,"div",36),_.jc(),_.jc()}if(2&t){var i=e.$implicit,c=_.vc(3);_.Tb(2),_.Ac("ngIf",i&&i.name||i.numberWithPrefix),_.Tb(1),_.Ac("ngClass",_.Ec(3,Ze,i===c.expanded)),_.Tb(13),_.Ac("ngForOf",i.task)}}function Ye(t,e){if(1&t&&(_.kc(0,"div",22),_.kc(1,"table"),_.kc(2,"tbody"),_.kc(3,"tr"),_.Oc(4,He,17,5,"div",23),_.jc(),_.jc(),_.jc(),_.jc()),2&t){var n=_.vc(2);_.Tb(4),_.Ac("ngForOf",n.listCheckLists)}}function Xe(t,e){if(1&t){var n=_.lc();_.kc(0,"div"),_.kc(1,"form",5),_.kc(2,"div",6),_.kc(3,"div"),_.kc(4,"div",7),_.kc(5,"div",8),_.kc(6,"input",9,10),_.rc("blur",function(){return _.Ic(n),_.vc().handleSearchBlur()})("keyup",function(t){return _.Ic(n),_.vc().handleSearchKeyUp(t)}),_.jc(),_.fc(8,"input",11),_.Oc(9,Be,4,3,"div",0),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.kc(10,"div"),_.Oc(11,Ye,5,1,"div",12),_.jc(),_.jc()}if(2&t){var i=_.vc();_.Tb(1),_.Ac("formGroup",i.searchForm),_.Tb(4),_.Wb("find-as-you-type--suggestions-visible",i.isCheckListsSelected||i.searchResultsVisible),_.Tb(4),_.Ac("ngIf",i.searchResultsVisible),_.Tb(2),_.Ac("ngIf",i.listCheckLists.length>0)}}var Je=function(){function t(e,n,i){h(this,t),this.formBuilder=e,this.checkListsService=n,this.toastService=i,this.isLoading=!1,this.isSearching=!1,this.searchResults=[],this.searchCheckListTaskResults=[],this.isCheckListsSelected=!1,this.searchResultsVisible=!1,this.listCheckLists=[],this.existingChecklists=[],this.addedCheckLists=new _.t,this.expanded=!1,this.searchForm=this.formBuilder.group({text:"",checkLists:null})}return p(t,[{key:"ngOnInit",value:function(){var t,e=this;this.searchForm.get("text").valueChanges.pipe(Object(v.a)(700),Object(O.a)(function(t){return t.length>=2}),Object(O.a)(function(t){return!e.checkListsNameIsInSearchResults(t)})).subscribe(function(){e.searchCheckLists()}),this.searchForm.get("text").valueChanges.pipe(Object(v.a)(700),Object(O.a)(function(t){return t.length<2})).subscribe(function(){return e.searchResultsVisible=!1}),(t=this.listCheckLists).push.apply(t,s(this.existingChecklists))}},{key:"checkListsNameIsInSearchResults",value:function(t){var e,n=!1,i=o(this.searchResults);try{for(i.s();!(e=i.n()).done;){var c=e.value;c.number+" - "+c.name===t&&(n=!0)}}catch(r){i.e(r)}finally{i.f()}return n}},{key:"searchCheckLists",value:function(){var t=this;this.searchCheckListsSubscription&&!this.searchCheckListsSubscription.closed&&this.searchCheckListsSubscription.unsubscribe();var e=this.searchForm.get("text").value;!1===this.isCheckListsSelected&&(this.isSearching=!0,this.searchResultsVisible=!0,this.searchCheckListsSubscription=this.checkListsService.getCheckListsList({offset:0,take:100,searchText:e,includeObsolete:!1}).subscribe(function(e){t.searchResults=[],e.forEach(function(e){var n={id:e.id,number:e.number,name:e.name,numberWithPrefix:e.numberWithPrefix};t.searchResults.push(n)}),t.isSearching=!1})),this.isLoading=!1}},{key:"clearSearchForm",value:function(){this.searchForm.setValue({text:"",checkLists:null}),this.searchResultsVisible=!1}},{key:"handleSearchBlur",value:function(){var t=this;setTimeout(function(){var e=t.searchForm.get("text").value,n=document.activeElement;t.checklistsTaskIsInSearchResults(e)||n.dataset.checklisttaskname||t.clearSearchForm()},0)}},{key:"checklistsTaskIsInSearchResults",value:function(t){var e,n=!1,i=o(this.searchResults);try{for(i.s();!(e=i.n()).done;){var c=e.value;c.numberWithPrefix+" - "+c.name===t&&(n=!0)}}catch(r){i.e(r)}finally{i.f()}return n}},{key:"handleSearchKeyUp",value:function(t){switch(this.isCheckListsSelected=!1,t.key){case"ArrowDown":var e=this.searchResultElements.toArray();e.length>0&&e[0].nativeElement.focus();break;case"Escape":this.clearSearchForm()}}},{key:"handleSearchResultClick",value:function(t){var e=this;setTimeout(function(){if(!1===e.isCheckListsSelected){e.isSearching=!0,e.searchResultsVisible=!0;var n=t.number;e.searchValueSubscription&&!e.searchValueSubscription.closed&&e.searchValueSubscription.unsubscribe(),e.searchValueSubscription=e.checkListsService.viewCheckListForId(n).subscribe(function(n){if(0===e.listCheckLists.filter(function(t){return t.id===n.id}).length)e.listCheckLists.push(n),e.isSearching=!1;else{var i=e.listCheckLists.filter(function(e){return e.id===t.id});e.toastService.showErrorToast("".concat(i[0].numberWithPrefix," Checklist already selected"))}}),e.isLoading=!1}e.clearSearchForm()},0)}},{key:"handleSearchResultKeyUp",value:function(t){switch(t.key){case"ArrowUp":var e=this.searchResultElements.toArray()[0].nativeElement;t.target===e?this.searchInputElement.nativeElement.focus():t.target.previousSibling.focus();break;case"ArrowDown":t.target.nextSibling&&t.target.nextSibling.focus();break;case"Escape":this.clearSearchForm()}}},{key:"addCheckLists",value:function(){this.addedCheckLists.emit(this.listCheckLists)}},{key:"handleShowCheckListContent",value:function(t){this.expanded===t?this.expanded=null:this.expanded=t}},{key:"handleDeleteCheckListItem",value:function(t){this.listCheckLists.splice(this.listCheckLists.indexOf(t),1)}}]),t}();function tn(t,e){1&t&&(_.kc(0,"div"),_.fc(1,"div",2),_.jc())}function en(t,e){1&t&&(_.kc(0,"div",44),_.fc(1,"div",7),_.kc(2,"div",45),_.Pc(3," You must specify title "),_.jc(),_.jc())}function nn(t,e){1&t&&(_.kc(0,"div",44),_.fc(1,"div",7),_.kc(2,"div",45),_.Pc(3," You must specify description "),_.jc(),_.jc())}function cn(t,e){1&t&&(_.kc(0,"div",44),_.fc(1,"div",17),_.kc(2,"div",46),_.Pc(3," You must specify reported on date "),_.jc(),_.jc())}function rn(t,e){1&t&&(_.kc(0,"div",44),_.fc(1,"div",17),_.kc(2,"div",46),_.Pc(3," You must specify due on date "),_.jc(),_.jc())}function on(t,e){1&t&&(_.kc(0,"div",44),_.fc(1,"div",17),_.kc(2,"div",46),_.Pc(3," You must specify category "),_.jc(),_.jc())}function an(t,e){if(1&t&&(_.kc(0,"option",47),_.Pc(1),_.jc()),2&t){var n=e.$implicit;_.Ac("value",n.id),_.Tb(1),_.Rc("",n.name," ")}}function sn(t,e){1&t&&(_.kc(0,"div",44),_.fc(1,"div",17),_.kc(2,"div",46),_.Pc(3," You must specify priority "),_.jc(),_.jc())}function ln(t,e){if(1&t&&(_.kc(0,"option",47),_.Pc(1),_.jc()),2&t){var n=e.$implicit,i=_.vc(2);_.Ac("value",n),_.Tb(1),_.Rc(" ",i.priorityString(n)," ")}}function dn(t,e){1&t&&(_.kc(0,"div",48),_.kc(1,"div",15),_.kc(2,"div",49),_.fc(3,"label",17),_.kc(4,"div",50),_.Pc(5," You must specify an asset "),_.jc(),_.jc(),_.jc(),_.fc(6,"div",15),_.jc())}function hn(t,e){1&t&&(_.kc(0,"div",48),_.kc(1,"div",51),_.kc(2,"div",49),_.kc(3,"label",17),_.Pc(4,"Asset"),_.jc(),_.kc(5,"div",52),_.fc(6,"input",53),_.jc(),_.jc(),_.jc(),_.kc(7,"div",51),_.kc(8,"div",49),_.kc(9,"label",17),_.Pc(10,"Location"),_.jc(),_.kc(11,"div",54),_.fc(12,"input",55),_.uc(),_.kc(13,"svg",56),_.kc(14,"g",57),_.fc(15,"path",58),_.fc(16,"path",59),_.fc(17,"path",60),_.fc(18,"path",61),_.fc(19,"path",62),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc())}function un(t,e){if(1&t){var n=_.lc();_.kc(0,"div",48),_.kc(1,"div",51),_.kc(2,"div",49),_.kc(3,"label",17),_.Pc(4,"Asset"),_.jc(),_.kc(5,"div",52),_.fc(6,"input",53),_.jc(),_.jc(),_.jc(),_.kc(7,"div",51),_.kc(8,"div",49),_.kc(9,"label",17),_.Pc(10,"Location"),_.jc(),_.kc(11,"div",54),_.fc(12,"input",55),_.kc(13,"button",63),_.rc("click",function(){_.Ic(n);var t=e.$implicit;return _.vc(2).handleDeleteAsset(t)}),_.uc(),_.kc(14,"svg",64),_.kc(15,"g",57),_.fc(16,"path",58),_.fc(17,"path",59),_.fc(18,"path",60),_.fc(19,"path",61),_.fc(20,"path",62),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc()}if(2&t){var i=e.$implicit;_.Tb(6),_.Ac("value",i.assetId+" - "+i.name),_.Tb(6),_.Ac("value",i.location)}}function pn(t,e){if(1&t&&(_.kc(0,"mat-chip"),_.Pc(1),_.jc()),2&t){var n=e.$implicit;_.Tb(1),_.Qc(n.name)}}function gn(t,e){if(1&t){var n=_.lc();_.kc(0,"app-modal",65),_.rc("modalShouldClose",function(){return _.Ic(n),_.vc(2).handleDetailsModalClose()})("contextmenu",function(t){return _.Ic(n),_.vc(2).disableRightClick(t)}),_.kc(1,"app-pick-assets",66),_.rc("addedAssets",function(t){return _.Ic(n),_.vc(2).handleAddedWorkOrderAssets(t)}),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Tb(1),_.Ac("existingAssets",i.existingWorkOrderAssets)}}function fn(t,e){if(1&t){var n=_.lc();_.kc(0,"app-modal",65),_.rc("modalShouldClose",function(){return _.Ic(n),_.vc(2).handlePickCheckListsModalClose()})("contextmenu",function(t){return _.Ic(n),_.vc(2).disableRightClick(t)}),_.kc(1,"app-pick-check-lists",67),_.rc("addedCheckLists",function(t){return _.Ic(n),_.vc(2).handlePickWorkOrderCheckLists(t)}),_.jc(),_.jc()}if(2&t){var i=_.vc(2);_.Tb(1),_.Ac("existingChecklists",i.existingWorkOrderChecklists)}}function mn(t,e){if(1&t){var n=_.lc();_.kc(0,"article"),_.kc(1,"header"),_.kc(2,"h1"),_.Pc(3,"Create Work Order"),_.jc(),_.jc(),_.kc(4,"form",3),_.kc(5,"div",4),_.Oc(6,en,4,0,"div",5),_.kc(7,"div",6),_.kc(8,"div",7),_.kc(9,"label"),_.Pc(10,"Title"),_.jc(),_.jc(),_.kc(11,"div",8),_.fc(12,"input",9),_.jc(),_.jc(),_.Oc(13,nn,4,0,"div",5),_.kc(14,"div",10),_.kc(15,"div",11),_.kc(16,"label"),_.Pc(17,"Description"),_.jc(),_.jc(),_.kc(18,"div",12),_.kc(19,"textarea",13),_.Pc(20,"          "),_.jc(),_.jc(),_.jc(),_.kc(21,"div",14),_.kc(22,"div",15),_.Oc(23,cn,4,0,"div",5),_.kc(24,"div",16),_.kc(25,"label",17),_.Pc(26,"Reported On"),_.jc(),_.kc(27,"div",18),_.kc(28,"div",19),_.kc(29,"div",20),_.kc(30,"input",21),_.rc("dateChange",function(t){return _.Ic(n),_.vc().onDateChange(t)}),_.jc(),_.fc(31,"mat-datepicker-toggle",22),_.fc(32,"mat-datepicker",23,24),_.jc(),_.jc(),_.jc(),_.jc(),_.Oc(34,rn,4,0,"div",5),_.kc(35,"div",16),_.kc(36,"label",17),_.Pc(37,"Due On"),_.jc(),_.kc(38,"div",18),_.kc(39,"div",19),_.kc(40,"div",20),_.fc(41,"input",25),_.fc(42,"mat-datepicker-toggle",22),_.fc(43,"mat-datepicker",23,26),_.jc(),_.jc(),_.jc(),_.jc(),_.kc(45,"div",16),_.kc(46,"label",17),_.Pc(47,"Assign To"),_.jc(),_.kc(48,"div",18),_.fc(49,"input",27),_.kc(50,"app-list-users",28),_.rc("selectedUserId",function(t){return _.Ic(n),_.vc().selectedUserId(t)}),_.jc(),_.jc(),_.jc(),_.jc(),_.kc(51,"div",15),_.Oc(52,on,4,0,"div",5),_.kc(53,"div",16),_.kc(54,"label",17),_.Pc(55,"Category"),_.jc(),_.kc(56,"div",18),_.kc(57,"select",29),_.Oc(58,an,2,2,"option",30),_.jc(),_.jc(),_.jc(),_.Oc(59,sn,4,0,"div",5),_.kc(60,"div",16),_.kc(61,"label",17),_.Pc(62,"Priority"),_.jc(),_.kc(63,"div",18),_.kc(64,"select",31),_.Oc(65,ln,2,2,"option",30),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.Oc(66,dn,7,0,"div",32),_.Oc(67,hn,20,0,"div",32),_.Oc(68,un,21,2,"div",33),_.kc(69,"div",34),_.kc(70,"button",35),_.rc("click",function(){return _.Ic(n),_.vc().handlePickAssets()}),_.Pc(71,"Add asset"),_.jc(),_.jc(),_.kc(72,"div",34),_.kc(73,"button",35),_.rc("click",function(){return _.Ic(n),_.vc().handlePickCheckLists()}),_.Pc(74,"Add Checklist"),_.jc(),_.jc(),_.kc(75,"div",10),_.kc(76,"div",36),_.kc(77,"label",37),_.Pc(78,"Checklists"),_.jc(),_.jc(),_.kc(79,"div",8),_.kc(80,"mat-form-field"),_.kc(81,"mat-chip-list",null,38),_.Oc(83,pn,2,1,"mat-chip",39),_.kc(84,"input",40),_.rc("matChipInputTokenEnd",function(t){return _.Ic(n),_.vc().addCheckList(t)}),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.jc(),_.kc(85,"footer"),_.kc(86,"div",41),_.kc(87,"button",42),_.rc("click",function(){return _.Ic(n),_.vc().createWorkOrder()}),_.Pc(88," Save all changes "),_.jc(),_.jc(),_.jc(),_.jc(),_.Oc(89,gn,2,1,"app-modal",43),_.Oc(90,fn,2,1,"app-modal",43),_.jc()}if(2&t){var i=_.Gc(33),c=_.Gc(44),r=_.Gc(82),o=_.vc();_.Tb(4),_.Ac("formGroup",o.formCreateWorkOrder),_.Tb(2),_.Ac("ngIf",o.submitAttempted&&o.formCreateWorkOrder.controls.title.errors),_.Tb(7),_.Ac("ngIf",o.submitAttempted&&o.formCreateWorkOrder.controls.description.errors),_.Tb(10),_.Ac("ngIf",o.submitAttempted&&o.formCreateWorkOrder.controls.reportedOn.errors),_.Tb(7),_.Ac("matDatepicker",i),_.Tb(1),_.Ac("for",i),_.Tb(3),_.Ac("ngIf",o.submitAttempted&&o.formCreateWorkOrder.controls.dueDate.errors),_.Tb(7),_.Ac("matDatepicker",c)("min",o.minDueDate),_.Tb(1),_.Ac("for",c),_.Tb(10),_.Ac("ngIf",o.submitAttempted&&o.formCreateWorkOrder.controls.category.errors),_.Tb(6),_.Ac("ngForOf",o.workOrderCategories),_.Tb(1),_.Ac("ngIf",o.submitAttempted&&o.formCreateWorkOrder.controls.priority.errors),_.Tb(6),_.Ac("ngForOf",o.workOrderPriorities),_.Tb(1),_.Ac("ngIf",o.submitAttempted&&0===o.existingWorkOrderAssets.length),_.Tb(1),_.Ac("ngIf",0===o.existingWorkOrderAssets.length),_.Tb(1),_.Ac("ngForOf",o.existingWorkOrderAssets),_.Tb(15),_.Ac("ngForOf",o.checklists),_.Tb(1),_.Ac("matChipInputFor",r)("matChipInputAddOnBlur",!0),_.Tb(2),_.Wb("visible",o.formCreateWorkOrder.dirty||o.showSaveButton),_.Tb(3),_.Ac("ngIf",o.addAssetsModalVisible),_.Tb(1),_.Ac("ngIf",o.pickCheckListsModalVisible)}}Je.\u0275fac=function(t){return new(t||Je)(_.ec(d.d),_.ec(k.h),_.ec(k.v))},Je.\u0275cmp=_.Yb({type:Je,selectors:[["app-pick-check-lists"]],viewQuery:function(t,e){var n;(1&t&&(_.Tc(De,1),_.Tc(Le,1)),2&t)&&(_.Fc(n=_.sc())&&(e.searchInputElement=n.first),_.Fc(n=_.sc())&&(e.searchResultElements=n))},inputs:{existingChecklists:"existingChecklists"},outputs:{addedCheckLists:"addedCheckLists"},decls:10,vars:7,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"form-actions","done-btn"],[1,"btn","btn-primary","btn-block","col-12",3,"disabled","click"],[1,"spinner"],[1,"search-form",3,"formGroup"],[1,"row"],[1,"form-group"],[1,"find-as-you-type","input-with-search-wrapper"],["type","text","formControlName","text","placeholder","Search checklist by id or name",1,"form-control","form-control--search-prefix",3,"blur","keyup"],["searchInput",""],["formControlName","checkLists","type","hidden"],["class","checklist-wrapper",4,"ngIf"],["class","find-as-you-type__results",4,"ngIf"],["class","find-as-you-type__no-results",4,"ngIf"],["class","find-as-you-type__spinner-container",4,"ngIf"],[1,"find-as-you-type__results"],["class","select-lists-btn","type","button",3,"keyup","click",4,"ngFor","ngForOf"],["type","button",1,"select-lists-btn",3,"keyup","click"],["searchResult",""],[1,"find-as-you-type__no-results"],[1,"find-as-you-type__spinner-container"],[1,"checklist-wrapper"],[4,"ngFor","ngForOf"],[1,"title-block"],[1,"row-toggle","app-row-btn",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 8.797 5.194"],["d","M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z"],[1,"delete-row-cell"],[1,"delete-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 14 18"],["d","M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z","transform","translate(.2 1.267)",1,"cls-1"],["d","M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z",1,"cls-1"],["d","M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z","transform","translate(1.567 2)",1,"cls-1"],["d","M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z","transform","translate(.9 1.967)",1,"cls-1"],["d","M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z","transform","translate(2.125 1.991)",1,"cls-1"],["class","addtask-wrapper",4,"ngFor","ngForOf"],[1,"addtask-wrapper"],["class","addtask-expanded",3,"taskItem","firstItem","ngClass",4,"ngIf"],[1,"addtask-expanded",3,"taskItem","firstItem","ngClass"]],template:function(t,e){1&t&&(_.kc(0,"h1"),_.Pc(1,"Add / Remove Checklist "),_.Oc(2,Ee,2,1,"span",0),_.Oc(3,Re,2,1,"span",0),_.jc(),_.Oc(4,Ue,1,0,"div",1),_.Oc(5,Xe,12,5,"div",0),_.kc(6,"footer"),_.kc(7,"div",2),_.kc(8,"button",3),_.rc("click",function(){return e.addCheckLists()}),_.Pc(9," Done "),_.jc(),_.jc(),_.jc()),2&t&&(_.Tb(2),_.Ac("ngIf",1===e.itemCount),_.Tb(1),_.Ac("ngIf",e.itemCount>1),_.Tb(1),_.Ac("ngIf",e.isLoading),_.Tb(1),_.Ac("ngIf",!e.isLoading),_.Tb(2),_.Wb("visible",!0),_.Tb(1),_.Ac("disabled",0===e.listCheckLists.length))},directives:[l.k,d.w,d.n,d.g,d.c,d.m,d.f,l.j,l.i,We],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}table[_ngcontent-%COMP%]{width:100%;position:relative}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-transform:uppercase}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8em}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:55%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:35%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{line-height:1.1}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f2f2f2;padding:.8em;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff}@media screen and (max-width:768px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:0}}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:1.6em 1em 1.5em;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);text-align:center}@media screen and (max-width:768px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{padding:1.8em 1em}}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:300px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{display:block;top:100%;width:100%;padding:.2em;height:2.1em;background-color:#6b6d6e}}footer[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{left:0!important;width:100%;background-color:#fff;box-shadow:none;padding:1rem 3rem 3rem!important;z-index:1}@media screen and (max-width:768px){footer[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem!important;box-shadow:none}}.search-form[_ngcontent-%COMP%]{margin-bottom:1.5em}.find-as-you-type[_ngcontent-%COMP%]{position:relative;z-index:5}.find-as-you-type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.find-as-you-type__no-results[_ngcontent-%COMP%], .find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .find-as-you-type__spinner-container[_ngcontent-%COMP%]{padding:.8em 1.2em;background-color:#f2f2f2;border:1px solid #ced4da;display:block}.find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;text-align:left}.find-as-you-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(106,149,91,.25);position:relative;background-color:#fff;z-index:5}.find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.find-as-you-type[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto}.find-as-you-type--suggestions-visible[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.check-list[_ngcontent-%COMP%]{margin-top:.6em;padding:0;list-style:none}.check-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff;background-color:#f2f2f2;line-height:1.1;padding:.8em}.check-list[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{background-color:#fff;padding:1em;height:3em;text-transform:uppercase;font-weight:600;display:flex}.check-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:1.6em 1em;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);text-align:center;height:100%}.check-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}.check-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}.check-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}.title-block[_ngcontent-%COMP%]{display:block;position:relative;padding:1em 0;background:#f2f2f2;border-radius:0;margin-top:.2rem}@media screen and (max-width:768px){.title-block[_ngcontent-%COMP%]{padding:0;margin-bottom:-5px}}.title-block[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;line-height:1.5em;padding-top:.75em;padding-left:.75em}@media screen and (max-width:768px){.title-block[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.85rem;width:81%;height:73px;display:flex;align-items:center}}.delete-row-cell[_ngcontent-%COMP%]{position:relative}.delete-row-cell[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0 auto;font-size:1.5em}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:-21px;left:103%;width:3%;height:100%;transition:all .2s ease-in-out;background-color:transparent}@media screen and (max-width:768px){.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{top:-42px;left:102%}}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.1)}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5;background-color:transparent}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;position:absolute;top:50%;left:50%;transition:all .2s ease-in-out}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}.checklist-wrapper[_ngcontent-%COMP%]{overflow-y:hidden;overflow:auto;height:362px;scrollbar-width:none;-ms-overflow-style:none}.checklist-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:94%!important}@media screen and (max-width:768px){.checklist-wrapper[_ngcontent-%COMP%]{height:auto;margin-top:31px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;background:transparent}.addtask-expanded[_ngcontent-%COMP%]{background:none;display:flex}  .taro-modal{max-width:45rem!important}  .last-item .task-description-cell,   .last-item .task-id-cell,   .last-item .task-iscompleted-cell{border:none!important}.expanded[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(180deg) translateY(.1em)}"]});var bn=function(){function t(e,n,i,c,r){h(this,t),this.formBuilder=e,this.workOrderService=n,this.toastService=i,this.router=c,this.workOrderWizard=r,this.isLoading=!1,this.workOrderPriorities=Object(I.b)(k.x),this.showSaveButton=!1,this.submitAttempted=!1,this.addAssetsModalVisible=!1,this.existingWorkOrderAssets=[],this.existingWorkOrderChecklists=[],this.minDueDate=new Date,this.todayDate=new Date,this.pickCheckListsModalVisible=!1,this.checklists=[]}return p(t,[{key:"ngOnInit",value:function(){this.createForm(),this.listCategory()}},{key:"createForm",value:function(){var t=this;t.formCreateWorkOrder=t.formBuilder.group({title:["",d.v.compose([d.v.required,d.v.maxLength(50)])],description:["",d.v.compose([d.v.required,d.v.maxLength(4e3)])],category:["",d.v.required],reportedOn:[t.todayDate,d.v.required],dueDate:[null,d.v.required],priority:["",d.v.required],assignedToUser:["",d.v.compose([d.v.maxLength(50)])]})}},{key:"createWorkOrder",value:function(){var t=this;if(this.submitAttempted=!0,this.showSaveButton=!1,this.isLoading=!0,Object(l.q)(this.formCreateWorkOrder.value.dueDate,"yyyy-MM-dd","en-US")<Object(l.q)(this.formCreateWorkOrder.value.reportedOn,"yyyy-MM-dd","en-US")&&this.formCreateWorkOrder.controls.dueDate.setErrors({incorrect:!0}),0!==this.existingWorkOrderAssets.length)if(this.formCreateWorkOrder.valid){var e=this.existingWorkOrderAssets.map(function(t){return t.id}),n=this.existingWorkOrderChecklists.map(function(t){return t.id}),i=this.formCreateWorkOrder.value.assignedToUser,c=this.formCreateWorkOrder.value.title,r=this.formCreateWorkOrder.value.description,o=this.formCreateWorkOrder.value.priority,a=this.formCreateWorkOrder.value.category,s=Object(l.q)(this.formCreateWorkOrder.value.reportedOn,"yyyy-MM-ddThh:mm:ss","en-US"),d=Object(l.q)(this.formCreateWorkOrder.value.dueDate,"yyyy-MM-ddThh:mm:ss","en-US");this.workOrderService.createWorkOrder({assignedToUser:i,title:c,description:r,priorityId:o,categoryId:a,reportedOn:s,dueDate:d,workOrderAssets:e,workOrderChecklists:n}).subscribe(function(e){t.toastService.showToast(new k.u("Work order ("+e.workOrderNumber+") created successfully")),t.isLoading=!1,t.workOrderWizard.workOrder={id:e.id,number:e.number,status:e.status,assignedToUser:e.assignedToUser,dueDate:e.dueDate,createdTimestampUtc:e.createdTimestampUtc,lastUpdatedTimestampUtc:e.lastUpdatedTimestampUtc,title:e.title},t.router.navigate(["work-orders",e.number])},function(e){t.toastService.showErrorToast("Work Order not saved"),t.isLoading=!1}),this.isLoading=!1}else this.isLoading=!1;else this.isLoading=!1}},{key:"selectedUserId",value:function(t){this.formCreateWorkOrder.get("assignedToUser").setValue(t),this.showSaveButton=!0}},{key:"listCategory",value:function(){var t=this;this.workOrderService.listWorkOrderCategory().subscribe(function(e){t.workOrderCategories=e})}},{key:"onDateChange",value:function(t){this.minDueDate=new Date(t.value),this.minDueDate.setDate(this.minDueDate.getDate()),this.formCreateWorkOrder.get("dueDate").setValue(null)}},{key:"handlePickAssets",value:function(){this.addAssetsModalVisible=!0}},{key:"handleDetailsModalClose",value:function(){this.addAssetsModalVisible=!1}},{key:"disableRightClick",value:function(t){t.preventDefault()}},{key:"handleAddedWorkOrderAssets",value:function(t){this.addAssetsModalVisible=!1,this.existingWorkOrderAssets=t,this.showSaveButton=!0}},{key:"handleDeleteAsset",value:function(t){this.existingWorkOrderAssets.splice(this.existingWorkOrderAssets.indexOf(t),1),this.showSaveButton=!0}},{key:"priorityString",value:function(t){return Object(I.a)(k.x,t)}},{key:"handlePickWorkOrderCheckLists",value:function(t){this.pickCheckListsModalVisible=!1,this.existingWorkOrderChecklists=t,this.checklists=t,this.showSaveButton=!0}},{key:"handlePickCheckLists",value:function(){this.pickCheckListsModalVisible=!0}},{key:"handlePickCheckListsModalClose",value:function(){this.pickCheckListsModalVisible=!1}},{key:"addCheckList",value:function(t){var e=(t.value||"").trim();e&&this.checklists.push(e),t.input&&(t.input.value="")}}]),t}();bn.\u0275fac=function(t){return new(t||bn)(_.ec(d.d),_.ec(k.A),_.ec(k.v),_.ec(g.c),_.ec(P))},bn.\u0275cmp=_.Yb({type:bn,selectors:[["app-create-work-order"]],decls:3,vars:3,consts:[[3,"customCurrentPageTitle"],[4,"ngIf"],[1,"spinner"],[3,"formGroup"],[1,"core-info","mt-4"],["class","d-flex",4,"ngIf"],[1,"d-flex","align-items-center","mb-sm-4","mb-2"],[1,"col-4","col-sm-2"],[1,"col-8","col-sm-10"],["type","text","maxlength","50","formControlName","title",1,"form-control"],[1,"d-flex","mb-sm-4","mb-2"],[1,"col-sm-2","col-4","mt-2"],[1,"col-sm-10","col-8"],["formControlName","description","rows","8","maxlength","4000",1,"form-control"],[1,"row","d-flex"],[1,"col-sm-6"],[1,"d-flex","mb-2","mb-sm-3","align-items-center"],[1,"col-4"],[1,"col-8"],[1,"form-group"],[1,"taro-material-datepicker"],["matInput","","formControlName","reportedOn",1,"form-control","mat-input-date",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["disabled","false"],["datePicker",""],["matInput","","formControlName","dueDate",1,"form-control","mat-input-date",3,"matDatepicker","min"],["datePickerDueDate",""],["type","hidden","formControlName","assignedToUser",1,"form-control"],[3,"selectedUserId"],["formControlName","category",1,"custom-select","form-control"],["class","form-control",3,"value",4,"ngFor","ngForOf"],["formControlName","priority",1,"custom-select","form-control"],["class","row",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"pb-4"],[1,"btn","btn-link","p-0","add-asset",3,"click"],[1,"col-4","col-sm-2","pt-4"],[1,"pt-2"],["chipList",""],[4,"ngFor","ngForOf"],["readonly","",3,"matChipInputFor","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"form-actions"],[1,"btn","btn-primary","btn-block","col-12",3,"click"],[3,"modalShouldClose","contextmenu",4,"ngIf"],[1,"d-flex"],[1,"col-8","col-sm-10","alert","alert-danger","arrow-alert"],[1,"col-8","alert","alert-danger","arrow-alert"],[1,"form-control",3,"value"],[1,"row"],[1,"d-flex","align-items-center"],[1,"col-8","asset-input-alret","alert","alert-danger","arrow-alert"],[1,"col-sm-6","mb-2","mb-sm-3"],[1,"col-8","asset-input-size"],["type","text","readonly","",1,"readonly","form-control",3,"value"],[1,"col-8","d-flex","align-items-center"],["type","text","readonly","",1,"form-control","readonly",3,"value"],["xmlns","http://www.w3.org/2000/svg","width","15.002","height","19.003","viewBox","0 0 14.002 18.003",1,"del-icon","opacity-50"],["id","wrench","transform","translate(0.001 0)"],["id","Path_1563","data-name","Path 1563","d","M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z","transform","translate(0.2 1.267)"],["id","Path_1564","data-name","Path 1564","d","M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z"],["id","Path_1565","data-name","Path 1565","d","M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z","transform","translate(1.567 2)"],["id","Path_1566","data-name","Path 1566","d","M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z","transform","translate(0.9 1.967)"],["id","Path_1567","data-name","Path 1567","d","M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z","transform","translate(2.125 1.991)"],[1,"del-icon-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","15.002","height","19.003","viewBox","0 0 14.002 18.003",1,"del-icon"],[3,"modalShouldClose","contextmenu"],[3,"existingAssets","addedAssets"],[3,"existingChecklists","addedCheckLists"]],template:function(t,e){1&t&&(_.fc(0,"app-section-header",0),_.Oc(1,tn,2,0,"div",1),_.Oc(2,mn,91,24,"article",1)),2&t&&(_.Ac("customCurrentPageTitle","Create Work Order"),_.Tb(1),_.Ac("ngIf",e.isLoading),_.Tb(1),_.Ac("ngIf",!e.isLoading))},directives:[M.a,l.k,d.w,d.n,d.g,d.c,d.i,d.m,d.f,D.b,D.d,L.e,D.a,E.a,d.u,l.j,L.b,Me,ye,d.q,d.x,ke,G.a,K.a,Je],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}article[_ngcontent-%COMP%]{margin-bottom:6em}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:flex;background-color:#f2f2f2;height:3.8em;font-size:.85em;border:1px solid #ced4da;border-radius:.25em}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:1em 0 0 1em;font-weight:500;text-transform:none;font-size:1em!important}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .btn-file-upload[_ngcontent-%COMP%]{border:1px solid #ced4da;border-width:1px 0;background-color:#ddd;height:3.7em;width:100%}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .btn-file-upload[disabled][_ngcontent-%COMP%]{cursor:default}article[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #dedede;margin-bottom:1em;padding-bottom:.5em}article[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}article[_ngcontent-%COMP%]   .core-info[_ngcontent-%COMP%]   .del-icon[_ngcontent-%COMP%]{margin-left:.5em}article[_ngcontent-%COMP%]   .core-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}article[_ngcontent-%COMP%]   .readonly[_ngcontent-%COMP%]{pointer-events:none;background-color:hsla(0,0%,92%,.295);color:#9c9a9a}article[_ngcontent-%COMP%]   .del-icon-button[_ngcontent-%COMP%]{border:0;background-color:transparent}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]{padding:0 1em}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;border:1px solid #bcbcbc;width:100%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#e4e4e4;font-weight:700}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #bcbcbc;padding:10px}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:center;width:15%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:center;width:20%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){word-break:break-all;width:65%}@media screen and (max-width:610px){article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:none}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:60%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .desktop-time-view[_ngcontent-%COMP%]{display:none}}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6a955b;text-decoration:underline;font-size:small}article[_ngcontent-%COMP%]   .modal-details[_ngcontent-%COMP%]{margin-top:1em;background-color:#f5f3f3;padding:1.2em}@media screen and (max-width:610px){article[_ngcontent-%COMP%]   .attachment-icon[_ngcontent-%COMP%]{padding-right:0!important}}  .form-group{position:relative}  .form-group .alert-msgs{position:absolute;bottom:2.5em}  .form-group .asset-alert-msgs{position:absolute;bottom:0;width:100%;margin-bottom:-.35em;z-index:9}.mat-input-date[_ngcontent-%COMP%]{padding:.9rem!important;box-sizing:inherit!important}.mat-form-field[_ngcontent-%COMP%]{width:100%}  .mat-chip-list-wrapper{display:block;width:100%;padding:.55rem .5rem;font-size:1rem;font-weight:400;line-height:1.5;color:#424244;background-color:hsla(0,0%,92%,.295);background-clip:padding-box;border:1px solid #ced4da;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:.375rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}  .mat-form-field-underline{display:none}  .mat-chip.mat-standard-chip{background-color:#5c747d;color:#fff}  .mat-standard-chip{border-radius:5px!important}@media screen and (max-width:768px){  .mat-standard-chip{height:auto!important}}"]});var kn=[{path:"",component:j},{path:"create-work-order",component:bn},{path:":id",component:At},{path:":id/PickSpares",component:Xt}],vn=p(function t(){h(this,t)});vn.\u0275fac=function(t){return new(t||vn)},vn.\u0275mod=_.cc({type:vn}),vn.\u0275inj=_.bc({imports:[[g.e.forChild(kn)],g.e]});var On=function(e){t(c,e);var i=n(c);function c(){return h(this,c),i.apply(this,arguments)}return p(c,[{key:"format",value:function(t,e){return Object(l.q)(t,"dd MMM yyyy",this.locale)}}]),c}(te.i),Cn=p(function t(){h(this,t)});Cn.\u0275fac=function(t){return new(t||Cn)},Cn.\u0275mod=_.cc({type:Cn}),Cn.\u0275inj=_.bc({providers:[{provide:te.a,useClass:On},{provide:te.c,useValue:f.a}],imports:[[l.b,d.t,u.a,vn,D.c,te.f,Se,L.d]]})}}])}();