{"version":3,"sources":["./src/app/spares/spares.module.ts","./src/app/spares/order-basket/order-basket.component.ts","./src/app/spares/order-basket/order-basket.component.html","./src/app/spares/stock-list/sku-stock/sku-stock.component.ts","./src/app/spares/stock-list/sku-stock/sku-stock.component.html","./src/app/spares/stock-list/spares-group/spares-group.component.ts","./src/app/spares/stock-list/spares-group/spares-group.component.html","./src/app/spares/order-history/order-history.component.ts","./src/app/spares/order-history/order-history.component.html","./src/app/spares/spares-routing.module.ts","./src/app/services/order/order.service.ts","./src/utils/numberUtils.ts","./src/app/spares/order-basket/basket-item/basket-item.component.ts","./src/app/spares/order-basket/basket-item/basket-item.component.html","./src/app/spares/stock-list/stock-list.component.ts","./src/app/spares/stock-list/stock-list.component.html"],"names":[],"mappings":"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","file":"spares-spares-module-es2015.js","sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../shared-module/shared-module.module';\r\nimport { SparesRoutingModule } from './spares-routing.module';\r\nimport { StockListComponent } from './stock-list/stock-list.component';\r\nimport { SparesGroupComponent } from './stock-list/spares-group/spares-group.component';\r\nimport { SkuStockComponent } from './stock-list/sku-stock/sku-stock.component';\r\nimport { OrderBasketComponent } from './order-basket/order-basket.component';\r\nimport { BasketItemComponent } from './order-basket/basket-item/basket-item.component';\r\nimport { OrderHistoryComponent } from './order-history/order-history.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    SharedModule,\r\n    SparesRoutingModule\r\n  ],\r\n  declarations: [\r\n    StockListComponent,\r\n    SparesGroupComponent,\r\n    SkuStockComponent,\r\n    OrderBasketComponent,\r\n    BasketItemComponent,\r\n    OrderHistoryComponent\r\n  ],\r\n  providers: []\r\n})\r\nexport class SparesModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Basket } from 'src/app/services/basket/basket.types';\r\nimport { numberToPriceString } from '../../../../src/utils/numberUtils';\r\nimport {\r\n  AuthenticationService,\r\n  BasketService,\r\n  PermissionGroup,\r\n  SparesPermissions,\r\n  Toast,\r\n  ToastService\r\n} from 'src/app/services';\r\nimport { OrderService } from 'src/app/services/order/order.service';\r\nimport { take } from 'rxjs/operators';\r\nimport { Router } from '@angular/router';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { UserService } from 'src/app/services/user-account/user.service';\r\n\r\n@Component({\r\n  selector: 'app-order-basket',\r\n  templateUrl: './order-basket.component.html',\r\n  styleUrls: ['./order-basket.component.scss']\r\n})\r\nexport class OrderBasketComponent implements OnInit {\r\n  public basket: Basket;\r\n  public numberToPriceString = numberToPriceString;\r\n  public isPlacingOrder = false;\r\n  public errorMessage: string;\r\n  public canPlaceOrder: boolean;\r\n  public canViewOrderHistory: boolean;\r\n  public isGettingBasket = false;\r\n\r\n  constructor(\r\n    private basketService: BasketService,\r\n    private authenticationService: AuthenticationService,\r\n    private toastService: ToastService,\r\n    private orderService: OrderService,\r\n    private router: Router,\r\n    private userService: UserService\r\n  ) {}\r\n\r\n  public ngOnInit() {\r\n    this.isGettingBasket = true;\r\n    this.basketService.basket$.subscribe((basket: Basket) => {\r\n      this.isGettingBasket = false;\r\n      if (basket && basket.items) {\r\n        this.basket = basket;\r\n      }\r\n    });\r\n    this.setPermissionBooleans();\r\n  }\r\n\r\n  private setPermissionBooleans() {\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.Spares]: [SparesPermissions.CanPlaceOrder]\r\n      })\r\n      .subscribe(hasPermission => (this.canPlaceOrder = hasPermission));\r\n\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.Spares]: [SparesPermissions.CanViewOrderHistory]\r\n      })\r\n      .subscribe(hasPermission => (this.canViewOrderHistory = hasPermission));\r\n  }\r\n\r\n  public placeOrder() {\r\n    if (this.isPlacingOrder) {\r\n      return;\r\n    }\r\n    this.isPlacingOrder = true;\r\n    this.errorMessage = '';\r\n\r\n    this.orderService\r\n      .requestOrder(this.basket, this.userService.primaryOrganisationId)\r\n      .subscribe(\r\n        _ => {\r\n          this.isPlacingOrder = false;\r\n          this.toastService.showToast(\r\n            new Toast('Request details emailed to purchase team')\r\n          );\r\n          this.basketService\r\n            .getBasket()\r\n            .pipe(take(1))\r\n            .subscribe(basket => {\r\n              this.basketService.basket$.next(new Basket(basket));\r\n            });\r\n          this.router.navigate(['spares/stock-list']);\r\n        },\r\n        (errorResponse: HttpErrorResponse) => {\r\n          this.isPlacingOrder = false;\r\n          const errorMessage = errorResponse.error;\r\n          this.toastService.showErrorToast(errorMessage);\r\n          return;\r\n        },\r\n        () => {\r\n          this.isPlacingOrder = false;\r\n          this.errorMessage = `Sorry something went wrong... please try again later`;\r\n        }\r\n      );\r\n  }\r\n\r\n  public handlesPlaceOrderClick() {\r\n    if (this.isPlacingOrder) {\r\n      return;\r\n    }\r\n    this.placeOrder();\r\n  }\r\n}\r\n","<app-section-header></app-section-header>\r\n\r\n<h2>\r\n  Order Basket\r\n</h2>\r\n<div *ngIf=\"isGettingBasket\" class=\"spinner light\"></div>\r\n<div *ngIf=\"!basket && !isGettingBasket || basket.items.length === 0 && !isGettingBasket\" class=\"text-center\">\r\n  Your basket is empty\r\n  <div class=\"row\">\r\n    <div class=\"col-md-4 offset-md-4\">\r\n      <a class=\"btn add-btn btn-block mt-2\" routerLink=\"/product-catalogue\">\r\n        <span>Add more spares</span>\r\n      </a>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"basket && basket.items.length > 0\">\r\n  <table>\r\n    <thead>\r\n      <th>ID</th>\r\n      <th><span>Description</span><span class=\"mobile-only\"> &nbsp;& Id</span></th>\r\n      <th>Order Qty</th>\r\n      <th>UOM</th>\r\n      <th>Added By</th>\r\n      <th></th>\r\n    </thead>\r\n    <tbody>\r\n      <app-basket-item *ngFor=\"let basketItem of basket.items\" [basketItem]=\"basketItem\"></app-basket-item>\r\n    </tbody>\r\n  </table>\r\n  <div *ngIf=\"errorMessage\" class=\"alert alert-danger text-center\">\r\n    {{errorMessage}}\r\n  </div>\r\n\r\n  <div class=\"actions row\">\r\n    <div class=\"col-sm-7\">\r\n      <a class=\"btn add-btn\" routerLink=\"/spares/stock-list\">\r\n        <span>Add more spares</span>\r\n      </a>\r\n    </div>\r\n    <div class=\"col-sm-5\">\r\n      <button *ngIf=\"canPlaceOrder\" (click)=\"handlesPlaceOrderClick()\" class=\"btn btn-primary btn-block\">\r\n        <span *ngIf=\"!isPlacingOrder\">Place Order</span>\r\n        <div *ngIf=\"isPlacingOrder\" class=\"spinner light\"></div>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport {\r\n  ISkuStock,\r\n  BasketService,\r\n  ToastService,\r\n  Toast,\r\n  AuthenticationService,\r\n  UserProfile\r\n} from 'src/app/services';\r\nimport {\r\n  safelyUnsubscribeFrom,\r\n  AutoUnsubscribe\r\n} from '../../../../utils/observableUtils';\r\nimport { Subscription } from 'rxjs';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { IBasketItem } from 'src/app/services/basket/basket.types';\r\n\r\nAutoUnsubscribe;\r\n@Component({\r\n  selector: 'app-sku-stock',\r\n  templateUrl: './sku-stock.component.html',\r\n  styleUrls: ['./sku-stock.component.scss']\r\n})\r\nexport class SkuStockComponent implements OnInit {\r\n  @Input()\r\n  public skuStock: ISkuStock;\r\n  public visuallyExpanded = false;\r\n  public detailsModalVisible = false;\r\n  public isAddingToBasket = false;\r\n  public qty = 1;\r\n  public isQtyInOrderMultiples = true;\r\n  public canAddToBasket: boolean = true;\r\n  public addToBasketSubscription: Subscription;\r\n  public userProfile: UserProfile;\r\n\r\n  constructor(\r\n    private basketService: BasketService,\r\n    private toastService: ToastService,\r\n    public authenticationService: AuthenticationService\r\n  ) {\r\n    this.userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n  }\r\n\r\n  public ngOnInit() {\r\n    if (this.skuStock.quantities.minimumOrderQuantity) {\r\n      this.qty = this.skuStock.quantities.minimumOrderQuantity;\r\n    }\r\n  }\r\n\r\n  public handleOrderMoreClick() {\r\n    this.detailsModalVisible = true;\r\n  }\r\n\r\n  public handleDetailsModalClose() {\r\n    this.detailsModalVisible = false;\r\n  }\r\n\r\n  public handleAddToBasket(): void {\r\n    this.isAddingToBasket = true;\r\n    safelyUnsubscribeFrom(this.addToBasketSubscription);\r\n    let basketItem: IBasketItem;\r\n\r\n    basketItem = {\r\n      createdByUserId: this.userProfile.userId,\r\n      createdByUserName: this.userProfile.name,\r\n      skuId: this.skuStock.id,\r\n      skuDescription: this.skuStock.description,\r\n      uom: this.skuStock.uom,\r\n      qty: this.qty\r\n    };\r\n\r\n    this.addToBasketSubscription = this.basketService\r\n      .addToBasket(basketItem, this.userProfile.primarySite.id)\r\n      .subscribe(\r\n        () => {\r\n          this.isAddingToBasket = false;\r\n          this.detailsModalVisible = false;\r\n          this.toastService.showToast(new Toast('Added to basket'));\r\n        },\r\n        (errorResponse: HttpErrorResponse) => {\r\n          this.isAddingToBasket = false;\r\n          const errorMessage = errorResponse.error;\r\n          this.toastService.showErrorToast(errorMessage);\r\n          return;\r\n        }\r\n      );\r\n  }\r\n\r\n  public handleQtyClipboard(event: ClipboardEvent) {\r\n    event.preventDefault();\r\n    return;\r\n  }\r\n\r\n  public disableRightClick(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  public handleQtyInputKeyDown(event) {\r\n    if (event.key === 'Backspace' || event.key === 'Delete') {\r\n      return;\r\n    }\r\n    if (isNaN(event.key) || event.keyCode === 32) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  public handleQtyKeyup(event: KeyboardEvent) {\r\n    if (\r\n      event.key === 'Enter' &&\r\n      this.qty > 0 &&\r\n      this.qty.toString().length > 0 &&\r\n      this.qty >= this.skuStock.quantities.minimumOrderQuantity\r\n    ) {\r\n      event.preventDefault();\r\n      this.handleAddToBasket();\r\n    }\r\n  }\r\n}\r\n","<div class=\"sku-stock\">\r\n  <div class=\"sku-stock-row\" [class.expanded]=\"visuallyExpanded\">\r\n    <div>\r\n      <strong>ID</strong>\r\n    </div>\r\n\r\n    <div class=\"id\">\r\n      {{ skuStock.id }}\r\n    </div>\r\n\r\n    <div class=\"name\">\r\n      {{ skuStock.description }}\r\n    </div>\r\n\r\n    <div class=\"stock-levels\">\r\n      <table>\r\n        <tr>\r\n          <th>In&nbsp;Stock</th>\r\n          <td>{{ skuStock.quantities.inStock }}</td>\r\n        </tr>\r\n        <tr>\r\n          <th>On&nbsp;Order</th>\r\n          <td><span style=\"display:flex\">{{ skuStock.quantities.onOrder}}\r\n            <span class=\"9\"\r\n              *ngIf=\"skuStock.quantities.onOrder.toString().length === 9\">\r\n              &nbsp;&nbsp;&nbsp;\r\n            </span>\r\n            <span class=\"8\"\r\n              *ngIf=\"skuStock.quantities.onOrder.toString().length === 8\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;\r\n            </span>\r\n            <span class=\"7\"\r\n              *ngIf=\"skuStock.quantities.onOrder.toString().length === 7\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            </span>\r\n            <span class=\"6\"\r\n              *ngIf=\"skuStock.quantities.onOrder.toString().length === 6\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            </span>\r\n            <span class=\"5\"\r\n              *ngIf=\"skuStock.quantities.onOrder.toString().length === 5\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            </span>\r\n            <span class=\"4\"\r\n              *ngIf=\"skuStock.quantities.onOrder.toString().length === 4\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            </span>\r\n            <span class=\"3\"\r\n              *ngIf=\"skuStock.quantities.onOrder.toString().length === 3\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            </span>\r\n            <span class=\"2\"\r\n              *ngIf=\" skuStock.quantities.onOrder.toString().length === 2\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            </span>\r\n            <span class=\"1\"\r\n              *ngIf=\"skuStock.quantities.onOrder.toString().length === 1\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            </span></span>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <th>Min Stock</th>\r\n          <td>{{ skuStock.quantities.minimumOrderQuantity }}</td>\r\n        </tr>\r\n      </table>\r\n    </div>\r\n\r\n    <div class=\"actions\">\r\n      <div>\r\n        <button (click)=\"handleOrderMoreClick()\" class=\"btn btn-link\">\r\n          Order More\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n  <app-modal\r\n  *ngIf=\"detailsModalVisible\"\r\n  (modalShouldClose)=\"handleDetailsModalClose()\"\r\n  class=\"order-stock-sku-modal\"\r\n (contextmenu)=\"disableRightClick($event)\"\r\n  >\r\n    <article>\r\n      <section class=\"generic-info\">\r\n        <header class=\"row\">\r\n          <div class=\"col-8\">\r\n            <h1>{{skuStock.sparesGroupName}}</h1>\r\n          </div>\r\n          <div class=\"col-4 text-right\">\r\n            <strong>ID</strong> {{skuStock.id}}\r\n          </div>\r\n        </header>\r\n        <div class=\"row description-row mt-4\">\r\n          <div class=\"col-12\">\r\n            <dl>\r\n              <dt>Description</dt>\r\n              <dd>{{skuStock.description}}</dd>\r\n            </dl>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section class=\"stock-info\">\r\n        <div class=\"row\">\r\n          <div class=\"col12\">\r\n            <h2>Order</h2>\r\n          </div>\r\n        </div>\r\n        <div class=\"info-row row\">\r\n          <div class=\"col-sm-3 col-3\">\r\n            <dl>\r\n              <dt>In stock</dt>\r\n              <dd>{{skuStock.quantities.inStock}}</dd>\r\n            </dl>\r\n          </div>\r\n          <div class=\"col-sm-5 col-6\">\r\n            <dl>\r\n              <dt>Min. Required Stock</dt>\r\n              <dd>{{skuStock.quantities.reOrderLevel}}</dd>\r\n            </dl>\r\n          </div>\r\n          <div class=\"col-sm-3 col-3\">\r\n            <dl>\r\n              <dt>Uom</dt>\r\n              <dd>{{skuStock.uom}}</dd>\r\n            </dl>\r\n          </div>\r\n        </div>\r\n        <div *ngIf=\"canAddToBasket\">\r\n          <div class=\"row notice-row\" *ngIf=\" qty < skuStock.quantities.minimumOrderQuantity \" >\r\n            <div class=\"col-12\">\r\n              <div *ngIf=\"qty < skuStock.quantities.minimumOrderQuantity\">\r\n                Please note, minimum order quantity for this product is\r\n                {{ skuStock.quantities.minimumOrderQuantity }} items.\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row add-to-basket-row\">\r\n            <div class=\"col-4\">\r\n              <input [(ngModel)]=\"qty\" (paste)=\"handleQtyClipboard($event)\" (keydown)=\"handleQtyInputKeyDown($event)\" (keyup)=\"handleQtyKeyup($event)\"\r\n                type=\"text\" pattern=\"[0-9]*\" inputmode=\"text\" ng-pattern=\"[0-9]*\" class=\"form-control quantity-input\" maxlength=\"6\"/>\r\n            </div>\r\n            <div class=\"col-8\">\r\n              <button class=\"btn btn-primary btn-block\" [disabled]=\" qty < skuStock.quantities.minimumOrderQuantity || qty < 1 || qty.toString().length === 0\" (click)=\"handleAddToBasket()\">\r\n                <span *ngIf=\"!isAddingToBasket\">Add to Basket</span>\r\n                <div *ngIf=\"isAddingToBasket\" class=\"spinner light\"></div>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </article>\r\n  </app-modal>\r\n","import { Component, ElementRef, Input, OnInit } from '@angular/core';\r\nimport { ISkuStock, SkuService, SparesGroup } from '../../../services';\r\n\r\n@Component({\r\n  selector: 'app-spares-group',\r\n  templateUrl: './spares-group.component.html',\r\n  styleUrls: ['./spares-group.component.scss']\r\n})\r\nexport class SparesGroupComponent implements OnInit {\r\n  @Input()\r\n  public sparesGroup: SparesGroup;\r\n  @Input()\r\n  public textFilter: string;\r\n  @Input()\r\n  public siteId: string;\r\n  public skuStocks: ISkuStock[] = [];\r\n  public visuallyExpanded = false;\r\n  public offset = 0;\r\n  private takeSize = 10;\r\n  public shouldGetNextSkuStocks = true;\r\n  public isGettingNextSkuStocks = false;\r\n  public maxHeight: string;\r\n\r\n  constructor(public skuService: SkuService, public elementRef: ElementRef) {}\r\n\r\n  public ngOnInit() {}\r\n\r\n  public handleRowToggleClick() {\r\n    if (this.skuStocks.length === 0 && !this.isGettingNextSkuStocks) {\r\n      this.getNextSkuStocks();\r\n    }\r\n    this.visuallyExpanded = !this.visuallyExpanded;\r\n    this.setMaxHeight();\r\n  }\r\n\r\n  public getNextSkuStocks() {\r\n    this.isGettingNextSkuStocks = true;\r\n    this.skuService\r\n      .getSkuStockForSparesGroup(\r\n        this.sparesGroup.groupId,\r\n        this.sparesGroup.subGroupId,\r\n        this.takeSize,\r\n        this.offset,\r\n        this.siteId,\r\n        this.textFilter\r\n      )\r\n      .subscribe((skus: ISkuStock[]) => {\r\n        this.skuStocks.push(...skus);\r\n        this.offset += this.takeSize;\r\n        if (skus.length < this.takeSize) {\r\n          this.shouldGetNextSkuStocks = false;\r\n        }\r\n        this.isGettingNextSkuStocks = false;\r\n        this.handleSkuStockHeightChanged();\r\n      });\r\n  }\r\n\r\n  public handleSkuStockHeightChanged(): void {\r\n    setTimeout(() => this.setMaxHeight(), 200);\r\n  }\r\n\r\n  public setMaxHeight() {\r\n    const children = this.elementRef.nativeElement.children[1].children;\r\n    let totalHeight = 0;\r\n\r\n    for (const child of children) {\r\n      totalHeight += child.getBoundingClientRect().height;\r\n    }\r\n\r\n    this.maxHeight = totalHeight + 'px';\r\n  }\r\n}\r\n","<div class=\"group-toggle\" [class.expanded]=\"visuallyExpanded\">\r\n  <h2>\r\n    {{sparesGroup.name}}\r\n  </h2>\r\n\r\n  <button class=\"row-toggle\" (click)=\"handleRowToggleClick()\">\r\n    <div>\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 8.797 5.194\">\r\n        <path d=\"M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z\"/>\r\n      </svg>\r\n    </div>\r\n  </button>\r\n</div>\r\n\r\n<div class=\"sku-stocks\" [class.expanded]=\"visuallyExpanded\" [style.maxHeight]=\"maxHeight\">\r\n  <div>\r\n    <app-sku-stock *ngFor=\"let skuStock of skuStocks\" [skuStock]=\"skuStock\"></app-sku-stock>\r\n  </div>\r\n  <div class=\"load-more-container\">\r\n    <button (click)=\"getNextSkuStocks()\" class=\"btn btn-link\" *ngIf=\"shouldGetNextSkuStocks && !isGettingNextSkuStocks\">Load more</button>\r\n    <div class=\"spinner\" *ngIf=\"isGettingNextSkuStocks\"></div>\r\n    <i *ngIf=\"!shouldGetNextSkuStocks\">\r\n      All stocks in the '{{sparesGroup.name}}' group have been loaded.\r\n      <span *ngIf=\"textFilter\">You may see more results by changing or removing your search query.</span>\r\n    </i>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-order-history',\r\n  templateUrl: './order-history.component.html',\r\n  styleUrls: ['./order-history.component.scss']\r\n})\r\nexport class OrderHistoryComponent implements OnInit {\r\n  constructor() {}\r\n\r\n  public ngOnInit() {}\r\n}\r\n","<app-section-header></app-section-header>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { PermissionGuard } from '../guards/permission.guard';\r\nimport {\r\n  IRequiredPermissions,\r\n  PermissionGroup,\r\n  SparesPermissions\r\n} from '../services';\r\nimport { LandingPageComponent } from '../shared-module/landing-page/landing-page.component';\r\nimport { StockListComponent } from './stock-list/stock-list.component';\r\nimport { OrderBasketComponent } from './order-basket/order-basket.component';\r\nimport { OrderHistoryComponent } from './order-history/order-history.component';\r\n\r\nexport const stockListRequiredPermissions: IRequiredPermissions = {\r\n  [PermissionGroup.Spares]: [SparesPermissions.CanViewStockList]\r\n};\r\n\r\nexport const basketRequiredPermissions: IRequiredPermissions = {\r\n  [PermissionGroup.Spares]: [SparesPermissions.CanAddToBasket]\r\n};\r\n\r\nexport const orderViewRequiredPermissions: IRequiredPermissions = {\r\n  [PermissionGroup.Spares]: [SparesPermissions.CanViewOrderHistory]\r\n};\r\n\r\nexport const routes: Routes = [\r\n  {\r\n    path: 'stock-list',\r\n    component: StockListComponent,\r\n    canActivate: [PermissionGuard],\r\n    data: {\r\n      permissionsRequired: stockListRequiredPermissions\r\n    }\r\n  },\r\n  {\r\n    path: '',\r\n    component: LandingPageComponent\r\n  },\r\n  {\r\n    path: 'order-basket',\r\n    component: OrderBasketComponent,\r\n    canActivate: [PermissionGuard],\r\n    data: {\r\n      permissionsRequired: basketRequiredPermissions\r\n    }\r\n  },\r\n  {\r\n    path: 'order-history',\r\n    component: OrderHistoryComponent,\r\n    canActivate: [PermissionGuard],\r\n    data: {\r\n      permissionsRequired: orderViewRequiredPermissions\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class SparesRoutingModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { Basket } from '../basket/basket.types';\r\nimport { Observable } from 'rxjs';\r\nimport { IOrder } from './order.types';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { UserProfile } from '../user-account/user';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OrderService {\r\n  private orderUrl = `${environment.apiBaseUrl}/purchase-request`;\r\n  constructor(\r\n    private authenticationService: AuthenticationService,\r\n    private httpClient: HttpClient\r\n  ) {}\r\n\r\n  private get currentUserProfile(): UserProfile {\r\n    return this.authenticationService.currentUserProfile$.getValue();\r\n  }\r\n  public requestOrder(\r\n    basket: Basket,\r\n    organisationId: string\r\n  ): Observable<IOrder> {\r\n    const items = basket.items.map(item => ({\r\n      skuId: item.skuId,\r\n      skuDescription: item.skuDescription,\r\n      requestedByUserId: item.createdByUserId,\r\n      requestedByUserName: item.createdByUserName,\r\n      uom: item.uom,\r\n      qty: item.qty\r\n    }));\r\n\r\n    let orderLink: string = this.orderUrl.concat(\r\n      '?organisationUnitId=',\r\n      organisationId\r\n    );\r\n    const payload = {\r\n      items,\r\n      siteId: this.currentUserProfile.primarySite.id,\r\n      approvedByUserId: this.currentUserProfile.userId,\r\n      approvedByUserName: this.currentUserProfile.name,\r\n      approvedByEmailId: this.currentUserProfile.emailAddress\r\n    };\r\n    return this.httpClient.post<IOrder>(orderLink, payload);\r\n  }\r\n}\r\n","export function commaSeperatedNumberString(\r\n  number: number\r\n) {\r\n  let numberString = number.toFixed(2).toString();\r\n  let lastThreeAndDecimalValues = numberString.substring(numberString.length - 6);\r\n  const otherNumbers = numberString.substring(0, numberString.length - 6);\r\n  if (otherNumbers !== '') {\r\n    lastThreeAndDecimalValues = ',' + lastThreeAndDecimalValues;\r\n  }\r\n  numberString = otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g, ',') + lastThreeAndDecimalValues;\r\n  return numberString;\r\n}\r\n\r\nexport function numberToPriceString(\r\n  price: number,\r\n  currencyGlyph = '₹',\r\n  dropThePennies = false\r\n): string {\r\n  if (!price) {\r\n    return '₹0.00';\r\n  }\r\n  let prefix = currencyGlyph;\r\n  if (price < 0) {\r\n    price = price * -1;\r\n    prefix = `- ${currencyGlyph}`;\r\n  }\r\n  let priceString = commaSeperatedNumberString(price);\r\n  if (dropThePennies && Math.floor(price) !== price) {\r\n    priceString = priceString.substring(0, priceString.length - 3);\r\n  }\r\n  return prefix + priceString;\r\n}\r\n\r\nexport function numberToPriceStringNoGlyph(\r\n  price: number,\r\n  currencyGlyph = 'Rs',\r\n  dropThePennies = false\r\n): string {\r\n  if (!price) {\r\n    return '₹0.00';\r\n  }\r\n  let prefix = currencyGlyph;\r\n  if (price < 0) {\r\n    price = price * -1;\r\n    prefix = `- ${currencyGlyph}`;\r\n  }\r\n  let priceString = commaSeperatedNumberString(price);\r\n  if (dropThePennies && Math.floor(price) !== price) {\r\n    priceString = priceString.substring(0, priceString.length - 3);\r\n  }\r\n  return prefix +' '+ priceString;\r\n}\r\n\r\nexport function randomInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nexport function numberToWords(value: any,\r\n  dropThePennies = false\r\n  ): string {\r\n\r\n  if (dropThePennies && Math.floor(value) !== value) {\r\n    const priceString: string = value.toFixed(2).toString();\r\n    value = priceString.substring(0, priceString.length - 3);\r\n  }\r\n\r\n  const units = [\r\n    '',\r\n    'one ',\r\n    'two ',\r\n    'three ',\r\n    'four ',\r\n    'five ',\r\n    'six ',\r\n    'seven ',\r\n    'eight ',\r\n    'nine ',\r\n    'ten ',\r\n    'eleven ',\r\n    'twelve ',\r\n    'thirteen ',\r\n    'fourteen ',\r\n    'fifteen ',\r\n    'sixteen ',\r\n    'seventeen ',\r\n    'eighteen ',\r\n    'nineteen '\r\n  ];\r\n\r\n  const tens = [\r\n    '',\r\n    '',\r\n    'twenty',\r\n    'thirty',\r\n    'forty',\r\n    'fifty',\r\n    'sixty',\r\n    'seventy',\r\n    'eighty',\r\n    'ninety'\r\n  ];\r\n\r\n  if (value) {\r\n    let num: any = Number(value);\r\n    if (num) {\r\n      if ((num = num.toString()).length > 9) { // Number length can not go longer then 9 digit, function will give result not more then 10 Cores\r\n        return 'Very big digit :)';\r\n      }\r\n      const n = ('000000000' + num)\r\n        .substr(-9)\r\n        .match(/^(\\d{2})(\\d{2})(\\d{2})(\\d{1})(\\d{2})$/);\r\n      if (!n) {\r\n        return '';\r\n      }\r\n      let str = '';\r\n      str +=\r\n        Number(n[1]) !== 0\r\n          ? (units[Number(n[1])] || tens[n[1][0]] + ' ' + units[n[1][1]]) + 'crore '\r\n          : '';\r\n      str +=\r\n        Number(n[2]) !== 0\r\n          ? (units[Number(n[2])] || tens[n[2][0]] + ' ' + units[n[2][1]]) + 'lakh '\r\n          : '';\r\n      str +=\r\n        Number(n[3]) !== 0\r\n          ? (units[Number(n[3])] || tens[n[3][0]] + ' ' + units[n[3][1]]) + 'thousand '\r\n          : '';\r\n      str +=\r\n        Number(n[4]) !== 0\r\n          ? (units[Number(n[4])] || tens[n[4][0]] + ' ' + units[n[4][1]]) + 'hundred '\r\n          : '';\r\n      str +=\r\n        Number(n[5]) !== 0\r\n          ? (str !== '' ? 'and ' : '') +\r\n            (units[Number(n[5])] || tens[n[5][0]] + ' ' + units[n[5][1]]) +\r\n            'rupees'\r\n          : '';\r\n      return str.toUpperCase();\r\n    } else {\r\n      return '';\r\n    }\r\n  } else {\r\n    return '';\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  HostBinding,\r\n  Input,\r\n  OnInit,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport { BasketItem } from 'src/app/services/basket/basket.types';\r\nimport {\r\n  ISkuStock,\r\n  AuthenticationService,\r\n  PermissionGroup,\r\n  BasketService,\r\n  SparesPermissions,\r\n  SkuService,\r\n  ToastService\r\n} from 'src/app/services';\r\nimport { Subscription } from 'rxjs';\r\nimport { Validators, FormGroup, FormBuilder } from '@angular/forms';\r\nimport { take } from 'rxjs/operators';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { safelyUnsubscribeFrom } from 'src/utils/observableUtils';\r\n\r\n@Component({\r\n  selector: 'app-basket-item',\r\n  templateUrl: './basket-item.component.html',\r\n  styleUrls: ['./basket-item.component.scss']\r\n})\r\nexport class BasketItemComponent implements OnInit, OnDestroy {\r\n  @Input()\r\n  public basketItem: BasketItem;\r\n  @HostBinding('class.action-in-progress')\r\n  public itemActionInProgress = false;\r\n  public quantityChangeModalVisible = false;\r\n  public qtyForm: FormGroup;\r\n  public canModifyBasket: boolean;\r\n  public skuStock: ISkuStock;\r\n  public isGettingSkuInfo = false;\r\n  public isUpdatingQty = false;\r\n  public skuInfoSubscription: Subscription;\r\n  public isCurrentUserManager = false;\r\n  public isRequestedUser = false;\r\n  public currentUserId: string;\r\n\r\n  constructor(\r\n    private basketService: BasketService,\r\n    private authenticationService: AuthenticationService,\r\n    private formBuilder: FormBuilder,\r\n    private skuService: SkuService,\r\n    private toastService: ToastService\r\n  ) {}\r\n\r\n  public ngOnInit() {\r\n    this.setPermissionBooleans();\r\n  }\r\n\r\n  public ngOnDestroy() {\r\n    safelyUnsubscribeFrom(this.skuInfoSubscription);\r\n  }\r\n\r\n  private setPermissionBooleans() {\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.Spares]: [SparesPermissions.CanModifyBasket]\r\n      })\r\n      .subscribe(hasPermission => (this.canModifyBasket = hasPermission));\r\n\r\n    this.authenticationService\r\n      .currentUserIsManager()\r\n      .subscribe(isManager => (this.isCurrentUserManager = isManager));\r\n\r\n    this.currentUserId = this.authenticationService.currentUserProfile$.getValue().userId;\r\n\r\n    this.isRequestedUser =\r\n      this.currentUserId === this.basketItem.createdByUserId;\r\n  }\r\n\r\n  public handleQtyClipboard(event: ClipboardEvent) {\r\n    event.preventDefault();\r\n    return;\r\n  }\r\n\r\n  public disableRightClick(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  public handleDeleteItem() {\r\n    if (this.isCurrentUserManager || this.isRequestedUser) {\r\n      this.itemActionInProgress = true;\r\n      this.basketService\r\n        .deleteBasketItem(\r\n          this.basketItem.skuId,\r\n          this.basketItem.createdByUserId,\r\n          this.currentUserId\r\n        )\r\n        .pipe(take(1))\r\n        .subscribe(x => x);\r\n    } else {\r\n      this.toastService.showErrorToast(\r\n        `You do not have permission to delete this basket item!`\r\n      );\r\n    }\r\n  }\r\n\r\n  public handleQtyChangeBtnClick() {\r\n    if (this.isCurrentUserManager || this.isRequestedUser) {\r\n      this.isGettingSkuInfo = true;\r\n      this.qtyForm = this.formBuilder.group({\r\n        qty: [\r\n          this.basketItem.qty,\r\n          [Validators.min(1), Validators.max(999999), Validators.required]\r\n        ]\r\n      });\r\n      this.skuInfoSubscription = this.skuService\r\n        .getSkuStockForSkuId(this.basketItem.skuId)\r\n        .subscribe(\r\n          (sku: ISkuStock[]) => {\r\n            this.isGettingSkuInfo = false;\r\n            if (sku.length > 0) {\r\n              this.skuStock = sku[0];\r\n              this.quantityChangeModalVisible = true;\r\n            } else {\r\n              const errorMessage =\r\n                'Sorry something went wrong, please try again later';\r\n              this.toastService.showErrorToast(errorMessage);\r\n            }\r\n          },\r\n          _ => {\r\n            const errorMessage =\r\n              'Sorry something went wrong, please try again later';\r\n            this.toastService.showErrorToast(errorMessage);\r\n            this.isGettingSkuInfo = false;\r\n          }\r\n        );\r\n    } else {\r\n      this.toastService.showErrorToast(\r\n        `You do not have permission to update this basket item!`\r\n      );\r\n      this.isGettingSkuInfo = false;\r\n    }\r\n  }\r\n\r\n  public handleUpdateQty() {\r\n    if (this.isUpdatingQty) {\r\n      return;\r\n    }\r\n    this.isUpdatingQty = true;\r\n    this.basketService\r\n      .updateBasketItem(this.basketItem.skuId, this.qtyForm.value.qty)\r\n      .subscribe(\r\n        _ => {\r\n          this.isUpdatingQty = false;\r\n          this.quantityChangeModalVisible = false;\r\n        },\r\n        (errorResponse: HttpErrorResponse) => {\r\n          this.isUpdatingQty = false;\r\n          const errorMessage = errorResponse.error;\r\n          this.toastService.showErrorToast(errorMessage);\r\n          return;\r\n        }\r\n      );\r\n  }\r\n\r\n  public handleQtyKeyup(event: KeyboardEvent) {\r\n    if (\r\n      event.key === 'Enter' &&\r\n      this.qtyForm.value.qty > 0 &&\r\n      this.qtyForm.value.qty.toString().length > 0 &&\r\n      this.qtyForm.value.qty >= this.skuStock.quantities.minimumOrderQuantity\r\n    ) {\r\n      event.preventDefault();\r\n      this.handleUpdateQty();\r\n    }\r\n  }\r\n\r\n  public handleQtyInputKeyDown(event) {\r\n    const qtyStringExceedsMaxLength =\r\n      this.qtyForm.value.qty.toString().length >= 6;\r\n    if (\r\n      this.qtyForm.valid &&\r\n      this.qtyForm.value.qty > 0 &&\r\n      this.qtyForm.value.qty >= this.skuStock.quantities.minimumOrderQuantity &&\r\n      event.key === 'Enter'\r\n    ) {\r\n      return;\r\n    }\r\n    if (event.key === 'Backspace' || event.key === 'Delete') {\r\n      return;\r\n    }\r\n    if (qtyStringExceedsMaxLength || isNaN(event.key) || event.keyCode === 32) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n}\r\n","<td class=\"sku-id-cell\">\r\n  <span>{{ basketItem.skuId }}</span>\r\n</td>\r\n<td class=\"description-cell\">\r\n  <span class=\"desktop-only\">{{ basketItem.skuDescription }}</span>\r\n  <span class=\"mobile-only\">{{ basketItem.skuDescription }}<br/>ID-{{ basketItem.skuId }}</span>\r\n</td>\r\n<td class=\"qty-cell\">\r\n  <button\r\n    *ngIf=\"canModifyBasket\"\r\n    (click)=\"handleQtyChangeBtnClick()\"\r\n    type=\"button\"\r\n  >\r\n    {{ basketItem.qty }}\r\n  </button>\r\n  <strong *ngIf=\"!canModifyBasket\">\r\n    {{ basketItem.qty }}\r\n  </strong>\r\n</td>\r\n<td class=\"uom-cell\">\r\n  <span>{{ basketItem.uom }}</span>\r\n</td>\r\n<td class=\"user-cell\">\r\n  <span>{{ basketItem.createdByUserName }}</span>\r\n</td>\r\n<td class=\"delete-row-cell\">\r\n  <button\r\n    (click)=\"handleDeleteItem()\"\r\n    [disabled]=\"!canModifyBasket\"\r\n    class=\"delete-btn\"\r\n  >\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 18\">\r\n      <defs />\r\n      <path\r\n        d=\"M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z\"\r\n        class=\"cls-1\"\r\n        transform=\"translate(.2 1.267)\"\r\n      />\r\n      <path\r\n        d=\"M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z\"\r\n        class=\"cls-1\"\r\n      />\r\n      <path\r\n        d=\"M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z\"\r\n        class=\"cls-1\"\r\n        transform=\"translate(1.567 2)\"\r\n      />\r\n      <path\r\n        d=\"M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z\"\r\n        class=\"cls-1\"\r\n        transform=\"translate(.9 1.967)\"\r\n      />\r\n      <path\r\n        d=\"M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z\"\r\n        class=\"cls-1\"\r\n        transform=\"translate(2.125 1.991)\"\r\n      />\r\n    </svg>\r\n  </button>\r\n</td>\r\n<app-loading-modal\r\n  *ngIf=\"itemActionInProgress\"\r\n></app-loading-modal>\r\n<app-loading-modal\r\n  *ngIf=\"isGettingSkuInfo\"\r\n></app-loading-modal>\r\n<app-modal\r\n  *ngIf=\"quantityChangeModalVisible && skuStock && !isGettingSkuInfo\"\r\n  (modalShouldClose)=\"quantityChangeModalVisible = false\"\r\n  class=\"basket-item-modal\"\r\n  (contextmenu)=\"disableRightClick($event)\"\r\n>\r\n  <article>\r\n    <section class=\"generic-info\">\r\n      <header class=\"row\">\r\n        <div class=\"col-8\">\r\n          <h1>{{ skuStock.sparesGroupName }}</h1>\r\n        </div>\r\n        <div class=\"col-4 text-right\">\r\n          <strong>ID</strong> {{ skuStock.id }}\r\n        </div>\r\n      </header>\r\n      <div class=\"row description-row mt-4\">\r\n        <div class=\"col-12\">\r\n          <dl>\r\n            <dt>Description</dt>\r\n            <dd>{{ skuStock.description }}</dd>\r\n          </dl>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <section class=\"stock-info\">\r\n      <div class=\"row\">\r\n        <div class=\"col12\">\r\n          <h2>Order</h2>\r\n        </div>\r\n      </div>\r\n      <div class=\"info-row row\">\r\n        <div class=\"col-4\">\r\n          <dl>\r\n            <dt>In stock</dt>\r\n            <dd>{{ skuStock.quantities.inStock }}</dd>\r\n          </dl>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <dl>\r\n            <dt>Min. Required Stock</dt>\r\n            <dd>{{ skuStock.quantities.reOrderLevel }}</dd>\r\n          </dl>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <dl>\r\n            <dt>Uom</dt>\r\n            <dd>{{ skuStock.uom }}</dd>\r\n          </dl>\r\n        </div>\r\n      </div>\r\n      <div *ngIf=\"canModifyBasket\">\r\n        <div\r\n          class=\"row notice-row\"\r\n          *ngIf=\"qtyForm.value.qty < skuStock.quantities.minimumOrderQuantity\"\r\n        >\r\n          <div class=\"col-12\">\r\n            <div\r\n              *ngIf=\"\r\n                qtyForm.value.qty < skuStock.quantities.minimumOrderQuantity\r\n              \"\r\n            >\r\n              Please note, minimum order quantity for this product is\r\n              {{ skuStock.quantities.minimumOrderQuantity }} items.\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <form\r\n          class=\"row add-to-basket-row\"\r\n          [formGroup]=\"qtyForm\"\r\n          (submit)=\"handleUpdateQty()\"\r\n        >\r\n          <div class=\"col-4\">\r\n            <input\r\n              formControlName=\"qty\"\r\n              (paste)=\"handleQtyClipboard($event)\"\r\n              (contextmenu)=\"disableRightClick($event)\"\r\n              (keydown)=\"handleQtyInputKeyDown($event)\"\r\n              (keyup)=\"handleQtyKeyup($event)\"\r\n              type=\"text\"\r\n              pattern=\"[0-9]*\"\r\n              inputmode=\"text\"\r\n              ng-pattern=\"[0-9]*\"\r\n              class=\"form-control quantity-input\"\r\n              maxlength=\"6\"\r\n            />\r\n          </div>\r\n          <div class=\"col-8\">\r\n            <button\r\n              class=\"btn btn-primary btn-block\"\r\n              [disabled]=\"\r\n                qtyForm.value.qty < skuStock.quantities.minimumOrderQuantity ||\r\n                qtyForm.value.qty < 1 ||\r\n                qtyForm.invalid\r\n              \"\r\n            >\r\n              <span *ngIf=\"!isUpdatingQty\">Update quantity</span>\r\n              <div *ngIf=\"isUpdatingQty\" class=\"spinner light\"></div>\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  </article>\r\n</app-modal>\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport {\r\n  AuthenticationService,\r\n  SkuService,\r\n  SparesGroup,\r\n  ToastService\r\n} from '../../services';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-stock-list',\r\n  templateUrl: './stock-list.component.html',\r\n  styleUrls: ['./stock-list.component.scss']\r\n})\r\nexport class StockListComponent implements OnInit {\r\n  public isLoading: Boolean = true;\r\n  public searchForm: FormGroup;\r\n  public allProductClassesOption = '';\r\n  public sparesGroups: Array<SparesGroup> = [];\r\n  public getSparesGroupSubscription: Subscription;\r\n  public siteId: string;\r\n\r\n  constructor(\r\n    public skuService: SkuService,\r\n    private formBuilder: FormBuilder,\r\n    private toastService: ToastService,\r\n    private authenticationService: AuthenticationService\r\n  ) {\r\n    this.siteId = this.authenticationService.currentUserProfile$.value.primarySite.id;\r\n    this.searchForm = this.formBuilder.group({\r\n      text: ''\r\n    });\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.getSparesGroupSubscription = this.skuService\r\n      .getSparesGroups(undefined, this.siteId)\r\n      .subscribe(\r\n        (data: Array<SparesGroup>) => {\r\n          this.sparesGroups = data;\r\n          this.isLoading = false;\r\n        },\r\n        (err: HttpErrorResponse) => {\r\n          this.toastService.showErrorToast(\r\n            `Sorry something went wrong... please try again later, ${err}`\r\n          );\r\n        }\r\n      );\r\n\r\n    this.searchForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length >= 2 || textValue.length === 0)\r\n      )\r\n      .subscribe(() => this.submitSearch());\r\n  }\r\n\r\n  public get noSparesGroups(): Boolean {\r\n    return this.sparesGroups.length === 0;\r\n  }\r\n\r\n  public submitSearch() {\r\n    this.getSparesGroupSubscription.unsubscribe();\r\n    this.isLoading = true;\r\n    this.getSparesGroupSubscription = this.skuService\r\n      .getSparesGroups(this.searchForm.get('text').value, this.siteId)\r\n      .subscribe(\r\n        (data: Array<SparesGroup>) => {\r\n          this.sparesGroups = data;\r\n          this.isLoading = false;\r\n        },\r\n        (err: HttpErrorResponse) => {\r\n          this.toastService.showErrorToast(\r\n            `Sorry something went wrong... please try again later, ${err}`\r\n          );\r\n        }\r\n      );\r\n  }\r\n}\r\n","<app-section-header></app-section-header>\r\n<h1>Stock List</h1>\r\n\r\n<form [formGroup]=\"searchForm\" class=\"search-form\">\r\n  <div class=\"row\">\r\n    <div class=\"col-md-5\">\r\n      <div class=\"input-with-search-wrapper\">\r\n        <input type=\"text\" formControlName=\"text\" class=\"form-control form-control--search-prefix\" placeholder=\"Search stock by id or description\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"col-md-7 d-flex justify-content-end\">\r\n      <button class=\"btn-download-csv\"  type=\"button\">\r\n        <svg viewBox=\"0 0 15.375 19.188\"><defs/><g id=\"Group_1558\" data-name=\"Group 1558\" transform=\"translate(-299.063 -288.813)\"><g id=\"Path_783\" class=\"cls-1\" data-name=\"Path 783\"><path d=\"M940.063 237.334v19.188h15.375v-14.313l-4.875-4.875h-10.5z\" class=\"cls-3\" transform=\"translate(-641 51.479)\"/><path d=\"M954.438 255.521v-12.898l-4.29-4.289h-9.085v17.187h13.375m1 1h-15.375v-19.187h10.5l4.875 4.875v14.312z\" class=\"cls-4\" transform=\"translate(-641 51.479)\"/></g><path id=\"Path_784\" d=\"M954.918 242.288h-5.043v-5.079\" class=\"cls-2\" data-name=\"Path 784\" transform=\"translate(-640.959 51.604)\"/><g id=\"Path_785\" class=\"cls-1\" data-name=\"Path 785\"><path d=\"M943.5 245.334h8.563v7.25H943.5z\" class=\"cls-3\" transform=\"translate(-641 51.479)\"/><path d=\"M951.063 251.584v-5.25H944.5v5.25h6.563m1 1H943.5v-7.25h8.563v7.25z\" class=\"cls-4\" transform=\"translate(-641 51.479)\"/></g><path id=\"Path_786\" d=\"M946.5 245.084v7.25\" class=\"cls-2\" data-name=\"Path 786\" transform=\"translate(-641.064 51.729)\"/><path id=\"Path_787\" d=\"M952.063 247.834H944\" class=\"cls-2\" data-name=\"Path 787\" transform=\"translate(-641 51.479)\"/><path id=\"Path_788\" d=\"M951.938 250.4h-8.562\" class=\"cls-2\" data-name=\"Path 788\" transform=\"translate(-640.875 51.479)\"/></g>\r\n        </svg>\r\n        <h1>CSV</h1>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n<div class=\"spinner\" *ngIf=\"isLoading\"></div>\r\n<article *ngIf=\"!isLoading  && !noSparesGroups\">\r\n  <section class=\"spare-class\" >\r\n    <div class=\"spare-groups\">\r\n      <app-spares-group *ngFor=\"let sparesGroup of sparesGroups\" [sparesGroup]=\"sparesGroup\" [textFilter]=\"searchForm.get('text').value\" [siteId]=\"siteId\"></app-spares-group>\r\n    </div>\r\n  </section>\r\n\r\n</article>\r\n"],"sourceRoot":"webpack:///"}