{"version":3,"sources":["webpack:///src/app/preventive-maintenance/preventive-maintenance.component.ts","webpack:///src/app/preventive-maintenance/preventive-maintenance.component.html","webpack:///src/app/preventive-maintenance/create-preventive-maintenance/create-preventive-maintenance.component.ts","webpack:///src/app/preventive-maintenance/create-preventive-maintenance/create-preventive-maintenance.component.html","webpack:///src/app/preventive-maintenance/preventive-maintenance-routing.module.ts","webpack:///src/app/preventive-maintenance/view-preventive-maintenance/view-preventive-maintenance.component.ts","webpack:///src/app/preventive-maintenance/view-preventive-maintenance/view-preventive-maintenance.component.html","webpack:///src/app/preventive-maintenance/preventive-maintenance.wizard.ts","webpack:///src/app/preventive-maintenance/preventive-maintenance.module.ts"],"names":["PreventiveMaintenanceComponent","formBuilder","authenticationService","preventiveMaintenanceService","searchFilterService","router","preventiveMaintenanceWizard","offset","take","shouldGetNextPreventiveMaintenance","preventiveMaintenanceList","PreventiveMaintenanceStatus","standardFormattedDate","isGettingUserRights","canUserEditSchedule","setPermissionBooleans","searchForm","group","text","searchPMTextValue","scheduleFilterCache","searchPMFilterValue","searchPMFilterValueCache","get","valueChanges","pipe","textValue","length","subscribe","initiateFreshSearchSettings","getPreventiveMaintenanceList","searchPMTextValueCache","controls","value","undefined","currentUserHasPermission","PreventiveMaintenance","CanCreatePreventiveMaintenance","hasPermission","canCreateSchedule","CanEditPreventiveMaintenance","isSearching","searchText","includeExpired","scheduleList","push","preventiveMaintenance","navigate","handleFilterClick","createSchedule","CreatePreventiveMaintenanceComponent","formbuilder","toastService","isCreatingScheduleLoader","showSaveButton","submitAttempted","addAssetsModalVisible","startDate","Date","minDueDate","existingAssets","setDate","getDate","createForm","buildScheduleForm","formCreateSchedule","title","compose","required","maxLength","scheduleStart","scheduleEnd","frequency","min","max","assignedToUser","instruction","inputDate","setValue","newStartDate","newEndDate","userId","e","preventDefault","listAssets","asset","splice","indexOf","showErrorToast","valid","maintenanceAssets","map","selectedAsset","id","assignedTo","endDate","status","Active","assetName","data","showToast","numberWithPrefix","err","routes","path","component","PreventiveMaintenanceRoutingModule","forChild","ViewPreventiveMaintenanceComponent","isLoading","isEditable","preventiveMaintenanceStatus","preventiveMaintenanceStatusValues","isUpdatingPreventiveMaintenance","submitted","minEndDate","isAssetAvailable","preventiveMaintenanceId","toString","preventiveMaintenanceNumber","viewPreventiveMaintenanceForId","validPattern","bulidPreventiveMaintenanceDetailForm","extendedPreventiveMaintenance","form","disabled","pattern","onDateChange","setTimeout","updateFormChanges","isOnInit","viewPreventiveMaintenanceDetailForId","scheduleDetail","preventiveMaintenanceAsset","filter","isDelete","markAsDirty","assetIndex","parseInt","markAsPristine","dirty","forEach","preventiveMaintenanceAssets","referenceId","updatePreventiveMaintenanceDetailForId","errorResponse","PreventiveMaintenanceWizard","PickDateAdapter","date","displayFormat","locale","PreventiveMaintenanceModule","provide","useClass","useValue"],"mappings":"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","file":"preventive-maintenance-preventive-maintenance-module-es5.js","sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport {\r\n  IPreventiveMaintenance,\r\n  PreventiveMaintenance,\r\n  PreventiveMaintenanceStatus\r\n} from '../services/preventive-maintenance/preventive-maintenance.types';\r\nimport {\r\n  AuthenticationService,\r\n  PermissionGroup,\r\n  PreventiveMaintenancePermissions,\r\n  PreventiveMaintenanceService,\r\n  SearchFilterService\r\n} from '../services';\r\nimport { standardFormattedDate } from 'src/utils/dateUtils';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport { Router } from '@angular/router';\r\nimport { PreventiveMaintenanceWizard } from './preventive-maintenance.wizard';\r\n\r\n@Component({\r\n  selector: 'app-preventive-maintenance',\r\n  templateUrl: './preventive-maintenance.component.html',\r\n  styleUrls: ['./preventive-maintenance.component.scss']\r\n})\r\nexport class PreventiveMaintenanceComponent implements OnInit, OnDestroy {\r\n  public searchForm: FormGroup;\r\n  public isSearching: boolean;\r\n  public offset = 0;\r\n  public take = 10;\r\n  public shouldGetNextPreventiveMaintenance = true;\r\n  public preventiveMaintenanceList: IPreventiveMaintenance[] = [];\r\n  public canCreateSchedule: boolean;\r\n  public PreventiveMaintenanceStatus = PreventiveMaintenanceStatus;\r\n  public standardFormattedDate = standardFormattedDate;\r\n  public scheduleFilterCache: boolean;\r\n  public form: FormGroup;\r\n  public isGettingUserRights = false;\r\n  public canUserEditSchedule = false;\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private authenticationService: AuthenticationService,\r\n    private preventiveMaintenanceService: PreventiveMaintenanceService,\r\n    private searchFilterService: SearchFilterService,\r\n    private router: Router,\r\n    private preventiveMaintenanceWizard: PreventiveMaintenanceWizard\r\n  ) {}\r\n\r\n  public ngOnInit(): void {\r\n    this.setPermissionBooleans();\r\n    this.searchForm = this.formBuilder.group({\r\n      text: this.searchFilterService.searchPMTextValue\r\n        ? this.searchFilterService.searchPMTextValue\r\n        : ''\r\n    });\r\n    this.scheduleFilterCache = this.searchFilterService.searchPMFilterValue;\r\n    this.searchFilterService.searchPMFilterValueCache = this.scheduleFilterCache;\r\n\r\n    this.searchForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length >= 3 || textValue.length === 0)\r\n      )\r\n      .subscribe(() => {\r\n        this.initiateFreshSearchSettings();\r\n        this.getPreventiveMaintenanceList();\r\n        this.searchFilterService.searchPMTextValueCache = this.searchForm.controls[\r\n          'text'\r\n        ].value;\r\n      });\r\n    this.initiateFreshSearchSettings();\r\n    this.getPreventiveMaintenanceList();\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.searchFilterService.searchPMFilterValue = false;\r\n    this.searchFilterService.searchPMTextValue = undefined;\r\n  }\r\n\r\n  private setPermissionBooleans() {\r\n    this.isGettingUserRights = true;\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanCreatePreventiveMaintenance\r\n        ]\r\n      })\r\n      .subscribe(hasPermission => (this.canCreateSchedule = hasPermission));\r\n\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanEditPreventiveMaintenance\r\n        ]\r\n      })\r\n      .subscribe(hasPermission => {\r\n        this.canUserEditSchedule = hasPermission;\r\n        this.isGettingUserRights = false;\r\n      });\r\n  }\r\n\r\n  public initiateFreshSearchSettings(): void {\r\n    this.preventiveMaintenanceList = [];\r\n    this.offset = 0;\r\n    this.shouldGetNextPreventiveMaintenance = true;\r\n  }\r\n\r\n  public getPreventiveMaintenanceList() {\r\n    this.isSearching = true;\r\n    this.preventiveMaintenanceService\r\n      .getPreventiveMaintenanceList({\r\n        offset: this.offset,\r\n        take: this.take,\r\n        searchText: this.searchForm.value.text,\r\n        includeExpired: this.scheduleFilterCache\r\n      })\r\n      .subscribe((scheduleList: IPreventiveMaintenance[]) => {\r\n        this.preventiveMaintenanceList.push(...scheduleList);\r\n        this.offset += this.take;\r\n        if (scheduleList.length < this.take) {\r\n          this.shouldGetNextPreventiveMaintenance = false;\r\n        }\r\n        this.isSearching = false;\r\n      });\r\n  }\r\n  public handleSelectedPreventiveMaintenanceClick(\r\n    preventiveMaintenance: PreventiveMaintenance\r\n  ) {\r\n    this.preventiveMaintenanceWizard.preventiveMaintenance = preventiveMaintenance;\r\n    if (this.preventiveMaintenanceWizard.preventiveMaintenance) {\r\n      if (this.canUserEditSchedule) {\r\n        this.router.navigate(['preventive-maintenance/edit-schedule']);\r\n      } else {\r\n        this.router.navigate(['preventive-maintenance/view-schedule']);\r\n      }\r\n    }\r\n  }\r\n\r\n  public handleFilterClick(includeExpired: boolean) {\r\n    this.scheduleFilterCache = includeExpired;\r\n    this.searchFilterService.searchPMFilterValueCache = this.scheduleFilterCache;\r\n    this.initiateFreshSearchSettings();\r\n    this.getPreventiveMaintenanceList();\r\n  }\r\n\r\n  public createSchedule(): void {\r\n    this.router.navigate(['preventive-maintenance', 'create-schedule']);\r\n  }\r\n}\r\n","<app-section-header></app-section-header>\r\n<h1>Preventive Maintenance</h1>\r\n<form [formGroup]=\"searchForm\" class=\"search-filter-form\">\r\n  <div class=\"input-with-search-wrapper col-6\">\r\n    <input\r\n      type=\"text\"\r\n      formControlName=\"text\"\r\n      class=\"form-control form-control--search-prefix\"\r\n      placeholder=\"Search by schedule id, title, asset id or name\"\r\n    />\r\n  </div>\r\n\r\n <div class=\"schedule-filter col-2\">\r\n    <form>\r\n      <div class=\"form-group\">\r\n          <label class=\"custom-control-label label-align\" for=\"includeExpired\">\r\n            <input\r\n            type=\"checkbox\"\r\n            id=\"includeExpired\"\r\n            [(ngModel)]=\"scheduleFilterCache\"\r\n            (change)=\"handleFilterClick($event.target.checked)\"\r\n            name=\"option-schedule-filter\"\r\n            class=\"custom-control-input\"/>\r\n            <span class=\"checkbox-label\">Include expired schedules</span></label>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <div class=\"schedule-create-btn col-4\">\r\n    <button [disabled]=\"!canCreateSchedule\"  class=\"btn\" (click)= \"createSchedule()\">\r\n      <span>Create Schedule</span>\r\n    </button>\r\n  </div>\r\n</form>\r\n\r\n<ul class=\"schedule-list\">\r\n  <li>\r\n      <div>\r\n        <span>id</span>\r\n      </div>\r\n      <div>\r\n       <span>title</span>\r\n      </div>\r\n      <div>\r\n        <span>asset name</span>\r\n      </div>\r\n      <div>\r\n        <span>next due</span>\r\n      </div>\r\n      <div>\r\n        <span>status</span>\r\n      </div>\r\n  </li>\r\n  <li *ngFor=\"let preventiveMaintenance of preventiveMaintenanceList; let i = index\"   class=\"status-{{preventiveMaintenance.status ? PreventiveMaintenanceStatus[preventiveMaintenance.status] : 'Active'}}\"\r\n  (click) = \"handleSelectedPreventiveMaintenanceClick(preventiveMaintenance)\"\r\n  >\r\n    <div>\r\n      <span>{{preventiveMaintenance.number}}</span>\r\n    </div>\r\n    <div>\r\n      <span>{{preventiveMaintenance.title}}</span>\r\n    </div>\r\n    <div>\r\n      <span>{{preventiveMaintenance.assetName}}</span>\r\n    </div>\r\n    <div>\r\n      <span>{{(preventiveMaintenance.nextDue?standardFormattedDate(preventiveMaintenance.nextDue,true):'') }}</span>\r\n    </div>\r\n    <div>\r\n      <span>{{PreventiveMaintenanceStatus[preventiveMaintenance.status]}}</span>\r\n    </div>\r\n    <div class=\"row-toggle\">\r\n      <div>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 8.797 5.194\">\r\n          <path d=\"M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z\" />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  </li>\r\n</ul>\r\n<div *ngIf=\"preventiveMaintenanceList.length === 0 && !isSearching\">\r\n  No preventive maintenance schedules found\r\n</div>\r\n\r\n<div *ngIf=\"shouldGetNextPreventiveMaintenance && !isSearching\" class=\"text-center\">\r\n  <button class=\"btn btn-link\" (click)=\"getPreventiveMaintenanceList()\">Load more</button>\r\n</div>\r\n\r\n<div *ngIf=\"isSearching\">\r\n  <div class=\"spinner\"></div>\r\n</div>\r\n","import { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport {\r\n  AuthenticationService,\r\n  IAssets,\r\n  PermissionGroup,\r\n  PreventiveMaintenancePermissions,\r\n  PreventiveMaintenanceService,\r\n  PreventiveMaintenanceStatus,\r\n  Toast,\r\n  ToastService\r\n} from 'src/app/services';\r\nimport { Router } from '@angular/router';\r\nimport { MatDatepickerInputEvent } from '@angular/material/datepicker';\r\nimport { PreventiveMaintenanceWizard } from '../preventive-maintenance.wizard';\r\nimport { formatDate } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-create-preventive-maintenance',\r\n  templateUrl: './create-preventive-maintenance.component.html',\r\n  styleUrls: ['./create-preventive-maintenance.component.scss']\r\n})\r\nexport class CreatePreventiveMaintenanceComponent implements OnInit {\r\n  public isCreatingScheduleLoader: boolean = false;\r\n  public showSaveButton: boolean = false;\r\n  public submitAttempted = false;\r\n  public addAssetsModalVisible = false;\r\n  public startDate = new Date();\r\n  public minDueDate = new Date();\r\n  public formCreateSchedule: FormGroup;\r\n  public existingAssets: IAssets[] = [];\r\n  public canUserEditSchedule = false;\r\n\r\n  constructor(\r\n    private formbuilder: FormBuilder,\r\n    private preventiveMaintenanceService: PreventiveMaintenanceService,\r\n    private toastService: ToastService,\r\n    public router: Router,\r\n    private preventiveMaintenanceWizard: PreventiveMaintenanceWizard,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  public ngOnInit(): void {\r\n    this.minDueDate.setDate(this.startDate.getDate() + 1);\r\n    this.createForm();\r\n    this.setPermissionBooleans();\r\n  }\r\n\r\n  private createForm(): void {\r\n    const buildScheduleForm = () => {\r\n      this.formCreateSchedule = this.formbuilder.group({\r\n        title: [\r\n          '',\r\n          Validators.compose([Validators.required, Validators.maxLength(50)])\r\n        ],\r\n        scheduleStart: [this.startDate, Validators.required],\r\n        scheduleEnd: [null],\r\n        frequency: [\r\n          '',\r\n          Validators.compose([\r\n            Validators.required,\r\n            Validators.min(1),\r\n            Validators.max(9999)\r\n          ])\r\n        ],\r\n        assignedToUser: ['', Validators.compose([Validators.maxLength(50)])],\r\n        instruction: ['', Validators.compose([Validators.maxLength(4000)])]\r\n      });\r\n    };\r\n\r\n    buildScheduleForm();\r\n  }\r\n\r\n  private setPermissionBooleans() {\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanEditPreventiveMaintenance\r\n        ]\r\n      })\r\n      .subscribe(hasPermission => {\r\n        this.canUserEditSchedule = hasPermission;\r\n      });\r\n  }\r\n  public onStartDateChange(inputDate: MatDatepickerInputEvent<Date>): void {\r\n    this.startDate = new Date(inputDate.value);\r\n\r\n    this.startDate.setDate(this.startDate.getDate());\r\n    this.formCreateSchedule.get('scheduleStart').setValue(this.startDate);\r\n    this.minDueDate.setDate(this.startDate.getDate() + 1);\r\n    let newStartDate = new Date(this.startDate);\r\n    if (\r\n      this.formCreateSchedule.value.scheduleEnd !== null &&\r\n      this.formCreateSchedule.value.scheduleEnd !== undefined &&\r\n      this.formCreateSchedule.value.scheduleEnd !== ''\r\n    ) {\r\n      let newEndDate = new Date(this.formCreateSchedule.value.scheduleEnd);\r\n      if (newEndDate < newStartDate) {\r\n        this.formCreateSchedule.get('scheduleEnd').setValue('');\r\n      }\r\n    }\r\n  }\r\n\r\n  public selectedUserId(userId: string): void {\r\n    this.formCreateSchedule.get('assignedToUser').setValue(userId);\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public handlePickAssets() {\r\n    this.addAssetsModalVisible = true;\r\n  }\r\n\r\n  public handleDetailsModalClose() {\r\n    this.addAssetsModalVisible = false;\r\n  }\r\n\r\n  public disableRightClick(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  public handleAddedAssets(listAssets: IAssets[]) {\r\n    this.addAssetsModalVisible = false;\r\n    this.existingAssets = listAssets;\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public handleDeleteAsset(asset: IAssets) {\r\n    this.existingAssets.splice(this.existingAssets.indexOf(asset), 1);\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public createSchedule() {\r\n    this.submitAttempted = true;\r\n    this.showSaveButton = false;\r\n    this.isCreatingScheduleLoader = true;\r\n\r\n    let newStartDate = new Date(this.formCreateSchedule.value.scheduleStart);\r\n    if (\r\n      this.formCreateSchedule.value.scheduleEnd !== null &&\r\n      this.formCreateSchedule.value.scheduleEnd !== undefined &&\r\n      this.formCreateSchedule.value.scheduleEnd !== ''\r\n    ) {\r\n      let newEndDate = new Date(this.formCreateSchedule.value.scheduleEnd);\r\n      if (newEndDate < newStartDate) {\r\n        this.toastService.showErrorToast(\r\n          `Schedule end should be greater than schedule start`\r\n        );\r\n        this.isCreatingScheduleLoader = false;\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (this.existingAssets.length === 0) {\r\n      this.isCreatingScheduleLoader = false;\r\n      return;\r\n    }\r\n    if (!this.formCreateSchedule.valid) {\r\n      this.isCreatingScheduleLoader = false;\r\n      return;\r\n    }\r\n\r\n    const maintenanceAssets = this.existingAssets.map(\r\n      selectedAsset => selectedAsset.id\r\n    );\r\n    const assignedTo = this.formCreateSchedule.value.assignedToUser;\r\n    const title = this.formCreateSchedule.value.title;\r\n    const instruction = this.formCreateSchedule.value.instruction;\r\n    const frequency = this.formCreateSchedule.value.frequency;\r\n    const startDate = formatDate(\r\n      this.formCreateSchedule.value.scheduleStart,\r\n      'yyyy-MM-ddThh:mm:ss',\r\n      'en-US'\r\n    );\r\n    const endDate = formatDate(\r\n      this.formCreateSchedule.value.scheduleEnd,\r\n      'yyyy-MM-ddThh:mm:ss',\r\n      'en-US'\r\n    );\r\n    const status = PreventiveMaintenanceStatus.Active;\r\n    const assetName = '';\r\n    this.preventiveMaintenanceService\r\n      .createSchedule({\r\n        title,\r\n        endDate,\r\n        startDate,\r\n        frequency,\r\n        status,\r\n        assignedTo,\r\n        instruction,\r\n        assetName,\r\n        maintenanceAssets\r\n      })\r\n      .subscribe(\r\n        data => {\r\n          this.toastService.showToast(\r\n            new Toast(\r\n              `Schedule ( ${data.numberWithPrefix} ) saved successfully`\r\n            )\r\n          );\r\n          this.isCreatingScheduleLoader = false;\r\n          this.preventiveMaintenanceWizard.preventiveMaintenance = data;\r\n\r\n          if (this.canUserEditSchedule) {\r\n            this.router.navigate(['preventive-maintenance/edit-schedule']);\r\n          } else {\r\n            this.router.navigate(['preventive-maintenance/view-schedule']);\r\n          }\r\n        },\r\n        err => {\r\n          this.toastService.showErrorToast(` Schedule not saved`);\r\n          this.isCreatingScheduleLoader = false;\r\n        }\r\n      );\r\n  }\r\n}\r\n","<app-section-header [customCurrentPageTitle]=\"'Create Schedule'\"></app-section-header>\r\n\r\n<div *ngIf=\"isCreatingScheduleLoader\">\r\n  <div class=\"spinner\"></div>\r\n</div>\r\n\r\n<article *ngIf= \"!isCreatingScheduleLoader\">\r\n  <header>\r\n    <h1> Create Schedule</h1>\r\n  </header>\r\n\r\n  <form [formGroup]= \"formCreateSchedule\">\r\n\r\n    <div class=\"mt-4 core-info\">\r\n      <div id=\"title-errormsg-outer-div\"\r\n      class=\"d-flex\"\r\n      *ngIf= \"submitAttempted && formCreateSchedule.controls.title.errors\">\r\n        <div class=\"col-4 col-sm-2\"\r\n        id=\"title-error-left-div\">\r\n        </div>\r\n        <div class=\"col-8  col-sm-10 alert alert-danger arrow-alert title-alert\"\r\n        id=\"title-error-rignt-div\">\r\n          You must specify title\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"title-outer-div\"\r\n       class=\"d-flex  row align-items-center mb-2 mb-sm-3\">\r\n        <div  id=\"title-lable-div\"\r\n         class=\"col-4 col-sm-2\">\r\n          <label for=\"title\">Title</label>\r\n        </div>\r\n        <div id=\"title-ctrl-div\"\r\n         class=\"col-8 col-sm-10\"\r\n          >\r\n\r\n            <input\r\n            type=\"text\"\r\n            maxlength=\"50\"\r\n            formControlName=\"title\"\r\n            class=\"form-control\"\r\n            />\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"asset-errormsg-outer-div\"\r\n        class=\"row\"\r\n        *ngIf=\"(submitAttempted && existingAssets.length === 0)\">\r\n        <div id=\"asset-errormsg-outer-div-section1\"\r\n         class=\"col-sm-6\" >\r\n          <div  id=\"asset-errormsg-outer-div-inner-section\"\r\n            class=\"d-flex align-items-center error-msg\">\r\n            <label class=\"col-4 \"></label>\r\n            <div id=\"asset-errormsg-div\"\r\n             class=\"col-8 col-sm-12 asset-input-alret alert alert-danger arrow-alert asset-alert\">\r\n              You must specify an asset\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"asset-errormsg-outer-div-section2\"\r\n         class=\"col-sm-6\">\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"asset-dummy-outer-div\"\r\n       class=\"row\" *ngIf=\"existingAssets.length === 0\">\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"d-flex row align-items-center\">\r\n            <label class=\"col-4 \">Asset</label>\r\n            <div class=\"col-8 asset-input-size\">\r\n              <input type=\"text\" readonly  [value]=\"\" class=\"readonly form-control\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"d-flex row align-items-center\">\r\n            <label class=\"col-4\">Location</label>\r\n            <div class=\"col-8  d-flex align-items-center\">\r\n              <input type=\"text\" class=\"form-control readonly\"  [value]=\"\" readonly/>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.002\" height=\"19.003\" viewBox=\"0 0 14.002 18.003\" class=\"del-icon opacity-50\" >\r\n                <g id=\"wrench\" transform=\"translate(0.001 0)\">\r\n                  <path id=\"Path_1563\" data-name=\"Path 1563\" d=\"M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z\" transform=\"translate(0.2 1.267)\"/>\r\n                  <path id=\"Path_1564\" data-name=\"Path 1564\" d=\"M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z\"/>\r\n                  <path id=\"Path_1565\" data-name=\"Path 1565\" d=\"M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z\" transform=\"translate(1.567 2)\"/>\r\n                  <path id=\"Path_1566\" data-name=\"Path 1566\" d=\"M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z\" transform=\"translate(0.9 1.967)\"/>\r\n                  <path id=\"Path_1567\" data-name=\"Path 1567\" d=\"M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z\" transform=\"translate(2.125 1.991)\"/>\r\n                </g>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"asset-outer-div\"\r\n       class=\"row\"  *ngFor=\"let scheduleAsset of existingAssets\">\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <label class=\"col-4 \">Asset</label>\r\n            <div class=\"col-8 asset-input-size\">\r\n              <input type=\"text\" readonly  [value]=\"scheduleAsset.assetId + ' - ' + scheduleAsset.name\" class=\"readonly form-control\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <label class=\"col-4\">Location</label>\r\n            <div class=\"col-8  d-flex align-items-center\">\r\n              <input type=\"text\" class=\"form-control readonly\"  [value]=\"scheduleAsset.location\" readonly/>\r\n              <button (click)=\"handleDeleteAsset(scheduleAsset)\"  class=\"del-icon-button\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.002\" height=\"19.003\" viewBox=\"0 0 14.002 18.003\" class=\"del-icon \">\r\n                <g id=\"wrench\" transform=\"translate(0.001 0)\">\r\n                  <path id=\"Path_1563\" data-name=\"Path 1563\" d=\"M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z\" transform=\"translate(0.2 1.267)\"/>\r\n                  <path id=\"Path_1564\" data-name=\"Path 1564\" d=\"M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z\"/>\r\n                  <path id=\"Path_1565\" data-name=\"Path 1565\" d=\"M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z\" transform=\"translate(1.567 2)\"/>\r\n                  <path id=\"Path_1566\" data-name=\"Path 1566\" d=\"M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z\" transform=\"translate(0.9 1.967)\"/>\r\n                  <path id=\"Path_1567\" data-name=\"Path 1567\" d=\"M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z\" transform=\"translate(2.125 1.991)\"/>\r\n                </g>\r\n              </svg>\r\n            </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"add-asset-div\"\r\n       class=\"pb-2\">\r\n        <button id=\"add-asset-btn\"\r\n         class=\"btn btn-link p-0 add-asset\" (click)=\"handlePickAssets()\">Add Asset</button>\r\n      </div>\r\n\r\n      <div id=\"start-end-date-outer-div\"\r\n      class=\"row align-items-center mb-sm-3\">\r\n        <div id=\"startdate-outer-div\"\r\n          class=\"col-12 col-sm-6  mb-2 \">\r\n\r\n          <div id=\"startdate-error-div\"\r\n           class=\"d-flex \"\r\n           id=\"start-date-error-outer-div\"\r\n           *ngIf= \" (submitAttempted && formCreateSchedule.controls.scheduleStart.errors)\">\r\n            <div id=\"start-date-error-left\" class=\"col-4\" ></div>\r\n            <div  id=\"start-date-error-right\" class=\"col-8 ms-1 alert alert-danger arrow-alert startdate-alert\">\r\n              You must specify schedule start\r\n            </div>\r\n          </div>\r\n\r\n          <div id=\"startdate-outer-div\"\r\n           class=\"d-flex row align-items-center\">\r\n            <label for=\"startdate\"\r\n            class=\"col-4  pe-0\">\r\n              Schedule start\r\n            </label>\r\n            <div id=\"start-date-ctrl-div\"\r\n             class=\"col-8\" >\r\n              <div id=\"start-date-ctrl-frmgp\" class=\"form-group\" >\r\n                <div  id=\"start-date-datepicker-div\" class=\"taro-material-datepicker\" >\r\n                  <input\r\n                    matInput\r\n                    [matDatepicker]=\"datePicker\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"scheduleStart\"\r\n                    (dateChange)=\"onStartDateChange($event)\"\r\n                  />\r\n                  <mat-datepicker-toggle\r\n                    matSuffix\r\n                    [for]=\"datePicker\"\r\n                  >\r\n                  </mat-datepicker-toggle>\r\n                  <mat-datepicker #datePicker ></mat-datepicker>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div id=\"enddate-outer-div\"\r\n          class=\"col-12 col-sm-6  mb-2 \">\r\n          <div id=\"end-date-ctrl-outer-div\"\r\n           class=\"d-flex row align-items-center\" >\r\n            <label for=\"end-date-ctrl-lbl\"\r\n              class=\"col-4 attachment-icon\"  >\r\n              Schedule end\r\n              <span tooltip-danger=\"Auto creation of work order will stop on this date. Leave blank if you are unsure or if this maintenance is required for the life of the asset\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 19.199 19.2\"   width=\"14\" height=\"14\">\r\n                  <path d=\"M0 9.6a9.6 9.6 0 0 0 18.5 3.6 8.571 8.571 0 0 0 .7-3.6A9.6 9.6 0 1 0 0 9.6z\" fill=\"#fff\" stroke=\"#ff422e\"/>\r\n                  <g>\r\n                    <path d=\"M9.6 4a1.184 1.184 0 0 1 1.2 1.3 1.2 1.2 0 1 1-2.4 0A1.24 1.24 0 0 1 9.6 4zm-1 3.3h2.1v7.9H8.6z\" fill=\"#ff422e\"/>\r\n                  </g>\r\n                </svg>\r\n              </span>\r\n            </label>\r\n            <div id=\"end-date-ctrl-div\"\r\n             class=\"col-8\" >\r\n              <div id=\"end-date-ctrl-frmgrp\"\r\n               class=\"form-group\" >\r\n                <div id=\"end-date-datepicker-div\" class=\"taro-material-datepicker\">\r\n                    <input\r\n                      matInput\r\n                      [matDatepicker]=\"datepickerendschedule\"\r\n                      [min]=\"minDueDate\"\r\n                      class=\"form-control\"\r\n                      formControlName=\"scheduleEnd\"\r\n                      />\r\n                      <mat-datepicker-toggle\r\n                      matSuffix\r\n                      [for]=\"datepickerendschedule\">\r\n                      </mat-datepicker-toggle>\r\n                      <mat-datepicker #datepickerendschedule disabled=\"false\">\r\n                      </mat-datepicker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"frequency-assignto-outter-div\"\r\n        class=\"row align-items-center  mb-sm-3\">\r\n          <div id=\"frequency-outer-div\"\r\n           class=\"col-12 col-sm-6  mb-2 \">\r\n              <div id=\"frequency-error-outer-div\"\r\n              class=\"d-flex row\"\r\n              *ngIf= \" (submitAttempted && formCreateSchedule.controls.frequency.errors)\">\r\n                 <div class=\"col-4\" id=\"frequency-error-left\"></div>\r\n                 <div class=\"col-5  alert alert-danger arrow-alert frequency-alert\" id=\"frequency-error-right\">\r\n                    You must specify frequency\r\n                  </div>\r\n                  <div class=\"col-3\" id=\"frequency-error-right\"></div>\r\n              </div>\r\n              <div  id=\"frequency-ctrl-outer-div\"\r\n              class=\"d-flex  row align-items-center\">\r\n                <label class=\"col-4\" for=\"start-date-ctrl-lbl\">\r\n                  Frequency\r\n                </label>\r\n                <div class=\"col-6 \">\r\n                  <input\r\n                  type=\"number\"\r\n                  pattern=\"[0-9]*\"\r\n                  maxlength=\"5\"\r\n                  formControlName=\"frequency\"\r\n                  class=\"form-control\"\r\n                   onkeypress=\"return (this.value.length === 4 || event.key === 'e' || isNaN(event.key)) ? false : true;\"\r\n                  />\r\n                </div>\r\n                <label class=\"col-2 ps-1\" for=\"frequency-days-label\">\r\n                  Days\r\n                </label>\r\n              </div>\r\n          </div>\r\n\r\n          <div id=\"assignto-outer-div\"\r\n          class=\"col-12 col-sm-6 mb-2\" >\r\n          <div class=\"d-flex row align-items-center\" id=\"assignto-ctrl-outer-div\">\r\n            <label class=\"col-4 \" for=\"end-date-ctrl-lbl\">\r\n             Assign To</label>\r\n             <div class=\"col-8\" id=\"end-date-ctrl-div\">\r\n                <input type=\"hidden\" formControlName=\"assignedToUser\" class=\"form-control\" />\r\n                <app-list-users (selectedUserId)=\"selectedUserId($event)\"></app-list-users>\r\n             </div>\r\n          </div>\r\n\r\n          </div>\r\n\r\n      </div>\r\n\r\n\r\n\r\n      <div id=\"instruction-outer-div\"\r\n       class=\"d-flex row  pb-2\">\r\n        <div  id=\"instruction-lable-div\"\r\n         class=\"col-4 mt-3\">\r\n          <label for=\"instruction \">Instructions</label>\r\n        </div>\r\n        <div id=\"instruction-ctrl-div\"\r\n         class=\"col-8\"\r\n        >\r\n          <textarea  class=\"form-control instruction-input\"\r\n          formControlName=\"instruction\"\r\n          rows=\"8\"\r\n          maxlength=\"4000\">\r\n          </textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <footer>\r\n      <div\r\n      class=\"form-actions\"\r\n      [class.visible]=\"formCreateSchedule.dirty || showSaveButton\">\r\n        <button\r\n        class=\"col-12 btn btn-primary btn-block\"\r\n        (click)=\"createSchedule()\"\r\n        >\r\n        Save all changes\r\n        </button>\r\n      </div>\r\n    </footer>\r\n  </form>\r\n\r\n  <app-modal\r\n  *ngIf=\"addAssetsModalVisible\"\r\n  (modalShouldClose)=\"handleDetailsModalClose()\"\r\n  (contextmenu)=\"disableRightClick($event)\"\r\n  >\r\n  <app-pick-assets\r\n    (addedAssets)=\"handleAddedAssets($event)\"\r\n    [existingAssets]=\"existingAssets\"\r\n    >\r\n  </app-pick-assets>\r\n</app-modal>\r\n\r\n</article>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { PreventiveMaintenanceComponent } from './preventive-maintenance.component';\r\nimport { ViewPreventiveMaintenanceComponent } from './view-preventive-maintenance/view-preventive-maintenance.component';\r\nimport { CreatePreventiveMaintenanceComponent } from './create-preventive-maintenance/create-preventive-maintenance.component';\r\n\r\nexport const routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PreventiveMaintenanceComponent\r\n  },\r\n  {\r\n    path: 'view-schedule',\r\n    component: ViewPreventiveMaintenanceComponent\r\n  },\r\n  {\r\n    path: 'edit-schedule',\r\n    component: ViewPreventiveMaintenanceComponent\r\n  },\r\n  {\r\n    path: 'create-schedule',\r\n    component: CreatePreventiveMaintenanceComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PreventiveMaintenanceRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators\r\n} from '@angular/forms';\r\nimport {\r\n  AuthenticationService,\r\n  IAssets,\r\n  IPreventiveMaintenance,\r\n  PermissionGroup,\r\n  PreventiveMaintenancePermissions,\r\n  PreventiveMaintenanceService,\r\n  PreventiveMaintenanceStatus,\r\n  Toast,\r\n  ToastService\r\n} from 'src/app/services';\r\nimport { enumValues } from 'src/utils/enumUtils';\r\nimport { PreventiveMaintenanceWizard } from '../preventive-maintenance.wizard';\r\nimport { Router } from '@angular/router';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { formatDate } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-view-preventive-maintenance',\r\n  templateUrl: './view-preventive-maintenance.component.html',\r\n  styleUrls: ['./view-preventive-maintenance.component.scss']\r\n})\r\nexport class ViewPreventiveMaintenanceComponent implements OnInit {\r\n  public isLoading = true;\r\n  public isGettingUserRights = false;\r\n  public form: FormGroup;\r\n  public isEditable = false;\r\n  public addAssetsModalVisible = false;\r\n  public extendedPreventiveMaintenance: IPreventiveMaintenance;\r\n  public preventiveMaintenanceStatus = PreventiveMaintenanceStatus;\r\n  public preventiveMaintenanceStatusValues: number[] = enumValues(\r\n    this.preventiveMaintenanceStatus\r\n  );\r\n  public showSaveButton = false;\r\n  public preventiveMaintenanceId: string;\r\n  public preventiveMaintenanceNumber: string;\r\n  public isUpdatingPreventiveMaintenance = false;\r\n  public submitted = false;\r\n  public minEndDate = new Date();\r\n  public isAssetAvailable = true;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private preventiveMaintenanceService: PreventiveMaintenanceService,\r\n    private router: Router,\r\n    private preventiveMaintenanceWizard: PreventiveMaintenanceWizard,\r\n    private authenticationService: AuthenticationService,\r\n    private toastService: ToastService\r\n  ) {\r\n    if (this.preventiveMaintenanceWizard.preventiveMaintenance) {\r\n      this.preventiveMaintenanceId = this.preventiveMaintenanceWizard.preventiveMaintenance.id.toString();\r\n      this.preventiveMaintenanceNumber = this.preventiveMaintenanceWizard.preventiveMaintenance.numberWithPrefix;\r\n    } else {\r\n      this.router.navigate(['preventive-maintenance']);\r\n    }\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.setPermissionBooleans();\r\n    this.viewPreventiveMaintenanceForId();\r\n  }\r\n\r\n  public createForm() {\r\n    const validPattern = '^[a-zA-Z0-9 ]*';\r\n    const bulidPreventiveMaintenanceDetailForm = extendedPreventiveMaintenance => {\r\n      this.form = this.formBuilder.group({\r\n        title: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.title,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([\r\n            Validators.maxLength(50),\r\n            Validators.required,\r\n            Validators.pattern(validPattern)\r\n          ])\r\n        ),\r\n        assignedTo: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.assignedTo,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([Validators.maxLength(50)])\r\n        ),\r\n        status: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.status,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([Validators.required])\r\n        ),\r\n        startDate: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.startDate,\r\n            disabled: true\r\n          },\r\n          Validators.compose([Validators.required])\r\n        ),\r\n        endDate: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.endDate,\r\n            disabled: true\r\n          },\r\n          Validators.compose([Validators.required])\r\n        ),\r\n        frequency: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.frequency,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([\r\n            Validators.required,\r\n            Validators.min(1),\r\n            Validators.max(9999)\r\n          ])\r\n        ),\r\n        instruction: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.instruction,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([Validators.maxLength(4000)])\r\n        )\r\n      });\r\n    };\r\n    bulidPreventiveMaintenanceDetailForm(this.extendedPreventiveMaintenance);\r\n    const inputDate = new Date(this.extendedPreventiveMaintenance.startDate);\r\n    if (inputDate) {\r\n      this.onDateChange(inputDate);\r\n    }\r\n    this.isLoading = false;\r\n    this.form.valueChanges.subscribe(() => {\r\n      setTimeout(() => {\r\n        this.updateFormChanges();\r\n      }, 100);\r\n    });\r\n  }\r\n\r\n  public viewPreventiveMaintenanceForId(isOnInit: boolean = true) {\r\n    this.isLoading = true;\r\n    this.preventiveMaintenanceService\r\n      .viewPreventiveMaintenanceDetailForId(this.preventiveMaintenanceId)\r\n      .subscribe((scheduleDetail: IPreventiveMaintenance) => {\r\n        this.extendedPreventiveMaintenance = scheduleDetail;\r\n        if (isOnInit) {\r\n          this.createForm();\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  public handlePickAssets() {\r\n    this.addAssetsModalVisible = true;\r\n  }\r\n\r\n  public disableRightClick(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  public handleDetailsModalClose() {\r\n    this.addAssetsModalVisible = false;\r\n  }\r\n\r\n  public selectedUserId(userId: string) {\r\n    this.form.get('assignedTo').setValue(userId);\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public handleAddedPreventiveMaintenanceAssets(\r\n    preventiveMaintenanceAsset: IAssets[]\r\n  ) {\r\n    this.addAssetsModalVisible = false;\r\n    this.extendedPreventiveMaintenance.maintenanceAssets = preventiveMaintenanceAsset;\r\n    this.isAssetAvailable =\r\n      this.extendedPreventiveMaintenance.maintenanceAssets.filter(\r\n        asset => asset.isDelete !== true\r\n      ).length > 0;\r\n\r\n    this.form.markAsDirty();\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public handleDeleteItem(assetIndex: number) {\r\n    if (\r\n      this.extendedPreventiveMaintenance &&\r\n      this.extendedPreventiveMaintenance.maintenanceAssets\r\n    ) {\r\n      this.extendedPreventiveMaintenance.maintenanceAssets.splice(\r\n        assetIndex,\r\n        1\r\n      );\r\n      this.isAssetAvailable =\r\n        this.extendedPreventiveMaintenance.maintenanceAssets.filter(\r\n          asset => asset.isDelete !== true\r\n        ).length > 0;\r\n\r\n      this.form.markAsDirty();\r\n      this.showSaveButton = true;\r\n    }\r\n  }\r\n\r\n  private setPermissionBooleans() {\r\n    this.isGettingUserRights = true;\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanEditPreventiveMaintenance\r\n        ]\r\n      })\r\n      .subscribe(hasPermission => {\r\n        this.isEditable = hasPermission;\r\n        this.isGettingUserRights = false;\r\n      });\r\n  }\r\n\r\n  public updateFormChanges() {\r\n    this.extendedPreventiveMaintenance.status = parseInt(\r\n      this.form.get('status').value\r\n    );\r\n    this.extendedPreventiveMaintenance.assignedTo = this.form.get('assignedTo')\r\n      .value\r\n      ? this.form.get('assignedTo').value.toString()\r\n      : '';\r\n    this.extendedPreventiveMaintenance.title = this.form\r\n      .get('title')\r\n      .value.toString();\r\n    this.extendedPreventiveMaintenance.instruction = this.form\r\n      .get('instruction')\r\n      .value.toString();\r\n    this.extendedPreventiveMaintenance.startDate = formatDate(\r\n      this.form.get('startDate').value,\r\n      'yyyy-MM-ddThh:mm:ss',\r\n      'en-US'\r\n    );\r\n    this.extendedPreventiveMaintenance.endDate = formatDate(\r\n      this.form.get('endDate').value,\r\n      'yyyy-MM-ddThh:mm:ss',\r\n      'en-US'\r\n    );\r\n    this.extendedPreventiveMaintenance.frequency = this.form.get(\r\n      'frequency'\r\n    ).value;\r\n    this.showSaveButton = true;\r\n    this.form.markAsDirty();\r\n  }\r\n\r\n  public updatePreventiveMaintenance() {\r\n    if (!this.isUpdatingPreventiveMaintenance) {\r\n      this.isAssetAvailable =\r\n        this.extendedPreventiveMaintenance.maintenanceAssets.filter(\r\n          asset => asset.isDelete !== true\r\n        ).length > 0;\r\n\r\n      if (!this.form.valid || !this.isAssetAvailable) {\r\n        this.submitted = true;\r\n        this.showSaveButton = false;\r\n        this.isUpdatingPreventiveMaintenance = false;\r\n        this.form.markAsPristine();\r\n        return;\r\n      }\r\n      if (this.form.valid && this.form.dirty) {\r\n        this.extendedPreventiveMaintenance.maintenanceAssets.forEach(\r\n          preventiveMaintenanceAssets => {\r\n            preventiveMaintenanceAssets.referenceId = this.extendedPreventiveMaintenance.id;\r\n          }\r\n        );\r\n        this.extendedPreventiveMaintenance.maintenanceAssets = this.extendedPreventiveMaintenance.maintenanceAssets.filter(\r\n          asset => !asset.isDelete\r\n        );\r\n        this.form.markAsPristine();\r\n        this.preventiveMaintenanceService\r\n          .updatePreventiveMaintenanceDetailForId(\r\n            this.extendedPreventiveMaintenance.id,\r\n            this.extendedPreventiveMaintenance\r\n          )\r\n          .subscribe(\r\n            data => {\r\n              this.viewPreventiveMaintenanceForId(false);\r\n              this.toastService.showToast(\r\n                new Toast(\r\n                  `Schedule ( ${data.numberWithPrefix} ) saved successfully`\r\n                )\r\n              );\r\n            },\r\n            (errorResponse: HttpErrorResponse) => {\r\n              this.toastService.showErrorToast('Unable to save schedule');\r\n              return;\r\n            }\r\n          );\r\n        this.showSaveButton = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public onDateChange(inputDate) {\r\n    if (inputDate.value) {\r\n      this.minEndDate = new Date(inputDate.value);\r\n      this.form.get('endDate').setValue(null);\r\n    } else {\r\n      this.minEndDate = new Date(inputDate);\r\n    }\r\n    this.minEndDate.setDate(this.minEndDate.getDate() + 1);\r\n  }\r\n}\r\n","<app-section-header></app-section-header>\r\n<div *ngIf=\"isLoading || isGettingUserRights\">\r\n  <div class=\"spinner\"></div>\r\n</div>\r\n<article *ngIf=\"!isLoading && !isGettingUserRights\">\r\n  <header>\r\n    <h1>\r\n      {{ isEditable ? 'Edit' : 'View' }} Schedule ({{\r\n        preventiveMaintenanceNumber\r\n      }})\r\n    </h1>\r\n  </header>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"core-info mt-4\">\r\n      <div class=\"row align-items-center\">\r\n        <div class=\"col-4 col-md-2\"></div>\r\n        <div class=\"col-8 col-md-10 \">\r\n          <ng-container *ngIf=\"submitted && form.controls.title.errors\">\r\n            <div class=\"form-group\">\r\n              <div class=\"asset-alert-msgs\">\r\n                <div class=\"alert alert-danger arrow-alert\">\r\n                  You must specify title\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row align-items-center mb-2 mb-sm-4 mb-md-3\">\r\n        <div class=\"col-4 col-md-2\">\r\n          <label>Title</label>\r\n        </div>\r\n        <div class=\"col-8 col-md-10 \">\r\n          <input\r\n            type=\"text\"\r\n            pattern=\"^[a-zA-Z0-9 ]*\"\r\n            formControlName=\"title\"\r\n            class=\"form-control\"\r\n            maxlength=\"50\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        class=\"row\"\r\n        *ngIf=\"\r\n          !extendedPreventiveMaintenance.maintenanceAssets ||\r\n          extendedPreventiveMaintenance.maintenanceAssets.length === 0 || !isAssetAvailable\r\n        \"\r\n      >\r\n        <div class=\"col-sm-12 mb-sm-3 mb-md-0\">\r\n          <div class=\"row d-flex align-items-center\">\r\n            <label class=\"col-4 col-md-2\"></label>\r\n            <div class=\"col-8 col-md-4 col-xl-4\">\r\n              <div class=\"form-group\">\r\n                <div class=\"asset-alert-msgs\">\r\n                  <div class=\"alert alert-danger arrow-alert\">\r\n                    You must specify an asset\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3 mb-md-0\">\r\n          <div class=\"row d-flex align-items-center\">\r\n            <label class=\"col-4\">Asset</label>\r\n            <div class=\"col-8\">\r\n              <input\r\n                type=\"text\"\r\n                readonly\r\n                [value]=\"\"\r\n                class=\"readonly form-control\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"row d-flex align-items-center\">\r\n            <label class=\"col-4\">Location</label>\r\n            <div class=\"col-8  d-flex align-items-center\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control readonly\"\r\n                [value]=\"\"\r\n                readonly\r\n              />\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"15.002\"\r\n                height=\"19.003\"\r\n                viewBox=\"0 0 14.002 18.003\"\r\n                class=\"del-icon opacity-50\"\r\n              >\r\n                <g id=\"wrench\" transform=\"translate(0.001 0)\">\r\n                  <path\r\n                    id=\"Path_1563\"\r\n                    data-name=\"Path 1563\"\r\n                    d=\"M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z\"\r\n                    transform=\"translate(0.2 1.267)\"\r\n                  />\r\n                  <path\r\n                    id=\"Path_1564\"\r\n                    data-name=\"Path 1564\"\r\n                    d=\"M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z\"\r\n                  />\r\n                  <path\r\n                    id=\"Path_1565\"\r\n                    data-name=\"Path 1565\"\r\n                    d=\"M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z\"\r\n                    transform=\"translate(1.567 2)\"\r\n                  />\r\n                  <path\r\n                    id=\"Path_1566\"\r\n                    data-name=\"Path 1566\"\r\n                    d=\"M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z\"\r\n                    transform=\"translate(0.9 1.967)\"\r\n                  />\r\n                  <path\r\n                    id=\"Path_1567\"\r\n                    data-name=\"Path 1567\"\r\n                    d=\"M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z\"\r\n                    transform=\"translate(2.125 1.991)\"\r\n                  />\r\n                </g>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        *ngFor=\"\r\n          let preventiveMaintenanceAsset of extendedPreventiveMaintenance.maintenanceAssets;\r\n          let i = index\r\n        \"\r\n      >\r\n      <div *ngIf=\"!preventiveMaintenanceAsset.isDelete\" >\r\n\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n            <div class=\"row  d-flex align-items-center\">\r\n              <label class=\"col-4\">Asset</label>\r\n              <div class=\"col-8\">\r\n                <input\r\n                  type=\"text\"\r\n                  readonly\r\n                  [value]=\"\r\n                    preventiveMaintenanceAsset.assetId +\r\n                    ' - ' +\r\n                    preventiveMaintenanceAsset.name\r\n                  \"\r\n                  class=\"readonly form-control\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n            <div class=\"row d-flex align-items-center\">\r\n              <label class=\"col-4\">Location</label>\r\n              <div class=\"col-8  d-flex align-items-center\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control readonly location-input\"\r\n                  [value]=\"preventiveMaintenanceAsset.location\"\r\n                  readonly\r\n                />\r\n                <button\r\n                  class=\"delete-btn\"\r\n                  (click)=\"handleDeleteItem(i)\"\r\n                  [disabled]=\"!isEditable\"\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"15.002\"\r\n                    height=\"19.003\"\r\n                    viewBox=\"0 0 14.002 18.003\"\r\n                    class=\"del-icon\"\r\n                  >\r\n                    <g id=\"wrench\" transform=\"translate(0.001 0)\">\r\n                      <path\r\n                        id=\"Path_1563\"\r\n                        data-name=\"Path 1563\"\r\n                        d=\"M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z\"\r\n                        transform=\"translate(0.2 1.267)\"\r\n                      />\r\n                      <path\r\n                        id=\"Path_1564\"\r\n                        data-name=\"Path 1564\"\r\n                        d=\"M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z\"\r\n                      />\r\n                      <path\r\n                        id=\"Path_1565\"\r\n                        data-name=\"Path 1565\"\r\n                        d=\"M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z\"\r\n                        transform=\"translate(1.567 2)\"\r\n                      />\r\n                      <path\r\n                        id=\"Path_1566\"\r\n                        data-name=\"Path 1566\"\r\n                        d=\"M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z\"\r\n                        transform=\"translate(0.9 1.967)\"\r\n                      />\r\n                      <path\r\n                        id=\"Path_1567\"\r\n                        data-name=\"Path 1567\"\r\n                        d=\"M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z\"\r\n                        transform=\"translate(2.125 1.991)\"\r\n                      />\r\n                    </g>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        </div>\r\n\r\n\r\n      </div>\r\n      <div class=\"mb-2 mb-sm-3\" *ngIf=\"isEditable\">\r\n        <button\r\n          class=\"btn btn-link  p-0 add-asset\"\r\n          [disabled]=\"!isEditable\"\r\n          (click)=\"handlePickAssets()\"\r\n        >\r\n          Add Asset\r\n        </button>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-sm-6\">\r\n          <div class=\"row  align-items-center d-flex  mb-2 mb-sm-3\">\r\n            <label class=\"col-4 pe-0\">Schedule start</label>\r\n            <div class=\"col-8\">\r\n              <div class=\"form-group\">\r\n                <div class=\"taro-material-datepicker\">\r\n                  <input\r\n                    matInput\r\n                    [matDatepicker]=\"datePickerStartDate\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"startDate\"\r\n                    (dateChange)=\"onDateChange($event)\"\r\n                  />\r\n                  <mat-datepicker-toggle matSuffix [for]=\"datePickerStartDate\">\r\n                  </mat-datepicker-toggle>\r\n                  <mat-datepicker\r\n                    #datePickerStartDate\r\n                    [disabled]=\"!isEditable\"\r\n                  ></mat-datepicker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row  align-items-center d-flex  mb-2 mb-sm-3\">\r\n            <label class=\"col-4 \">Assigned To</label>\r\n            <div class=\"col-8\">\r\n              <input\r\n                type=\"hidden\"\r\n                formControlName=\"assignedTo\"\r\n                [readOnly]=\"!isEditable\"\r\n                class=\"form-control\"\r\n                maxlength=\"50\"\r\n              />\r\n              <app-list-users\r\n                [isEditable]=\"isEditable\"\r\n                [userName]=\"extendedPreventiveMaintenance.assignedTo\"\r\n                (selectedUserId)=\"selectedUserId($event)\"\r\n              ></app-list-users>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6\">\r\n          <div class=\"row  align-items-center d-flex  mb-2 mb-sm-3\">\r\n            <label class=\"col-4 attachment-icon\"\r\n              >Schedule end\r\n              <span\r\n                tooltip-danger=\"Auto creation of work order will stop on this date. Leave blank if you are unsure or if this maintenance\r\n                  is required for the life of the asset\"\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 19.199 19.2\"\r\n                  width=\"14\"\r\n                  height=\"14\"\r\n                >\r\n                  <path\r\n                    d=\"M0 9.6a9.6 9.6 0 0 0 18.5 3.6 8.571 8.571 0 0 0 .7-3.6A9.6 9.6 0 1 0 0 9.6z\"\r\n                    fill=\"#fff\"\r\n                    stroke=\"#ff422e\"\r\n                  />\r\n                  <g>\r\n                    <path\r\n                      d=\"M9.6 4a1.184 1.184 0 0 1 1.2 1.3 1.2 1.2 0 1 1-2.4 0A1.24 1.24 0 0 1 9.6 4zm-1 3.3h2.1v7.9H8.6z\"\r\n                      fill=\"#ff422e\"\r\n                    />\r\n                  </g>\r\n                </svg>\r\n              </span>\r\n            </label>\r\n            <div class=\"col-8\">\r\n              <div class=\"form-group\">\r\n                <div class=\"taro-material-datepicker\">\r\n                  <input\r\n                    matInput\r\n                    [matDatepicker]=\"datePickerEndDate\"\r\n                    [min]=\"minEndDate\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"endDate\"\r\n                  />\r\n                  <mat-datepicker-toggle matSuffix [for]=\"datePickerEndDate\">\r\n                  </mat-datepicker-toggle>\r\n                  <mat-datepicker\r\n                    #datePickerEndDate\r\n                    [disabled]=\"!isEditable\"\r\n                  ></mat-datepicker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row align-items-center d-flex mb-2 mb-sm-3\">\r\n            <label class=\"col-4\">Status</label>\r\n            <div class=\"col-8\">\r\n              <select\r\n                formControlName=\"status\"\r\n                class=\"custom-select form-control\"\r\n              >\r\n                <option\r\n                  *ngFor=\"\r\n                    let status of preventiveMaintenanceStatusValues;\r\n                    let i = index\r\n                  \"\r\n                  [value]=\"preventiveMaintenanceStatusValues[i]\"\r\n                  [selected]=\"\r\n                    preventiveMaintenanceStatusValues[i] ===\r\n                    extendedPreventiveMaintenance.status\r\n                  \"\r\n                  class=\"form-control\"\r\n                >\r\n                  {{ preventiveMaintenanceStatus[status] }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        class=\"row align-items-center \"\r\n        *ngIf=\"submitted && form.controls.frequency.errors\"\r\n      >\r\n        <div class=\"col-4 col-md-2\"></div>\r\n        <div class=\"col-8 col-md-4 col-xl-3\">\r\n          <div class=\"form-group\">\r\n            <div class=\"asset-alert-msgs\">\r\n              <div class=\"alert alert-danger arrow-alert\">\r\n                You must specify frequency\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row mb-sm-4 mb-2\">\r\n        <div class=\"col-sm-2 col-4 mt-3\">\r\n          <label>Frequency</label>\r\n        </div>\r\n        <div class=\"col-sm-10 col-8\">\r\n          <div class=\"input-group input-with-frequency-wrapper\">\r\n            <input\r\n              type=\"number\"\r\n              formControlName=\"frequency\"\r\n              class=\"form-control\"\r\n              [readOnly]=\"!isEditable\"\r\n              inputmode=\"numeric\"\r\n              pattern=\"[0-9]*\"\r\n              onKeyPress=\"return (this.value.length === 4 || event.key === 'e' || isNaN(event.key)) ? false : true;\"\r\n            />\r\n            <div class=\"input-group-append\">\r\n              <span class=\"input-group-text\"> Days</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"row mb-sm-4 mb-2\">\r\n        <div class=\"col-sm-2 col-4 mt-3\">\r\n          <label>Instructions</label>\r\n        </div>\r\n        <div class=\"col-sm-10 col-8\">\r\n          <textarea\r\n            class=\"form-control\"\r\n            formControlName=\"instruction\"\r\n            [readOnly]=\"!isEditable\"\r\n            rows=\"8\"\r\n            maxlength=\"4000\"\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n      <div\r\n        [style.height.px]=\"\r\n          !isUpdatingPreventiveMaintenance && showSaveButton ? 100 : null\r\n        \"\r\n      ></div>\r\n    </div>\r\n  </form>\r\n  <app-modal\r\n    *ngIf=\"addAssetsModalVisible\"\r\n    (modalShouldClose)=\"handleDetailsModalClose()\"\r\n    (contextmenu)=\"disableRightClick($event)\"\r\n  >\r\n    <app-pick-assets\r\n      (addedAssets)=\"handleAddedPreventiveMaintenanceAssets($event)\"\r\n      [existingAssets]=\"this.extendedPreventiveMaintenance.maintenanceAssets\"\r\n    >\r\n    </app-pick-assets>\r\n  </app-modal>\r\n  <footer>\r\n    <div\r\n      *ngIf=\"form\"\r\n      class=\"form-actions\"\r\n      [class.visible]=\"!isUpdatingPreventiveMaintenance && showSaveButton\"\r\n    >\r\n      <button\r\n        class=\"btn btn-primary btn-block col-12\"\r\n        (click)=\"updatePreventiveMaintenance()\"\r\n      >\r\n        <span>Save all changes</span>\r\n      </button>\r\n    </div>\r\n  </footer>\r\n</article>\r\n","import { Injectable } from '@angular/core';\r\nimport { PreventiveMaintenance } from '../services';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PreventiveMaintenanceWizard {\r\n  public preventiveMaintenance: PreventiveMaintenance;\r\n\r\n  constructor() {}\r\n\r\n  public reset() {\r\n    this.preventiveMaintenance = undefined;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule, formatDate } from '@angular/common';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../shared-module/shared-module.module';\r\nimport { PreventiveMaintenanceRoutingModule } from './preventive-maintenance-routing.module';\r\nimport { PreventiveMaintenanceComponent } from './preventive-maintenance.component';\r\nimport { ViewPreventiveMaintenanceComponent } from './view-preventive-maintenance/view-preventive-maintenance.component';\r\nimport { CreatePreventiveMaintenanceComponent } from './create-preventive-maintenance/create-preventive-maintenance.component';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport {\r\n  MatNativeDateModule,\r\n  NativeDateAdapter,\r\n  DateAdapter,\r\n  MAT_DATE_FORMATS\r\n} from '@angular/material/core';\r\nimport { dateFormatWithMonthName } from 'src/utils/dateUtils';\r\n\r\nclass PickDateAdapter extends NativeDateAdapter {\r\n  format(date: Date, displayFormat: Object): string {\r\n    if (displayFormat === 'input') {\r\n      return formatDate(date, 'dd MMM yyyy', this.locale);\r\n    } else {\r\n      return formatDate(date, 'dd MMM yyyy', this.locale);\r\n    }\r\n  }\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PreventiveMaintenanceComponent,\r\n    ViewPreventiveMaintenanceComponent,\r\n    CreatePreventiveMaintenanceComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    SharedModule,\r\n    PreventiveMaintenanceRoutingModule,\r\n    MatDatepickerModule,\r\n    MatNativeDateModule\r\n  ],\r\n  providers: [\r\n    { provide: DateAdapter, useClass: PickDateAdapter },\r\n    { provide: MAT_DATE_FORMATS, useValue: dateFormatWithMonthName }\r\n  ]\r\n})\r\nexport class PreventiveMaintenanceModule {}\r\n"]}