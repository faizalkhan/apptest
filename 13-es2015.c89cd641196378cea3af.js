(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{CycE:function(t,e,n){"use strict";n.r(e),n.d(e,"WorkOrdersModule",function(){return gn});var i=n("ofXK"),c=n("3Pt+"),o=n("QYs8"),r=n("tyNb"),s=n("Y4NF"),a=n("KP8F"),l=n("NWDC"),d=n("o0su"),h=n("Kj3r"),p=n("pLZG"),g=n("gXUA"),u=n("fXoL");class m{constructor(){}reset(){this.workOrder=void 0}}m.\u0275fac=function(t){return new(t||m)},m.\u0275prov=u.ac({token:m,factory:m.\u0275fac,providedIn:"root"});var f=n("OeDX");function b(t,e){if(1&t){const t=u.lc();u.kc(0,"li",23),u.rc("click",function(){u.Ic(t);const n=e.$implicit;return u.vc().handleSelectedWorkorderClick(n.number,n)}),u.kc(1,"div"),u.kc(2,"span"),u.Pc(3),u.jc(),u.jc(),u.kc(4,"div"),u.kc(5,"span",24),u.Pc(6),u.jc(),u.kc(7,"span",25),u.Pc(8),u.jc(),u.jc(),u.kc(9,"div"),u.kc(10,"span"),u.Pc(11),u.jc(),u.jc(),u.kc(12,"div"),u.kc(13,"span"),u.Pc(14),u.jc(),u.jc(),u.kc(15,"div"),u.kc(16,"span"),u.Pc(17),u.jc(),u.jc(),u.kc(18,"div",26),u.kc(19,"div"),u.uc(),u.kc(20,"svg",27),u.fc(21,"path",28),u.jc(),u.jc(),u.jc(),u.jc()}if(2&t){const t=e.$implicit,n=u.vc();u.Vb("status-",t.status?n.WorkorderStatus[t.status]:"Open",""),u.Tb(3),u.Qc(t.number),u.Tb(3),u.Qc(n.standardFormattedDate(t.dueDate,!0)),u.Tb(2),u.Qc(n.standardFormattedDateNoYear(t.dueDate,!0)),u.Tb(3),u.Qc(t.title),u.Tb(3),u.Qc(n.WorkorderStatus[t.status]),u.Tb(3),u.Qc(n.getUserName(t.assignedToUser))}}function k(t,e){1&t&&(u.kc(0,"div"),u.Pc(1," No workorders found\n"),u.jc())}function O(t,e){if(1&t){const t=u.lc();u.kc(0,"div",29),u.kc(1,"button",30),u.rc("click",function(){u.Ic(t);return u.vc().loadNextWorkorders()}),u.Pc(2,"Load more"),u.jc(),u.jc()}}function C(t,e){1&t&&(u.kc(0,"div"),u.fc(1,"div",31),u.jc())}class _{constructor(t,e,n,i,c,o,r){this.formBuilder=t,this.workorderService=e,this.router=n,this.authenticationService=i,this.searchFilterService=c,this.workOrderWizard=o,this.toastService=r,this.offset=0,this.take=10,this.shouldGetNextWorkorders=!0,this.workorders=[],this.standardFormattedDate=s.b,this.standardFormattedDateNoYear=s.c,this.WorkorderStatus=l.b}ngOnInit(){this.setPermissionBooleans(),this.searchForm=this.formBuilder.group({text:this.searchFilterService.searchWOTextValue}),this.initiateFreshSearchSettings(),this.formChangeEvent(),this.loadNextWorkorders()}formChangeEvent(){this.searchForm.get("text").valueChanges.pipe(Object(h.a)(700),Object(p.a)(t=>t.length>=3||0===t.length)).subscribe(()=>{this.submitSearch()})}initiateFreshSearchSettings(){this.workorders=[],this.workOrderWizard.reset(),this.offset=0,this.shouldGetNextWorkorders=!0}loadNextWorkorders(){this.isLoadingWorkorders=!0,this.workorderService.listWorkorders({offset:this.offset,take:this.take,text:this.searchForm.value.text}).subscribe(t=>{this.searchFilterService.searchWOTextValueCache=this.searchForm.value.text,this.workorders.push(...t),this.offset+=this.take,t.length<this.take&&(this.shouldGetNextWorkorders=!1),this.isLoadingWorkorders=!1})}submitSearch(){this.initiateFreshSearchSettings(),this.loadNextWorkorders()}handleSelectedWorkorderClick(t,e){this.workOrderWizard.workOrder=e,this.workOrderWizard.workOrder&&this.router.navigate(["work-orders","WO"+t])}createWorkOrder(){this.router.navigate(["work-orders","create-work-order"])}setPermissionBooleans(){this.authenticationService.currentUserHasPermission({[d.l.WorkOrders]:[d.y.CanCreateWorkOrder]}).subscribe(t=>this.canCreateWorkOrder=t)}ngOnDestroy(){this.searchFilterService.initiateWOSearchFilter()}getUserName(t){return t&&t.includes("-")?t.split("-")[1]:t}getWorkOrderCSV(){this.workorderService.getWorkorderCSV().subscribe(t=>{const e=new Blob([t],{type:"text/csv"}),n=new Date(Date.now()).toLocaleString("en-IN",{year:"numeric",month:"numeric",day:"numeric"}),i=window.document.createElement("a");i.href=window.URL.createObjectURL(e),i.download=`workorder-${n}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i)},t=>{this.toastService.showErrorToast("Unable to download the work orders CSV file.")})}}_.\u0275fac=function(t){return new(t||_)(u.ec(c.d),u.ec(a.a),u.ec(r.c),u.ec(d.d),u.ec(g.a),u.ec(m),u.ec(d.v))},_.\u0275cmp=u.Yb({type:_,selectors:[["app-work-orders"]],decls:48,vars:7,consts:[[3,"customCurrentPageTitle"],[1,"search-filter-form",3,"formGroup"],[1,"input-with-search-wrapper"],["type","text","formControlName","text","placeholder","Search by work order id, title or asset name",1,"form-control","form-control--search-prefix"],[1,"workorder-source-filter"],[1,"btn",3,"disabled","click"],["type","button",1,"btn-download-csv",3,"click"],["viewBox","0 0 15.375 19.188"],["id","Group_1558","data-name","Group 1558","transform","translate(-299.063 -288.813)"],["id","Path_783","data-name","Path 783",1,"cls-1"],["d","M940.063 237.334v19.188h15.375v-14.313l-4.875-4.875h-10.5z","transform","translate(-641 51.479)",1,"cls-3"],["d","M954.438 255.521v-12.898l-4.29-4.289h-9.085v17.187h13.375m1 1h-15.375v-19.187h10.5l4.875 4.875v14.312z","transform","translate(-641 51.479)",1,"cls-4"],["id","Path_784","d","M954.918 242.288h-5.043v-5.079","data-name","Path 784","transform","translate(-640.959 51.604)",1,"cls-2"],["id","Path_785","data-name","Path 785",1,"cls-1"],["d","M943.5 245.334h8.563v7.25H943.5z","transform","translate(-641 51.479)",1,"cls-3"],["d","M951.063 251.584v-5.25H944.5v5.25h6.563m1 1H943.5v-7.25h8.563v7.25z","transform","translate(-641 51.479)",1,"cls-4"],["id","Path_786","d","M946.5 245.084v7.25","data-name","Path 786","transform","translate(-641.064 51.729)",1,"cls-2"],["id","Path_787","d","M952.063 247.834H944","data-name","Path 787","transform","translate(-641 51.479)",1,"cls-2"],["id","Path_788","d","M951.938 250.4h-8.562","data-name","Path 788","transform","translate(-640.875 51.479)",1,"cls-2"],[1,"workorder-list"],[3,"class","click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","text-center",4,"ngIf"],[3,"click"],[1,"desktop-view"],[1,"mobile-view"],[1,"row-toggle"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 8.797 5.194"],["d","M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z"],[1,"text-center"],[1,"btn","btn-link",3,"click"],[1,"spinner"]],template:function(t,e){1&t&&(u.fc(0,"app-section-header",0),u.kc(1,"h1"),u.Pc(2,"Work Orders"),u.jc(),u.kc(3,"form",1),u.kc(4,"div",2),u.fc(5,"input",3),u.jc(),u.kc(6,"div",4),u.kc(7,"button",5),u.rc("click",function(){return e.createWorkOrder()}),u.kc(8,"span"),u.Pc(9,"Create Work Order"),u.jc(),u.jc(),u.jc(),u.kc(10,"div"),u.kc(11,"button",6),u.rc("click",function(){return e.getWorkOrderCSV()}),u.uc(),u.kc(12,"svg",7),u.fc(13,"defs"),u.kc(14,"g",8),u.kc(15,"g",9),u.fc(16,"path",10),u.fc(17,"path",11),u.jc(),u.fc(18,"path",12),u.kc(19,"g",13),u.fc(20,"path",14),u.fc(21,"path",15),u.jc(),u.fc(22,"path",16),u.fc(23,"path",17),u.fc(24,"path",18),u.jc(),u.jc(),u.tc(),u.kc(25,"h2"),u.Pc(26,"CSV"),u.jc(),u.jc(),u.jc(),u.jc(),u.kc(27,"ul",19),u.kc(28,"li"),u.kc(29,"div"),u.kc(30,"span"),u.Pc(31,"id"),u.jc(),u.jc(),u.kc(32,"div"),u.kc(33,"span"),u.Pc(34,"due"),u.jc(),u.jc(),u.kc(35,"div"),u.kc(36,"span"),u.Pc(37,"title"),u.jc(),u.jc(),u.kc(38,"div"),u.kc(39,"span"),u.Pc(40,"status"),u.jc(),u.jc(),u.kc(41,"div"),u.kc(42,"span"),u.Pc(43,"assigned to"),u.jc(),u.jc(),u.jc(),u.Oc(44,b,22,9,"li",20),u.jc(),u.Oc(45,k,2,0,"div",21),u.Oc(46,O,3,0,"div",22),u.Oc(47,C,2,0,"div",21)),2&t&&(u.Ac("customCurrentPageTitle","Work Orders"),u.Tb(3),u.Ac("formGroup",e.searchForm),u.Tb(4),u.Ac("disabled",!e.canCreateWorkOrder),u.Tb(37),u.Ac("ngForOf",e.workorders),u.Tb(1),u.Ac("ngIf",0===e.workorders.length&&!e.isLoadingWorkorders),u.Tb(1),u.Ac("ngIf",e.shouldGetNextWorkorders&&!e.isLoadingWorkorders),u.Tb(1),u.Ac("ngIf",e.isLoadingWorkorders))},directives:[f.a,c.w,c.n,c.g,c.c,c.m,c.f,i.j,i.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}h1[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-top:-.8em;margin-bottom:1em}.search-filter-form[_ngcontent-%COMP%]{display:flex;padding-bottom:1em}.search-filter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#424244;font-weight:200}.search-filter-form[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:default}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]{width:100%}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:75%}.search-filter-form[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{width:360px;text-align:right}@media screen and (min-width:768px) and (max-width:800px){.search-filter-form[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{width:425px;text-align:right}}@media screen and (min-width:320px) and (max-width:360px){.search-filter-form[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{float:left;text-align:left;width:auto}}@media screen and (min-width:361px) and (max-width:420px){.search-filter-form[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{float:left;text-align:left;width:86%}}@media screen and (max-width:610px){.search-filter-form[_ngcontent-%COMP%]{display:block}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%], .search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]{padding-top:1em;width:100%}.search-filter-form[_ngcontent-%COMP%]   .input-with-search-wrapper[_ngcontent-%COMP%]   .workorder-source-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.workorder-list[_ngcontent-%COMP%]{margin-top:.6em;padding:0;list-style:none}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:stretch;background-color:#fff;transition:all .2s ease-in-out;margin-bottom:.15em;position:relative;cursor:pointer;padding:1em .2em}.workorder-list[_ngcontent-%COMP%]   li.status-Complete[_ngcontent-%COMP%]{background-color:#f2f2f2}.workorder-list[_ngcontent-%COMP%]   li.status-Complete[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.05)}.workorder-list[_ngcontent-%COMP%]   li.status-Complete[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.workorder-list[_ngcontent-%COMP%]   li.status-In-progress[_ngcontent-%COMP%]{background-color:#d1decd}.workorder-list[_ngcontent-%COMP%]   li.status-In-progress[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#a8b7a2}.workorder-list[_ngcontent-%COMP%]   li.status-Open[_ngcontent-%COMP%]{background-color:#efe6d9}.workorder-list[_ngcontent-%COMP%]   li.status-Open[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#c9bea0}.workorder-list[_ngcontent-%COMP%]   li.status-Closed[_ngcontent-%COMP%]{background-color:#f8f8f8}.workorder-list[_ngcontent-%COMP%]   li.status-Closed[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:rgba(44,44,44,.05)}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;border-right:1px solid rgba(0,0,0,.22);display:flex;align-items:center;padding:.7em .8em}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:4.5em}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:9em}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   .desktop-view[_ngcontent-%COMP%]{display:block}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   .mobile-view[_ngcontent-%COMP%]{display:none}@media screen and (max-width:415px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:5em}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   .desktop-view[_ngcontent-%COMP%]{display:none}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   .mobile-view[_ngcontent-%COMP%]{display:block}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){width:50%;word-break:break-all}@media screen and (min-width:320px) and (max-width:767px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){width:40%}}@media screen and (min-width:768px) and (max-width:800px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){width:30%}}@media screen and (max-width:415px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){display:none}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){width:8em;word-break:break-all}@media screen and (max-width:415px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){width:7em}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){width:25%;word-break:break-all;border-right:none}@media screen and (min-width:320px) and (max-width:360px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){width:26%;padding:.7em .3em}}@media screen and (min-width:361px) and (max-width:575px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){width:35%}}@media screen and (min-width:768px) and (max-width:800px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){width:23%}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(n+6){border-right:none}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;padding:1.6em 1em;top:0;right:0;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);height:100%;display:flex;align-items:center}@media screen and (max-width:610px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{padding:1.6em .7em}}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(-90deg)}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-transform:uppercase;font-weight:900;cursor:auto;padding:0}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{border-right:none}@media screen and (max-width:610px){.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{display:block}.workorder-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:nth-child(4){width:7em}}@media screen and (max-width:415px){.workorder-list[_ngcontent-%COMP%]{font-size:.85em}}@media screen and (max-width:768px){.form-control[_ngcontent-%COMP%]{margin-bottom:1em}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:1rem}button.btn-download-csv[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:.25rem}}@media screen and (min-width:361px) and (max-width:420px){.btn[_ngcontent-%COMP%]{width:100%}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:.5rem}}button.btn-download-csv[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-end;display:flex;color:#000!important;border:none;margin-left:20px;margin-top:6px;background:none!important}@media screen and (min-width:320px) and (max-width:360px){button.btn-download-csv[_ngcontent-%COMP%]{margin-top:-9px;padding-left:31px}}@media screen and (min-width:361px) and (max-width:420px){button.btn-download-csv[_ngcontent-%COMP%]{padding-left:18px}}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.4rem;height:auto}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-1[_ngcontent-%COMP%], button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-2[_ngcontent-%COMP%]{fill:none}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-2[_ngcontent-%COMP%]{stroke:#424244}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-3[_ngcontent-%COMP%], button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-4[_ngcontent-%COMP%]{stroke:none}button.btn-download-csv[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .cls-4[_ngcontent-%COMP%]{fill:#424244}button.btn-download-csv[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.875em;font-weight:600;margin-bottom:.5em}button.btn-download-csv[_ngcontent-%COMP%]:hover{text-decoration:underline}button.btn-download-csv[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.025)}@media screen and (min-width:800px){  .input-with-search-wrapper:before{top:47%!important}}"]});var v=n("pA2v"),P=n("2Vo4"),M=n("lJxs"),w=n("svQ6"),x=n("ZaN7"),y=n("iadO"),S=n("kmnG"),j=n("Xi4i"),I=n("87/D");function A(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.jc()),2&t){const t=u.vc().$implicit;u.Tb(1),u.Qc(t.name)}}function T(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.jc()),2&t){const t=u.vc().index;u.Tb(1),u.Rc("file-",t,"")}}function F(t,e){if(1&t){const t=u.lc();u.kc(0,"div",2),u.fc(1,"div",3),u.kc(2,"div",4),u.kc(3,"a",5),u.rc("click",function(){u.Ic(t);const n=e.$implicit;return u.vc().handleOpenFile(n)}),u.Oc(4,A,2,1,"span",6),u.Oc(5,T,2,1,"span",6),u.jc(),u.jc(),u.kc(6,"div",7),u.kc(7,"button",8),u.rc("click",function(){u.Ic(t);const n=e.index;return u.vc().handleDeleteItem(n)}),u.uc(),u.kc(8,"svg",9),u.fc(9,"defs"),u.fc(10,"path",10),u.fc(11,"path",11),u.fc(12,"path",12),u.fc(13,"path",13),u.fc(14,"path",14),u.jc(),u.jc(),u.jc(),u.jc()}if(2&t){const t=e.$implicit,n=e.index,i=u.vc();u.Ac("ngClass",i.fileCollection.length>1?"rows-"+i.fileCollection.length+"-file-"+n:""),u.Tb(4),u.Ac("ngIf",t.name),u.Tb(1),u.Ac("ngIf",!t.name),u.Tb(2),u.Ac("disabled",!i.isEditable)}}class W{constructor(){this.deletedFileIndex=new u.t}ngOnInit(){}handleOpenFile(t){let e;e=t.file?URL.createObjectURL(t.file):URL.createObjectURL(t),window.open(e,"_blank")}ngOnChanges(t){t.attachedFileCollection&&this.attachedFileCollection&&this.attachedFileCollection.subscribe(t=>{setTimeout(()=>{this.fileCollection=t})})}handleDeleteItem(t){this.deletedFileIndex.emit(t)}}function D(t,e){if(1&t){const t=u.lc();u.kc(0,"table",2),u.kc(1,"tbody"),u.kc(2,"tr"),u.kc(3,"td",3),u.kc(4,"span"),u.Pc(5),u.jc(),u.jc(),u.kc(6,"td",4),u.kc(7,"span"),u.Pc(8),u.jc(),u.jc(),u.kc(9,"td",5),u.kc(10,"div",6),u.kc(11,"div",7),u.kc(12,"label",8),u.kc(13,"input",9),u.rc("change",function(e){u.Ic(t);const n=u.vc();return n.handleSelectChecklistTask(e,n.taskItem)}),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc()}if(2&t){const t=u.vc();u.Tb(5),u.Qc(t.taskItem.sequenceNumber),u.Tb(3),u.Qc(t.taskItem.description),u.Tb(5),u.Ac("disabled",t.isTaskEditable)("checked",t.taskItem.isCompleted)}}W.\u0275fac=function(t){return new(t||W)},W.\u0275cmp=u.Yb({type:W,selectors:[["app-view-attached-files"]],inputs:{attachedFileCollection:"attachedFileCollection",isEditable:"isEditable"},outputs:{deletedFileIndex:"deletedFileIndex"},features:[u.Rb],decls:2,vars:1,consts:[[1,"row","d-flex","file-attach"],["class","file-details",3,"ngClass",4,"ngFor","ngForOf"],[1,"file-details",3,"ngClass"],[1,"col-4","blank-color"],[1,"file-link","col-6"],["target","_blank",3,"click"],[4,"ngIf"],[1,"col-2"],[1,"delete-btn",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 14 18"],["d","M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z","transform","translate(.2 1.267)",1,"cls-1"],["d","M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z",1,"cls-1"],["d","M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z","transform","translate(1.567 2)",1,"cls-1"],["d","M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z","transform","translate(.9 1.967)",1,"cls-1"],["d","M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z","transform","translate(2.125 1.991)",1,"cls-1"]],template:function(t,e){1&t&&(u.kc(0,"div",0),u.Oc(1,F,15,4,"div",1),u.jc()),2&t&&(u.Tb(1),u.Ac("ngForOf",e.fileCollection))},directives:[i.j,i.i,i.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}.file-details[_ngcontent-%COMP%]{display:flex;padding-left:1.75em}.file-details[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3), .file-details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){background-color:#f2f2f2;padding:.6em 0 0 .8em;border:1px solid #ced4da;border-radius:.25em}.file-details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-right-width:0;border-right-color:#9f5858;border-top-right-radius:0;border-bottom-right-radius:0}.file-details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-left-width:0;border-left-color:#f2f2f2;border-top-left-radius:0;border-bottom-left-radius:0}.file-details[_ngcontent-%COMP%]:first-child{border-top-width:0;padding-left:1.75em}.rows-2-file-0[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-bottom-width:0;border-bottom-left-radius:0}.rows-2-file-0[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-bottom-width:0;border-bottom-right-radius:0}.rows-2-file-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;border-top-left-radius:0}.rows-2-file-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-top-width:0;border-top-right-radius:0}.rows-2-file-1[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;padding-left:1.75em}.rows-3-file-0[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-bottom-width:0;border-bottom-left-radius:0}.rows-3-file-0[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-bottom-width:0;border-bottom-right-radius:0}.rows-3-file-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;border-top-left-radius:0;border-bottom-width:0;border-bottom-left-radius:0}.rows-3-file-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-top-width:0;border-top-right-radius:0;border-bottom-width:0;border-bottom-right-radius:0}.rows-3-file-1[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;padding-left:1.75em}.rows-3-file-2[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-top-width:0;border-top-left-radius:0}.rows-3-file-2[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){border-top-width:0;border-top-right-radius:0}.rows-3-file-2[_ngcontent-%COMP%]:nth-child(3){border-top-width:0;padding-left:1.75em}.file-attach[_ngcontent-%COMP%]{display:flex}.file-attach[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}.file-text[_ngcontent-%COMP%]{margin-left:1em}.delete-btn[_ngcontent-%COMP%]{border:none;background:transparent;padding-bottom:.25em;float:right;margin-right:11px}.delete-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;transform:scale(1)}.delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}.delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.125)}.delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:default}.file-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-size:.85em;display:inline-block;white-space:nowrap;width:95%;text-overflow:ellipsis;overflow:hidden!important;padding-top:.4em 0 .2em 0}"]});const L=function(t){return{"addtask-wrapper":t}};class E{constructor(){this.taskSelected=new u.t}ngOnInit(){}handleSelectChecklistTask(t,e){e.isCompleted=!e.isCompleted,t.currentTarget.checked=e.isCompleted,this.taskSelected.emit()}}E.\u0275fac=function(t){return new(t||E)},E.\u0275cmp=u.Yb({type:E,selectors:[["app-checklist-task-item"]],inputs:{taskItem:"taskItem",firstItem:"firstItem",isTaskEditable:"isTaskEditable"},outputs:{taskSelected:"taskSelected"},decls:2,vars:4,consts:[[3,"ngClass"],["width","100%",4,"ngIf"],["width","100%"],[1,"task-id-cell"],[1,"task-description-cell"],[1,"task-iscompleted-cell"],[1,"form-group"],[1,"radio","custom"],["for","includeObsolete",1,"custom-control-label","label-align"],["type","checkbox",1,"custom-control-input",3,"disabled","checked","change"]],template:function(t,e){1&t&&(u.fc(0,"div",0),u.Oc(1,D,14,4,"table",1)),2&t&&(u.Ac("ngClass",u.Ec(2,L,e.firstItem)),u.Tb(1),u.Ac("ngIf",e.taskItem))},directives:[i.i,i.k],styles:['@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}[_nghost-%COMP%]{display:table-row;background-color:#f2f2f2;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;height:5em;border-bottom:2px solid #fff;position:relative;background:#f2f2f2;padding:.5em 0}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:center;width:5em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:88%;padding-left:1em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){font-weight:600;width:5em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   input[_ngcontent-%COMP%]{width:18px;margin-top:22px;height:18px}@media screen and (max-width:768px){[_nghost-%COMP%]{display:flex;align-items:center;border-bottom:none}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:auto;text-align:center;vertical-align:middle;height:5em;border-bottom:2px solid #fff;position:relative;background:#f2f2f2}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:center;width:3em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:80%;padding-left:.5em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){font-weight:600;width:3em;padding-right:.4em}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   input[_ngcontent-%COMP%]{width:15px;height:15px}}.task-id-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding:.5em}.task-description-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-right:1px solid #c3bbbb;border-left:1px solid #c3bbbb;display:block;padding:.5em}.addtask-wrapper[_ngcontent-%COMP%]{box-shadow:1px 4px 3px hsla(0,1%,86%,.75);margin-top:-6px;width:100%;display:block;clear:both;float:left;height:6px;position:absolute;z-index:9;top:0}.custom[_ngcontent-%COMP%]{margin-bottom:16px}.custom.checkbox[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:relative;cursor:pointer;padding-left:20px}.custom[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:relative;margin-left:-1;cursor:pointer}.custom[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{content:"";position:absolute;left:-.5;width:21px;height:19px;background:#fff;border:1px solid #938e8e;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%]:before{transition:transform .4s cubic-bezier(.45,1.8,.5,.75);transform:rotate(-45deg) scale(0);content:"";position:absolute;left:4px;top:3px;z-index:1;width:13px;height:8px;border-color:#5e5b5b;border-style:none none solid solid;border-width:3px}input[type=checkbox][_ngcontent-%COMP%]:checked:before{transform:rotate(-45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%]:after{border-radius:2px}']});var U=n("oeRM"),R=n("eQ4o");const V=["fileUploadInput"];function N(t,e){1&t&&(u.kc(0,"div"),u.fc(1,"div",2),u.jc())}function q(t,e){1&t&&u.fc(0,"app-loading-modal")}function z(t,e){1&t&&(u.kc(0,"div",62),u.fc(1,"div",63),u.kc(2,"div",64),u.Pc(3," You must specify title "),u.jc(),u.jc())}function B(t,e){1&t&&(u.kc(0,"div",65),u.fc(1,"div",63),u.kc(2,"div",66),u.Pc(3," You must specify description "),u.jc(),u.jc())}function Q(t,e){if(1&t&&(u.kc(0,"option",67),u.Pc(1),u.jc()),2&t){const t=e.$implicit,n=e.index,i=u.vc(2);u.Ac("value",i.workOrderStatusValues[n])("selected",i.workOrderStatusValues[n]===i.extendedWorkOrder.status),u.Tb(1),u.Rc(" ",i.WorkOrderStatus[t]," ")}}function G(t,e){1&t&&u.fc(0,"div",68)}function $(t,e){1&t&&u.fc(0,"div",68)}function K(t,e){1&t&&u.fc(0,"div",68)}function Z(t,e){if(1&t&&(u.kc(0,"option",69),u.Pc(1),u.jc()),2&t){const t=e.$implicit;u.Ac("value",t.id),u.Tb(1),u.Rc("",t.name," ")}}function H(t,e){if(1&t&&(u.kc(0,"option",67),u.Pc(1),u.jc()),2&t){const t=e.$implicit,n=u.vc(2);u.Ac("value",t)("selected",t===n.extendedWorkOrder.priority),u.Tb(1),u.Rc(" ",n.priorityString(t)," ")}}function Y(t,e){1&t&&(u.kc(0,"div",80),u.Pc(1," Allowed file types are doc, docx, xls, xlsx, csv, pdf, jpeg, png, bmp. Max file size allowed 2 MB. "),u.jc())}function X(t,e){if(1&t&&(u.kc(0,"div",80),u.Pc(1),u.jc()),2&t){const t=u.vc(3);u.Tb(1),u.Rc(" Too many files selected. Total number of files cannot exceed ",t.filesLimit,". ")}}function J(t,e){1&t&&(u.kc(0,"span"),u.Pc(1,"No file selected"),u.jc())}function tt(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.jc()),2&t){const t=u.vc(3);u.Tb(1),u.Rc("",t.fileCount," file added")}}function et(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.jc()),2&t){const t=u.vc(3);u.Tb(1),u.Rc("",t.fileCount," files added")}}function nt(t,e){if(1&t){const t=u.lc();u.uc(),u.tc(),u.kc(0,"form",70),u.kc(1,"div",26),u.kc(2,"div",71,72),u.Oc(4,Y,2,0,"div",73),u.Oc(5,X,2,1,"div",73),u.jc(),u.kc(6,"div",74),u.kc(7,"div",75),u.kc(8,"label"),u.Oc(9,J,2,0,"span",1),u.Oc(10,tt,2,1,"span",1),u.Oc(11,et,2,1,"span",1),u.jc(),u.jc(),u.kc(12,"div",76),u.kc(13,"button",77),u.rc("click",function(){u.Ic(t);return u.vc(2).launchFileInput()}),u.Pc(14,"Choose file"),u.jc(),u.jc(),u.kc(15,"input",78,79),u.rc("change",function(){u.Ic(t);return u.vc(2).handleFileInputChange()}),u.jc(),u.jc(),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Ac("formGroup",t.fileUploadForm),u.Tb(4),u.Ac("ngIf",t.fileUploadForm.controls.files.hasError("acceptableFileType")||t.fileUploadForm.controls.files.hasError("acceptableFileSize")),u.Tb(1),u.Ac("ngIf",t.fileUploadForm.controls.files.hasError("acceptableNumberOfFiles")&&t.fileCount>3),u.Tb(4),u.Ac("ngIf",0===t.fileCount),u.Tb(1),u.Ac("ngIf",1===t.fileCount),u.Tb(1),u.Ac("ngIf",t.fileCount>1),u.Tb(2),u.Ac("disabled",t.fileCount>2||!t.isEditable||t.fileUploadForm.controls.files.hasError("acceptableFileType")||t.fileUploadForm.controls.files.hasError("acceptableFileSize")),u.Tb(2),u.Ac("readonly",!t.isEditable)}}function it(t,e){if(1&t){const t=u.lc();u.uc(),u.tc(),u.kc(0,"div",81),u.kc(1,"app-view-attached-files",82),u.rc("deletedFileIndex",function(e){u.Ic(t);return u.vc(2).handleDeleteFileAttached(e)}),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Tb(1),u.Ac("attachedFileCollection",t.attachedFileCollection)("isEditable",t.isEditable)}}function ct(t,e){1&t&&(u.uc(),u.tc(),u.fc(0,"div",83))}function ot(t,e){1&t&&(u.uc(),u.tc(),u.fc(0,"div",83))}function rt(t,e){1&t&&(u.uc(),u.tc(),u.fc(0,"div",83))}function st(t,e){1&t&&(u.kc(0,"div",80),u.Pc(1," You must specify an asset "),u.jc())}function at(t,e){if(1&t&&(u.uc(),u.tc(),u.kc(0,"div",21),u.kc(1,"div",84),u.kc(2,"div",85),u.kc(3,"label",24),u.Pc(4,"Asset"),u.jc(),u.kc(5,"div",25),u.kc(6,"div",26),u.kc(7,"div",86),u.Oc(8,st,2,0,"div",73),u.jc(),u.jc(),u.fc(9,"input",87),u.jc(),u.jc(),u.jc(),u.kc(10,"div",84),u.kc(11,"div",85),u.kc(12,"label",24),u.Pc(13,"Location"),u.jc(),u.kc(14,"div",88),u.fc(15,"input",89),u.uc(),u.kc(16,"svg",90),u.kc(17,"g",91),u.fc(18,"path",92),u.fc(19,"path",93),u.fc(20,"path",94),u.fc(21,"path",95),u.fc(22,"path",96),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc()),2&t){const t=u.vc(2);u.Tb(8),u.Ac("ngIf",!t.isAssetAvailable)}}function lt(t,e){if(1&t){const t=u.lc();u.kc(0,"div",21),u.kc(1,"div",84),u.kc(2,"div",85),u.kc(3,"label",24),u.Pc(4,"Asset"),u.jc(),u.kc(5,"div",25),u.fc(6,"input",87),u.jc(),u.jc(),u.jc(),u.kc(7,"div",84),u.kc(8,"div",85),u.kc(9,"label",24),u.Pc(10,"Location"),u.jc(),u.kc(11,"div",88),u.fc(12,"input",97),u.kc(13,"button",98),u.rc("click",function(){u.Ic(t);const e=u.vc().index;return u.vc(2).handleDeleteItem(e)}),u.uc(),u.kc(14,"svg",99),u.kc(15,"g",91),u.fc(16,"path",92),u.fc(17,"path",93),u.fc(18,"path",94),u.fc(19,"path",95),u.fc(20,"path",96),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc()}if(2&t){const t=u.vc().$implicit,e=u.vc(2);u.Tb(6),u.Ac("value",t.assetId+" - "+t.name),u.Tb(6),u.Ac("value",t.location),u.Tb(1),u.Ac("disabled",!e.isEditable)}}function dt(t,e){if(1&t&&(u.uc(),u.tc(),u.kc(0,"div"),u.Oc(1,lt,21,3,"div",50),u.jc()),2&t){const t=e.$implicit;u.Tb(1),u.Ac("ngIf",!t.isDelete)}}const ht=function(t){return{"last-item":t}};function pt(t,e){if(1&t){const t=u.lc();u.kc(0,"div"),u.kc(1,"app-checklist-task-item",100),u.rc("taskSelected",function(e){u.Ic(t);return u.vc(3).handleSelectedChecklistTask(e)}),u.jc(),u.jc()}if(2&t){const t=e.$implicit,n=e.first,i=e.last,c=u.vc(3);u.Tb(1),u.Ac("taskItem",t)("firstItem",n)("isTaskEditable",!c.isEditable)("ngClass",u.Ec(4,ht,i))}}function gt(t,e){if(1&t&&(u.kc(0,"div"),u.kc(1,"app-accordion",57),u.Oc(2,pt,2,6,"div",51),u.jc(),u.jc()),2&t){const t=e.$implicit;u.Tb(1),u.Ac("titleDetails","Checklist  "+t.numberWithPrefix+" - "+t.name),u.Tb(1),u.Ac("ngForOf",t.task)}}function ut(t,e){if(1&t){const t=u.lc();u.kc(0,"span"),u.Pc(1),u.kc(2,"a",101),u.rc("click",function(){u.Ic(t);const e=u.vc().$implicit;return u.vc(2).handleViewMoreClick(e)}),u.Pc(3,"View More"),u.jc(),u.jc()}if(2&t){const t=u.vc().$implicit,e=u.vc(2);u.Tb(1),u.Rc("",t.serviceDetail.substring(0,e.textMaxLength-10),"... ")}}function mt(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.jc()),2&t){const t=u.vc().$implicit;u.Tb(1),u.Qc(t.serviceDetail)}}function ft(t,e){if(1&t&&(u.kc(0,"tr"),u.kc(1,"td"),u.Pc(2),u.jc(),u.kc(3,"td"),u.Pc(4),u.jc(),u.kc(5,"td"),u.Oc(6,ut,4,1,"span",1),u.Oc(7,mt,2,1,"span",1),u.jc(),u.jc()),2&t){const t=e.$implicit,n=u.vc(2);u.Tb(2),u.Qc(n.getUserName(t.userId)),u.Tb(2),u.Qc(n.standardFormattedDate(t.createdTimestampUtc,!0)),u.Tb(2),u.Ac("ngIf",t.serviceDetail.length>n.textMaxLength),u.Tb(1),u.Ac("ngIf",t.serviceDetail.length<=n.textMaxLength)}}function bt(t,e){if(1&t){const t=u.lc();u.kc(0,"span",110),u.rc("click",function(){u.Ic(t);const e=u.vc(3);return e.enableServiceTextarea=!e.enableServiceTextarea,e.isShowEditIcon=!1}),u.uc(),u.kc(1,"svg",111),u.kc(2,"g",112),u.fc(3,"path",113),u.fc(4,"path",114),u.jc(),u.jc(),u.jc()}}function kt(t,e){if(1&t){const t=u.lc();u.ic(0),u.kc(1,"button",115),u.rc("click",function(){u.Ic(t);return u.vc(3).handleServiceSaveButton()}),u.kc(2,"span"),u.Pc(3,"Save"),u.jc(),u.jc(),u.hc()}if(2&t){const t=u.vc(3);u.Tb(1),u.Ac("disabled",t.isSubmitDisabled)}}function Ot(t,e){if(1&t){const t=u.lc();u.kc(0,"app-modal",102),u.rc("modalShouldClose",function(){u.Ic(t);return u.vc(2).handleDetailsModalClose()})("contextmenu",function(e){u.Ic(t);return u.vc(2).disableRightClick(e)}),u.kc(1,"header",21),u.kc(2,"div",25),u.kc(3,"strong"),u.Pc(4),u.jc(),u.jc(),u.kc(5,"div",103),u.Pc(6),u.jc(),u.jc(),u.kc(7,"div",104),u.kc(8,"div",21),u.kc(9,"div",105),u.Pc(10),u.jc(),u.kc(11,"div",106),u.Oc(12,bt,5,0,"span",107),u.jc(),u.jc(),u.kc(13,"textarea",108),u.rc("ngModelChange",function(e){u.Ic(t);return u.vc(2).selectedWorkOrderServiceDetails.serviceDetail=e})("input",function(){u.Ic(t);return u.vc(2).handleTextAreaInput()}),u.Pc(14,"        "),u.jc(),u.jc(),u.kc(15,"div",109),u.Oc(16,kt,4,1,"ng-container",1),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Tb(4),u.Rc("Service Details"," (#"+t.extendedWorkOrder.number+")",""),u.Tb(2),u.Rc(" ",t.getUserName(t.selectedWorkOrderServiceDetails.userId)," "),u.Tb(4),u.Rc(" ",t.standardFormattedDate(t.selectedWorkOrderServiceDetails.createdTimestampUtc,!0)," "),u.Tb(2),u.Ac("ngIf",t.isShowEditIcon),u.Tb(1),u.Wb("modal-details-textarea-focus",t.enableServiceTextarea),u.Ac("ngModel",t.selectedWorkOrderServiceDetails.serviceDetail)("readOnly",!t.enableServiceTextarea),u.Tb(3),u.Ac("ngIf",t.enableServiceTextarea)}}function Ct(t,e){if(1&t){const t=u.lc();u.kc(0,"app-modal",102),u.rc("modalShouldClose",function(){u.Ic(t);return u.vc(2).handleDetailsModalClose()})("contextmenu",function(e){u.Ic(t);return u.vc(2).disableRightClick(e)}),u.kc(1,"app-pick-assets",116),u.rc("addedAssets",function(e){u.Ic(t);return u.vc(2).handleAddedWorkOrderAssets(e)}),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Tb(1),u.Ac("existingAssets",t.extendedWorkOrder.workOrderAssets)}}function _t(t,e){if(1&t){const t=u.lc();u.kc(0,"div",117),u.kc(1,"button",118),u.rc("click",function(){u.Ic(t);return u.vc(2).updateWorkOrder()}),u.kc(2,"span"),u.Pc(3,"Save all changes"),u.jc(),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Wb("visible",!t.isUpdatingWorkOrder&&t.showSaveButton)}}function vt(t,e){if(1&t){const t=u.lc();u.kc(0,"article"),u.kc(1,"header"),u.kc(2,"h1"),u.Pc(3),u.jc(),u.jc(),u.kc(4,"form",3),u.kc(5,"div",4),u.kc(6,"div",5),u.kc(7,"div",6),u.kc(8,"button",7),u.rc("click",function(){u.Ic(t);const e=u.vc();return e.handlesPickSpares(e.workOrderNumber)}),u.Pc(9,"Pick Spares"),u.jc(),u.jc(),u.fc(10,"div",8),u.jc(),u.Oc(11,z,4,0,"div",9),u.kc(12,"div",10),u.kc(13,"div",11),u.kc(14,"label"),u.Pc(15,"Title"),u.jc(),u.jc(),u.kc(16,"div",12),u.kc(17,"input",13),u.rc("paste",function(e){u.Ic(t);return u.vc().handleClipboard(e)}),u.jc(),u.jc(),u.fc(18,"div",14),u.kc(19,"div",15),u.kc(20,"div",6),u.kc(21,"button",16),u.rc("click",function(){u.Ic(t);const e=u.vc();return e.handlesPickSpares(e.workOrderNumber,e.workOrderStatus)}),u.Pc(22,"Pick Spares"),u.jc(),u.jc(),u.jc(),u.jc(),u.Oc(23,B,4,0,"div",17),u.kc(24,"div",18),u.kc(25,"div",11),u.kc(26,"label"),u.Pc(27,"Description"),u.jc(),u.jc(),u.kc(28,"div",19),u.fc(29,"textarea",20),u.jc(),u.jc(),u.kc(30,"div",21),u.kc(31,"div",22),u.kc(32,"div",23),u.kc(33,"label",24),u.Pc(34,"Reported On"),u.jc(),u.kc(35,"div",25),u.kc(36,"div",26),u.kc(37,"div",27),u.fc(38,"input",28),u.fc(39,"mat-datepicker-toggle",29),u.fc(40,"mat-datepicker",null,30),u.jc(),u.jc(),u.jc(),u.jc(),u.kc(42,"div",23),u.kc(43,"label",24),u.Pc(44,"Due On"),u.jc(),u.kc(45,"div",25),u.kc(46,"div",26),u.kc(47,"div",27),u.fc(48,"input",31),u.fc(49,"mat-datepicker-toggle",29),u.fc(50,"mat-datepicker",null,32),u.jc(),u.jc(),u.jc(),u.jc(),u.kc(52,"div",23),u.kc(53,"label",24),u.Pc(54,"Assigned To"),u.jc(),u.kc(55,"div",25),u.fc(56,"input",33),u.kc(57,"app-list-users",34),u.rc("selectedUserId",function(e){u.Ic(t);return u.vc().selectedUserId(e)}),u.jc(),u.jc(),u.jc(),u.kc(58,"div",23),u.kc(59,"label",24),u.Pc(60,"Status"),u.jc(),u.kc(61,"div",25),u.kc(62,"select",35),u.Oc(63,Q,2,3,"option",36),u.jc(),u.jc(),u.jc(),u.Oc(64,G,1,0,"div",37),u.Oc(65,$,1,0,"div",37),u.Oc(66,K,1,0,"div",37),u.jc(),u.kc(67,"div",22),u.kc(68,"div",23),u.kc(69,"label",24),u.Pc(70,"Category"),u.jc(),u.kc(71,"div",25),u.kc(72,"select",38),u.Oc(73,Z,2,2,"option",39),u.jc(),u.jc(),u.jc(),u.kc(74,"div",23),u.kc(75,"label",24),u.Pc(76,"Priority"),u.jc(),u.kc(77,"div",25),u.kc(78,"select",40),u.Oc(79,H,2,3,"option",36),u.jc(),u.jc(),u.jc(),u.kc(80,"div",41),u.kc(81,"label",42),u.Pc(82,"Attachments "),u.kc(83,"span",43),u.uc(),u.kc(84,"svg",44),u.fc(85,"path",45),u.kc(86,"g"),u.fc(87,"path",46),u.jc(),u.jc(),u.jc(),u.jc(),u.Oc(88,nt,17,8,"form",47),u.jc(),u.Oc(89,it,2,2,"div",48),u.Oc(90,ct,1,0,"div",49),u.Oc(91,ot,1,0,"div",49),u.Oc(92,rt,1,0,"div",49),u.jc(),u.jc(),u.Oc(93,at,23,1,"div",50),u.Oc(94,dt,2,1,"div",51),u.tc(),u.kc(95,"div",52),u.kc(96,"button",53),u.rc("click",function(){u.Ic(t);return u.vc().handlePickAssets()}),u.Pc(97,"Add Asset"),u.jc(),u.jc(),u.jc(),u.kc(98,"div",4),u.kc(99,"table"),u.kc(100,"tbody"),u.kc(101,"tr"),u.Oc(102,gt,3,2,"div",51),u.jc(),u.jc(),u.jc(),u.jc(),u.kc(103,"div",4),u.kc(104,"div",52),u.kc(105,"button",54),u.Pc(106,"Add Checklist"),u.jc(),u.jc(),u.jc(),u.kc(107,"div",55),u.kc(108,"div",11),u.kc(109,"label"),u.Pc(110,"Service Details"),u.jc(),u.jc(),u.kc(111,"div",19),u.fc(112,"textarea",56),u.jc(),u.jc(),u.jc(),u.kc(113,"div",4),u.kc(114,"app-accordion",57),u.kc(115,"div",58),u.kc(116,"div",59),u.kc(117,"table"),u.kc(118,"thead"),u.kc(119,"tr"),u.kc(120,"td"),u.Pc(121,"User ID"),u.jc(),u.kc(122,"td"),u.Pc(123,"Date"),u.jc(),u.kc(124,"td"),u.Pc(125,"Details"),u.jc(),u.jc(),u.jc(),u.kc(126,"tbody"),u.Oc(127,ft,8,4,"tr",51),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.Oc(128,Ot,17,9,"app-modal",60),u.jc(),u.Oc(129,Ct,2,1,"app-modal",60),u.kc(130,"footer"),u.Oc(131,_t,4,2,"div",61),u.jc(),u.jc()}if(2&t){const t=u.Gc(41),e=u.Gc(51),n=u.vc();u.Tb(3),u.Qc("#WO"+n.workOrderNumber),u.Tb(1),u.Ac("formGroup",n.form),u.Tb(7),u.Ac("ngIf",n.submitAttempted&&n.form.controls.title.errors),u.Tb(12),u.Ac("ngIf",n.submitAttempted&&n.form.controls.description.errors),u.Tb(6),u.Ac("readOnly",!n.isEditable),u.Tb(9),u.Ac("matDatepicker",t),u.Tb(1),u.Ac("for",t),u.Tb(9),u.Ac("matDatepicker",e),u.Tb(1),u.Ac("for",e),u.Tb(7),u.Ac("readOnly",!n.isEditable),u.Tb(1),u.Ac("isEditable",n.isEditable)("userName",n.extendedWorkOrder.assignedToUser),u.Tb(6),u.Ac("ngForOf",n.workOrderStatusValues),u.Tb(1),u.Ac("ngIf",n.fileSrcCollection&&n.fileSrcCollection.length>1),u.Tb(1),u.Ac("ngIf",n.fileSrcCollection&&n.fileSrcCollection.length>1),u.Tb(1),u.Ac("ngIf",n.fileSrcCollection&&n.fileSrcCollection.length>1),u.Tb(7),u.Ac("ngForOf",n.workOrderCategories),u.Tb(6),u.Ac("ngForOf",n.workOrderPriorities),u.Tb(9),u.Ac("ngIf",n.fileUploadForm),u.Tb(1),u.Ac("ngIf",n.fileSrcCollection&&n.fileSrcCollection.length>0),u.Tb(1),u.Ac("ngIf",n.fileSrcCollection&&n.fileSrcCollection.length>1),u.Tb(1),u.Ac("ngIf",n.fileSrcCollection&&n.fileSrcCollection.length>1),u.Tb(1),u.Ac("ngIf",n.fileSrcCollection&&n.fileSrcCollection.length>1),u.Tb(1),u.Ac("ngIf",!n.extendedWorkOrder.workOrderAssets||0===n.extendedWorkOrder.workOrderAssets.length||!n.isAssetAvailable),u.Tb(1),u.Ac("ngForOf",n.extendedWorkOrder.workOrderAssets),u.Tb(2),u.Ac("disabled",!n.isEditable),u.Tb(6),u.Ac("ngForOf",n.extendedWorkOrder.workOrderChecklists),u.Tb(10),u.Ac("readOnly",!n.isEditable),u.Tb(2),u.Ac("titleDetails","Order Service History"),u.Tb(13),u.Ac("ngForOf",n.workOrderServiceDetails),u.Tb(1),u.Ac("ngIf",n.detailsModalVisible),u.Tb(1),u.Ac("ngIf",n.addAssetsModalVisible),u.Tb(2),u.Ac("ngIf",n.form)}}class Pt{constructor(t,e,n,i,c,o,r){this.workOrdersService=t,this.formBuilder=e,this.router=n,this.fileUploadService=i,this.authenticationService=c,this.toastService=o,this.workOrderWizard=r,this.isLoading=!0,this.attachedFileCollection=new P.a([]),this.standardFormattedDate=s.b,this.workOrderPriorities=Object(v.b)(d.x),this.WorkOrderStatus=d.z,this.workOrderStatusValues=Object(v.b)(d.z),this.standardFormattedDateTime=s.d,this.detailsModalVisible=!1,this.textMaxLength=90,this.fileCount=0,this.fileSrcCollection=[],this.isEditable=!1,this.isUpdatingWorkOrder=!1,this.isNewFilesAdded=!1,this.showSaveButton=!1,this.filesLimit=3,this.filePathCollection=[],this.fileTypes=["image/jpeg","image/png","application/msword","jpeg","jpg","png","doc","docx","xls","csv","application/ms-excel","xlsx","pdf","bmp"],this.addAssetsModalVisible=!1,this.isAssetAvailable=!0,this.enableServiceTextarea=!1,this.isShowEditIcon=!0,this.submitAttempted=!1,this.expanded=!1,this.workOrderWizard.workOrder?(this.workOrderStatus=this.workOrderWizard.workOrder.status.toString(),this.workOrderNumber=this.workOrderWizard.workOrder.number.toString(),this.checkUserEditRights()):this.router.navigate(["work-orders"])}ngOnInit(){this.viewWorkOrderForId(),this.viewWorkOrderServiceDetailForId(),this.listCategory()}createForm(){(t=>{this.form=this.formBuilder.group({title:new c.e({value:t.title,disabled:!this.isEditable},c.v.compose([c.v.maxLength(50),c.v.required,c.v.pattern("^[a-zA-Z0-9 ]*")])),description:new c.e({value:t.description,disabled:!this.isEditable},c.v.compose([c.v.maxLength(4e3),c.v.required])),category:new c.e({value:t.category.id,disabled:!this.isEditable}),reportedOn:new c.e({value:t.reportedOn,disabled:!0},c.v.compose([c.v.required])),dueDate:new c.e({value:t.dueDate,disabled:!0},c.v.compose([c.v.required])),priority:new c.e({value:t.priority,disabled:!this.isEditable}),assignedToUser:new c.e({value:t.assignedToUser,disabled:!this.isEditable},c.v.compose([c.v.maxLength(50)])),status:new c.e({value:t.status,disabled:!this.isEditable},c.v.compose([c.v.required])),serviceDetails:new c.e({value:"",disabled:!this.isEditable},c.v.compose([c.v.maxLength(4e3)]))})})(this.extendedWorkOrder),this.form.valueChanges.subscribe(()=>{setTimeout(()=>{this.updateFormChanges()},100)}),this.fileUploadForm=this.formBuilder.group({files:[null,[c.v.required,Object(w.b)(this.fileTypes),Object(w.a)(2e6)],Object(w.c)(this.filesLimit)]})}viewWorkOrderForId(t=!0){this.isLoading=!0;this.workOrdersService.viewWorkOrderForId(this.workOrderNumber.toString()).pipe(Object(M.a)(e=>(this.extendedWorkOrder=e,t&&this.createForm(),e.attachedFiles))).subscribe(t=>{this.fileCount=t?t.length:0;let e=[];this.fileSrcCollection=[],this.filePathCollection=[],t&&(t.forEach(t=>{const n=t.replace(/^.*[\\\/]/,""),i=n.substring(0,n.length);"blob"!==i&&(this.filePathCollection.push(t),this.fileUploadService.getFile(t).subscribe(t=>{t.name=i,this.fileSrcCollection.push(t),this.fileCount=this.fileSrcCollection?this.fileSrcCollection.length:0,e.push(t)}))}),this.fileUploadForm.setValue({files:this.fileSrcCollection}),this.attachedFileCollection.next(this.fileSrcCollection)),this.isLoading=!1})}viewWorkOrderServiceDetailForId(){this.workOrdersService.viewWorkOrderServiceDetailForId(this.workOrderWizard.workOrder.number.toString()).subscribe(t=>{this.workOrderServiceDetails=t})}listCategory(){this.workOrdersService.listWorkOrderCategory().subscribe(t=>{this.workOrderCategories=t})}handleViewMoreClick(t){this.detailsModalVisible=!0,this.isShowEditIcon=this.isEditable,this.selectedWorkOrderServiceDetails=t}handleDetailsModalClose(){this.detailsModalVisible=!1,this.enableServiceTextarea=!1,this.addAssetsModalVisible=!1}disableRightClick(t){t.preventDefault()}handlesPickSpares(t){this.router.navigate(["work-orders","#WO"+t,"PickSpares"])}checkUserEditRights(){this.isGettingUserRights=!0;this.authenticationService.currentUserProfile$.pipe(Object(M.a)(t=>t)).subscribe(t=>{this.authenticationService.currentUserHasPermission({[d.l.WorkOrders]:[d.y.CanEditWorkOrder]}).subscribe(e=>{t.userRole.groupName!==d.q.Technician?this.isEditable=e&&Number(this.workOrderStatus)!==d.z.Closed:this.isEditable=e&&Number(this.workOrderStatus)!==d.z.Closed&&Number(this.workOrderStatus)!==d.z.Complete,this.isGettingUserRights=!1})})}launchFileInput(){this.fileUploadForm.reset({}),this.fileUploadInput.nativeElement.value="",this.fileUploadInput.nativeElement.click()}updateFormChanges(){this.extendedWorkOrder.status=this.form.get("status").value,this.extendedWorkOrder.assignedToUser=this.form.get("assignedToUser").value?this.form.get("assignedToUser").value.toString():"",this.extendedWorkOrder.title=this.form.get("title").value.toString(),this.extendedWorkOrder.description=this.form.get("description").value.toString(),this.extendedWorkOrder.priority=this.form.get("priority").value,this.extendedWorkOrder.dueDate=this.form.get("dueDate").value,this.extendedWorkOrder.reportedOn=this.form.get("reportedOn").value;const t=this.form.get("category").value;this.extendedWorkOrder.category=this.workOrderCategories.filter(e=>e.id===Number(t))[0],this.extendedWorkOrder.serviceDetails=this.form.get("serviceDetails").value.toString(),this.showSaveButton=!0,this.form.markAsDirty()}selectedUserId(t){this.form.get("assignedToUser").setValue(t),this.showSaveButton=!0}updateWorkOrder(){if(this.submitAttempted=!0,!this.isUpdatingWorkOrder){if(this.isUpdatingWorkOrder=!0,this.isAssetAvailable=this.extendedWorkOrder.workOrderAssets.filter(t=>!0!==t.isDelete).length>0,!this.form.valid||!this.isAssetAvailable)return this.isNewFilesAdded=!1,this.showSaveButton=!1,this.isUpdatingWorkOrder=!1,void this.form.markAsPristine();if(this.showSaveButton=!1,this.form.get("serviceDetails").setValue(""),this.form.valid&&this.form.dirty){let t=[];return this.extendedWorkOrder.workOrderAssets.forEach(e=>{(!0===e.isDelete||e.isNew)&&(e.referenceId=this.extendedWorkOrder.id,t.push(e))}),this.extendedWorkOrder.workOrderAssets=[],this.extendedWorkOrder.workOrderAssets=t,this.form.markAsPristine(),void this.workOrdersService.updateWorkOrderForId(this.extendedWorkOrder.id,this.extendedWorkOrder).subscribe(t=>{this.toastService.showToast(new d.u("Work Order ("+t.workOrderNumber+") saved successfully")),this.fileUploadForm.valid&&this.isNewFilesAdded?this.fileUploadService.uploadFiles(Number(this.extendedWorkOrder.number),d.j.WorkOrder,this.fileSrcCollection).subscribe(t=>{this.savedFileSrcCollection=t,this.filePathCollection=t.attachments,this.viewWorkOrderForId(!1),this.viewWorkOrderServiceDetailForId()},t=>{this.isUpdatingWorkOrder=!1,this.toastService.showErrorToast("Unable to save workorder files.")}):(this.viewWorkOrderForId(!1),this.viewWorkOrderServiceDetailForId(),this.isUpdatingWorkOrder=!1),this.isNewFilesAdded=!1,this.showSaveButton=!1,this.extendedWorkOrder=t},t=>{this.isNewFilesAdded=!1,this.showSaveButton=!1,this.isUpdatingWorkOrder=!1;const e=t[0];this.toastService.showErrorToast(e)},()=>{this.errorMessage="Sorry something went wrong... please try again later",this.isUpdatingWorkOrder=!1,this.isNewFilesAdded=!1,this.showSaveButton=!1})}this.fileUploadForm.valid&&this.isNewFilesAdded&&!this.form.dirty&&this.fileUploadService.uploadFiles(Number(this.extendedWorkOrder.number),d.j.WorkOrder,this.fileSrcCollection).subscribe(t=>{this.savedFileSrcCollection=t,this.savedFileSrcCollection.attachments?(this.filePathCollection=t.attachments,this.viewWorkOrderForId(!1),this.viewWorkOrderServiceDetailForId(),this.toastService.showToast(new d.u("Workorder files saved successfully"))):this.toastService.showErrorToast("Files not saved"),this.isUpdatingWorkOrder=!1,this.isNewFilesAdded=!1,this.showSaveButton=!1}),this.fileUploadForm.valid||!this.isNewFilesAdded||this.form.dirty||this.toastService.showErrorToast("Files not saved"),this.isUpdatingWorkOrder=!1,this.showSaveButton=!1}}handleDeleteItem(t){this.extendedWorkOrder&&this.extendedWorkOrder.workOrderAssets&&(this.extendedWorkOrder.workOrderAssets[t].isDelete=!0,this.isAssetAvailable=this.extendedWorkOrder.workOrderAssets.filter(t=>!0!==t.isDelete).length>0,this.form.markAsDirty(),this.showSaveButton=!0)}handleFileInputChange(){this.showSaveButton=!0,this.isNewFilesAdded=!0;let t=0===this.fileSrcCollection.length;const e=this.fileUploadInput.nativeElement.files;for(let n=0;n<e.length;n++)0===this.fileSrcCollection.filter(t=>t.name===e[n].name).length?(this.fileSrcCollection.push(e[n]),this.filePathCollection.push("NewFile")):this.toastService.showErrorToast("Cannot upload duplicate file.");this.clearFileFormErrors(),t?this.fileUploadForm.setValue({files:this.fileSrcCollection}):this.fileUploadForm.patchValue({files:this.fileSrcCollection}),(this.fileUploadForm.controls.files.hasError("acceptableFileType")||this.fileUploadForm.controls.files.hasError("acceptableNumberOfFiles")||this.fileUploadForm.controls.files.hasError("acceptableFileSize"))&&(this.showSaveButton=!1),this.fileCount=this.fileSrcCollection.length,this.attachedFileCollection.next(this.fileSrcCollection)}handleDeleteFileAttached(t){const e=this.filePathCollection[t];this.isUpdatingWorkOrder=!0,"NewFile"===e?(this.fileSrcCollection.splice(t,1),this.filePathCollection.splice(t,1),this.fileCount=this.fileSrcCollection.length,this.attachedFileCollection.next([]),this.attachedFileCollection.next(this.fileSrcCollection),this.fileUploadForm.patchValue({files:this.fileSrcCollection}),this.toastService.showToast(new d.u("File has been deleted.")),this.isUpdatingWorkOrder=!1,this.resetSaveButtonDisplay()):(this.fileUploadService.deleteFile(e,!1).subscribe(()=>{this.fileSrcCollection.splice(t,1),this.filePathCollection.splice(t,1),this.fileCount=this.fileSrcCollection.length,this.attachedFileCollection.next([]),this.attachedFileCollection.next(this.fileSrcCollection),this.toastService.showToast(new d.u("File has been deleted.")),this.isUpdatingWorkOrder=!1,this.resetSaveButtonDisplay()},t=>{this.toastService.showErrorToast("Unable to delete the file.")}),this.fileUploadForm.patchValue({files:this.fileSrcCollection})),this.fileUploadForm.markAsPristine(),this.fileUploadForm.markAsUntouched(),this.fileUploadForm.updateValueAndValidity()}resetSaveButtonDisplay(){0===this.fileSrcCollection.length&&(this.showSaveButton=!1),3===this.fileSrcCollection.length&&(this.showSaveButton=!0)}priorityString(t){return Object(v.a)(d.x,t)}handlePickAssets(){this.addAssetsModalVisible=!0}handleAddedWorkOrderAssets(t){this.addAssetsModalVisible=!1,this.extendedWorkOrder.workOrderAssets=t,this.isAssetAvailable=this.extendedWorkOrder.workOrderAssets.filter(t=>!0!==t.isDelete).length>0,this.form.markAsDirty(),this.showSaveButton=!0}handleClipboard(t){t.preventDefault()}clearFileFormErrors(){this.fileUploadForm.controls.files.setErrors({acceptableFileType:!1,acceptableFileSize:!1})}getUserName(t){return t&&t.includes("-")?t.split("-")[1]:t}handleTextAreaInput(){this.isSubmitDisabled=""===this.selectedWorkOrderServiceDetails.serviceDetail.trim()}handleServiceSaveButton(){this.enableServiceTextarea=!1,this.isLoading=!0,this.workOrdersService.updateWorkOrderService(this.selectedWorkOrderServiceDetails).subscribe(()=>{this.viewWorkOrderServiceDetailForId(),this.toastService.showToast(new d.u("Workorder service history saved successfully")),this.isLoading=!1,this.detailsModalVisible=!1},t=>{this.viewWorkOrderServiceDetailForId(),this.toastService.showErrorToast("Unable to save workorder service history"),this.isLoading=!1})}handleShowCheckListContent(t){this.expanded===t?this.expanded=null:this.expanded=t}handleSelectedChecklistTask(){this.showSaveButton=!0,this.form.markAsDirty()}}function Mt(t,e){1&t&&(u.kc(0,"div",24),u.kc(1,"span"),u.Pc(2,"Quantity is greater than instock quantity"),u.jc(),u.jc())}Pt.\u0275fac=function(t){return new(t||Pt)(u.ec(d.A),u.ec(c.d),u.ec(r.c),u.ec(d.i),u.ec(d.d),u.ec(d.v),u.ec(m))},Pt.\u0275cmp=u.Yb({type:Pt,selectors:[["app-view-workorder"]],viewQuery:function(t,e){if(1&t&&u.Tc(V,1),2&t){let t;u.Fc(t=u.sc())&&(e.fileUploadInput=t.first)}},decls:4,vars:5,consts:[[3,"customPreviousPageTitle","customCurrentPageTitle"],[4,"ngIf"],[1,"spinner"],[3,"formGroup"],[1,"core-info","mt-4"],[1,"col-12","spares-button","mobile-btn"],[1,"btn-pick-spares"],[1,"btn","btn-primary",3,"click"],[1,"col-2","col-sm-3"],["class","d-flex  align-items-center",4,"ngIf"],[1,"row","align-items-center","mb-sm-4","mb-2"],[1,"col-sm-2","col-4"],[1,"col-md-6","col-sm-10","col-8"],["type","text","pattern","^[a-zA-Z0-9 ]*","formControlName","title","maxlength","50",1,"form-control",3,"paste"],[1,"gap"],[1,"col-sm-4","spares-button","tab-view"],[1,"btn","btn-primary","px-md-5",3,"click"],["class","d-flex",4,"ngIf"],[1,"row","mb-sm-4","mb-2"],[1,"col-sm-10","col-8"],["formControlName","description","rows","8","maxlength","4000",1,"form-control",3,"readOnly"],[1,"row"],[1,"col-sm-6"],[1,"row","align-items-center","d-flex","mb-2","mb-sm-3"],[1,"col-4"],[1,"col-8"],[1,"form-group"],[1,"taro-material-datepicker"],["matInput","","formControlName","reportedOn",1,"form-control",3,"matDatepicker"],["matSuffix","",3,"for"],["datePicker",""],["matInput","","formControlName","dueDate",1,"form-control",3,"matDatepicker"],["datePickerDueDate",""],["type","hidden","formControlName","assignedToUser","maxlength","50",1,"form-control",3,"readOnly"],[3,"isEditable","userName","selectedUserId"],["formControlName","status",1,"custom-select","form-control"],["class","form-control",3,"value","selected",4,"ngFor","ngForOf"],["class","row d-flex mb-sm-3 mobile-view",4,"ngIf"],["formControlName","category",1,"custom-select","form-control"],["class","form-control",3,"value",4,"ngFor","ngForOf"],["formControlName","priority",1,"custom-select","form-control"],[1,"row","d-flex","align-items-center","mb-2","mb-sm-3","file-attach"],[1,"col-4","attachment-icon"],["tooltip-danger","Allowed file types are doc, docx, xls, xlsx, csv, pdf, jpeg, png, bmp. Max file size allowed 2 MB."],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 19.199 19.2","width","14","height","14"],["d","M0 9.6a9.6 9.6 0 0 0 18.5 3.6 8.571 8.571 0 0 0 .7-3.6A9.6 9.6 0 1 0 0 9.6z","fill","#fff","stroke","#ff422e"],["d","M9.6 4a1.184 1.184 0 0 1 1.2 1.3 1.2 1.2 0 1 1-2.4 0A1.24 1.24 0 0 1 9.6 4zm-1 3.3h2.1v7.9H8.6z","fill","#ff422e"],["class","col-8",3,"formGroup",4,"ngIf"],["class","row  d-flex  file-row",4,"ngIf"],["class","row  d-flex mb-sm-3",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mb-2","mb-sm-3"],[1,"btn","btn-link","p-0","add-asset",3,"disabled","click"],[1,"btn","btn-link","p-0","add-checklist"],[1,"row","mb-sm-4","mb-2","service-details-text"],["formControlName","serviceDetails","rows","8","maxlength","4000",1,"form-control",3,"readOnly"],[3,"titleDetails"],[1,"row","pl-10"],[1,"col-sm-12","service-history"],[3,"modalShouldClose","contextmenu",4,"ngIf"],["class","form-actions",3,"visible",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"col-4","col-sm-2","width-17"],[1,"col-md-6","col-sm-10","col-8","width-49","alert","alert-danger","arrow-alert"],[1,"d-flex"],[1,"col-md-6","col-sm-10","col-8","width-83","alert","alert-danger","arrow-alert"],[1,"form-control",3,"value","selected"],[1,"row","d-flex","mb-sm-3","mobile-view"],[1,"form-control",3,"value"],[1,"col-8",3,"formGroup"],[1,"alert-msgs"],["alertElementRef",""],["class","alert alert-danger arrow-alert",4,"ngIf"],[1,"file-input"],[1,"col-7"],[1,"col-5"],[1,"btn-file-upload",3,"disabled","click"],["hidden","","multiple","","type","file",3,"readonly","change"],["fileUploadInput",""],[1,"alert","alert-danger","arrow-alert"],[1,"row","d-flex","file-row"],[3,"attachedFileCollection","isEditable","deletedFileIndex"],[1,"row","d-flex","mb-sm-3"],[1,"col-sm-6","mb-2","mb-sm-3"],[1,"row","d-flex","align-items-center"],[1,"asset-alert-msgs"],["type","text","readonly","",1,"readonly","form-control",3,"value"],[1,"col-8","d-flex","align-items-center"],["type","text","readonly","",1,"form-control","readonly",3,"value"],["xmlns","http://www.w3.org/2000/svg","width","15.002","height","19.003","viewBox","0 0 14.002 18.003",1,"del-icon","opacity-50"],["id","wrench","transform","translate(0.001 0)"],["id","Path_1563","data-name","Path 1563","d","M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z","transform","translate(0.2 1.267)"],["id","Path_1564","data-name","Path 1564","d","M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z"],["id","Path_1565","data-name","Path 1565","d","M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z","transform","translate(1.567 2)"],["id","Path_1566","data-name","Path 1566","d","M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z","transform","translate(0.9 1.967)"],["id","Path_1567","data-name","Path 1567","d","M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z","transform","translate(2.125 1.991)"],["type","text","readonly","",1,"form-control","readonly","location-input",3,"value"],[1,"delete-btn",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","15.002","height","19.003","viewBox","0 0 14.002 18.003",1,"del-icon"],[1,"addtask-expanded",3,"taskItem","firstItem","isTaskEditable","ngClass","taskSelected"],[1,"clickView",3,"click"],[3,"modalShouldClose","contextmenu"],[1,"col-4","text-end"],[1,"col-12","modal-details","mb-2"],[1,"col","float-start"],[1,"col","text-end"],[3,"click",4,"ngIf"],["row","8","maxlength","4000",1,"modal-details-textarea",3,"ngModel","readOnly","ngModelChange","input"],[1,"modal-details-footer"],[3,"click"],["id","edit-button-svgrepo-com","xmlns","http://www.w3.org/2000/svg","width","15.583","height","14.969","viewBox","0 0 15.583 14.969"],["id","Group_3267","data-name","Group 3267"],["id","Path_1568","data-name","Path 1568","d","M12.274,86.27a.384.384,0,0,0-.384.384v7.02a1.347,1.347,0,0,1-1.346,1.345H2.114A1.347,1.347,0,0,1,.769,93.674v-8.43A1.347,1.347,0,0,1,2.114,83.9h8.43a.384.384,0,1,0,0-.769H2.114A2.117,2.117,0,0,0,0,85.244v8.43a2.117,2.117,0,0,0,2.114,2.114h8.43a2.117,2.117,0,0,0,2.114-2.114v-7.02A.384.384,0,0,0,12.274,86.27Z","transform","translate(0 -80.82)","fill","#424244"],["id","Path_1569","data-name","Path 1569","d","M196.426,10.1a1.19,1.19,0,0,0-1.681,0l-6.585,6.585a.892.892,0,0,0-.134.17l-.912,2.049a.384.384,0,0,0,.508.508l2.049-.912a.9.9,0,0,0,.17-.134l6.585-6.585a1.188,1.188,0,0,0,0-1.681Zm-.544,1.137L189.3,17.823l0,0-1.07.476.476-1.07,0,0,6.585-6.585a.429.429,0,0,1,.593,0,.419.419,0,0,1,0,.593Z","transform","translate(-181.191 -9.753)","fill","#424244"],[1,"btn","btn-primary","mt-4","handlesServicesSaveBtn",3,"disabled","click"],[3,"existingAssets","addedAssets"],[1,"form-actions"],[1,"btn","btn-primary","btn-block","col-12",3,"click"]],template:function(t,e){1&t&&(u.fc(0,"app-section-header",0),u.Oc(1,N,2,0,"div",1),u.Oc(2,q,1,0,"app-loading-modal",1),u.Oc(3,vt,132,33,"article",1)),2&t&&(u.Ac("customPreviousPageTitle","Work Orders")("customCurrentPageTitle","#WO"+e.workOrderNumber),u.Tb(1),u.Ac("ngIf",e.isLoading||e.isGettingUserRights),u.Tb(1),u.Ac("ngIf",e.isUpdatingWorkOrder),u.Tb(1),u.Ac("ngIf",!e.isLoading&&!e.isGettingUserRights&&!e.isUpdatingWorkOrder))},directives:[f.a,i.k,x.a,c.w,c.n,c.g,c.c,c.s,c.m,c.f,c.i,y.b,y.d,S.e,y.a,j.a,c.u,i.j,I.a,c.q,c.x,W,E,i.i,U.a,c.p,R.a],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}article[_ngcontent-%COMP%]{margin-bottom:6em}article[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:left!important;padding:.8em}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:flex;background-color:#f2f2f2;height:3.8em;font-size:.85em;border:1px solid #ced4da;border-radius:.25em}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:.8em 0 0 .7em;font-weight:400;text-transform:none;font-size:1.2em!important}@media screen and (max-width:355px){article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1em;font-size:1.1em!important}}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .btn-file-upload[_ngcontent-%COMP%]{border:1px solid #ced4da;border-width:1px 0;background-color:#ddd;height:3.7em;width:100%}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .btn-file-upload[disabled][_ngcontent-%COMP%]{cursor:default}article[_ngcontent-%COMP%]   .file-attach[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex}article[_ngcontent-%COMP%]   .file-attach[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:.25em}article[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-bottom:0;height:auto}@media screen and (max-width:767px){article[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-bottom:.7em}}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){text-align:center}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{transform:scale(1.25)}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .btn-pick-spares[_ngcontent-%COMP%]{float:right}@media only screen and (max-width:540px){article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .btn-pick-spares[_ngcontent-%COMP%]{margin:.5em 0 0 9.5em;float:none}}@media only screen and (min-width:541px){article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:540px){article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{clear:both;display:block}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .location-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:200px}article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{padding:0}}@media only screen and (max-width:360px){article[_ngcontent-%COMP%]   .align-items-center[_ngcontent-%COMP%]   .btn-pick-spares[_ngcontent-%COMP%]{margin-left:0}}article[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:none;background:transparent;padding-bottom:.25em;transition:all .2s ease-in-out;margin-left:.25em}article[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;transform:scale(1);transition:all .2s ease-in-out}article[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}article[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.125)}article[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:default}article[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{border:none;background:transparent;padding-bottom:.25em;transition:all .2s ease-in-out;margin-left:.25em}article[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;transform:scale(1);transition:all .2s ease-in-out}article[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}article[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.125)}article[_ngcontent-%COMP%]   .edit-btn[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:default}article[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #dedede;margin-bottom:1em;padding-bottom:.5em}article[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:1em}article[_ngcontent-%COMP%]   .core-info[_ngcontent-%COMP%]   .del-icon[_ngcontent-%COMP%]{margin-left:.5em}article[_ngcontent-%COMP%]   .core-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], article[_ngcontent-%COMP%]   .service-details-text[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}article[_ngcontent-%COMP%]   .readonly[_ngcontent-%COMP%]{pointer-events:none;background-color:hsla(0,0%,92%,.295);color:#9c9a9a}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]{padding:1em}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;border:1px solid #bcbcbc;width:100%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#e4e4e4;font-weight:700}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #bcbcbc;padding:10px}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:center;width:15%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:center;width:20%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){word-break:break-all;width:65%}@media screen and (max-width:610px){article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:none}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:60%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .desktop-time-view[_ngcontent-%COMP%]{display:none}}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6a955b;text-decoration:underline;font-size:small}article[_ngcontent-%COMP%]   .modal-details-textarea[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em;background-color:#f2f2f2;padding:1.5em;text-align:justify;border-radius:5px;min-height:100%;width:100%;border:0;outline-style:none;box-shadow:none;border-color:transparent}article[_ngcontent-%COMP%]   .modal-details-textarea-focus[_ngcontent-%COMP%]{color:#424244;background-color:#fff!important;border:1px solid #b5caad!important;border-color:#b5caad;outline:0;box-shadow:0 0 0 .25rem rgba(106,149,91,.25)}article[_ngcontent-%COMP%]   .modal-details-textarea[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}article[_ngcontent-%COMP%]   .modal-details[_ngcontent-%COMP%]{height:78%!important}article[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;position:relative}article[_ngcontent-%COMP%]   .addtask-expanded[_ngcontent-%COMP%]{background:none;display:flex}@media screen and (max-width:576px){.mobile-view[_ngcontent-%COMP%]{display:none!important}}@media screen and (max-width:767px){.mobile-btn[_ngcontent-%COMP%]{display:block;margin-bottom:1.5rem}.mobile-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.tab-view[_ngcontent-%COMP%]{display:none!important}}@media screen and (min-width:767px){.mobile-btn[_ngcontent-%COMP%]{display:none!important}}.alertMessage[_ngcontent-%COMP%]{height:67px}@media screen and (max-width:576px){.alertMessage[_ngcontent-%COMP%]{height:0}.alertMessages[_ngcontent-%COMP%]{height:90px}}  .alert{padding:.9em 0 1em}@media screen and (max-width:800px){  .alert{padding:1em .2em}}  .form-group{position:relative}  .form-group .alert-msgs{position:absolute;bottom:2.5em}  .form-group .asset-alert-msgs{position:absolute;bottom:0;width:100%;margin-bottom:-.35em}  .find-as-you-type .text-display{padding-left:.8em}.modal-details-footer[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}@media screen and (max-width:567px){.width-17[_ngcontent-%COMP%]{width:36%}.width-49[_ngcontent-%COMP%], .width-83[_ngcontent-%COMP%]{width:64%}}@media screen and (min-width:767px){.width-49[_ngcontent-%COMP%]{width:49%}.width-17[_ngcontent-%COMP%]{width:17%}.width-83[_ngcontent-%COMP%]{width:83%}}  .breadcrumb li:nth-child(2) a{text-transform:uppercase}  .detail-container{margin-top:0!important}  .title-block{margin-top:.3em!important}@media screen and (min-width:320px) and (max-width:420px){  .title-block h2{font-size:.85rem!important}}"]});class wt{constructor(t){this.formBuilder=t,this.isSkuDeleted=new u.t,this.handlesQtyChange=new u.t,this.isQtyInValid=new u.t}ngOnInit(){this.qtyForm=this.formBuilder.group({qty:[this.sparesSku.quantity,[c.v.min(1),c.v.max(this.sparesSku.sku.quantities.inStock),c.v.required]]}),this.qtyForm.get("qty").valueChanges.pipe(Object(h.a)(700),Object(p.a)(t=>t<=this.sparesSku.sku.quantities.inStock)).subscribe(t=>{this.handlesQtyChange.emit(t),this.isQtyInValid.emit(this.qtyForm.value.qty>this.sparesSku.sku.quantities.inStock)})}handleQtyClipboard(t){t.preventDefault()}disableRightClick(t){t.preventDefault()}handleQtyInputKeyUp(t){this.isQtyInValid.emit(this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock),"Enter"===t.key&&this.qtyForm.value.qty>0&&this.qtyForm.value.qty.toString().length>0&&this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock&&t.preventDefault()}handleQtyInputKeyDown(t){const e=this.qtyForm.value.qty.toString().length>=4;if(this.qtyForm.valid&&this.qtyForm.get("qty").value>0&&this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock&&"Enter"===t.key)return;if("Backspace"===t.key||"Delete"===t.key)return;(e||isNaN(t.key)||32===t.keyCode)&&t.preventDefault();const n=this.qtyForm.get("qty").value;this.handlesQtyChange.emit(n),this.isQtyInValid.emit(this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock)}handleDeleteItem(){this.isSkuDeleted.emit(!0)}handlesDecreaseQty(){let t=this.qtyForm.get("qty").value;t-=1,t<=0||(this.qtyForm.setValue({qty:t}),this.handlesQtyChange.emit(t),this.isQtyInValid.emit(this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock))}handlesIncreaseQty(){let t=Number(this.qtyForm.get("qty").value);t+=1,t>this.sparesSku.sku.quantities.inStock||(this.qtyForm.setValue({qty:t}),this.handlesQtyChange.emit(t),this.isQtyInValid.emit(this.qtyForm.get("qty").value>this.sparesSku.sku.quantities.inStock))}}wt.\u0275fac=function(t){return new(t||wt)(u.ec(c.d))},wt.\u0275cmp=u.Yb({type:wt,selectors:[["app-spares-skus"]],inputs:{sparesSku:"sparesSku",isEditable:"isEditable"},outputs:{isSkuDeleted:"isSkuDeleted",handlesQtyChange:"handlesQtyChange",isQtyInValid:"isQtyInValid"},decls:41,vars:10,consts:[[1,"spare-name-cell"],[1,"sku-uom-cell","mobile-only"],[1,"sku-qty-cell"],[1,"spares-row",3,"formGroup"],[1,"btn-decrease",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","20"],["data-name","Group 3136","transform","translate(-556 -289.5)"],["cx","8","cy","8","r","8","fill","#777","data-name","Ellipse 284","transform","translate(556 292)"],["fill","#fff","data-name","-","font-family","Kohinoor-Book, Kohinoor","font-size","15","transform","translate(561.5 304.5)"],["x","0","y","0"],["formControlName","qty","type","text","pattern","[0-9]*","inputmode","numeric","ng-pattern","[0-9]*","maxlength","4",1,"form-control","qty-text-input",3,"readOnly","paste","contextmenu","keydown","keyup"],["class","alert alert-danger arrow-alert",4,"ngIf"],[1,"btn-increase",3,"disabled","click"],["data-name","Group 3138","transform","translate(-946 -724.2)"],["cx","8","cy","8","r","8","fill","#777","data-name","Ellipse 285","transform","translate(946 726)"],["fill","#fff","data-name","+","font-family","Kohinoor-Book, Kohinoor","font-size","15","transform","translate(950 739.2)"],[1,"delete-row-cell"],[1,"delete-btn",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 14 18"],["d","M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z","transform","translate(.2 1.267)",1,"cls-1"],["d","M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z",1,"cls-1"],["d","M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z","transform","translate(1.567 2)",1,"cls-1"],["d","M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z","transform","translate(.9 1.967)",1,"cls-1"],["d","M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z","transform","translate(2.125 1.991)",1,"cls-1"],[1,"alert","alert-danger","arrow-alert"]],template:function(t,e){1&t&&(u.kc(0,"td",0),u.kc(1,"span"),u.kc(2,"strong"),u.Pc(3),u.jc(),u.fc(4,"br"),u.jc(),u.kc(5,"span"),u.kc(6,"strong"),u.Pc(7,"ID "),u.jc(),u.Pc(8),u.fc(9,"br"),u.Pc(10),u.jc(),u.jc(),u.kc(11,"td",1),u.kc(12,"span"),u.Pc(13),u.jc(),u.jc(),u.kc(14,"td",2),u.kc(15,"form",3),u.kc(16,"button",4),u.rc("click",function(){return e.handlesDecreaseQty()}),u.uc(),u.kc(17,"svg",5),u.kc(18,"g",6),u.fc(19,"circle",7),u.kc(20,"text",8),u.kc(21,"tspan",9),u.Pc(22,"-"),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.tc(),u.kc(23,"input",10),u.rc("paste",function(t){return e.handleQtyClipboard(t)})("contextmenu",function(t){return e.disableRightClick(t)})("keydown",function(t){return e.handleQtyInputKeyDown(t)})("keyup",function(t){return e.handleQtyInputKeyUp(t)}),u.jc(),u.Oc(24,Mt,3,0,"div",11),u.kc(25,"button",12),u.rc("click",function(){return e.handlesIncreaseQty()}),u.uc(),u.kc(26,"svg",5),u.kc(27,"g",13),u.fc(28,"circle",14),u.kc(29,"text",15),u.kc(30,"tspan",9),u.Pc(31,"+"),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.tc(),u.kc(32,"td",16),u.kc(33,"button",17),u.rc("click",function(){return e.handleDeleteItem()}),u.uc(),u.kc(34,"svg",18),u.fc(35,"defs"),u.fc(36,"path",19),u.fc(37,"path",20),u.fc(38,"path",21),u.fc(39,"path",22),u.fc(40,"path",23),u.jc(),u.jc(),u.jc()),2&t&&(u.Tb(3),u.Qc(e.sparesSku.sku.sparesGroupName),u.Tb(5),u.Qc(e.sparesSku.sku.id),u.Tb(2),u.Rc(" ",e.sparesSku.sku.description," "),u.Tb(3),u.Qc(e.sparesSku.sku.uom),u.Tb(2),u.Ac("formGroup",e.qtyForm),u.Tb(1),u.Ac("disabled",!e.isEditable),u.Tb(7),u.Ac("readOnly",!e.isEditable),u.Tb(1),u.Ac("ngIf",e.qtyForm.value.qty>e.sparesSku.sku.quantities.inStock&&e.qtyForm.dirty&&""!==e.qtyForm.value),u.Tb(1),u.Ac("disabled",!e.isEditable),u.Tb(8),u.Ac("disabled",!e.isEditable))},directives:[c.w,c.n,c.g,c.c,c.m,c.f,c.s,c.i,i.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}[_nghost-%COMP%]{display:table-row;background-color:#f2f2f2;line-height:1.1;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em;text-align:center;vertical-align:middle;height:5em;border-bottom:2px solid #fff;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:left;width:40%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:10%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:20%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:4%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){background-color:#dedede;font-weight:600}[_nghost-%COMP%]   td[_ngcontent-%COMP%]   .mobile-only[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sku-qty-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;background-color:transparent}[_nghost-%COMP%]   .sku-qty-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}[_nghost-%COMP%]   .sku-qty-cell[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:default}[_nghost-%COMP%]   .sku-qty-cell[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{position:absolute;top:-80%;width:100%;left:0;z-index:999}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0 auto;font-size:1.5em}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.1)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]{opacity:.3;background-color:transparent;cursor:default}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(1);transition:all .2s ease-in-out}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}@media screen and (max-width:480px){[_nghost-%COMP%]{padding-right:0!important}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:50%}[_nghost-%COMP%]   .spares-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:80px}}@media screen and (max-width:768px){[_nghost-%COMP%]{margin-bottom:3.5em;padding-right:7em;display:flex;align-items:center;border:1px solid rgba(0,0,0,.1);border-bottom:none}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{display:none;border-bottom:none;height:auto}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%], [_nghost-%COMP%]   td.qty-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   td.sku-qty-cell[_ngcontent-%COMP%], [_nghost-%COMP%]   td.spare-name-cell[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   td.spare-name-cell[_ngcontent-%COMP%]{flex-grow:1;text-align:left}[_nghost-%COMP%]   td.spare-name-cell[_ngcontent-%COMP%] > .mobile-only[_ngcontent-%COMP%]{display:block;font-weight:500}[_nghost-%COMP%]   td.sku-qty-cell[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]   td.sku-qty-cell[_ngcontent-%COMP%]   .mobile-only[_ngcontent-%COMP%]{display:inline-block;font-weight:700;margin-left:.5em}[_nghost-%COMP%]   td.sku-qty-cell[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{white-space:normal}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]{display:block;width:calc(100% + 2px);position:absolute;top:100%;margin:-1px;background-color:transparent}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[_ngcontent-%COMP%]{background:#eaeaea;padding:1.5em 0;border-bottom-left-radius:.5em;border-bottom-right-radius:.5em;border:1px solid rgba(0,0,0,.05);border-top:none}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#666667}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5}}.spares-row[_ngcontent-%COMP%]{margin-top:.4em;text-align:center}.spares-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{padding-right:.5em}.spares-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:center;background-color:#fff;width:80px;display:inline-block}"]});const xt=["searchInput"],yt=["searchResult"];function St(t,e){1&t&&(u.kc(0,"span"),u.Pc(1,"s"),u.jc())}function jt(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.Oc(2,St,2,0,"span",1),u.Pc(3,")"),u.jc()),2&t){const t=u.vc();u.Tb(1),u.Rc("(",t.workOrderSpares.spareSkus.length," item"),u.Tb(1),u.Ac("ngIf",t.workOrderSpares.spareSkus.length>1)}}function It(t,e){1&t&&u.fc(0,"div",3)}function At(t,e){if(1&t){const t=u.lc();u.kc(0,"button",20,21),u.rc("keyup",function(e){u.Ic(t);return u.vc(4).handleSearchResultKeyUp(e)})("click",function(){u.Ic(t);const n=e.$implicit;return u.vc(4).handleSearchResultClick(n)}),u.Pc(2),u.jc()}if(2&t){const t=e.$implicit;u.Ub("data-sparesname",t.sparesGroupName),u.Tb(2),u.Sc(" ",t.id," - ",t.description," ")}}function Tt(t,e){if(1&t&&(u.kc(0,"div",18),u.Oc(1,At,3,3,"button",19),u.jc()),2&t){const t=u.vc(3);u.Tb(1),u.Ac("ngForOf",t.searchResults)}}function Ft(t,e){1&t&&(u.kc(0,"div",22),u.Pc(1," No spares found "),u.jc())}function Wt(t,e){1&t&&(u.kc(0,"div",23),u.fc(1,"div",3),u.jc())}function Dt(t,e){if(1&t&&(u.kc(0,"div"),u.Oc(1,Tt,2,1,"div",15),u.Oc(2,Ft,2,0,"div",16),u.Oc(3,Wt,2,0,"div",17),u.jc()),2&t){const t=u.vc(2);u.Tb(1),u.Ac("ngIf",!t.isSearching),u.Tb(1),u.Ac("ngIf",0===t.searchResults.length&&!t.isSearching),u.Tb(1),u.Ac("ngIf",t.isSearching)}}function Lt(t,e){if(1&t&&(u.kc(0,"option",24),u.Pc(1),u.jc()),2&t){const t=e.$implicit;u.Ac("value",t.value),u.Tb(1),u.Rc(" ",t.label," ")}}function Et(t,e){1&t&&(u.kc(0,"div",25),u.Pc(1," No spares added to this work order. "),u.jc())}function Ut(t,e){if(1&t){const t=u.lc();u.kc(0,"app-spares-skus",28),u.rc("isSkuDeleted",function(n){u.Ic(t);const i=e.index;return u.vc(3).handleDeleteSparesSku(n,i)})("handlesQtyChange",function(n){u.Ic(t);const i=e.index;return u.vc(3).handleSkuQtyChange(n,i)})("isQtyInValid",function(e){u.Ic(t);return u.vc(3).handleInValidQty(e)}),u.jc()}if(2&t){const t=e.$implicit,n=u.vc(3);u.Ac("sparesSku",t)("isEditable",n.isEditable)}}function Rt(t,e){if(1&t&&(u.kc(0,"div"),u.kc(1,"table"),u.kc(2,"thead"),u.kc(3,"th"),u.Pc(4,"Name"),u.jc(),u.kc(5,"th"),u.Pc(6,"UOM"),u.jc(),u.kc(7,"th"),u.Pc(8,"Quantity"),u.jc(),u.fc(9,"th"),u.jc(),u.kc(10,"tbody"),u.Oc(11,Ut,1,2,"app-spares-skus",26),u.kc(12,"tr",27),u.fc(13,"td"),u.fc(14,"td"),u.fc(15,"td"),u.fc(16,"td"),u.jc(),u.jc(),u.jc(),u.jc()),2&t){const t=u.vc(2);u.Tb(11),u.Ac("ngForOf",t.workOrderSpares.spareSkus)}}function Vt(t,e){if(1&t){const t=u.lc();u.kc(0,"div"),u.kc(1,"form",4),u.kc(2,"div",5),u.kc(3,"div",6),u.kc(4,"div",7),u.kc(5,"div",8),u.kc(6,"input",9),u.rc("blur",function(){u.Ic(t);return u.vc().handleSearchBlur()})("keyup",function(e){u.Ic(t);return u.vc().handleSearchKeyUp(e)}),u.jc(),u.fc(7,"input",10),u.Oc(8,Dt,4,3,"div",1),u.jc(),u.jc(),u.jc(),u.kc(9,"div",6),u.kc(10,"select",11),u.kc(11,"option",12),u.Pc(12,"All Spare Group"),u.jc(),u.Oc(13,Lt,2,2,"option",13),u.jc(),u.jc(),u.jc(),u.Oc(14,Et,2,0,"div",14),u.Oc(15,Rt,17,1,"div",1),u.jc(),u.jc()}if(2&t){const t=u.vc();u.Tb(1),u.Ac("formGroup",t.searchForm),u.Tb(7),u.Ac("ngIf",t.searchResultsVisible),u.Tb(3),u.Ac("value",t.allSpareGroupOption),u.Tb(2),u.Ac("ngForOf",t.sparesGroupOptions),u.Tb(1),u.Ac("ngIf",!t.workOrderSpares||!t.workOrderSpares.spareSkus||0===t.workOrderSpares.spareSkus.length),u.Tb(1),u.Ac("ngIf",t.workOrderSpares&&t.workOrderSpares.spareSkus&&t.workOrderSpares.spareSkus.length>0)}}function Nt(t,e){1&t&&(u.kc(0,"span"),u.Pc(1,"Save picked list"),u.jc())}function qt(t,e){1&t&&u.fc(0,"div",32)}function zt(t,e){if(1&t){const t=u.lc();u.kc(0,"footer"),u.kc(1,"div",29),u.kc(2,"button",30),u.rc("click",function(){u.Ic(t);return u.vc().handleUpdateSpares()}),u.Oc(3,Nt,2,0,"span",1),u.Oc(4,qt,1,0,"div",31),u.jc(),u.jc(),u.jc()}if(2&t){const t=u.vc();u.Tb(1),u.Wb("visible",t.showSaveButton),u.Tb(1),u.Ac("disabled",t.isQtyFormInvalid),u.Tb(1),u.Ac("ngIf",!t.isUpdatingSpares),u.Tb(1),u.Ac("ngIf",t.isUpdatingSpares)}}class Bt{constructor(t,e,n,i,c,o){this.formBuilder=t,this.skuService=e,this.workOrderService=n,this.toastService=i,this.authenticationService=c,this.workOrderWizard=o,this.allSpareGroupOption="",this.sparesGroupOptions=[],this.sparesGroups=[],this.WorkOrderStatus=d.z,this.isLoading=!0,this.showSaveButton=!1,this.isUpdatingSpares=!1,this.isSparesSelected=!1,this.searchResultsVisible=!1,this.searchResults=[],this.isSearching=!1,this.isGettingUserRights=!0,this.isQtyFormInvalid=!1,this.workOrderStatus=this.workOrderWizard.workOrder.status.toString(),this.wordOrderNumber=this.workOrderWizard.workOrder.number.toString(),this.viewWorkOrderForId(),this.getSpares(this.wordOrderNumber)}ngOnInit(){this.getSearchGroupOptions()}viewWorkOrderForId(){const t=this.workOrderWizard.workOrder.number.toString();this.workOrderService.viewWorkOrderForId(t).subscribe(t=>{this.extendedWorkOrder=t,this.checkUserEditRights()})}searchSpares(){this.searchSparesSubscription&&!this.searchSparesSubscription.closed&&this.searchSparesSubscription.unsubscribe();const t=this.searchForm.get("text").value;!1===this.isSparesSelected&&(this.isSearching=!0,this.searchResultsVisible=!0,this.searchSparesSubscription=this.skuService.getSkuStockForSpares(this.searchForm.get("sparesGroup").value,t).subscribe(t=>{this.searchResults=t,this.isSearching=!1}))}getSearchGroupOptions(){this.skuService.getSparesGroups().subscribe(t=>{this.sparesGroups=t,this.sparesGroups.map(t=>{var e;this.sparesGroupOptions.push({label:(e=t.name,(e=e.toLocaleLowerCase()).replace(/(?:^\w|[A-Z]|\b\w)/g,function(t){return t.toUpperCase()}).replace(/\s+/g," ")),value:t.groupId+"~"+t.subGroupId})}),this.isLoading=!1})}handleDeleteSparesSku(t,e){this.showSaveButton=!0,t&&this.workOrderSpares.spareSkus.splice(e,1)}getSpares(t){this.workOrderService.getWorkOrderSpares(t).subscribe(t=>{const e=[];t.spareSkus.forEach(t=>{if(t){const n=t.sku.quantities.inStock,i=t.quantity;t.sku.quantities.inStock=n+i,e.push(t)}}),this.workOrderSpares={siteId:t.siteId,workOrderNumber:t.workOrderNumber,spareSkus:e}})}handleSkuQtyChange(t,e){this.workOrderSpares.spareSkus[e].quantity=t,this.workOrderSpares.spareSkus.forEach(t=>{t.quantity>t.sku.quantities.inStock?this.showSaveButton=!1:this.showSaveButton=!0})}handleUpdateSpares(){this.isUpdatingSpares=!0,this.workOrderService.updateWorkOrderSpares(this.workOrderSpares).subscribe(t=>{this.workOrderSpares=t,this.isUpdatingSpares=!1,this.showSaveButton=!1,this.toastService.showToast(new d.u("Updated spares for this work order."))},t=>{this.toastService.showErrorToast("Unable to update spares."),this.isUpdatingSpares=!1,this.showSaveButton=!1})}clearSearchForm(){this.searchForm.get("text").setValue(""),this.searchForm.get("spares").setValue(null),this.searchResultsVisible=!1}handleSearchKeyUp(t){switch(this.isSparesSelected=!1,t.key){case"ArrowDown":const t=this.searchResultElements.toArray();t.length>0&&t[0].nativeElement.focus();break;case"Escape":this.clearSearchForm()}}sparesNameIsInSearchResults(t){let e=!1;for(const n of this.searchResults)n.id+" - "+n.description===t&&(e=!0);return e}handleSearchBlur(){setTimeout(()=>{const t=this.searchForm.get("text").value,e=document.activeElement;this.sparesNameIsInSearchResults(t)||e.dataset.sparesname||this.clearSearchForm()},0)}handleSearchResultKeyUp(t){switch(t.key){case"ArrowUp":const e=this.searchResultElements.toArray()[0].nativeElement;t.target===e?this.searchInputElement.nativeElement.focus():t.target.previousSibling.focus();break;case"ArrowDown":t.target.nextSibling&&t.target.nextSibling.focus();break;case"Escape":this.clearSearchForm()}}handleSearchResultClick(t){return 0!==this.workOrderSpares.spareSkus.filter(e=>e.sku.id===t.id).length?(this.toastService.showErrorToast(`Item ${t.id} Spare already selected`),this.clearSearchForm(),this.searchResultsVisible=!1,void(this.isSparesSelected=!0)):0===t.quantities.inStock?(this.toastService.showErrorToast(`Item ${t.id} does not have stock`),this.clearSearchForm(),this.searchResultsVisible=!1,void(this.isSparesSelected=!0)):(this.workOrderSpares.spareSkus.push({sku:t,quantity:t.quantities.inStock>0?1:0}),this.clearSearchForm(),this.searchResultsVisible=!1,this.isSparesSelected=!0,void(this.showSaveButton=!0))}checkUserEditRights(){this.isGettingUserRights=!0;this.authenticationService.currentUserProfile$.pipe(Object(M.a)(t=>t)).subscribe(t=>{this.authenticationService.currentUserHasPermission({[d.l.WorkOrders]:[d.y.CanEditWorkOrder]}).subscribe(e=>{t.userRole.groupName!==d.q.Technician?this.isEditable=e&&Number(this.workOrderStatus)!==d.z.Closed:this.isEditable=e&&Number(this.workOrderStatus)!==d.z.Closed&&Number(this.workOrderStatus)!==d.z.Complete,this.isGettingUserRights=!1})}),this.searchForm=this.formBuilder.group({text:new c.e({value:"",disabled:!this.isEditable}),spares:null,sparesGroup:new c.e({value:this.allSpareGroupOption,disabled:!this.isEditable})}),this.searchForm.get("text").valueChanges.pipe(Object(h.a)(700),Object(p.a)(t=>t.length>=3),Object(p.a)(t=>!this.sparesNameIsInSearchResults(t))).subscribe(()=>this.searchSpares())}handleInValidQty(t){this.isQtyFormInvalid=t}}Bt.\u0275fac=function(t){return new(t||Bt)(u.ec(c.d),u.ec(d.s),u.ec(d.A),u.ec(d.v),u.ec(d.d),u.ec(m))},Bt.\u0275cmp=u.Yb({type:Bt,selectors:[["app-pick-workorder-spares"]],viewQuery:function(t,e){if(1&t&&(u.Tc(xt,1),u.Tc(yt,1)),2&t){let t;u.Fc(t=u.sc())&&(e.searchInputElement=t.first),u.Fc(t=u.sc())&&(e.searchResultElements=t)}},decls:8,vars:6,consts:[[3,"customCurrentPageTitle"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"spinner"],[1,"search-form",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"find-as-you-type","input-with-search-wrapper"],["type","text","formControlName","text","placeholder","Search spares by id or name",1,"form-control","form-control--search-prefix",3,"blur","keyup"],["formControlName","spares","type","hidden"],["formControlName","sparesGroup",1,"custom-select"],["default","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","text-center mt-5",4,"ngIf"],["class","find-as-you-type__results",4,"ngIf"],["class","find-as-you-type__no-results mt-2",4,"ngIf"],["class","find-as-you-type__spinner-container",4,"ngIf"],[1,"find-as-you-type__results"],["class","select-spares-btn",3,"keyup","click",4,"ngFor","ngForOf"],[1,"select-spares-btn",3,"keyup","click"],["searchResult",""],[1,"find-as-you-type__no-results","mt-2"],[1,"find-as-you-type__spinner-container"],[3,"value"],[1,"text-center","mt-5"],[3,"sparesSku","isEditable","isSkuDeleted","handlesQtyChange","isQtyInValid",4,"ngFor","ngForOf"],[1,"non-sku-row"],[3,"sparesSku","isEditable","isSkuDeleted","handlesQtyChange","isQtyInValid"],[1,"form-actions"],[1,"btn","btn-primary","btn-block","col-12",3,"disabled","click"],["class","spinner light",4,"ngIf"],[1,"spinner","light"]],template:function(t,e){1&t&&(u.fc(0,"app-section-header",0),u.kc(1,"h1"),u.Pc(2),u.Oc(3,jt,4,2,"span",1),u.jc(),u.Oc(4,It,1,0,"div",2),u.Oc(5,Vt,16,6,"div",1),u.kc(6,"article"),u.Oc(7,zt,5,5,"footer",1),u.jc()),2&t&&(u.Ac("customCurrentPageTitle","Pick Spares"),u.Tb(2),u.Rc(" Picking spares for WO",e.wordOrderNumber," "),u.Tb(1),u.Ac("ngIf",e.workOrderSpares&&e.workOrderSpares.spareSkus&&e.workOrderSpares.spareSkus.length>0),u.Tb(1),u.Ac("ngIf",e.isLoading||e.isGettingUserRights),u.Tb(1),u.Ac("ngIf",!e.isLoading&&!e.isGettingUserRights),u.Tb(2),u.Ac("ngIf",e.showSaveButton))},directives:[f.a,i.k,c.w,c.n,c.g,c.c,c.m,c.f,c.u,c.q,c.x,i.j,wt],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}.search-form[_ngcontent-%COMP%]{padding-bottom:1.5em;margin-bottom:1.5em}.search-form[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%], .search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;font-size:1rem;font-weight:400;line-height:1.5;height:calc(1.5em + 1.5rem + 2px)}.search-form[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{display:inline-block;width:100%;color:#495057;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}@media screen and (max-width:768px){.search-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-bottom:1em}}table[_ngcontent-%COMP%]{width:100%;margin-top:2em}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.875em;text-align:center}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40%;text-align:left;padding-left:14px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:20%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:4%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:last-child){background-color:#f2f2f2;line-height:1.1}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:last-child)   td[_ngcontent-%COMP%]{padding:.8em;text-align:center;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff}table[_ngcontent-%COMP%]   .non-sku-row[_ngcontent-%COMP%]{line-height:1.1}table[_ngcontent-%COMP%]   .non-sku-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em;text-align:center;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff}@media screen and (max-width:768px){table[_ngcontent-%COMP%]{margin-top:1em}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:block}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){display:none}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:60%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:40%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block}}footer[_ngcontent-%COMP%]{position:fixed;z-index:1;bottom:0;padding:2em;left:7.9em;width:calc(100% - 7.9em);background-color:#f2f2f2;box-shadow:0 0 3px #c3c3c3;transition:all .2s ease-out}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width:800px){footer[_ngcontent-%COMP%]{left:0;width:100%}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.3rem}}.find-as-you-type[_ngcontent-%COMP%]{position:relative;z-index:5}.find-as-you-type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.find-as-you-type__no-results[_ngcontent-%COMP%], .find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .find-as-you-type__spinner-container[_ngcontent-%COMP%]{padding:.8em 1.2em;background-color:#f2f2f2;border:1px solid #ced4da;display:block}.find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;text-align:left}.find-as-you-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(106,149,91,.25);position:relative;background-color:#fff;z-index:5}.find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.find-as-you-type[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto}.find-as-you-type--suggestions-visible[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}  .nav-expanded.nav-expanded.nav-expanded app-pick-workorder-spares article footer{left:20em;width:calc(100% - 20em)}@media screen and (max-width:480px){  .nav-expanded.nav-expanded.nav-expanded app-pick-workorder-spares article footer{left:0;width:0;z-index:1}}"]});var Qt=n("FtGj"),Gt=n("FKr1"),$t=n("8LU1"),Kt=n("nLfN"),Zt=n("R1ws"),Ht=n("XNiG"),Yt=n("VRyK"),Xt=n("IzEk"),Jt=n("1G5W"),te=n("JX91"),ee=n("u47x"),ne=n("cH1L"),ie=n("0EQZ");const ce=new u.B("MatChipRemove"),oe=new u.B("MatChipAvatar"),re=new u.B("MatChipTrailingIcon");const se=Object(Gt.o)(Object(Gt.k)(Object(Gt.l)(class{constructor(t){this._elementRef=t}}),"primary"),-1);class ae{}ae.\u0275fac=function(t){return new(t||ae)},ae.\u0275dir=u.Zb({type:ae,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:[1,"mat-chip-avatar"],features:[u.Sb([{provide:oe,useExisting:ae}])]});class le{}le.\u0275fac=function(t){return new(t||le)},le.\u0275dir=u.Zb({type:le,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:[1,"mat-chip-trailing-icon"],features:[u.Sb([{provide:re,useExisting:le}])]});class de extends se{constructor(t,e,n,i,c,o,r,s){super(t),this._elementRef=t,this._ngZone=e,this._changeDetectorRef=c,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new Ht.a,this._onBlur=new Ht.a,this.selectionChange=new u.t,this.destroyed=new u.t,this.removed=new u.t,this._addHostClassName(),this._chipRippleTarget=o.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new Gt.j(this,e,this._chipRippleTarget,n),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=i||{},this._animationsDisabled="NoopAnimations"===r,this.tabIndex=null!=s&&parseInt(s)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=Object($t.b)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Object($t.b)(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Object($t.b)(t)}get removable(){return this._removable}set removable(t){this._removable=Object($t.b)(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case Qt.c:case Qt.b:this.remove(),t.preventDefault();break;case Qt.n:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(Object(Xt.a)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}de.\u0275fac=function(t){return new(t||de)(u.ec(u.r),u.ec(u.M),u.ec(Kt.a),u.ec(Gt.d,8),u.ec(u.j),u.ec(i.c),u.ec(Zt.a,8),u.pc("tabindex"))},de.\u0275dir=u.Zb({type:de,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,n){if(1&t&&(u.Xb(n,oe,1),u.Xb(n,re,1),u.Xb(n,ce,1)),2&t){let t;u.Fc(t=u.sc())&&(e.avatar=t.first),u.Fc(t=u.sc())&&(e.trailingIcon=t.first),u.Fc(t=u.sc())&&(e.removeIcon=t.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&u.rc("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(u.Ub("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),u.Wb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[u.Qb]}),de.ctorParameters=()=>[{type:u.r},{type:u.M},{type:Kt.a},{type:void 0,decorators:[{type:u.N},{type:u.y,args:[Gt.d]}]},{type:u.j},{type:void 0,decorators:[{type:u.y,args:[i.c]}]},{type:String,decorators:[{type:u.N},{type:u.y,args:[Zt.a]}]},{type:String,decorators:[{type:u.h,args:["tabindex"]}]}],de.propDecorators={avatar:[{type:u.n,args:[oe]}],trailingIcon:[{type:u.n,args:[re]}],removeIcon:[{type:u.n,args:[ce]}],selected:[{type:u.D}],value:[{type:u.D}],selectable:[{type:u.D}],disabled:[{type:u.D}],removable:[{type:u.D}],selectionChange:[{type:u.O}],destroyed:[{type:u.O}],removed:[{type:u.O}]};class he{constructor(t,e){this._parentChip=t,"BUTTON"===e.nativeElement.nodeName&&e.nativeElement.setAttribute("type","button")}_handleClick(t){const e=this._parentChip;e.removable&&!e.disabled&&e.remove(),t.stopPropagation()}}he.\u0275fac=function(t){return new(t||he)(u.ec(de),u.ec(u.r))},he.\u0275dir=u.Zb({type:he,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,e){1&t&&u.rc("click",function(t){return e._handleClick(t)})},features:[u.Sb([{provide:ce,useExisting:he}])]}),he.ctorParameters=()=>[{type:de},{type:u.r}];const pe=new u.B("mat-chips-default-options");const ge=Object(Gt.n)(class{constructor(t,e,n,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i}});let ue=0;class me{constructor(t,e){this.source=t,this.value=e}}class fe extends ge{constructor(t,e,n,i,c,o,r){super(o,i,c,r),this._elementRef=t,this._changeDetectorRef=e,this._dir=n,this.ngControl=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new Ht.a,this._uid="mat-chip-list-"+ue++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(t,e)=>t===e,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new u.t,this.valueChange=new u.t,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Object($t.b)(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=Object($t.b)(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Object($t.b)(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Object($t.b)(t),this.chips&&this.chips.forEach(t=>t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return Object(Yt.a)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return Object(Yt.a)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return Object(Yt.a)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return Object(Yt.a)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new ee.e(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(Jt.a)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Object(Jt.a)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Object(te.a)(null),Object(Jt.a)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new ie.b(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const e=t.target;t.keyCode===Qt.b&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_isInputEmpty(t){if(t&&"input"===t.nodeName.toLowerCase()){return!t.value}return!1}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=>t.deselect()),Array.isArray(t))t.forEach(t=>this._selectValue(t,e)),this._sortValues();else{const n=this._selectValue(t,e);n&&e&&this._keyManager.setActiveItem(n)}}_selectValue(t,e=!0){const n=this.chips.find(e=>null!=e.value&&this._compareWith(e.value,t));return n&&(e?n.selectViaInteraction():n.select(),this._selectionModel.select(n)),n}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=>{e!==t&&e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new me(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&&this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const e=t.chip,n=this.chips.toArray().indexOf(t.chip);this._isValidIndex(n)&&e._hasFocus&&(this._lastDestroyedChipIndex=n)})}_originatesFromChip(t){let e=t.target;for(;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}fe.\u0275fac=function(t){return new(t||fe)(u.ec(u.r),u.ec(u.j),u.ec(ne.b,8),u.ec(c.o,8),u.ec(c.g,8),u.ec(Gt.b),u.ec(c.l,10))},fe.\u0275cmp=u.Yb({type:fe,selectors:[["mat-chip-list"]],contentQueries:function(t,e,n){if(1&t&&u.Xb(n,de,1),2&t){let t;u.Fc(t=u.sc())&&(e.chips=t)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&u.rc("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(u.nc("id",e._uid),u.Ub("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),u.Wb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[u.Sb([{provide:S.c,useExisting:fe}]),u.Qb],ngContentSelectors:["*"],decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(u.zc(),u.kc(0,"div",0),u.yc(1),u.jc())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),fe.ctorParameters=()=>[{type:u.r},{type:u.j},{type:ne.b,decorators:[{type:u.N}]},{type:c.o,decorators:[{type:u.N}]},{type:c.g,decorators:[{type:u.N}]},{type:Gt.b},{type:c.l,decorators:[{type:u.N},{type:u.Y}]}],fe.propDecorators={errorStateMatcher:[{type:u.D}],multiple:[{type:u.D}],compareWith:[{type:u.D}],value:[{type:u.D}],required:[{type:u.D}],placeholder:[{type:u.D}],disabled:[{type:u.D}],ariaOrientation:[{type:u.D,args:["aria-orientation"]}],selectable:[{type:u.D}],tabIndex:[{type:u.D}],change:[{type:u.O}],valueChange:[{type:u.O}],chips:[{type:u.o,args:[de,{descendants:!0}]}]};let be=0;class ke{constructor(t,e){this._elementRef=t,this._defaultOptions=e,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new u.t,this.placeholder="",this.id="mat-chip-list-input-"+be++,this._disabled=!1,this._inputElement=this._elementRef.nativeElement}set chipList(t){t&&(this._chipList=t,this._chipList.registerInput(this))}get addOnBlur(){return this._addOnBlur}set addOnBlur(t){this._addOnBlur=Object($t.b)(t)}get disabled(){return this._disabled||this._chipList&&this._chipList.disabled}set disabled(t){this._disabled=Object($t.b)(t)}get empty(){return!this._inputElement.value}ngOnChanges(){this._chipList.stateChanges.next()}_keydown(t){t&&t.keyCode===Qt.o&&!Object(Qt.s)(t,"shiftKey")&&this._chipList._allowFocusEscape(),this._emitChipEnd(t)}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}_focus(){this.focused=!0,this._chipList.stateChanges.next()}_emitChipEnd(t){!this._inputElement.value&&t&&this._chipList._keydown(t),t&&!this._isSeparatorKey(t)||(this.chipEnd.emit({input:this._inputElement,value:this._inputElement.value}),t&&t.preventDefault())}_onInput(){this._chipList.stateChanges.next()}focus(t){this._inputElement.focus(t)}_isSeparatorKey(t){return!Object(Qt.s)(t)&&new Set(this.separatorKeyCodes).has(t.keyCode)}}ke.\u0275fac=function(t){return new(t||ke)(u.ec(u.r),u.ec(pe))},ke.\u0275dir=u.Zb({type:ke,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(t,e){1&t&&u.rc("keydown",function(t){return e._keydown(t)})("blur",function(){return e._blur()})("focus",function(){return e._focus()})("input",function(){return e._onInput()}),2&t&&(u.nc("id",e.id),u.Ub("disabled",e.disabled||null)("placeholder",e.placeholder||null)("aria-invalid",e._chipList&&e._chipList.ngControl?e._chipList.ngControl.invalid:null)("aria-required",e._chipList&&e._chipList.required||null))},inputs:{separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[u.Rb]}),ke.ctorParameters=()=>[{type:u.r},{type:void 0,decorators:[{type:u.y,args:[pe]}]}],ke.propDecorators={chipList:[{type:u.D,args:["matChipInputFor"]}],addOnBlur:[{type:u.D,args:["matChipInputAddOnBlur"]}],separatorKeyCodes:[{type:u.D,args:["matChipInputSeparatorKeyCodes"]}],chipEnd:[{type:u.O,args:["matChipInputTokenEnd"]}],placeholder:[{type:u.D}],id:[{type:u.D}],disabled:[{type:u.D}]};const Oe={separatorKeyCodes:[Qt.f]};class Ce{}function _e(t,e){if(1&t){const t=u.lc();u.kc(0,"span"),u.Pc(1),u.kc(2,"a",10),u.rc("click",function(){u.Ic(t);return u.vc(2).handleViewMoreClick()}),u.Pc(3,"View More"),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Tb(1),u.Rc("",t.taskItem.description.substring(0,t.textMaxLength-10),"... ")}}function ve(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.jc()),2&t){const t=u.vc(2);u.Tb(1),u.Qc(t.taskItem.description)}}function Pe(t,e){if(1&t){const t=u.lc();u.kc(0,"span"),u.Pc(1),u.kc(2,"a",10),u.rc("click",function(){u.Ic(t);return u.vc(2).handleViewMoreClick()}),u.fc(3,"br"),u.Pc(4," View Less"),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Tb(1),u.Rc("",t.taskItem.description," ")}}function Me(t,e){if(1&t&&(u.kc(0,"table",2),u.kc(1,"tbody"),u.kc(2,"tr"),u.kc(3,"td",3),u.kc(4,"span"),u.Pc(5),u.jc(),u.jc(),u.kc(6,"td",4),u.Oc(7,_e,4,1,"span",5),u.Oc(8,ve,2,1,"span",5),u.Oc(9,Pe,5,1,"span",5),u.jc(),u.kc(10,"td",6),u.kc(11,"div",7),u.kc(12,"label",8),u.fc(13,"input",9),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc()),2&t){const t=u.vc();u.Tb(5),u.Qc(t.taskItem.sequenceNumber),u.Tb(2),u.Ac("ngIf",t.taskItem.description.length>t.textMaxLength&&!t.isViewTaskItemDetail),u.Tb(1),u.Ac("ngIf",t.taskItem.description.length<=t.textMaxLength),u.Tb(1),u.Ac("ngIf",t.isViewTaskItemDetail)}}Ce.\u0275fac=function(t){return new(t||Ce)},Ce.\u0275mod=u.cc({type:Ce}),Ce.\u0275inj=u.bc({providers:[Gt.b,{provide:pe,useValue:Oe}],imports:[[Gt.e]]});const we=function(t){return{"addtask-wrapper":t}};class xe{constructor(){this.textMaxLength=90,this.isViewTaskItemDetail=!1}ngOnInit(){}handleViewMoreClick(){this.isViewTaskItemDetail=!this.isViewTaskItemDetail}}xe.\u0275fac=function(t){return new(t||xe)},xe.\u0275cmp=u.Yb({type:xe,selectors:[["app-pick-task-item"]],inputs:{taskItem:"taskItem",firstItem:"firstItem"},decls:2,vars:4,consts:[[3,"ngClass"],["width","100%",4,"ngIf"],["width","100%"],[1,"task-id-cell"],[1,"task-description-cell"],[4,"ngIf"],[1,"task-iscompleted-cell"],[1,"form-group"],["for","includeObsolete",1,"custom-control-label","label-align"],["disabled","","type","checkbox",1,"custom-control-input"],[1,"clickView",3,"click"]],template:function(t,e){1&t&&(u.fc(0,"div",0),u.Oc(1,Me,14,4,"table",1)),2&t&&(u.Ac("ngClass",u.Ec(2,we,e.firstItem)),u.Tb(1),u.Ac("ngIf",e.taskItem))},directives:[i.i,i.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}[_nghost-%COMP%]{display:table-row;background-color:#f2f2f2;line-height:1.1;position:relative}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:-1em}@media screen and (max-width:768px){[_nghost-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em 1.3em .8em .8em;text-align:center;vertical-align:middle;border-bottom:2px solid #fff;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:center;width:13%;line-height:32px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:78%;line-height:32px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){font-weight:600;width:20%;line-height:32px}@media screen and (max-width:768px){.delete-row-cell[_ngcontent-%COMP%]{left:102%}[_nghost-%COMP%]{margin-bottom:0;display:flex;align-items:center;border-bottom:none}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em .5em .8em .1em;text-align:center;vertical-align:middle;border-bottom:2px solid #fff;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:center;width:13%;line-height:32px;padding-right:0}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:77%;line-height:32px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){font-weight:600;width:20%;line-height:32px}}.task-id-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:30px}@media screen and (max-width:768px){.task-id-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:auto;line-height:22px;align-items:center;border-right:0 solid #c3bbbb}}.task-description-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-right:1px solid #c3bbbb;border-left:1px solid #c3bbbb;display:block;min-height:30px;padding:0 1em}@media screen and (max-width:768px){.task-description-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:auto;line-height:22px;display:flex;padding-left:5px;border-left:1px solid #c3bbbb}}.addtask-wrapper[_ngcontent-%COMP%]{box-shadow:1px 4px 3px hsla(0,1%,86%,.75);margin-top:27px;width:100%;display:block;clear:both;float:left;height:5px;top:-18px;position:absolute}@media screen and (max-width:768px){.addtask-wrapper[_ngcontent-%COMP%]{top:-41px}}.custom-control-input[_ngcontent-%COMP%]{height:19px;width:19px;margin-top:10px}"]});const ye=["searchInput"],Se=["searchResult"];function je(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.jc()),2&t){const t=u.vc();u.Tb(1),u.Rc("(",t.itemCount," item)")}}function Ie(t,e){if(1&t&&(u.kc(0,"span"),u.Pc(1),u.jc()),2&t){const t=u.vc();u.Tb(1),u.Rc("(",t.itemCount," items)")}}function Ae(t,e){1&t&&u.fc(0,"div",4)}function Te(t,e){if(1&t){const t=u.lc();u.kc(0,"button",18,19),u.rc("keyup",function(e){u.Ic(t);return u.vc(4).handleSearchResultKeyUp(e)})("click",function(){u.Ic(t);const n=e.$implicit;return u.vc(4).handleSearchResultClick(n)}),u.Pc(2),u.jc()}if(2&t){const t=e.$implicit;u.Ub("data-checklisttaskname",t.name),u.Tb(2),u.Sc(" ",t.numberWithPrefix," - ",t.name," ")}}function Fe(t,e){if(1&t&&(u.kc(0,"div",16),u.Oc(1,Te,3,3,"button",17),u.jc()),2&t){const t=u.vc(3);u.Tb(1),u.Ac("ngForOf",t.searchResults)}}function We(t,e){1&t&&(u.kc(0,"div",20),u.Pc(1," No checklists found "),u.jc())}function De(t,e){1&t&&(u.kc(0,"div",21),u.fc(1,"div",4),u.jc())}function Le(t,e){if(1&t&&(u.kc(0,"div"),u.Oc(1,Fe,2,1,"div",13),u.Oc(2,We,2,0,"div",14),u.Oc(3,De,2,0,"div",15),u.jc()),2&t){const t=u.vc(2);u.Tb(1),u.Ac("ngIf",!t.isSearching),u.Tb(1),u.Ac("ngIf",0===t.searchResults.length&&!t.isSearching),u.Tb(1),u.Ac("ngIf",t.isSearching)}}function Ee(t,e){if(1&t&&(u.kc(0,"h2"),u.Pc(1),u.jc()),2&t){const t=u.vc().$implicit;u.Tb(1),u.Sc(" ",t.numberWithPrefix," - ",t.name," ")}}const Ue=function(t){return{"last-item":t}};function Re(t,e){if(1&t&&u.fc(0,"app-pick-task-item",39),2&t){const t=u.vc(),e=t.$implicit,n=t.first,i=t.last;u.Ac("taskItem",e)("firstItem",n)("ngClass",u.Ec(3,Ue,i))}}function Ve(t,e){if(1&t&&(u.uc(),u.tc(),u.kc(0,"div",37),u.Oc(1,Re,1,5,"app-pick-task-item",38),u.jc()),2&t){const t=u.vc().$implicit,e=u.vc(3);u.Tb(1),u.Ac("ngIf",t===e.expanded)}}const Ne=function(t){return{expanded:t}};function qe(t,e){if(1&t){const t=u.lc();u.kc(0,"div"),u.kc(1,"div",24),u.Oc(2,Ee,2,2,"h2",0),u.kc(3,"button",25),u.rc("click",function(){u.Ic(t);const n=e.$implicit;return u.vc(3).handleShowCheckListContent(n)}),u.kc(4,"div"),u.uc(),u.kc(5,"svg",26),u.fc(6,"path",27),u.jc(),u.jc(),u.jc(),u.tc(),u.kc(7,"div",28),u.kc(8,"button",29),u.rc("click",function(){u.Ic(t);const n=e.$implicit;return u.vc(3).handleDeleteCheckListItem(n)}),u.uc(),u.kc(9,"svg",30),u.fc(10,"defs"),u.fc(11,"path",31),u.fc(12,"path",32),u.fc(13,"path",33),u.fc(14,"path",34),u.fc(15,"path",35),u.jc(),u.jc(),u.jc(),u.Oc(16,Ve,2,1,"div",36),u.jc(),u.jc()}if(2&t){const t=e.$implicit,n=u.vc(3);u.Tb(2),u.Ac("ngIf",t&&t.name||t.numberWithPrefix),u.Tb(1),u.Ac("ngClass",u.Ec(3,Ne,t===n.expanded)),u.Tb(13),u.Ac("ngForOf",t.task)}}function ze(t,e){if(1&t&&(u.kc(0,"div",22),u.kc(1,"table"),u.kc(2,"tbody"),u.kc(3,"tr"),u.Oc(4,qe,17,5,"div",23),u.jc(),u.jc(),u.jc(),u.jc()),2&t){const t=u.vc(2);u.Tb(4),u.Ac("ngForOf",t.listCheckLists)}}function Be(t,e){if(1&t){const t=u.lc();u.kc(0,"div"),u.kc(1,"form",5),u.kc(2,"div",6),u.kc(3,"div"),u.kc(4,"div",7),u.kc(5,"div",8),u.kc(6,"input",9,10),u.rc("blur",function(){u.Ic(t);return u.vc().handleSearchBlur()})("keyup",function(e){u.Ic(t);return u.vc().handleSearchKeyUp(e)}),u.jc(),u.fc(8,"input",11),u.Oc(9,Le,4,3,"div",0),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.kc(10,"div"),u.Oc(11,ze,5,1,"div",12),u.jc(),u.jc()}if(2&t){const t=u.vc();u.Tb(1),u.Ac("formGroup",t.searchForm),u.Tb(4),u.Wb("find-as-you-type--suggestions-visible",t.isCheckListsSelected||t.searchResultsVisible),u.Tb(4),u.Ac("ngIf",t.searchResultsVisible),u.Tb(2),u.Ac("ngIf",t.listCheckLists.length>0)}}class Qe{constructor(t,e,n){this.formBuilder=t,this.checkListsService=e,this.toastService=n,this.isLoading=!1,this.isSearching=!1,this.searchResults=[],this.searchCheckListTaskResults=[],this.isCheckListsSelected=!1,this.searchResultsVisible=!1,this.listCheckLists=[],this.existingChecklists=[],this.addedCheckLists=new u.t,this.expanded=!1,this.searchForm=this.formBuilder.group({text:"",checkLists:null})}ngOnInit(){this.searchForm.get("text").valueChanges.pipe(Object(h.a)(700),Object(p.a)(t=>t.length>=2),Object(p.a)(t=>!this.checkListsNameIsInSearchResults(t))).subscribe(()=>{this.searchCheckLists()}),this.searchForm.get("text").valueChanges.pipe(Object(h.a)(700),Object(p.a)(t=>t.length<2)).subscribe(()=>this.searchResultsVisible=!1),this.listCheckLists.push(...this.existingChecklists)}checkListsNameIsInSearchResults(t){let e=!1;for(const n of this.searchResults)n.number+" - "+n.name===t&&(e=!0);return e}searchCheckLists(){this.searchCheckListsSubscription&&!this.searchCheckListsSubscription.closed&&this.searchCheckListsSubscription.unsubscribe();const t=this.searchForm.get("text").value;!1===this.isCheckListsSelected&&(this.isSearching=!0,this.searchResultsVisible=!0,this.searchCheckListsSubscription=this.checkListsService.getCheckListsList({offset:0,take:100,searchText:t,includeObsolete:!1}).subscribe(t=>{this.searchResults=[],t.forEach(t=>{const e={id:t.id,number:t.number,name:t.name,numberWithPrefix:t.numberWithPrefix};this.searchResults.push(e)}),this.isSearching=!1})),this.isLoading=!1}clearSearchForm(){this.searchForm.setValue({text:"",checkLists:null}),this.searchResultsVisible=!1}handleSearchBlur(){setTimeout(()=>{const t=this.searchForm.get("text").value,e=document.activeElement;this.checklistsTaskIsInSearchResults(t)||e.dataset.checklisttaskname||this.clearSearchForm()},0)}checklistsTaskIsInSearchResults(t){let e=!1;for(const n of this.searchResults)n.numberWithPrefix+" - "+n.name===t&&(e=!0);return e}handleSearchKeyUp(t){switch(this.isCheckListsSelected=!1,t.key){case"ArrowDown":const t=this.searchResultElements.toArray();t.length>0&&t[0].nativeElement.focus();break;case"Escape":this.clearSearchForm()}}handleSearchResultClick(t){setTimeout(()=>{if(!1===this.isCheckListsSelected){this.isSearching=!0,this.searchResultsVisible=!0;const e=t.number;this.searchValueSubscription&&!this.searchValueSubscription.closed&&this.searchValueSubscription.unsubscribe(),this.searchValueSubscription=this.checkListsService.viewCheckListForId(e).subscribe(e=>{if(0===this.listCheckLists.filter(t=>t.id===e.id).length)this.listCheckLists.push(e),this.isSearching=!1;else{let e=this.listCheckLists.filter(e=>e.id===t.id);this.toastService.showErrorToast(`${e[0].numberWithPrefix} Checklist already selected`)}}),this.isLoading=!1}this.clearSearchForm()},0)}handleSearchResultKeyUp(t){switch(t.key){case"ArrowUp":const e=this.searchResultElements.toArray()[0].nativeElement;t.target===e?this.searchInputElement.nativeElement.focus():t.target.previousSibling.focus();break;case"ArrowDown":t.target.nextSibling&&t.target.nextSibling.focus();break;case"Escape":this.clearSearchForm()}}addCheckLists(){this.addedCheckLists.emit(this.listCheckLists)}handleShowCheckListContent(t){this.expanded===t?this.expanded=null:this.expanded=t}handleDeleteCheckListItem(t){this.listCheckLists.splice(this.listCheckLists.indexOf(t),1)}}function Ge(t,e){1&t&&(u.kc(0,"div"),u.fc(1,"div",2),u.jc())}function $e(t,e){1&t&&(u.kc(0,"div",44),u.fc(1,"div",7),u.kc(2,"div",45),u.Pc(3," You must specify title "),u.jc(),u.jc())}function Ke(t,e){1&t&&(u.kc(0,"div",44),u.fc(1,"div",7),u.kc(2,"div",45),u.Pc(3," You must specify description "),u.jc(),u.jc())}function Ze(t,e){1&t&&(u.kc(0,"div",44),u.fc(1,"div",17),u.kc(2,"div",46),u.Pc(3," You must specify reported on date "),u.jc(),u.jc())}function He(t,e){1&t&&(u.kc(0,"div",44),u.fc(1,"div",17),u.kc(2,"div",46),u.Pc(3," You must specify due on date "),u.jc(),u.jc())}function Ye(t,e){1&t&&(u.kc(0,"div",44),u.fc(1,"div",17),u.kc(2,"div",46),u.Pc(3," You must specify category "),u.jc(),u.jc())}function Xe(t,e){if(1&t&&(u.kc(0,"option",47),u.Pc(1),u.jc()),2&t){const t=e.$implicit;u.Ac("value",t.id),u.Tb(1),u.Rc("",t.name," ")}}function Je(t,e){1&t&&(u.kc(0,"div",44),u.fc(1,"div",17),u.kc(2,"div",46),u.Pc(3," You must specify priority "),u.jc(),u.jc())}function tn(t,e){if(1&t&&(u.kc(0,"option",47),u.Pc(1),u.jc()),2&t){const t=e.$implicit,n=u.vc(2);u.Ac("value",t),u.Tb(1),u.Rc(" ",n.priorityString(t)," ")}}function en(t,e){1&t&&(u.kc(0,"div",48),u.kc(1,"div",15),u.kc(2,"div",49),u.fc(3,"label",17),u.kc(4,"div",50),u.Pc(5," You must specify an asset "),u.jc(),u.jc(),u.jc(),u.fc(6,"div",15),u.jc())}function nn(t,e){1&t&&(u.kc(0,"div",48),u.kc(1,"div",51),u.kc(2,"div",49),u.kc(3,"label",17),u.Pc(4,"Asset"),u.jc(),u.kc(5,"div",52),u.fc(6,"input",53),u.jc(),u.jc(),u.jc(),u.kc(7,"div",51),u.kc(8,"div",49),u.kc(9,"label",17),u.Pc(10,"Location"),u.jc(),u.kc(11,"div",54),u.fc(12,"input",55),u.uc(),u.kc(13,"svg",56),u.kc(14,"g",57),u.fc(15,"path",58),u.fc(16,"path",59),u.fc(17,"path",60),u.fc(18,"path",61),u.fc(19,"path",62),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc())}function cn(t,e){if(1&t){const t=u.lc();u.kc(0,"div",48),u.kc(1,"div",51),u.kc(2,"div",49),u.kc(3,"label",17),u.Pc(4,"Asset"),u.jc(),u.kc(5,"div",52),u.fc(6,"input",53),u.jc(),u.jc(),u.jc(),u.kc(7,"div",51),u.kc(8,"div",49),u.kc(9,"label",17),u.Pc(10,"Location"),u.jc(),u.kc(11,"div",54),u.fc(12,"input",55),u.kc(13,"button",63),u.rc("click",function(){u.Ic(t);const n=e.$implicit;return u.vc(2).handleDeleteAsset(n)}),u.uc(),u.kc(14,"svg",64),u.kc(15,"g",57),u.fc(16,"path",58),u.fc(17,"path",59),u.fc(18,"path",60),u.fc(19,"path",61),u.fc(20,"path",62),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc()}if(2&t){const t=e.$implicit;u.Tb(6),u.Ac("value",t.assetId+" - "+t.name),u.Tb(6),u.Ac("value",t.location)}}function on(t,e){if(1&t&&(u.kc(0,"mat-chip"),u.Pc(1),u.jc()),2&t){const t=e.$implicit;u.Tb(1),u.Qc(t.name)}}function rn(t,e){if(1&t){const t=u.lc();u.kc(0,"app-modal",65),u.rc("modalShouldClose",function(){u.Ic(t);return u.vc(2).handleDetailsModalClose()})("contextmenu",function(e){u.Ic(t);return u.vc(2).disableRightClick(e)}),u.kc(1,"app-pick-assets",66),u.rc("addedAssets",function(e){u.Ic(t);return u.vc(2).handleAddedWorkOrderAssets(e)}),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Tb(1),u.Ac("existingAssets",t.existingWorkOrderAssets)}}function sn(t,e){if(1&t){const t=u.lc();u.kc(0,"app-modal",65),u.rc("modalShouldClose",function(){u.Ic(t);return u.vc(2).handlePickCheckListsModalClose()})("contextmenu",function(e){u.Ic(t);return u.vc(2).disableRightClick(e)}),u.kc(1,"app-pick-check-lists",67),u.rc("addedCheckLists",function(e){u.Ic(t);return u.vc(2).handlePickWorkOrderCheckLists(e)}),u.jc(),u.jc()}if(2&t){const t=u.vc(2);u.Tb(1),u.Ac("existingChecklists",t.existingWorkOrderChecklists)}}function an(t,e){if(1&t){const t=u.lc();u.kc(0,"article"),u.kc(1,"header"),u.kc(2,"h1"),u.Pc(3,"Create Work Order"),u.jc(),u.jc(),u.kc(4,"form",3),u.kc(5,"div",4),u.Oc(6,$e,4,0,"div",5),u.kc(7,"div",6),u.kc(8,"div",7),u.kc(9,"label"),u.Pc(10,"Title"),u.jc(),u.jc(),u.kc(11,"div",8),u.fc(12,"input",9),u.jc(),u.jc(),u.Oc(13,Ke,4,0,"div",5),u.kc(14,"div",10),u.kc(15,"div",11),u.kc(16,"label"),u.Pc(17,"Description"),u.jc(),u.jc(),u.kc(18,"div",12),u.kc(19,"textarea",13),u.Pc(20,"          "),u.jc(),u.jc(),u.jc(),u.kc(21,"div",14),u.kc(22,"div",15),u.Oc(23,Ze,4,0,"div",5),u.kc(24,"div",16),u.kc(25,"label",17),u.Pc(26,"Reported On"),u.jc(),u.kc(27,"div",18),u.kc(28,"div",19),u.kc(29,"div",20),u.kc(30,"input",21),u.rc("dateChange",function(e){u.Ic(t);return u.vc().onDateChange(e)}),u.jc(),u.fc(31,"mat-datepicker-toggle",22),u.fc(32,"mat-datepicker",23,24),u.jc(),u.jc(),u.jc(),u.jc(),u.Oc(34,He,4,0,"div",5),u.kc(35,"div",16),u.kc(36,"label",17),u.Pc(37,"Due On"),u.jc(),u.kc(38,"div",18),u.kc(39,"div",19),u.kc(40,"div",20),u.fc(41,"input",25),u.fc(42,"mat-datepicker-toggle",22),u.fc(43,"mat-datepicker",23,26),u.jc(),u.jc(),u.jc(),u.jc(),u.kc(45,"div",16),u.kc(46,"label",17),u.Pc(47,"Assign To"),u.jc(),u.kc(48,"div",18),u.fc(49,"input",27),u.kc(50,"app-list-users",28),u.rc("selectedUserId",function(e){u.Ic(t);return u.vc().selectedUserId(e)}),u.jc(),u.jc(),u.jc(),u.jc(),u.kc(51,"div",15),u.Oc(52,Ye,4,0,"div",5),u.kc(53,"div",16),u.kc(54,"label",17),u.Pc(55,"Category"),u.jc(),u.kc(56,"div",18),u.kc(57,"select",29),u.Oc(58,Xe,2,2,"option",30),u.jc(),u.jc(),u.jc(),u.Oc(59,Je,4,0,"div",5),u.kc(60,"div",16),u.kc(61,"label",17),u.Pc(62,"Priority"),u.jc(),u.kc(63,"div",18),u.kc(64,"select",31),u.Oc(65,tn,2,2,"option",30),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.Oc(66,en,7,0,"div",32),u.Oc(67,nn,20,0,"div",32),u.Oc(68,cn,21,2,"div",33),u.kc(69,"div",34),u.kc(70,"button",35),u.rc("click",function(){u.Ic(t);return u.vc().handlePickAssets()}),u.Pc(71,"Add asset"),u.jc(),u.jc(),u.kc(72,"div",34),u.kc(73,"button",35),u.rc("click",function(){u.Ic(t);return u.vc().handlePickCheckLists()}),u.Pc(74,"Add Checklist"),u.jc(),u.jc(),u.kc(75,"div",10),u.kc(76,"div",36),u.kc(77,"label",37),u.Pc(78,"Checklists"),u.jc(),u.jc(),u.kc(79,"div",8),u.kc(80,"mat-form-field"),u.kc(81,"mat-chip-list",null,38),u.Oc(83,on,2,1,"mat-chip",39),u.kc(84,"input",40),u.rc("matChipInputTokenEnd",function(e){u.Ic(t);return u.vc().addCheckList(e)}),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.jc(),u.kc(85,"footer"),u.kc(86,"div",41),u.kc(87,"button",42),u.rc("click",function(){u.Ic(t);return u.vc().createWorkOrder()}),u.Pc(88," Save all changes "),u.jc(),u.jc(),u.jc(),u.jc(),u.Oc(89,rn,2,1,"app-modal",43),u.Oc(90,sn,2,1,"app-modal",43),u.jc()}if(2&t){const t=u.Gc(33),e=u.Gc(44),n=u.Gc(82),i=u.vc();u.Tb(4),u.Ac("formGroup",i.formCreateWorkOrder),u.Tb(2),u.Ac("ngIf",i.submitAttempted&&i.formCreateWorkOrder.controls.title.errors),u.Tb(7),u.Ac("ngIf",i.submitAttempted&&i.formCreateWorkOrder.controls.description.errors),u.Tb(10),u.Ac("ngIf",i.submitAttempted&&i.formCreateWorkOrder.controls.reportedOn.errors),u.Tb(7),u.Ac("matDatepicker",t),u.Tb(1),u.Ac("for",t),u.Tb(3),u.Ac("ngIf",i.submitAttempted&&i.formCreateWorkOrder.controls.dueDate.errors),u.Tb(7),u.Ac("matDatepicker",e)("min",i.minDueDate),u.Tb(1),u.Ac("for",e),u.Tb(10),u.Ac("ngIf",i.submitAttempted&&i.formCreateWorkOrder.controls.category.errors),u.Tb(6),u.Ac("ngForOf",i.workOrderCategories),u.Tb(1),u.Ac("ngIf",i.submitAttempted&&i.formCreateWorkOrder.controls.priority.errors),u.Tb(6),u.Ac("ngForOf",i.workOrderPriorities),u.Tb(1),u.Ac("ngIf",i.submitAttempted&&0===i.existingWorkOrderAssets.length),u.Tb(1),u.Ac("ngIf",0===i.existingWorkOrderAssets.length),u.Tb(1),u.Ac("ngForOf",i.existingWorkOrderAssets),u.Tb(15),u.Ac("ngForOf",i.checklists),u.Tb(1),u.Ac("matChipInputFor",n)("matChipInputAddOnBlur",!0),u.Tb(2),u.Wb("visible",i.formCreateWorkOrder.dirty||i.showSaveButton),u.Tb(3),u.Ac("ngIf",i.addAssetsModalVisible),u.Tb(1),u.Ac("ngIf",i.pickCheckListsModalVisible)}}Qe.\u0275fac=function(t){return new(t||Qe)(u.ec(c.d),u.ec(d.h),u.ec(d.v))},Qe.\u0275cmp=u.Yb({type:Qe,selectors:[["app-pick-check-lists"]],viewQuery:function(t,e){if(1&t&&(u.Tc(ye,1),u.Tc(Se,1)),2&t){let t;u.Fc(t=u.sc())&&(e.searchInputElement=t.first),u.Fc(t=u.sc())&&(e.searchResultElements=t)}},inputs:{existingChecklists:"existingChecklists"},outputs:{addedCheckLists:"addedCheckLists"},decls:10,vars:7,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"form-actions","done-btn"],[1,"btn","btn-primary","btn-block","col-12",3,"disabled","click"],[1,"spinner"],[1,"search-form",3,"formGroup"],[1,"row"],[1,"form-group"],[1,"find-as-you-type","input-with-search-wrapper"],["type","text","formControlName","text","placeholder","Search checklist by id or name",1,"form-control","form-control--search-prefix",3,"blur","keyup"],["searchInput",""],["formControlName","checkLists","type","hidden"],["class","checklist-wrapper",4,"ngIf"],["class","find-as-you-type__results",4,"ngIf"],["class","find-as-you-type__no-results",4,"ngIf"],["class","find-as-you-type__spinner-container",4,"ngIf"],[1,"find-as-you-type__results"],["class","select-lists-btn","type","button",3,"keyup","click",4,"ngFor","ngForOf"],["type","button",1,"select-lists-btn",3,"keyup","click"],["searchResult",""],[1,"find-as-you-type__no-results"],[1,"find-as-you-type__spinner-container"],[1,"checklist-wrapper"],[4,"ngFor","ngForOf"],[1,"title-block"],[1,"row-toggle","app-row-btn",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 8.797 5.194"],["d","M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z"],[1,"delete-row-cell"],[1,"delete-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 14 18"],["d","M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z","transform","translate(.2 1.267)",1,"cls-1"],["d","M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z",1,"cls-1"],["d","M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z","transform","translate(1.567 2)",1,"cls-1"],["d","M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z","transform","translate(.9 1.967)",1,"cls-1"],["d","M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z","transform","translate(2.125 1.991)",1,"cls-1"],["class","addtask-wrapper",4,"ngFor","ngForOf"],[1,"addtask-wrapper"],["class","addtask-expanded",3,"taskItem","firstItem","ngClass",4,"ngIf"],[1,"addtask-expanded",3,"taskItem","firstItem","ngClass"]],template:function(t,e){1&t&&(u.kc(0,"h1"),u.Pc(1,"Add / Remove Checklist "),u.Oc(2,je,2,1,"span",0),u.Oc(3,Ie,2,1,"span",0),u.jc(),u.Oc(4,Ae,1,0,"div",1),u.Oc(5,Be,12,5,"div",0),u.kc(6,"footer"),u.kc(7,"div",2),u.kc(8,"button",3),u.rc("click",function(){return e.addCheckLists()}),u.Pc(9," Done "),u.jc(),u.jc(),u.jc()),2&t&&(u.Tb(2),u.Ac("ngIf",1===e.itemCount),u.Tb(1),u.Ac("ngIf",e.itemCount>1),u.Tb(1),u.Ac("ngIf",e.isLoading),u.Tb(1),u.Ac("ngIf",!e.isLoading),u.Tb(2),u.Wb("visible",!0),u.Tb(1),u.Ac("disabled",0===e.listCheckLists.length))},directives:[i.k,c.w,c.n,c.g,c.c,c.m,c.f,i.j,i.i,xe],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}table[_ngcontent-%COMP%]{width:100%;position:relative}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-transform:uppercase}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8em}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:55%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:35%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{line-height:1.1}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f2f2f2;padding:.8em;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff}@media screen and (max-width:768px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:0}}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:1.6em 1em 1.5em;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);text-align:center}@media screen and (max-width:768px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{padding:1.8em 1em}}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:300px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{display:block;top:100%;width:100%;padding:.2em;height:2.1em;background-color:#6b6d6e}}footer[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{left:0!important;width:100%;background-color:#fff;box-shadow:none;padding:1rem 3rem 3rem!important;z-index:1}@media screen and (max-width:768px){footer[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem!important;box-shadow:none}}.search-form[_ngcontent-%COMP%]{margin-bottom:1.5em}.find-as-you-type[_ngcontent-%COMP%]{position:relative;z-index:5}.find-as-you-type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.find-as-you-type__no-results[_ngcontent-%COMP%], .find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .find-as-you-type__spinner-container[_ngcontent-%COMP%]{padding:.8em 1.2em;background-color:#f2f2f2;border:1px solid #ced4da;display:block}.find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;text-align:left}.find-as-you-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(106,149,91,.25);position:relative;background-color:#fff;z-index:5}.find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.find-as-you-type[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto}.find-as-you-type--suggestions-visible[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.check-list[_ngcontent-%COMP%]{margin-top:.6em;padding:0;list-style:none}.check-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff;background-color:#f2f2f2;line-height:1.1;padding:.8em}.check-list[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{background-color:#fff;padding:1em;height:3em;text-transform:uppercase;font-weight:600;display:flex}.check-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:1.6em 1em;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);text-align:center;height:100%}.check-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}.check-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}.check-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}.title-block[_ngcontent-%COMP%]{display:block;position:relative;padding:1em 0;background:#f2f2f2;border-radius:0;margin-top:.2rem}@media screen and (max-width:768px){.title-block[_ngcontent-%COMP%]{padding:0;margin-bottom:-5px}}.title-block[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;line-height:1.5em;padding-top:.75em;padding-left:.75em}@media screen and (max-width:768px){.title-block[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.85rem;width:81%;height:73px;display:flex;align-items:center}}.delete-row-cell[_ngcontent-%COMP%]{position:relative}.delete-row-cell[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0 auto;font-size:1.5em}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:-21px;left:103%;width:3%;height:100%;transition:all .2s ease-in-out;background-color:transparent}@media screen and (max-width:768px){.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{top:-42px;left:102%}}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.1)}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5;background-color:transparent}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;position:absolute;top:50%;left:50%;transition:all .2s ease-in-out}.delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}.checklist-wrapper[_ngcontent-%COMP%]{overflow-y:hidden;overflow:auto;height:362px;scrollbar-width:none;-ms-overflow-style:none}.checklist-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:94%!important}@media screen and (max-width:768px){.checklist-wrapper[_ngcontent-%COMP%]{height:auto;margin-top:31px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;background:transparent}.addtask-expanded[_ngcontent-%COMP%]{background:none;display:flex}  .taro-modal{max-width:45rem!important}  .last-item .task-description-cell,   .last-item .task-id-cell,   .last-item .task-iscompleted-cell{border:none!important}.expanded[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(180deg) translateY(.1em)}"]});class ln{constructor(t,e,n,i,c){this.formBuilder=t,this.workOrderService=e,this.toastService=n,this.router=i,this.workOrderWizard=c,this.isLoading=!1,this.workOrderPriorities=Object(v.b)(d.x),this.showSaveButton=!1,this.submitAttempted=!1,this.addAssetsModalVisible=!1,this.existingWorkOrderAssets=[],this.existingWorkOrderChecklists=[],this.minDueDate=new Date,this.todayDate=new Date,this.pickCheckListsModalVisible=!1,this.checklists=[]}ngOnInit(){this.createForm(),this.listCategory()}createForm(){(()=>{this.formCreateWorkOrder=this.formBuilder.group({title:["",c.v.compose([c.v.required,c.v.maxLength(50)])],description:["",c.v.compose([c.v.required,c.v.maxLength(4e3)])],category:["",c.v.required],reportedOn:[this.todayDate,c.v.required],dueDate:[null,c.v.required],priority:["",c.v.required],assignedToUser:["",c.v.compose([c.v.maxLength(50)])]})})()}createWorkOrder(){if(this.submitAttempted=!0,this.showSaveButton=!1,this.isLoading=!0,Object(i.q)(this.formCreateWorkOrder.value.dueDate,"yyyy-MM-dd","en-US")<Object(i.q)(this.formCreateWorkOrder.value.reportedOn,"yyyy-MM-dd","en-US")&&this.formCreateWorkOrder.controls.dueDate.setErrors({incorrect:!0}),0===this.existingWorkOrderAssets.length)return void(this.isLoading=!1);if(!this.formCreateWorkOrder.valid)return void(this.isLoading=!1);const t=this.existingWorkOrderAssets.map(t=>t.id),e=this.existingWorkOrderChecklists.map(t=>t.id),n=this.formCreateWorkOrder.value.assignedToUser,c=this.formCreateWorkOrder.value.title,o=this.formCreateWorkOrder.value.description,r=this.formCreateWorkOrder.value.priority,s=this.formCreateWorkOrder.value.category,a=Object(i.q)(this.formCreateWorkOrder.value.reportedOn,"yyyy-MM-ddThh:mm:ss","en-US"),l=Object(i.q)(this.formCreateWorkOrder.value.dueDate,"yyyy-MM-ddThh:mm:ss","en-US");this.workOrderService.createWorkOrder({assignedToUser:n,title:c,description:o,priorityId:r,categoryId:s,reportedOn:a,dueDate:l,workOrderAssets:t,workOrderChecklists:e}).subscribe(t=>{this.toastService.showToast(new d.u("Work order ("+t.workOrderNumber+") created successfully")),this.isLoading=!1,this.workOrderWizard.workOrder={id:t.id,number:t.number,status:t.status,assignedToUser:t.assignedToUser,dueDate:t.dueDate,createdTimestampUtc:t.createdTimestampUtc,lastUpdatedTimestampUtc:t.lastUpdatedTimestampUtc,title:t.title},this.router.navigate(["work-orders",t.number])},t=>{this.toastService.showErrorToast("Work Order not saved"),this.isLoading=!1}),this.isLoading=!1}selectedUserId(t){this.formCreateWorkOrder.get("assignedToUser").setValue(t),this.showSaveButton=!0}listCategory(){this.workOrderService.listWorkOrderCategory().subscribe(t=>{this.workOrderCategories=t})}onDateChange(t){this.minDueDate=new Date(t.value),this.minDueDate.setDate(this.minDueDate.getDate()),this.formCreateWorkOrder.get("dueDate").setValue(null)}handlePickAssets(){this.addAssetsModalVisible=!0}handleDetailsModalClose(){this.addAssetsModalVisible=!1}disableRightClick(t){t.preventDefault()}handleAddedWorkOrderAssets(t){this.addAssetsModalVisible=!1,this.existingWorkOrderAssets=t,this.showSaveButton=!0}handleDeleteAsset(t){this.existingWorkOrderAssets.splice(this.existingWorkOrderAssets.indexOf(t),1),this.showSaveButton=!0}priorityString(t){return Object(v.a)(d.x,t)}handlePickWorkOrderCheckLists(t){this.pickCheckListsModalVisible=!1,this.existingWorkOrderChecklists=t,this.checklists=t,this.showSaveButton=!0}handlePickCheckLists(){this.pickCheckListsModalVisible=!0}handlePickCheckListsModalClose(){this.pickCheckListsModalVisible=!1}addCheckList(t){const e=(t.value||"").trim();e&&this.checklists.push(e),t.input&&(t.input.value="")}}ln.\u0275fac=function(t){return new(t||ln)(u.ec(c.d),u.ec(d.A),u.ec(d.v),u.ec(r.c),u.ec(m))},ln.\u0275cmp=u.Yb({type:ln,selectors:[["app-create-work-order"]],decls:3,vars:3,consts:[[3,"customCurrentPageTitle"],[4,"ngIf"],[1,"spinner"],[3,"formGroup"],[1,"core-info","mt-4"],["class","d-flex",4,"ngIf"],[1,"d-flex","align-items-center","mb-sm-4","mb-2"],[1,"col-4","col-sm-2"],[1,"col-8","col-sm-10"],["type","text","maxlength","50","formControlName","title",1,"form-control"],[1,"d-flex","mb-sm-4","mb-2"],[1,"col-sm-2","col-4","mt-2"],[1,"col-sm-10","col-8"],["formControlName","description","rows","8","maxlength","4000",1,"form-control"],[1,"row","d-flex"],[1,"col-sm-6"],[1,"d-flex","mb-2","mb-sm-3","align-items-center"],[1,"col-4"],[1,"col-8"],[1,"form-group"],[1,"taro-material-datepicker"],["matInput","","formControlName","reportedOn",1,"form-control","mat-input-date",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["disabled","false"],["datePicker",""],["matInput","","formControlName","dueDate",1,"form-control","mat-input-date",3,"matDatepicker","min"],["datePickerDueDate",""],["type","hidden","formControlName","assignedToUser",1,"form-control"],[3,"selectedUserId"],["formControlName","category",1,"custom-select","form-control"],["class","form-control",3,"value",4,"ngFor","ngForOf"],["formControlName","priority",1,"custom-select","form-control"],["class","row",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"pb-4"],[1,"btn","btn-link","p-0","add-asset",3,"click"],[1,"col-4","col-sm-2","pt-4"],[1,"pt-2"],["chipList",""],[4,"ngFor","ngForOf"],["readonly","",3,"matChipInputFor","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"form-actions"],[1,"btn","btn-primary","btn-block","col-12",3,"click"],[3,"modalShouldClose","contextmenu",4,"ngIf"],[1,"d-flex"],[1,"col-8","col-sm-10","alert","alert-danger","arrow-alert"],[1,"col-8","alert","alert-danger","arrow-alert"],[1,"form-control",3,"value"],[1,"row"],[1,"d-flex","align-items-center"],[1,"col-8","asset-input-alret","alert","alert-danger","arrow-alert"],[1,"col-sm-6","mb-2","mb-sm-3"],[1,"col-8","asset-input-size"],["type","text","readonly","",1,"readonly","form-control",3,"value"],[1,"col-8","d-flex","align-items-center"],["type","text","readonly","",1,"form-control","readonly",3,"value"],["xmlns","http://www.w3.org/2000/svg","width","15.002","height","19.003","viewBox","0 0 14.002 18.003",1,"del-icon","opacity-50"],["id","wrench","transform","translate(0.001 0)"],["id","Path_1563","data-name","Path 1563","d","M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z","transform","translate(0.2 1.267)"],["id","Path_1564","data-name","Path 1564","d","M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z"],["id","Path_1565","data-name","Path 1565","d","M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z","transform","translate(1.567 2)"],["id","Path_1566","data-name","Path 1566","d","M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z","transform","translate(0.9 1.967)"],["id","Path_1567","data-name","Path 1567","d","M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z","transform","translate(2.125 1.991)"],[1,"del-icon-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","15.002","height","19.003","viewBox","0 0 14.002 18.003",1,"del-icon"],[3,"modalShouldClose","contextmenu"],[3,"existingAssets","addedAssets"],[3,"existingChecklists","addedCheckLists"]],template:function(t,e){1&t&&(u.fc(0,"app-section-header",0),u.Oc(1,Ge,2,0,"div",1),u.Oc(2,an,91,24,"article",1)),2&t&&(u.Ac("customCurrentPageTitle","Create Work Order"),u.Tb(1),u.Ac("ngIf",e.isLoading),u.Tb(1),u.Ac("ngIf",!e.isLoading))},directives:[f.a,i.k,c.w,c.n,c.g,c.c,c.i,c.m,c.f,y.b,y.d,S.e,y.a,j.a,c.u,i.j,S.b,fe,ke,c.q,c.x,de,U.a,R.a,Qe],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}article[_ngcontent-%COMP%]{margin-bottom:6em}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:flex;background-color:#f2f2f2;height:3.8em;font-size:.85em;border:1px solid #ced4da;border-radius:.25em}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:1em 0 0 1em;font-weight:500;text-transform:none;font-size:1em!important}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .btn-file-upload[_ngcontent-%COMP%]{border:1px solid #ced4da;border-width:1px 0;background-color:#ddd;height:3.7em;width:100%}article[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .btn-file-upload[disabled][_ngcontent-%COMP%]{cursor:default}article[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #dedede;margin-bottom:1em;padding-bottom:.5em}article[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}article[_ngcontent-%COMP%]   .core-info[_ngcontent-%COMP%]   .del-icon[_ngcontent-%COMP%]{margin-left:.5em}article[_ngcontent-%COMP%]   .core-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}article[_ngcontent-%COMP%]   .readonly[_ngcontent-%COMP%]{pointer-events:none;background-color:hsla(0,0%,92%,.295);color:#9c9a9a}article[_ngcontent-%COMP%]   .del-icon-button[_ngcontent-%COMP%]{border:0;background-color:transparent}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]{padding:0 1em}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;border:1px solid #bcbcbc;width:100%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#e4e4e4;font-weight:700}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #bcbcbc;padding:10px}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:center;width:15%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:center;width:20%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){word-break:break-all;width:65%}@media screen and (max-width:610px){article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:none}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:60%}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .desktop-time-view[_ngcontent-%COMP%]{display:none}}article[_ngcontent-%COMP%]   .service-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6a955b;text-decoration:underline;font-size:small}article[_ngcontent-%COMP%]   .modal-details[_ngcontent-%COMP%]{margin-top:1em;background-color:#f5f3f3;padding:1.2em}@media screen and (max-width:610px){article[_ngcontent-%COMP%]   .attachment-icon[_ngcontent-%COMP%]{padding-right:0!important}}  .form-group{position:relative}  .form-group .alert-msgs{position:absolute;bottom:2.5em}  .form-group .asset-alert-msgs{position:absolute;bottom:0;width:100%;margin-bottom:-.35em;z-index:9}.mat-input-date[_ngcontent-%COMP%]{padding:.9rem!important;box-sizing:inherit!important}.mat-form-field[_ngcontent-%COMP%]{width:100%}  .mat-chip-list-wrapper{display:block;width:100%;padding:.55rem .5rem;font-size:1rem;font-weight:400;line-height:1.5;color:#424244;background-color:hsla(0,0%,92%,.295);background-clip:padding-box;border:1px solid #ced4da;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:.375rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}  .mat-form-field-underline{display:none}  .mat-chip.mat-standard-chip{background-color:#5c747d;color:#fff}  .mat-standard-chip{border-radius:5px!important}@media screen and (max-width:768px){  .mat-standard-chip{height:auto!important}}"]});const dn=[{path:"",component:_},{path:"create-work-order",component:ln},{path:":id",component:Pt},{path:":id/PickSpares",component:Bt}];class hn{}hn.\u0275fac=function(t){return new(t||hn)},hn.\u0275mod=u.cc({type:hn}),hn.\u0275inj=u.bc({imports:[[r.e.forChild(dn)],r.e]});class pn extends Gt.i{format(t,e){return Object(i.q)(t,"dd MMM yyyy",this.locale)}}class gn{}gn.\u0275fac=function(t){return new(t||gn)},gn.\u0275mod=u.cc({type:gn}),gn.\u0275inj=u.bc({providers:[{provide:Gt.a,useClass:pn},{provide:Gt.c,useValue:s.a}],imports:[[i.b,c.t,o.a,hn,y.c,Gt.f,Ce,S.d]]})}}]);