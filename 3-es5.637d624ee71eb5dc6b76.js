!function(){function t(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=n(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,a=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return c=t.done,t},e:function(t){a=!0,r=t},f:function(){try{c||null==s.return||s.return()}finally{if(a)throw r}}}}function n(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,(o=s.key,i=void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),s)}var o,i}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Xi4i:function(t,n,s){"use strict";s.d(n,"a",function(){return O});var i=s("fXoL"),c=s("Kj3r"),a=s("pLZG"),l=s("lw6W"),d=s("3Pt+"),u=s("ofXK"),g=["searchInput"],f=["searchResult"];function h(t,e){if(1&t){var n=i.lc();i.kc(0,"button",12,13),i.rc("keyup",function(t){return i.Ic(n),i.vc(3).handleUsersListResultKeyUp(t)})("click",function(){i.Ic(n);var t=e.$implicit;return i.vc(3).handleUsersListResultClick(t)}),i.Pc(2),i.jc()}if(2&t){var s=e.$implicit;i.Ub("data-sitename",s.name),i.Tb(2),i.Sc(" ",s.userId,"-",s.displayName," ")}}function p(t,e){if(1&t&&(i.kc(0,"div",10),i.Oc(1,h,3,3,"button",11),i.jc()),2&t){var n=i.vc(2);i.Tb(1),i.Ac("ngForOf",n.listUsersResults)}}function m(t,e){1&t&&(i.kc(0,"div",14),i.Pc(1," No users found "),i.jc())}function b(t,e){1&t&&(i.kc(0,"div",15),i.fc(1,"div",16),i.jc())}function v(t,e){if(1&t&&(i.kc(0,"div"),i.Oc(1,p,2,1,"div",7),i.Oc(2,m,2,0,"div",8),i.Oc(3,b,2,0,"div",9),i.jc()),2&t){var n=i.vc();i.Tb(1),i.Ac("ngIf",!n.isUsersSearching),i.Tb(1),i.Ac("ngIf",0===n.listUsersResults.length&&!n.isUsersSearching),i.Tb(1),i.Ac("ngIf",n.isUsersSearching)}}var O=function(){function t(e,n){o(this,t),this.formBuilder=e,this.userService=n,this.listUsersResultsVisible=!1,this.isUsersSearching=!1,this.listUsersResults=[],this.isUsersSelected=!1,this.isEditable=!0,this.selectedUserId=new i.t,this.listUsersForm=this.formBuilder.group({text:"",userId:this.userName})}return r(t,[{key:"ngOnInit",value:function(){var t=this;this.listUsersForm.get("text").valueChanges.pipe(Object(c.a)(700),Object(a.a)(function(t){return t.length>=3}),Object(a.a)(function(e){return!t.userNameIsInListResults(e)})).subscribe(function(){return t.listUsers()}),this.listUsersForm.get("text").valueChanges.pipe(Object(c.a)(700),Object(a.a)(function(t){return t.length<3})).subscribe(function(){t.listUsersResultsVisible=!1}),this.listUsersForm.get("text").valueChanges.pipe(Object(c.a)(700),Object(a.a)(function(t){return 0===t.length})).subscribe(function(){t.selectedUserId.emit("")}),this.userName&&this.listUsersForm.setValue({text:this.userName,userId:""})}},{key:"listUsers",value:function(){var t=this;this.listUsersSubscription&&!this.listUsersSubscription.closed&&this.listUsersSubscription.unsubscribe();var e=this.listUsersForm.get("text").value;!1===this.isUsersSelected&&(this.isUsersSearching=!0,this.listUsersResultsVisible=!!this.listUsersForm.get("text").dirty,this.listUsersSubscription=this.userService.getUserList(e).subscribe(function(e){t.listUsersResults=e,t.isUsersSearching=!1}))}},{key:"handleUsersListKeyUp",value:function(t){switch(this.isUsersSelected=!1,t.key){case"ArrowDown":var e=this.searchResultElements.toArray();e.length>0&&e[0].nativeElement.focus();break;case"Escape":this.clearlistUsersForm()}}},{key:"handleUsersListResultKeyUp",value:function(t){switch(t.key){case"ArrowUp":var e=this.searchResultElements.toArray()[0].nativeElement;t.target===e?this.searchInputElement.nativeElement.focus():t.target.previousSibling.focus();break;case"ArrowDown":null!=t.target.nextElementSibling&&t.target.nextSibling&&t.target.nextSibling.focus();break;case"Escape":this.clearlistUsersForm()}}},{key:"handleUsersListResultClick",value:function(t){var e=t.userId.concat("-",t.displayName).substring(0,50);this.listUsersForm.setValue({text:e,userId:e}),this.listUsersResultsVisible=!1,this.isUsersSelected=!0,this.selectedUserId.emit(e)}},{key:"handleUsersListBlur",value:function(){var t=this;this.isEditable&&setTimeout(function(){var e=t.listUsersForm.get("text").value,n=document.activeElement;t.userNameIsInListResults(e)||n.dataset.sitename||e||t.clearlistUsersForm()},0)}},{key:"userNameIsInListResults",value:function(t){var n,s=!1,o=e(this.listUsersResults);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.userId.concat("-",i.displayName).substring(0,50)===t&&(s=!0)}}catch(r){o.e(r)}finally{o.f()}return s}},{key:"clearlistUsersForm",value:function(){this.listUsersForm.setValue({text:"",userId:null}),this.listUsersResultsVisible=!1}},{key:"ngOnDestroy",value:function(){this.listUsersSubscription&&!this.listUsersSubscription.closed&&this.listUsersSubscription.unsubscribe()}}]),t}();O.\u0275fac=function(t){return new(t||O)(i.ec(d.d),i.ec(l.a))},O.\u0275cmp=i.Yb({type:O,selectors:[["app-list-users"]],viewQuery:function(t,e){var n;(1&t&&(i.Tc(g,1),i.Tc(f,1)),2&t)&&(i.Fc(n=i.sc())&&(e.searchInputElement=n.first),i.Fc(n=i.sc())&&(e.searchResultElements=n))},inputs:{userName:"userName",isEditable:"isEditable"},outputs:{selectedUserId:"selectedUserId"},decls:8,vars:5,consts:[[1,"row","form-row",3,"formGroup"],[1,"form-group"],[1,"find-as-you-type"],["formControlName","text","type","text",1,"form-control","text-display",3,"readonly","blur","keyup"],["searchInput",""],["formControlName","userId","type","hidden"],[4,"ngIf"],["class","find-as-you-type__results dropdown-scroll",4,"ngIf"],["class","find-as-you-type__no-results",4,"ngIf"],["class","find-as-you-type__spinner-container",4,"ngIf"],[1,"find-as-you-type__results","dropdown-scroll"],["class","select-Users-btn",3,"keyup","click",4,"ngFor","ngForOf"],[1,"select-Users-btn",3,"keyup","click"],["searchResult",""],[1,"find-as-you-type__no-results"],[1,"find-as-you-type__spinner-container"],[1,"spinner"]],template:function(t,e){1&t&&(i.kc(0,"form",0),i.kc(1,"div"),i.kc(2,"div",1),i.kc(3,"div",2),i.kc(4,"input",3,4),i.rc("blur",function(){return e.handleUsersListBlur()})("keyup",function(t){return e.handleUsersListKeyUp(t)}),i.jc(),i.fc(6,"input",5),i.Oc(7,v,4,3,"div",6),i.jc(),i.jc(),i.jc(),i.jc()),2&t&&(i.Ac("formGroup",e.listUsersForm),i.Tb(3),i.Wb("find-as-you-type--suggestions-visible",e.isUsersSearching||e.listUsersResultsVisible),i.Tb(1),i.Ac("readonly",!e.isEditable),i.Tb(3),i.Ac("ngIf",e.listUsersResultsVisible))},directives:[d.w,d.n,d.g,d.c,d.m,d.f,u.k,u.j],styles:[".find-as-you-type[_ngcontent-%COMP%]{position:relative;z-index:5}.find-as-you-type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.find-as-you-type__no-results[_ngcontent-%COMP%], .find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .find-as-you-type__spinner-container[_ngcontent-%COMP%]{padding:.8em 1.2em;background-color:#f2f2f2;border:1px solid #ced4da;display:block}.find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;text-align:left}.find-as-you-type[_ngcontent-%COMP%]   .dropdown-scroll[_ngcontent-%COMP%]{max-height:150px;border-bottom:2px solid #ced4da;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}.find-as-you-type[_ngcontent-%COMP%]   .dropdown-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.find-as-you-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(106,149,91,.25);position:relative;background-color:#fff;z-index:5}.find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.find-as-you-type[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto}.find-as-you-type--suggestions-visible[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}"]})},eQ4o:function(n,s,i){"use strict";i.d(s,"a",function(){return S});var c=i("fXoL"),a=i("Kj3r"),l=i("pLZG"),d=i("o0su"),u=i("3Pt+"),g=i("ofXK");function f(t,e){if(1&t&&(c.kc(0,"td",3),c.kc(1,"span"),c.kc(2,"strong"),c.Pc(3),c.jc(),c.fc(4,"br"),c.jc(),c.kc(5,"span"),c.kc(6,"strong"),c.Pc(7,"ID "),c.jc(),c.Pc(8),c.jc(),c.jc()),2&t){var n=c.vc();c.Tb(3),c.Qc(n.assetItem.name),c.Tb(5),c.Qc(n.assetItem.assetId)}}function h(t,e){if(1&t&&(c.kc(0,"td",4),c.kc(1,"span"),c.Pc(2),c.jc(),c.jc()),2&t){var n=c.vc();c.Tb(2),c.Qc(n.assetItem.location)}}function p(t,e){if(1&t){var n=c.lc();c.kc(0,"td",5),c.kc(1,"button",6),c.rc("click",function(){c.Ic(n);var t=c.vc();return t.handleDeleteAssetItem(t.assetItem)}),c.uc(),c.kc(2,"svg",7),c.fc(3,"defs"),c.fc(4,"path",8),c.fc(5,"path",9),c.fc(6,"path",10),c.fc(7,"path",11),c.fc(8,"path",12),c.jc(),c.jc(),c.jc()}}var m=function(){function t(){o(this,t),this.deleteAssetItem=new c.t}return r(t,[{key:"ngOnInit",value:function(){}},{key:"handleDeleteAssetItem",value:function(t){this.deleteAssetItem.emit(t)}}]),t}();m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=c.Yb({type:m,selectors:[["app-pick-asset-item"]],inputs:{assetItem:"assetItem"},outputs:{deleteAssetItem:"deleteAssetItem"},decls:3,vars:3,consts:[["class","asset-name-cell",4,"ngIf"],["class","asset-location-cell",4,"ngIf"],["class","delete-row-cell",4,"ngIf"],[1,"asset-name-cell"],[1,"asset-location-cell"],[1,"delete-row-cell"],[1,"delete-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 14 18"],["d","M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z","transform","translate(.2 1.267)",1,"cls-1"],["d","M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z",1,"cls-1"],["d","M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z","transform","translate(1.567 2)",1,"cls-1"],["d","M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z","transform","translate(.9 1.967)",1,"cls-1"],["d","M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z","transform","translate(2.125 1.991)",1,"cls-1"]],template:function(t,e){1&t&&(c.Oc(0,f,9,2,"td",0),c.Oc(1,h,3,1,"td",1),c.Oc(2,p,9,0,"td",2)),2&t&&(c.Ac("ngIf",!e.assetItem.isDelete),c.Tb(1),c.Ac("ngIf",!e.assetItem.isDelete),c.Tb(1),c.Ac("ngIf",!e.assetItem.isDelete))},directives:[g.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}[_nghost-%COMP%]{display:table-row;background-color:#f2f2f2;line-height:1.1;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:.8em;text-align:center;vertical-align:middle;height:5em;border-bottom:2px solid #fff;position:relative}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:400;text-align:left;width:55%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-weight:400;text-align:left;width:35%}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){background-color:#dedede;font-weight:600}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0 auto;font-size:1.5em}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.1)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]{opacity:.3;background-color:transparent}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[disabled][_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(1);transition:all .2s ease-in-out}[_nghost-%COMP%]   .delete-row-cell[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#424244}@media screen and (max-width:768px){[_nghost-%COMP%]{margin-bottom:3.5em;display:flex;align-items:center;border-bottom:none}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{display:none;border-bottom:none;height:auto}[_nghost-%COMP%]   td.asset-location-cell[_ngcontent-%COMP%], [_nghost-%COMP%]   td.asset-name-cell[_ngcontent-%COMP%], [_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   td.asset-name-cell[_ngcontent-%COMP%]{flex-grow:1;text-align:left;width:55%}[_nghost-%COMP%]   td.asset-location-cell[_ngcontent-%COMP%]{flex-grow:1;text-align:left;width:45%}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]{display:block;width:calc(100% + 2px);position:absolute;top:100%;margin:-1px;background-color:transparent}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[_ngcontent-%COMP%]{background:#eaeaea;padding:1.5em 0;border-bottom-left-radius:.5em;border-bottom-right-radius:.5em;border:1px solid rgba(0,0,0,.05);border-top:none}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#666667}[_nghost-%COMP%]   td.delete-row-cell[_ngcontent-%COMP%]   .delete-btn.delete-btn[disabled][_ngcontent-%COMP%]{opacity:.5}}"]});var b=["searchInput"],v=["searchResult"];function O(t,e){if(1&t&&(c.kc(0,"span"),c.Pc(1),c.jc()),2&t){var n=c.vc();c.Tb(1),c.Rc("(",n.itemCount," item)")}}function y(t,e){if(1&t&&(c.kc(0,"span"),c.Pc(1),c.jc()),2&t){var n=c.vc();c.Tb(1),c.Rc("(",n.itemCount," items)")}}function _(t,e){1&t&&c.fc(0,"div",4)}function C(t,e){if(1&t){var n=c.lc();c.kc(0,"button",17,18),c.rc("keyup",function(t){return c.Ic(n),c.vc(4).handleSearchResultKeyUp(t)})("click",function(){c.Ic(n);var t=e.$implicit;return c.vc(4).handleSearchResultClick(t)}),c.Pc(2),c.jc()}if(2&t){var s=e.$implicit;c.Ub("data-assetname",s.name),c.Tb(2),c.Sc(" ",s.assetId," - ",s.name," ")}}function P(t,e){if(1&t&&(c.kc(0,"div",15),c.Oc(1,C,3,3,"button",16),c.jc()),2&t){var n=c.vc(3);c.Tb(1),c.Ac("ngForOf",n.searchResults)}}function M(t,e){1&t&&(c.kc(0,"div",19),c.Pc(1," No assets found "),c.jc())}function k(t,e){1&t&&(c.kc(0,"div",20),c.fc(1,"div",4),c.jc())}function w(t,e){if(1&t&&(c.kc(0,"div"),c.Oc(1,P,2,1,"div",12),c.Oc(2,M,2,0,"div",13),c.Oc(3,k,2,0,"div",14),c.jc()),2&t){var n=c.vc(2);c.Tb(1),c.Ac("ngIf",!n.isSearching),c.Tb(1),c.Ac("ngIf",0===n.searchResults.length&&!n.isSearching),c.Tb(1),c.Ac("ngIf",n.isSearching)}}function I(t,e){if(1&t){var n=c.lc();c.kc(0,"app-pick-asset-item",23),c.rc("deleteAssetItem",function(t){return c.Ic(n),c.vc(3).deleteAssetItem(t)}),c.jc()}if(2&t){var s=e.$implicit;c.Ac("assetItem",s)}}function x(t,e){if(1&t&&(c.kc(0,"div"),c.kc(1,"table"),c.kc(2,"thead"),c.kc(3,"th"),c.Pc(4,"Name"),c.jc(),c.kc(5,"th"),c.Pc(6,"Location"),c.jc(),c.fc(7,"th"),c.jc(),c.jc(),c.kc(8,"table"),c.kc(9,"tbody"),c.Oc(10,I,1,1,"app-pick-asset-item",21),c.kc(11,"tr"),c.kc(12,"td",22),c.Pc(13," \xa0 "),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&t){var n=c.vc(2);c.Tb(10),c.Ac("ngForOf",n.listAssets)}}function A(t,e){if(1&t){var n=c.lc();c.kc(0,"div"),c.kc(1,"form",5),c.kc(2,"div",6),c.kc(3,"div"),c.kc(4,"div",7),c.kc(5,"div",8),c.kc(6,"input",9,10),c.rc("blur",function(){return c.Ic(n),c.vc().handleSearchBlur()})("keyup",function(t){return c.Ic(n),c.vc().handleSearchKeyUp(t)}),c.jc(),c.fc(8,"input",11),c.Oc(9,w,4,3,"div",0),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(10,"div"),c.Oc(11,x,14,1,"div",0),c.jc(),c.jc()}if(2&t){var s=c.vc();c.Tb(1),c.Ac("formGroup",s.searchForm),c.Tb(4),c.Wb("find-as-you-type--suggestions-visible",s.isAssetsSelected||s.searchResultsVisible),c.Tb(4),c.Ac("ngIf",s.searchResultsVisible),c.Tb(2),c.Ac("ngIf",s.listAssets.length>0)}}var S=function(){function n(t,e,s){o(this,n),this.formBuilder=t,this.assetService=e,this.toastService=s,this.isLoading=!1,this.isSearching=!1,this.searchResults=[],this.isAssetsSelected=!1,this.searchResultsVisible=!1,this.listAssets=[],this.addedAssets=new c.t,this.searchForm=this.formBuilder.group({text:"",assets:null})}return r(n,[{key:"ngOnInit",value:function(){var e,n=this;this.searchForm.get("text").valueChanges.pipe(Object(a.a)(700),Object(l.a)(function(t){return t.length>=3}),Object(l.a)(function(t){return!n.assetsNameIsInSearchResults(t)})).subscribe(function(){n.searchAssets()}),this.searchForm.get("text").valueChanges.pipe(Object(a.a)(700),Object(l.a)(function(t){return t.length<3})).subscribe(function(){return n.searchResultsVisible=!1}),(e=this.listAssets).push.apply(e,t(this.existingAssets)),this.countAssetItems()}},{key:"assetsNameIsInSearchResults",value:function(t){var n,s=!1,o=e(this.searchResults);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.assetId+" - "+i.name===t&&(s=!0)}}catch(r){o.e(r)}finally{o.f()}return s}},{key:"searchAssets",value:function(){var t=this;this.searchAssetsSubscription&&!this.searchAssetsSubscription.closed&&this.searchAssetsSubscription.unsubscribe();var e=this.searchForm.get("text").value;0==this.isAssetsSelected&&(this.isSearching=!0,this.searchResultsVisible=!0,this.searchAssetsSubscription=this.assetService.listAssets({offset:0,take:100,text:e}).subscribe(function(e){t.searchResults=[],e.forEach(function(e){var n={referenceId:null,id:e.id,location:e.location,assetId:e.assetId,assetCode:e.assetCode,name:e.name,description:e.description,isDelete:!1,isNew:!0};t.searchResults.push(n)}),t.isSearching=!1})),this.isLoading=!1}},{key:"clearSearchForm",value:function(){this.searchForm.setValue({text:"",assets:null}),this.searchResultsVisible=!1}},{key:"handleSearchKeyUp",value:function(t){switch(this.isAssetsSelected=!1,t.key){case"ArrowDown":var e=this.searchResultElements.toArray();e.length>0&&e[0].nativeElement.focus();break;case"Escape":this.clearSearchForm()}}},{key:"handleSearchBlur",value:function(){var t=this;setTimeout(function(){var e=t.searchForm.get("text").value,n=document.activeElement;t.assetsNameIsInSearchResults(e)||n.dataset.assetname||t.clearSearchForm()},0)}},{key:"handleSearchResultKeyUp",value:function(t){switch(t.key){case"ArrowUp":var e=this.searchResultElements.toArray()[0].nativeElement;t.target===e?this.searchInputElement.nativeElement.focus():t.target.previousSibling.focus();break;case"ArrowDown":t.target.nextSibling&&t.target.nextSibling.focus();break;case"Escape":this.clearSearchForm()}}},{key:"handleSearchResultClick",value:function(t){return this.searchForm.setValue({text:t.assetId+" - "+t.name,assets:t.assetId}),0!==this.listAssets.filter(function(e){return t.assetId===e.assetId&&e.isDelete}).length?(this.listAssets.find(function(e){return t.assetId===e.assetId&&e.isDelete}).isDelete=!1,this.clearSearchForm(),void(this.searchResultsVisible=!1)):0!==this.listAssets.filter(function(e){return t.assetId===e.assetId&&!e.isDelete}).length?(this.toastService.showErrorToast("".concat(t.assetId," Asset already selected")),this.clearSearchForm(),void(this.searchResultsVisible=!1)):(this.addAssetsList(t),this.searchResultsVisible=!1,void(this.isAssetsSelected=!0))}},{key:"addAssetsList",value:function(t){t.isNew=!0,this.listAssets.push(t),this.countAssetItems(),this.searchForm.setValue({text:"",assets:null})}},{key:"deleteAssetItem",value:function(t){t.isNew?this.listAssets.splice(this.listAssets.indexOf(t),1):this.listAssets.find(function(e){return e.id===t.id}).isDelete=!0,this.countAssetItems()}},{key:"addAssets",value:function(){this.addedAssets.emit(this.listAssets)}},{key:"countAssetItems",value:function(){this.itemCount=this.listAssets.filter(function(t){return!0!==t.isDelete}).length}}]),n}();S.\u0275fac=function(t){return new(t||S)(c.ec(u.d),c.ec(d.a),c.ec(d.v))},S.\u0275cmp=c.Yb({type:S,selectors:[["app-pick-assets"]],viewQuery:function(t,e){var n;(1&t&&(c.Tc(b,1),c.Tc(v,1)),2&t)&&(c.Fc(n=c.sc())&&(e.searchInputElement=n.first),c.Fc(n=c.sc())&&(e.searchResultElements=n))},inputs:{existingAssets:"existingAssets"},outputs:{addedAssets:"addedAssets"},decls:10,vars:7,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"form-actions","done-btn"],[1,"btn","btn-primary","btn-block","col-12",3,"disabled","click"],[1,"spinner"],[1,"search-form",3,"formGroup"],[1,"row"],[1,"form-group"],[1,"find-as-you-type","input-with-search-wrapper"],["type","text","formControlName","text","placeholder","Search assets by id or name",1,"form-control","form-control--search-prefix",3,"blur","keyup"],["searchInput",""],["formControlName","assets","type","hidden"],["class","find-as-you-type__results",4,"ngIf"],["class","find-as-you-type__no-results",4,"ngIf"],["class","find-as-you-type__spinner-container",4,"ngIf"],[1,"find-as-you-type__results"],["class","select-assets-btn",3,"keyup","click",4,"ngFor","ngForOf"],[1,"select-assets-btn",3,"keyup","click"],["searchResult",""],[1,"find-as-you-type__no-results"],[1,"find-as-you-type__spinner-container"],[3,"assetItem","deleteAssetItem",4,"ngFor","ngForOf"],[1,"bg-white"],[3,"assetItem","deleteAssetItem"]],template:function(t,e){1&t&&(c.kc(0,"h1"),c.Pc(1,"Picking Assets "),c.Oc(2,O,2,1,"span",0),c.Oc(3,y,2,1,"span",0),c.jc(),c.Oc(4,_,1,0,"div",1),c.Oc(5,A,12,5,"div",0),c.kc(6,"footer"),c.kc(7,"div",2),c.kc(8,"button",3),c.rc("click",function(){return e.addAssets()}),c.Pc(9," Done "),c.jc(),c.jc(),c.jc()),2&t&&(c.Tb(2),c.Ac("ngIf",1===e.itemCount),c.Tb(1),c.Ac("ngIf",e.itemCount>1),c.Tb(1),c.Ac("ngIf",e.isLoading),c.Tb(1),c.Ac("ngIf",!e.isLoading),c.Tb(2),c.Wb("visible",!0),c.Tb(1),c.Ac("disabled",0===e.listAssets.length))},directives:[g.k,u.w,u.n,u.g,u.c,u.m,u.f,g.j,m],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}table[_ngcontent-%COMP%]{width:100%;position:relative}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-transform:uppercase}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8em}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:55%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:35%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{line-height:1.1}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f2f2f2;padding:.8em;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff}@media screen and (max-width:768px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:0}}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:1.6em 1em;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);text-align:center}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}@media screen and (max-width:768px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{display:block;top:100%;width:100%;padding:.2em;height:2.1em;background-color:#6b6d6e}}footer[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{left:0!important;width:100%;background-color:#fff;box-shadow:none;padding:1rem 3rem 3rem!important;z-index:1}@media screen and (max-width:768px){footer[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem!important;box-shadow:none}}.search-form[_ngcontent-%COMP%]{margin-bottom:1.5em}.find-as-you-type[_ngcontent-%COMP%]{position:relative;z-index:5}.find-as-you-type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.find-as-you-type__no-results[_ngcontent-%COMP%], .find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .find-as-you-type__spinner-container[_ngcontent-%COMP%]{padding:.8em 1.2em;background-color:#f2f2f2;border:1px solid #ced4da;display:block}.find-as-you-type__results[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;text-align:left}.find-as-you-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(106,149,91,.25);position:relative;background-color:#fff;z-index:5}.find-as-you-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.find-as-you-type[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto}.find-as-you-type--suggestions-visible[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.asset-list[_ngcontent-%COMP%]{margin-top:.6em;padding:0;list-style:none}.asset-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;vertical-align:middle;position:relative;height:5em;border-bottom:2px solid #fff;background-color:#f2f2f2;line-height:1.1;padding:.8em}.asset-list[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{background-color:#fff;padding:1em;height:3em;text-transform:uppercase;font-weight:600;display:flex}.asset-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:1.6em 1em;transition:all .2s ease-in-out;background:rgba(0,0,0,.05);text-align:center;height:100%}.asset-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}.asset-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:0;position:absolute;top:0;left:0;width:100%;height:100%;transition:all .2s ease-in-out;background-color:transparent}.asset-list[_ngcontent-%COMP%]   .row-toggle[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.07)}"]})},lw6W:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var s=n("AytR"),i=n("ri4K"),c=n("fXoL"),a=n("tk/3"),l=function(){function t(e,n){o(this,t),this.httpClient=e,this.authenticationService=n,this.userListURL="".concat(s.a.apiBaseUrl,"/user/filter/tech-mngr/sites")}return r(t,[{key:"primarySiteId",get:function(){var t=this.authenticationService.currentUserProfile$.getValue();return t&&t.primarySite?t.primarySite.id:null}},{key:"primaryOrganisationId",get:function(){var t=this.authenticationService.currentUserProfile$.getValue();return t&&t.primarySite?t.primarySite.organisationId:null}},{key:"getUserList",value:function(t){return this.httpClient.get("".concat(this.userListURL,"/").concat(this.primarySiteId,"?OrganisationId=").concat(this.primaryOrganisationId,"&searchText=").concat(t))}}]),t}();l.\u0275fac=function(t){return new(t||l)(c.oc(a.b),c.oc(i.a))},l.\u0275prov=c.ac({token:l,factory:l.\u0275fac,providedIn:"root"})},oeRM:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var s=n("fXoL"),i=n("ofXK");function c(t,e){if(1&t&&(s.kc(0,"div",6),s.kc(1,"div",7),s.Pc(2),s.jc(),s.jc()),2&t){var n=s.vc();s.Tb(2),s.Rc(" ",n.modalTitleText," ")}}function a(t,e){if(1&t){var n=s.lc();s.kc(0,"button",8),s.rc("click",function(){return s.Ic(n),s.vc().modalShouldClose.emit()}),s.uc(),s.kc(1,"svg",9),s.kc(2,"g",10),s.kc(3,"g",11),s.fc(4,"path",12),s.jc(),s.jc(),s.jc(),s.jc()}}var l=["*",[["","footer",""]]],d=function(){function t(e){o(this,t),this.renderer=e,this.hideModalTitle=!1,this.modalTitleText="",this.modalShouldClose=new s.t,this.needsBackdrop=!0}return r(t,[{key:"ngOnInit",value:function(){this.needsBackdrop=!document.documentElement.classList.contains("no-scroll"),this.needsBackdrop&&this.renderer.addClass(document.documentElement,"no-scroll")}},{key:"ngOnDestroy",value:function(){this.needsBackdrop&&this.renderer.removeClass(document.documentElement,"no-scroll")}}]),t}();d.\u0275fac=function(t){return new(t||d)(s.ec(s.T))},d.\u0275cmp=s.Yb({type:d,selectors:[["app-modal"]],inputs:{hideModalTitle:"hideModalTitle",modalTitleText:"modalTitleText"},outputs:{modalShouldClose:"modalShouldClose"},ngContentSelectors:["*","[footer]"],decls:8,vars:2,consts:[[1,"taro-modal-wrapper"],[1,"taro-modal"],["class","modal-title",4,"ngIf"],["title","Close","class","taro-modal-close",3,"click",4,"ngIf"],[1,"taro-modal-content"],[1,"taro-modal-click-behind",3,"click"],[1,"modal-title"],[1,"title-text"],["title","Close",1,"taro-modal-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 10.781 10.782"],["data-name","Group 620"],["data-name","Symbol 85 \u2013 1"],["data-name","Union 3","d","M5.391 6.371L.98 10.782 0 9.8l4.411-4.409L0 .98.98 0l4.411 4.411L9.8 0l.981.98-4.41 4.411L10.782 9.8l-.981.981z","fill","#424244"]],template:function(t,e){1&t&&(s.zc(l),s.kc(0,"div",0),s.kc(1,"div",1),s.Oc(2,c,3,1,"div",2),s.Oc(3,a,5,0,"button",3),s.kc(4,"div",4),s.yc(5),s.jc(),s.yc(6,1),s.jc(),s.kc(7,"button",5),s.rc("click",function(){return e.modalShouldClose.emit()}),s.jc(),s.jc()),2&t&&(s.Tb(2),s.Ac("ngIf",e.hideModalTitle),s.Tb(1),s.Ac("ngIf",!e.hideModalTitle))},directives:[i.k],styles:["@media print{.app-header[_ngcontent-%COMP%], .function-bar[_ngcontent-%COMP%], .media-none[_ngcontent-%COMP%], app-section-header[_ngcontent-%COMP%]{display:none!important}.app-content-area[_ngcontent-%COMP%]{margin:0!important;background-color:#fff}.media-print[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}.modal-title[_ngcontent-%COMP%]{color:#fff;font-size:1.25em;font-weight:600;padding:.5em}.modal-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{margin-left:1em}.taro-modal[_ngcontent-%COMP%]{position:fixed;z-index:400;width:calc(100% - 2em);height:calc(100% - 2em);left:50%;top:50%;backface-visibility:hidden;transform:scale(1) translate3d(-50%,-50%,0);border:1px solid #afafaf;background-color:#fff;box-shadow:0 3px 20px 5px #0000001f;border-radius:5px;animation:expand .2s ease-in-out;transform-origin:top left;max-width:35rem;max-height:40rem}.taro-modal[_ngcontent-%COMP%]   .taro-modal-content[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;padding:3rem;overflow-y:scroll;-webkit-overflow-scrolling:touch}.taro-modal[_ngcontent-%COMP%]   .taro-modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media screen and (max-width:768px){.taro-modal[_ngcontent-%COMP%]   .taro-modal-content[_ngcontent-%COMP%]{padding:1.5rem}}  .quagga-output-visible .taro-modal{left:0;top:0;transform:scale(1) translateZ(0);max-width:100%;width:100%;max-height:100%;height:100%}@keyframes expand{0%{transform:scale(.6) translate3d(-50%,-20%,0);opacity:0}to{transform:scale(1) translate3d(-50%,-50%,0);opacity:1}}.taro-modal-wrapper[_ngcontent-%COMP%]{position:fixed;top:0;right:0;z-index:400}.taro-modal-close[_ngcontent-%COMP%]{position:absolute;z-index:2;right:0;top:0;width:1.8em;height:1.8em;font-size:1.2em;padding:.55em;border:none;background:none;line-height:0;transition:all .1s ease-in-out}.taro-modal-close[_ngcontent-%COMP%]:hover{padding:.45em;opacity:1}.taro-modal-click-behind[_ngcontent-%COMP%]{background:none;border:none;cursor:auto;display:none}@media screen and (min-width:600px){.no-scroll[_nghost-%COMP%]   .taro-modal-click-behind[_ngcontent-%COMP%], .no-scroll   [_nghost-%COMP%]   .taro-modal-click-behind[_ngcontent-%COMP%]{position:fixed;display:block;width:100%;height:100%;top:0;left:0;cursor:auto}}"]})}}])}();