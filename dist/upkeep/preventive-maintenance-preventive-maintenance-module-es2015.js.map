{"version":3,"sources":["./src/app/preventive-maintenance/preventive-maintenance.component.ts","./src/app/preventive-maintenance/preventive-maintenance.component.html","./src/app/preventive-maintenance/create-preventive-maintenance/create-preventive-maintenance.component.ts","./src/app/preventive-maintenance/create-preventive-maintenance/create-preventive-maintenance.component.html","./src/app/preventive-maintenance/preventive-maintenance-routing.module.ts","./src/app/preventive-maintenance/view-preventive-maintenance/view-preventive-maintenance.component.ts","./src/app/preventive-maintenance/view-preventive-maintenance/view-preventive-maintenance.component.html","./src/app/preventive-maintenance/preventive-maintenance.wizard.ts","./src/app/preventive-maintenance/preventive-maintenance.module.ts"],"names":[],"mappings":"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","file":"preventive-maintenance-preventive-maintenance-module-es2015.js","sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport {\r\n  IPreventiveMaintenance,\r\n  PreventiveMaintenance,\r\n  PreventiveMaintenanceStatus\r\n} from '../services/preventive-maintenance/preventive-maintenance.types';\r\nimport {\r\n  AuthenticationService,\r\n  PermissionGroup,\r\n  PreventiveMaintenancePermissions,\r\n  PreventiveMaintenanceService,\r\n  SearchFilterService\r\n} from '../services';\r\nimport { standardFormattedDate } from 'src/utils/dateUtils';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport { Router } from '@angular/router';\r\nimport { PreventiveMaintenanceWizard } from './preventive-maintenance.wizard';\r\n\r\n@Component({\r\n  selector: 'app-preventive-maintenance',\r\n  templateUrl: './preventive-maintenance.component.html',\r\n  styleUrls: ['./preventive-maintenance.component.scss']\r\n})\r\nexport class PreventiveMaintenanceComponent implements OnInit, OnDestroy {\r\n  public searchForm: FormGroup;\r\n  public isSearching: boolean;\r\n  public offset = 0;\r\n  public take = 10;\r\n  public shouldGetNextPreventiveMaintenance = true;\r\n  public preventiveMaintenanceList: IPreventiveMaintenance[] = [];\r\n  public canCreateSchedule: boolean;\r\n  public PreventiveMaintenanceStatus = PreventiveMaintenanceStatus;\r\n  public standardFormattedDate = standardFormattedDate;\r\n  public scheduleFilterCache: boolean;\r\n  public form: FormGroup;\r\n  public isGettingUserRights = false;\r\n  public canUserEditSchedule = false;\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private authenticationService: AuthenticationService,\r\n    private preventiveMaintenanceService: PreventiveMaintenanceService,\r\n    private searchFilterService: SearchFilterService,\r\n    private router: Router,\r\n    private preventiveMaintenanceWizard: PreventiveMaintenanceWizard\r\n  ) {}\r\n\r\n  public ngOnInit(): void {\r\n    this.setPermissionBooleans();\r\n    this.searchForm = this.formBuilder.group({\r\n      text: this.searchFilterService.searchPMTextValue\r\n        ? this.searchFilterService.searchPMTextValue\r\n        : ''\r\n    });\r\n    this.scheduleFilterCache = this.searchFilterService.searchPMFilterValue;\r\n    this.searchFilterService.searchPMFilterValueCache = this.scheduleFilterCache;\r\n\r\n    this.searchForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length >= 3 || textValue.length === 0)\r\n      )\r\n      .subscribe(() => {\r\n        this.initiateFreshSearchSettings();\r\n        this.getPreventiveMaintenanceList();\r\n        this.searchFilterService.searchPMTextValueCache = this.searchForm.controls[\r\n          'text'\r\n        ].value;\r\n      });\r\n    this.initiateFreshSearchSettings();\r\n    this.getPreventiveMaintenanceList();\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.searchFilterService.searchPMFilterValue = false;\r\n    this.searchFilterService.searchPMTextValue = undefined;\r\n  }\r\n\r\n  private setPermissionBooleans() {\r\n    this.isGettingUserRights = true;\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanCreatePreventiveMaintenance\r\n        ]\r\n      })\r\n      .subscribe(hasPermission => (this.canCreateSchedule = hasPermission));\r\n\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanEditPreventiveMaintenance\r\n        ]\r\n      })\r\n      .subscribe(hasPermission => {\r\n        this.canUserEditSchedule = hasPermission;\r\n        this.isGettingUserRights = false;\r\n      });\r\n  }\r\n\r\n  public initiateFreshSearchSettings(): void {\r\n    this.preventiveMaintenanceList = [];\r\n    this.offset = 0;\r\n    this.shouldGetNextPreventiveMaintenance = true;\r\n  }\r\n\r\n  public getPreventiveMaintenanceList() {\r\n    this.isSearching = true;\r\n    this.preventiveMaintenanceService\r\n      .getPreventiveMaintenanceList({\r\n        offset: this.offset,\r\n        take: this.take,\r\n        searchText: this.searchForm.value.text,\r\n        includeExpired: this.scheduleFilterCache\r\n      })\r\n      .subscribe((scheduleList: IPreventiveMaintenance[]) => {\r\n        this.preventiveMaintenanceList.push(...scheduleList);\r\n        this.offset += this.take;\r\n        if (scheduleList.length < this.take) {\r\n          this.shouldGetNextPreventiveMaintenance = false;\r\n        }\r\n        this.isSearching = false;\r\n      });\r\n  }\r\n  public handleSelectedPreventiveMaintenanceClick(\r\n    preventiveMaintenance: PreventiveMaintenance\r\n  ) {\r\n    this.preventiveMaintenanceWizard.preventiveMaintenance = preventiveMaintenance;\r\n    if (this.preventiveMaintenanceWizard.preventiveMaintenance) {\r\n      if (this.canUserEditSchedule) {\r\n        this.router.navigate(['preventive-maintenance/edit-schedule']);\r\n      } else {\r\n        this.router.navigate(['preventive-maintenance/view-schedule']);\r\n      }\r\n    }\r\n  }\r\n\r\n  public handleFilterClick(includeExpired: boolean) {\r\n    this.scheduleFilterCache = includeExpired;\r\n    this.searchFilterService.searchPMFilterValueCache = this.scheduleFilterCache;\r\n    this.initiateFreshSearchSettings();\r\n    this.getPreventiveMaintenanceList();\r\n  }\r\n\r\n  public createSchedule(): void {\r\n    this.router.navigate(['preventive-maintenance', 'create-schedule']);\r\n  }\r\n}\r\n","<app-section-header></app-section-header>\r\n<h1>Preventive Maintenance</h1>\r\n<form [formGroup]=\"searchForm\" class=\"search-filter-form\">\r\n  <div class=\"input-with-search-wrapper col-6\">\r\n    <input\r\n      type=\"text\"\r\n      formControlName=\"text\"\r\n      class=\"form-control form-control--search-prefix\"\r\n      placeholder=\"Search by schedule id, title, asset id or name\"\r\n    />\r\n  </div>\r\n\r\n <div class=\"schedule-filter col-2\">\r\n    <form>\r\n      <div class=\"form-group\">\r\n          <label class=\"custom-control-label label-align\" for=\"includeExpired\">\r\n            <input\r\n            type=\"checkbox\"\r\n            id=\"includeExpired\"\r\n            [(ngModel)]=\"scheduleFilterCache\"\r\n            (change)=\"handleFilterClick($event.target.checked)\"\r\n            name=\"option-schedule-filter\"\r\n            class=\"custom-control-input\"/>\r\n            <span class=\"checkbox-label\">Include expired schedules</span></label>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <div class=\"schedule-create-btn col-4\">\r\n    <button [disabled]=\"!canCreateSchedule\"  class=\"btn\" (click)= \"createSchedule()\">\r\n      <span>Create Schedule</span>\r\n    </button>\r\n  </div>\r\n</form>\r\n\r\n<ul class=\"schedule-list\">\r\n  <li>\r\n      <div>\r\n        <span>id</span>\r\n      </div>\r\n      <div>\r\n       <span>title</span>\r\n      </div>\r\n      <div>\r\n        <span>asset name</span>\r\n      </div>\r\n      <div>\r\n        <span>next due</span>\r\n      </div>\r\n      <div>\r\n        <span>status</span>\r\n      </div>\r\n  </li>\r\n  <li *ngFor=\"let preventiveMaintenance of preventiveMaintenanceList; let i = index\"   class=\"status-{{preventiveMaintenance.status ? PreventiveMaintenanceStatus[preventiveMaintenance.status] : 'Active'}}\"\r\n  (click) = \"handleSelectedPreventiveMaintenanceClick(preventiveMaintenance)\"\r\n  >\r\n    <div>\r\n      <span>{{preventiveMaintenance.number}}</span>\r\n    </div>\r\n    <div>\r\n      <span>{{preventiveMaintenance.title}}</span>\r\n    </div>\r\n    <div>\r\n      <span>{{preventiveMaintenance.assetName}}</span>\r\n    </div>\r\n    <div>\r\n      <span>{{(preventiveMaintenance.nextDue?standardFormattedDate(preventiveMaintenance.nextDue,true):'') }}</span>\r\n    </div>\r\n    <div>\r\n      <span>{{PreventiveMaintenanceStatus[preventiveMaintenance.status]}}</span>\r\n    </div>\r\n    <div class=\"row-toggle\">\r\n      <div>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 8.797 5.194\">\r\n          <path d=\"M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z\" />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  </li>\r\n</ul>\r\n<div *ngIf=\"preventiveMaintenanceList.length === 0 && !isSearching\">\r\n  No preventive maintenance schedules found\r\n</div>\r\n\r\n<div *ngIf=\"shouldGetNextPreventiveMaintenance && !isSearching\" class=\"text-center\">\r\n  <button class=\"btn btn-link\" (click)=\"getPreventiveMaintenanceList()\">Load more</button>\r\n</div>\r\n\r\n<div *ngIf=\"isSearching\">\r\n  <div class=\"spinner\"></div>\r\n</div>\r\n","import { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport {\r\n  AuthenticationService,\r\n  IAssets,\r\n  PermissionGroup,\r\n  PreventiveMaintenancePermissions,\r\n  PreventiveMaintenanceService,\r\n  PreventiveMaintenanceStatus,\r\n  Toast,\r\n  ToastService\r\n} from 'src/app/services';\r\nimport { Router } from '@angular/router';\r\nimport { MatDatepickerInputEvent } from '@angular/material/datepicker';\r\nimport { PreventiveMaintenanceWizard } from '../preventive-maintenance.wizard';\r\nimport { formatDate } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-create-preventive-maintenance',\r\n  templateUrl: './create-preventive-maintenance.component.html',\r\n  styleUrls: ['./create-preventive-maintenance.component.scss']\r\n})\r\nexport class CreatePreventiveMaintenanceComponent implements OnInit {\r\n  public isCreatingScheduleLoader: boolean = false;\r\n  public showSaveButton: boolean = false;\r\n  public submitAttempted = false;\r\n  public addAssetsModalVisible = false;\r\n  public startDate = new Date();\r\n  public minDueDate = new Date();\r\n  public formCreateSchedule: FormGroup;\r\n  public existingAssets: IAssets[] = [];\r\n  public canUserEditSchedule = false;\r\n\r\n  constructor(\r\n    private formbuilder: FormBuilder,\r\n    private preventiveMaintenanceService: PreventiveMaintenanceService,\r\n    private toastService: ToastService,\r\n    public router: Router,\r\n    private preventiveMaintenanceWizard: PreventiveMaintenanceWizard,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  public ngOnInit(): void {\r\n    this.minDueDate.setDate(this.startDate.getDate() + 1);\r\n    this.createForm();\r\n    this.setPermissionBooleans();\r\n  }\r\n\r\n  private createForm(): void {\r\n    const buildScheduleForm = () => {\r\n      this.formCreateSchedule = this.formbuilder.group({\r\n        title: [\r\n          '',\r\n          Validators.compose([Validators.required, Validators.maxLength(50)])\r\n        ],\r\n        scheduleStart: [this.startDate, Validators.required],\r\n        scheduleEnd: [null],\r\n        frequency: [\r\n          '',\r\n          Validators.compose([\r\n            Validators.required,\r\n            Validators.min(1),\r\n            Validators.max(9999)\r\n          ])\r\n        ],\r\n        assignedToUser: ['', Validators.compose([Validators.maxLength(50)])],\r\n        instruction: ['', Validators.compose([Validators.maxLength(4000)])]\r\n      });\r\n    };\r\n\r\n    buildScheduleForm();\r\n  }\r\n\r\n  private setPermissionBooleans() {\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanEditPreventiveMaintenance\r\n        ]\r\n      })\r\n      .subscribe(hasPermission => {\r\n        this.canUserEditSchedule = hasPermission;\r\n      });\r\n  }\r\n  public onStartDateChange(inputDate: MatDatepickerInputEvent<Date>): void {\r\n    this.startDate = new Date(inputDate.value);\r\n\r\n    this.startDate.setDate(this.startDate.getDate());\r\n    this.formCreateSchedule.get('scheduleStart').setValue(this.startDate);\r\n    this.minDueDate.setDate(this.startDate.getDate() + 1);\r\n    let newStartDate = new Date(this.startDate);\r\n    if (\r\n      this.formCreateSchedule.value.scheduleEnd !== null &&\r\n      this.formCreateSchedule.value.scheduleEnd !== undefined &&\r\n      this.formCreateSchedule.value.scheduleEnd !== ''\r\n    ) {\r\n      let newEndDate = new Date(this.formCreateSchedule.value.scheduleEnd);\r\n      if (newEndDate < newStartDate) {\r\n        this.formCreateSchedule.get('scheduleEnd').setValue('');\r\n      }\r\n    }\r\n  }\r\n\r\n  public selectedUserId(userId: string): void {\r\n    this.formCreateSchedule.get('assignedToUser').setValue(userId);\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public handlePickAssets() {\r\n    this.addAssetsModalVisible = true;\r\n  }\r\n\r\n  public handleDetailsModalClose() {\r\n    this.addAssetsModalVisible = false;\r\n  }\r\n\r\n  public disableRightClick(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  public handleAddedAssets(listAssets: IAssets[]) {\r\n    this.addAssetsModalVisible = false;\r\n    this.existingAssets = listAssets;\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public handleDeleteAsset(asset: IAssets) {\r\n    this.existingAssets.splice(this.existingAssets.indexOf(asset), 1);\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public createSchedule() {\r\n    this.submitAttempted = true;\r\n    this.showSaveButton = false;\r\n    this.isCreatingScheduleLoader = true;\r\n\r\n    let newStartDate = new Date(this.formCreateSchedule.value.scheduleStart);\r\n    if (\r\n      this.formCreateSchedule.value.scheduleEnd !== null &&\r\n      this.formCreateSchedule.value.scheduleEnd !== undefined &&\r\n      this.formCreateSchedule.value.scheduleEnd !== ''\r\n    ) {\r\n      let newEndDate = new Date(this.formCreateSchedule.value.scheduleEnd);\r\n      if (newEndDate < newStartDate) {\r\n        this.toastService.showErrorToast(\r\n          `Schedule end should be greater than schedule start`\r\n        );\r\n        this.isCreatingScheduleLoader = false;\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (this.existingAssets.length === 0) {\r\n      this.isCreatingScheduleLoader = false;\r\n      return;\r\n    }\r\n    if (!this.formCreateSchedule.valid) {\r\n      this.isCreatingScheduleLoader = false;\r\n      return;\r\n    }\r\n\r\n    const maintenanceAssets = this.existingAssets.map(\r\n      selectedAsset => selectedAsset.id\r\n    );\r\n    const assignedTo = this.formCreateSchedule.value.assignedToUser;\r\n    const title = this.formCreateSchedule.value.title;\r\n    const instruction = this.formCreateSchedule.value.instruction;\r\n    const frequency = this.formCreateSchedule.value.frequency;\r\n    const startDate = formatDate(\r\n      this.formCreateSchedule.value.scheduleStart,\r\n      'yyyy-MM-ddThh:mm:ss',\r\n      'en-US'\r\n    );\r\n    const endDate = formatDate(\r\n      this.formCreateSchedule.value.scheduleEnd,\r\n      'yyyy-MM-ddThh:mm:ss',\r\n      'en-US'\r\n    );\r\n    const status = PreventiveMaintenanceStatus.Active;\r\n    const assetName = '';\r\n    this.preventiveMaintenanceService\r\n      .createSchedule({\r\n        title,\r\n        endDate,\r\n        startDate,\r\n        frequency,\r\n        status,\r\n        assignedTo,\r\n        instruction,\r\n        assetName,\r\n        maintenanceAssets\r\n      })\r\n      .subscribe(\r\n        data => {\r\n          this.toastService.showToast(\r\n            new Toast(\r\n              `Schedule ( ${data.numberWithPrefix} ) saved successfully`\r\n            )\r\n          );\r\n          this.isCreatingScheduleLoader = false;\r\n          this.preventiveMaintenanceWizard.preventiveMaintenance = data;\r\n\r\n          if (this.canUserEditSchedule) {\r\n            this.router.navigate(['preventive-maintenance/edit-schedule']);\r\n          } else {\r\n            this.router.navigate(['preventive-maintenance/view-schedule']);\r\n          }\r\n        },\r\n        err => {\r\n          this.toastService.showErrorToast(` Schedule not saved`);\r\n          this.isCreatingScheduleLoader = false;\r\n        }\r\n      );\r\n  }\r\n}\r\n","<app-section-header [customCurrentPageTitle]=\"'Create Schedule'\"></app-section-header>\r\n\r\n<div *ngIf=\"isCreatingScheduleLoader\">\r\n  <div class=\"spinner\"></div>\r\n</div>\r\n\r\n<article *ngIf= \"!isCreatingScheduleLoader\">\r\n  <header>\r\n    <h1> Create Schedule</h1>\r\n  </header>\r\n\r\n  <form [formGroup]= \"formCreateSchedule\">\r\n\r\n    <div class=\"mt-4 core-info\">\r\n      <div id=\"title-errormsg-outer-div\"\r\n      class=\"d-flex\"\r\n      *ngIf= \"submitAttempted && formCreateSchedule.controls.title.errors\">\r\n        <div class=\"col-4 col-sm-2\"\r\n        id=\"title-error-left-div\">\r\n        </div>\r\n        <div class=\"col-8  col-sm-10 alert alert-danger arrow-alert title-alert\"\r\n        id=\"title-error-rignt-div\">\r\n          You must specify title\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"title-outer-div\"\r\n       class=\"d-flex  row align-items-center mb-2 mb-sm-3\">\r\n        <div  id=\"title-lable-div\"\r\n         class=\"col-4 col-sm-2\">\r\n          <label for=\"title\">Title</label>\r\n        </div>\r\n        <div id=\"title-ctrl-div\"\r\n         class=\"col-8 col-sm-10\"\r\n          >\r\n\r\n            <input\r\n            type=\"text\"\r\n            maxlength=\"50\"\r\n            formControlName=\"title\"\r\n            class=\"form-control\"\r\n            />\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"asset-errormsg-outer-div\"\r\n        class=\"row\"\r\n        *ngIf=\"(submitAttempted && existingAssets.length === 0)\">\r\n        <div id=\"asset-errormsg-outer-div-section1\"\r\n         class=\"col-sm-6\" >\r\n          <div  id=\"asset-errormsg-outer-div-inner-section\"\r\n            class=\"d-flex align-items-center error-msg\">\r\n            <label class=\"col-4 \"></label>\r\n            <div id=\"asset-errormsg-div\"\r\n             class=\"col-8 col-sm-12 asset-input-alret alert alert-danger arrow-alert asset-alert\">\r\n              You must specify an asset\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"asset-errormsg-outer-div-section2\"\r\n         class=\"col-sm-6\">\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"asset-dummy-outer-div\"\r\n       class=\"row\" *ngIf=\"existingAssets.length === 0\">\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"d-flex row align-items-center\">\r\n            <label class=\"col-4 \">Asset</label>\r\n            <div class=\"col-8 asset-input-size\">\r\n              <input type=\"text\" readonly  [value]=\"\" class=\"readonly form-control\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"d-flex row align-items-center\">\r\n            <label class=\"col-4\">Location</label>\r\n            <div class=\"col-8  d-flex align-items-center\">\r\n              <input type=\"text\" class=\"form-control readonly\"  [value]=\"\" readonly/>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.002\" height=\"19.003\" viewBox=\"0 0 14.002 18.003\" class=\"del-icon opacity-50\" >\r\n                <g id=\"wrench\" transform=\"translate(0.001 0)\">\r\n                  <path id=\"Path_1563\" data-name=\"Path 1563\" d=\"M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z\" transform=\"translate(0.2 1.267)\"/>\r\n                  <path id=\"Path_1564\" data-name=\"Path 1564\" d=\"M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z\"/>\r\n                  <path id=\"Path_1565\" data-name=\"Path 1565\" d=\"M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z\" transform=\"translate(1.567 2)\"/>\r\n                  <path id=\"Path_1566\" data-name=\"Path 1566\" d=\"M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z\" transform=\"translate(0.9 1.967)\"/>\r\n                  <path id=\"Path_1567\" data-name=\"Path 1567\" d=\"M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z\" transform=\"translate(2.125 1.991)\"/>\r\n                </g>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"asset-outer-div\"\r\n       class=\"row\"  *ngFor=\"let scheduleAsset of existingAssets\">\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <label class=\"col-4 \">Asset</label>\r\n            <div class=\"col-8 asset-input-size\">\r\n              <input type=\"text\" readonly  [value]=\"scheduleAsset.assetId + ' - ' + scheduleAsset.name\" class=\"readonly form-control\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <label class=\"col-4\">Location</label>\r\n            <div class=\"col-8  d-flex align-items-center\">\r\n              <input type=\"text\" class=\"form-control readonly\"  [value]=\"scheduleAsset.location\" readonly/>\r\n              <button (click)=\"handleDeleteAsset(scheduleAsset)\"  class=\"del-icon-button\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.002\" height=\"19.003\" viewBox=\"0 0 14.002 18.003\" class=\"del-icon \">\r\n                <g id=\"wrench\" transform=\"translate(0.001 0)\">\r\n                  <path id=\"Path_1563\" data-name=\"Path 1563\" d=\"M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z\" transform=\"translate(0.2 1.267)\"/>\r\n                  <path id=\"Path_1564\" data-name=\"Path 1564\" d=\"M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z\"/>\r\n                  <path id=\"Path_1565\" data-name=\"Path 1565\" d=\"M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z\" transform=\"translate(1.567 2)\"/>\r\n                  <path id=\"Path_1566\" data-name=\"Path 1566\" d=\"M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z\" transform=\"translate(0.9 1.967)\"/>\r\n                  <path id=\"Path_1567\" data-name=\"Path 1567\" d=\"M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z\" transform=\"translate(2.125 1.991)\"/>\r\n                </g>\r\n              </svg>\r\n            </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"add-asset-div\"\r\n       class=\"pb-2\">\r\n        <button id=\"add-asset-btn\"\r\n         class=\"btn btn-link p-0 add-asset\" (click)=\"handlePickAssets()\">Add Asset</button>\r\n      </div>\r\n\r\n      <div id=\"start-end-date-outer-div\"\r\n      class=\"row align-items-center mb-sm-3\">\r\n        <div id=\"startdate-outer-div\"\r\n          class=\"col-12 col-sm-6  mb-2 \">\r\n\r\n          <div id=\"startdate-error-div\"\r\n           class=\"d-flex \"\r\n           id=\"start-date-error-outer-div\"\r\n           *ngIf= \" (submitAttempted && formCreateSchedule.controls.scheduleStart.errors)\">\r\n            <div id=\"start-date-error-left\" class=\"col-4\" ></div>\r\n            <div  id=\"start-date-error-right\" class=\"col-8 ms-1 alert alert-danger arrow-alert startdate-alert\">\r\n              You must specify schedule start\r\n            </div>\r\n          </div>\r\n\r\n          <div id=\"startdate-outer-div\"\r\n           class=\"d-flex row align-items-center\">\r\n            <label for=\"startdate\"\r\n            class=\"col-4  pe-0\">\r\n              Schedule start\r\n            </label>\r\n            <div id=\"start-date-ctrl-div\"\r\n             class=\"col-8\" >\r\n              <div id=\"start-date-ctrl-frmgp\" class=\"form-group\" >\r\n                <div  id=\"start-date-datepicker-div\" class=\"taro-material-datepicker\" >\r\n                  <input\r\n                    matInput\r\n                    [matDatepicker]=\"datePicker\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"scheduleStart\"\r\n                    (dateChange)=\"onStartDateChange($event)\"\r\n                  />\r\n                  <mat-datepicker-toggle\r\n                    matSuffix\r\n                    [for]=\"datePicker\"\r\n                  >\r\n                  </mat-datepicker-toggle>\r\n                  <mat-datepicker #datePicker ></mat-datepicker>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div id=\"enddate-outer-div\"\r\n          class=\"col-12 col-sm-6  mb-2 \">\r\n          <div id=\"end-date-ctrl-outer-div\"\r\n           class=\"d-flex row align-items-center\" >\r\n            <label for=\"end-date-ctrl-lbl\"\r\n              class=\"col-4 attachment-icon\"  >\r\n              Schedule end\r\n              <span tooltip-danger=\"Auto creation of work order will stop on this date. Leave blank if you are unsure or if this maintenance is required for the life of the asset\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 19.199 19.2\"   width=\"14\" height=\"14\">\r\n                  <path d=\"M0 9.6a9.6 9.6 0 0 0 18.5 3.6 8.571 8.571 0 0 0 .7-3.6A9.6 9.6 0 1 0 0 9.6z\" fill=\"#fff\" stroke=\"#ff422e\"/>\r\n                  <g>\r\n                    <path d=\"M9.6 4a1.184 1.184 0 0 1 1.2 1.3 1.2 1.2 0 1 1-2.4 0A1.24 1.24 0 0 1 9.6 4zm-1 3.3h2.1v7.9H8.6z\" fill=\"#ff422e\"/>\r\n                  </g>\r\n                </svg>\r\n              </span>\r\n            </label>\r\n            <div id=\"end-date-ctrl-div\"\r\n             class=\"col-8\" >\r\n              <div id=\"end-date-ctrl-frmgrp\"\r\n               class=\"form-group\" >\r\n                <div id=\"end-date-datepicker-div\" class=\"taro-material-datepicker\">\r\n                    <input\r\n                      matInput\r\n                      [matDatepicker]=\"datepickerendschedule\"\r\n                      [min]=\"minDueDate\"\r\n                      class=\"form-control\"\r\n                      formControlName=\"scheduleEnd\"\r\n                      />\r\n                      <mat-datepicker-toggle\r\n                      matSuffix\r\n                      [for]=\"datepickerendschedule\">\r\n                      </mat-datepicker-toggle>\r\n                      <mat-datepicker #datepickerendschedule disabled=\"false\">\r\n                      </mat-datepicker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"frequency-assignto-outter-div\"\r\n        class=\"row align-items-center  mb-sm-3\">\r\n          <div id=\"frequency-outer-div\"\r\n           class=\"col-12 col-sm-6  mb-2 \">\r\n              <div id=\"frequency-error-outer-div\"\r\n              class=\"d-flex row\"\r\n              *ngIf= \" (submitAttempted && formCreateSchedule.controls.frequency.errors)\">\r\n                 <div class=\"col-4\" id=\"frequency-error-left\"></div>\r\n                 <div class=\"col-5  alert alert-danger arrow-alert frequency-alert\" id=\"frequency-error-right\">\r\n                    You must specify frequency\r\n                  </div>\r\n                  <div class=\"col-3\" id=\"frequency-error-right\"></div>\r\n              </div>\r\n              <div  id=\"frequency-ctrl-outer-div\"\r\n              class=\"d-flex  row align-items-center\">\r\n                <label class=\"col-4\" for=\"start-date-ctrl-lbl\">\r\n                  Frequency\r\n                </label>\r\n                <div class=\"col-6 \">\r\n                  <input\r\n                  type=\"number\"\r\n                  pattern=\"[0-9]*\"\r\n                  maxlength=\"5\"\r\n                  formControlName=\"frequency\"\r\n                  class=\"form-control\"\r\n                   onkeypress=\"return (this.value.length === 4 || event.key === 'e' || isNaN(event.key)) ? false : true;\"\r\n                  />\r\n                </div>\r\n                <label class=\"col-2 ps-1\" for=\"frequency-days-label\">\r\n                  Days\r\n                </label>\r\n              </div>\r\n          </div>\r\n\r\n          <div id=\"assignto-outer-div\"\r\n          class=\"col-12 col-sm-6 mb-2\" >\r\n          <div class=\"d-flex row align-items-center\" id=\"assignto-ctrl-outer-div\">\r\n            <label class=\"col-4 \" for=\"end-date-ctrl-lbl\">\r\n             Assign To</label>\r\n             <div class=\"col-8\" id=\"end-date-ctrl-div\">\r\n                <input type=\"hidden\" formControlName=\"assignedToUser\" class=\"form-control\" />\r\n                <app-list-users (selectedUserId)=\"selectedUserId($event)\"></app-list-users>\r\n             </div>\r\n          </div>\r\n\r\n          </div>\r\n\r\n      </div>\r\n\r\n\r\n\r\n      <div id=\"instruction-outer-div\"\r\n       class=\"d-flex row  pb-2\">\r\n        <div  id=\"instruction-lable-div\"\r\n         class=\"col-4 mt-3\">\r\n          <label for=\"instruction \">Instructions</label>\r\n        </div>\r\n        <div id=\"instruction-ctrl-div\"\r\n         class=\"col-8\"\r\n        >\r\n          <textarea  class=\"form-control instruction-input\"\r\n          formControlName=\"instruction\"\r\n          rows=\"8\"\r\n          maxlength=\"4000\">\r\n          </textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <footer>\r\n      <div\r\n      class=\"form-actions\"\r\n      [class.visible]=\"formCreateSchedule.dirty || showSaveButton\">\r\n        <button\r\n        class=\"col-12 btn btn-primary btn-block\"\r\n        (click)=\"createSchedule()\"\r\n        >\r\n        Save all changes\r\n        </button>\r\n      </div>\r\n    </footer>\r\n  </form>\r\n\r\n  <app-modal\r\n  *ngIf=\"addAssetsModalVisible\"\r\n  (modalShouldClose)=\"handleDetailsModalClose()\"\r\n  (contextmenu)=\"disableRightClick($event)\"\r\n  >\r\n  <app-pick-assets\r\n    (addedAssets)=\"handleAddedAssets($event)\"\r\n    [existingAssets]=\"existingAssets\"\r\n    >\r\n  </app-pick-assets>\r\n</app-modal>\r\n\r\n</article>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { PreventiveMaintenanceComponent } from './preventive-maintenance.component';\r\nimport { ViewPreventiveMaintenanceComponent } from './view-preventive-maintenance/view-preventive-maintenance.component';\r\nimport { CreatePreventiveMaintenanceComponent } from './create-preventive-maintenance/create-preventive-maintenance.component';\r\n\r\nexport const routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PreventiveMaintenanceComponent\r\n  },\r\n  {\r\n    path: 'view-schedule',\r\n    component: ViewPreventiveMaintenanceComponent\r\n  },\r\n  {\r\n    path: 'edit-schedule',\r\n    component: ViewPreventiveMaintenanceComponent\r\n  },\r\n  {\r\n    path: 'create-schedule',\r\n    component: CreatePreventiveMaintenanceComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PreventiveMaintenanceRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators\r\n} from '@angular/forms';\r\nimport {\r\n  AuthenticationService,\r\n  IAssets,\r\n  IPreventiveMaintenance,\r\n  PermissionGroup,\r\n  PreventiveMaintenancePermissions,\r\n  PreventiveMaintenanceService,\r\n  PreventiveMaintenanceStatus,\r\n  Toast,\r\n  ToastService\r\n} from 'src/app/services';\r\nimport { enumValues } from 'src/utils/enumUtils';\r\nimport { PreventiveMaintenanceWizard } from '../preventive-maintenance.wizard';\r\nimport { Router } from '@angular/router';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { formatDate } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-view-preventive-maintenance',\r\n  templateUrl: './view-preventive-maintenance.component.html',\r\n  styleUrls: ['./view-preventive-maintenance.component.scss']\r\n})\r\nexport class ViewPreventiveMaintenanceComponent implements OnInit {\r\n  public isLoading = true;\r\n  public isGettingUserRights = false;\r\n  public form: FormGroup;\r\n  public isEditable = false;\r\n  public addAssetsModalVisible = false;\r\n  public extendedPreventiveMaintenance: IPreventiveMaintenance;\r\n  public preventiveMaintenanceStatus = PreventiveMaintenanceStatus;\r\n  public preventiveMaintenanceStatusValues: number[] = enumValues(\r\n    this.preventiveMaintenanceStatus\r\n  );\r\n  public showSaveButton = false;\r\n  public preventiveMaintenanceId: string;\r\n  public preventiveMaintenanceNumber: string;\r\n  public isUpdatingPreventiveMaintenance = false;\r\n  public submitted = false;\r\n  public minEndDate = new Date();\r\n  public isAssetAvailable = true;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private preventiveMaintenanceService: PreventiveMaintenanceService,\r\n    private router: Router,\r\n    private preventiveMaintenanceWizard: PreventiveMaintenanceWizard,\r\n    private authenticationService: AuthenticationService,\r\n    private toastService: ToastService\r\n  ) {\r\n    if (this.preventiveMaintenanceWizard.preventiveMaintenance) {\r\n      this.preventiveMaintenanceId = this.preventiveMaintenanceWizard.preventiveMaintenance.id.toString();\r\n      this.preventiveMaintenanceNumber = this.preventiveMaintenanceWizard.preventiveMaintenance.numberWithPrefix;\r\n    } else {\r\n      this.router.navigate(['preventive-maintenance']);\r\n    }\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.setPermissionBooleans();\r\n    this.viewPreventiveMaintenanceForId();\r\n  }\r\n\r\n  public createForm() {\r\n    const validPattern = '^[a-zA-Z0-9 ]*';\r\n    const bulidPreventiveMaintenanceDetailForm = extendedPreventiveMaintenance => {\r\n      this.form = this.formBuilder.group({\r\n        title: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.title,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([\r\n            Validators.maxLength(50),\r\n            Validators.required,\r\n            Validators.pattern(validPattern)\r\n          ])\r\n        ),\r\n        assignedTo: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.assignedTo,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([Validators.maxLength(50)])\r\n        ),\r\n        status: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.status,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([Validators.required])\r\n        ),\r\n        startDate: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.startDate,\r\n            disabled: true\r\n          },\r\n          Validators.compose([Validators.required])\r\n        ),\r\n        endDate: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.endDate,\r\n            disabled: true\r\n          },\r\n          Validators.compose([Validators.required])\r\n        ),\r\n        frequency: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.frequency,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([\r\n            Validators.required,\r\n            Validators.min(1),\r\n            Validators.max(9999)\r\n          ])\r\n        ),\r\n        instruction: new FormControl(\r\n          {\r\n            value: extendedPreventiveMaintenance.instruction,\r\n            disabled: !this.isEditable\r\n          },\r\n          Validators.compose([Validators.maxLength(4000)])\r\n        )\r\n      });\r\n    };\r\n    bulidPreventiveMaintenanceDetailForm(this.extendedPreventiveMaintenance);\r\n    const inputDate = new Date(this.extendedPreventiveMaintenance.startDate);\r\n    if (inputDate) {\r\n      this.onDateChange(inputDate);\r\n    }\r\n    this.isLoading = false;\r\n    this.form.valueChanges.subscribe(() => {\r\n      setTimeout(() => {\r\n        this.updateFormChanges();\r\n      }, 100);\r\n    });\r\n  }\r\n\r\n  public viewPreventiveMaintenanceForId(isOnInit: boolean = true) {\r\n    this.isLoading = true;\r\n    this.preventiveMaintenanceService\r\n      .viewPreventiveMaintenanceDetailForId(this.preventiveMaintenanceId)\r\n      .subscribe((scheduleDetail: IPreventiveMaintenance) => {\r\n        this.extendedPreventiveMaintenance = scheduleDetail;\r\n        if (isOnInit) {\r\n          this.createForm();\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  public handlePickAssets() {\r\n    this.addAssetsModalVisible = true;\r\n  }\r\n\r\n  public disableRightClick(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  public handleDetailsModalClose() {\r\n    this.addAssetsModalVisible = false;\r\n  }\r\n\r\n  public selectedUserId(userId: string) {\r\n    this.form.get('assignedTo').setValue(userId);\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public handleAddedPreventiveMaintenanceAssets(\r\n    preventiveMaintenanceAsset: IAssets[]\r\n  ) {\r\n    this.addAssetsModalVisible = false;\r\n    this.extendedPreventiveMaintenance.maintenanceAssets = preventiveMaintenanceAsset;\r\n    this.isAssetAvailable =\r\n      this.extendedPreventiveMaintenance.maintenanceAssets.filter(\r\n        asset => asset.isDelete !== true\r\n      ).length > 0;\r\n\r\n    this.form.markAsDirty();\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public handleDeleteItem(assetIndex: number) {\r\n    if (\r\n      this.extendedPreventiveMaintenance &&\r\n      this.extendedPreventiveMaintenance.maintenanceAssets\r\n    ) {\r\n      this.extendedPreventiveMaintenance.maintenanceAssets.splice(\r\n        assetIndex,\r\n        1\r\n      );\r\n      this.isAssetAvailable =\r\n        this.extendedPreventiveMaintenance.maintenanceAssets.filter(\r\n          asset => asset.isDelete !== true\r\n        ).length > 0;\r\n\r\n      this.form.markAsDirty();\r\n      this.showSaveButton = true;\r\n    }\r\n  }\r\n\r\n  private setPermissionBooleans() {\r\n    this.isGettingUserRights = true;\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.PreventiveMaintenance]: [\r\n          PreventiveMaintenancePermissions.CanEditPreventiveMaintenance\r\n        ]\r\n      })\r\n      .subscribe(hasPermission => {\r\n        this.isEditable = hasPermission;\r\n        this.isGettingUserRights = false;\r\n      });\r\n  }\r\n\r\n  public updateFormChanges() {\r\n    this.extendedPreventiveMaintenance.status = parseInt(\r\n      this.form.get('status').value\r\n    );\r\n    this.extendedPreventiveMaintenance.assignedTo = this.form.get('assignedTo')\r\n      .value\r\n      ? this.form.get('assignedTo').value.toString()\r\n      : '';\r\n    this.extendedPreventiveMaintenance.title = this.form\r\n      .get('title')\r\n      .value.toString();\r\n    this.extendedPreventiveMaintenance.instruction = this.form\r\n      .get('instruction')\r\n      .value.toString();\r\n    this.extendedPreventiveMaintenance.startDate = formatDate(\r\n      this.form.get('startDate').value,\r\n      'yyyy-MM-ddThh:mm:ss',\r\n      'en-US'\r\n    );\r\n    this.extendedPreventiveMaintenance.endDate = formatDate(\r\n      this.form.get('endDate').value,\r\n      'yyyy-MM-ddThh:mm:ss',\r\n      'en-US'\r\n    );\r\n    this.extendedPreventiveMaintenance.frequency = this.form.get(\r\n      'frequency'\r\n    ).value;\r\n    this.showSaveButton = true;\r\n    this.form.markAsDirty();\r\n  }\r\n\r\n  public updatePreventiveMaintenance() {\r\n    if (!this.isUpdatingPreventiveMaintenance) {\r\n      this.isAssetAvailable =\r\n        this.extendedPreventiveMaintenance.maintenanceAssets.filter(\r\n          asset => asset.isDelete !== true\r\n        ).length > 0;\r\n\r\n      if (!this.form.valid || !this.isAssetAvailable) {\r\n        this.submitted = true;\r\n        this.showSaveButton = false;\r\n        this.isUpdatingPreventiveMaintenance = false;\r\n        this.form.markAsPristine();\r\n        return;\r\n      }\r\n      if (this.form.valid && this.form.dirty) {\r\n        this.extendedPreventiveMaintenance.maintenanceAssets.forEach(\r\n          preventiveMaintenanceAssets => {\r\n            preventiveMaintenanceAssets.referenceId = this.extendedPreventiveMaintenance.id;\r\n          }\r\n        );\r\n        this.extendedPreventiveMaintenance.maintenanceAssets = this.extendedPreventiveMaintenance.maintenanceAssets.filter(\r\n          asset => !asset.isDelete\r\n        );\r\n        this.form.markAsPristine();\r\n        this.preventiveMaintenanceService\r\n          .updatePreventiveMaintenanceDetailForId(\r\n            this.extendedPreventiveMaintenance.id,\r\n            this.extendedPreventiveMaintenance\r\n          )\r\n          .subscribe(\r\n            data => {\r\n              this.viewPreventiveMaintenanceForId(false);\r\n              this.toastService.showToast(\r\n                new Toast(\r\n                  `Schedule ( ${data.numberWithPrefix} ) saved successfully`\r\n                )\r\n              );\r\n            },\r\n            (errorResponse: HttpErrorResponse) => {\r\n              this.toastService.showErrorToast('Unable to save schedule');\r\n              return;\r\n            }\r\n          );\r\n        this.showSaveButton = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public onDateChange(inputDate) {\r\n    if (inputDate.value) {\r\n      this.minEndDate = new Date(inputDate.value);\r\n      this.form.get('endDate').setValue(null);\r\n    } else {\r\n      this.minEndDate = new Date(inputDate);\r\n    }\r\n    this.minEndDate.setDate(this.minEndDate.getDate() + 1);\r\n  }\r\n}\r\n","<app-section-header></app-section-header>\r\n<div *ngIf=\"isLoading || isGettingUserRights\">\r\n  <div class=\"spinner\"></div>\r\n</div>\r\n<article *ngIf=\"!isLoading && !isGettingUserRights\">\r\n  <header>\r\n    <h1>\r\n      {{ isEditable ? 'Edit' : 'View' }} Schedule ({{\r\n        preventiveMaintenanceNumber\r\n      }})\r\n    </h1>\r\n  </header>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"core-info mt-4\">\r\n      <div class=\"row align-items-center\">\r\n        <div class=\"col-4 col-md-2\"></div>\r\n        <div class=\"col-8 col-md-10 \">\r\n          <ng-container *ngIf=\"submitted && form.controls.title.errors\">\r\n            <div class=\"form-group\">\r\n              <div class=\"asset-alert-msgs\">\r\n                <div class=\"alert alert-danger arrow-alert\">\r\n                  You must specify title\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row align-items-center mb-2 mb-sm-4 mb-md-3\">\r\n        <div class=\"col-4 col-md-2\">\r\n          <label>Title</label>\r\n        </div>\r\n        <div class=\"col-8 col-md-10 \">\r\n          <input\r\n            type=\"text\"\r\n            pattern=\"^[a-zA-Z0-9 ]*\"\r\n            formControlName=\"title\"\r\n            class=\"form-control\"\r\n            maxlength=\"50\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        class=\"row\"\r\n        *ngIf=\"\r\n          !extendedPreventiveMaintenance.maintenanceAssets ||\r\n          extendedPreventiveMaintenance.maintenanceAssets.length === 0 || !isAssetAvailable\r\n        \"\r\n      >\r\n        <div class=\"col-sm-12 mb-sm-3 mb-md-0\">\r\n          <div class=\"row d-flex align-items-center\">\r\n            <label class=\"col-4 col-md-2\"></label>\r\n            <div class=\"col-8 col-md-4 col-xl-4\">\r\n              <div class=\"form-group\">\r\n                <div class=\"asset-alert-msgs\">\r\n                  <div class=\"alert alert-danger arrow-alert\">\r\n                    You must specify an asset\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3 mb-md-0\">\r\n          <div class=\"row d-flex align-items-center\">\r\n            <label class=\"col-4\">Asset</label>\r\n            <div class=\"col-8\">\r\n              <input\r\n                type=\"text\"\r\n                readonly\r\n                [value]=\"\"\r\n                class=\"readonly form-control\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n          <div class=\"row d-flex align-items-center\">\r\n            <label class=\"col-4\">Location</label>\r\n            <div class=\"col-8  d-flex align-items-center\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control readonly\"\r\n                [value]=\"\"\r\n                readonly\r\n              />\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"15.002\"\r\n                height=\"19.003\"\r\n                viewBox=\"0 0 14.002 18.003\"\r\n                class=\"del-icon opacity-50\"\r\n              >\r\n                <g id=\"wrench\" transform=\"translate(0.001 0)\">\r\n                  <path\r\n                    id=\"Path_1563\"\r\n                    data-name=\"Path 1563\"\r\n                    d=\"M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z\"\r\n                    transform=\"translate(0.2 1.267)\"\r\n                  />\r\n                  <path\r\n                    id=\"Path_1564\"\r\n                    data-name=\"Path 1564\"\r\n                    d=\"M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z\"\r\n                  />\r\n                  <path\r\n                    id=\"Path_1565\"\r\n                    data-name=\"Path 1565\"\r\n                    d=\"M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z\"\r\n                    transform=\"translate(1.567 2)\"\r\n                  />\r\n                  <path\r\n                    id=\"Path_1566\"\r\n                    data-name=\"Path 1566\"\r\n                    d=\"M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z\"\r\n                    transform=\"translate(0.9 1.967)\"\r\n                  />\r\n                  <path\r\n                    id=\"Path_1567\"\r\n                    data-name=\"Path 1567\"\r\n                    d=\"M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z\"\r\n                    transform=\"translate(2.125 1.991)\"\r\n                  />\r\n                </g>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        *ngFor=\"\r\n          let preventiveMaintenanceAsset of extendedPreventiveMaintenance.maintenanceAssets;\r\n          let i = index\r\n        \"\r\n      >\r\n      <div *ngIf=\"!preventiveMaintenanceAsset.isDelete\" >\r\n\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n            <div class=\"row  d-flex align-items-center\">\r\n              <label class=\"col-4\">Asset</label>\r\n              <div class=\"col-8\">\r\n                <input\r\n                  type=\"text\"\r\n                  readonly\r\n                  [value]=\"\r\n                    preventiveMaintenanceAsset.assetId +\r\n                    ' - ' +\r\n                    preventiveMaintenanceAsset.name\r\n                  \"\r\n                  class=\"readonly form-control\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-sm-6 mb-2 mb-sm-3\">\r\n            <div class=\"row d-flex align-items-center\">\r\n              <label class=\"col-4\">Location</label>\r\n              <div class=\"col-8  d-flex align-items-center\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control readonly location-input\"\r\n                  [value]=\"preventiveMaintenanceAsset.location\"\r\n                  readonly\r\n                />\r\n                <button\r\n                  class=\"delete-btn\"\r\n                  (click)=\"handleDeleteItem(i)\"\r\n                  [disabled]=\"!isEditable\"\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"15.002\"\r\n                    height=\"19.003\"\r\n                    viewBox=\"0 0 14.002 18.003\"\r\n                    class=\"del-icon\"\r\n                  >\r\n                    <g id=\"wrench\" transform=\"translate(0.001 0)\">\r\n                      <path\r\n                        id=\"Path_1563\"\r\n                        data-name=\"Path 1563\"\r\n                        d=\"M12.333,3.933,1.267,3.8c-.133.133-.4.133-.533.267A.8.8,0,0,0,.6,4.6L1.8,16.2c0,.4.267.533.667.533h8.267A.61.61,0,0,0,11.4,16.2L12.867,4.6a.8.8,0,0,0-.133-.533,1.343,1.343,0,0,0-.4-.134Zm-2,11.6h-7.2L2.067,5.267h9.467Z\"\r\n                        transform=\"translate(0.2 1.267)\"\r\n                      />\r\n                      <path\r\n                        id=\"Path_1564\"\r\n                        data-name=\"Path 1564\"\r\n                        d=\"M13.333,3.2H10.667A3.739,3.739,0,0,0,6.933,0a3.607,3.607,0,0,0-3.6,3.2H.667A.63.63,0,0,0,0,3.867a.63.63,0,0,0,.667.667H13.333A.63.63,0,0,0,14,3.867a.63.63,0,0,0-.667-.667Zm-6.4-1.867A2.442,2.442,0,0,1,9.333,3.2H4.667A2.407,2.407,0,0,1,6.933,1.333Z\"\r\n                      />\r\n                      <path\r\n                        id=\"Path_1565\"\r\n                        data-name=\"Path 1565\"\r\n                        d=\"M5.367,13.467a.63.63,0,0,0,.667-.667V6.667A.63.63,0,0,0,5.367,6a.63.63,0,0,0-.667.667v6.267C4.7,13.2,5.1,13.467,5.367,13.467Z\"\r\n                        transform=\"translate(1.567 2)\"\r\n                      />\r\n                      <path\r\n                        id=\"Path_1566\"\r\n                        data-name=\"Path 1566\"\r\n                        d=\"M3.9,13.5a.714.714,0,0,0,.667-.667L4.033,6.567A.714.714,0,0,0,3.367,5.9a.845.845,0,0,0-.667.8l.533,6.267A.886.886,0,0,0,3.9,13.5Z\"\r\n                        transform=\"translate(0.9 1.967)\"\r\n                      />\r\n                      <path\r\n                        id=\"Path_1567\"\r\n                        data-name=\"Path 1567\"\r\n                        d=\"M6.942,13.475a.63.63,0,0,0,.667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533,6.267c-.134.4.133.667.533.667Z\"\r\n                        transform=\"translate(2.125 1.991)\"\r\n                      />\r\n                    </g>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        </div>\r\n\r\n\r\n      </div>\r\n      <div class=\"mb-2 mb-sm-3\" *ngIf=\"isEditable\">\r\n        <button\r\n          class=\"btn btn-link  p-0 add-asset\"\r\n          [disabled]=\"!isEditable\"\r\n          (click)=\"handlePickAssets()\"\r\n        >\r\n          Add Asset\r\n        </button>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-sm-6\">\r\n          <div class=\"row  align-items-center d-flex  mb-2 mb-sm-3\">\r\n            <label class=\"col-4 pe-0\">Schedule start</label>\r\n            <div class=\"col-8\">\r\n              <div class=\"form-group\">\r\n                <div class=\"taro-material-datepicker\">\r\n                  <input\r\n                    matInput\r\n                    [matDatepicker]=\"datePickerStartDate\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"startDate\"\r\n                    (dateChange)=\"onDateChange($event)\"\r\n                  />\r\n                  <mat-datepicker-toggle matSuffix [for]=\"datePickerStartDate\">\r\n                  </mat-datepicker-toggle>\r\n                  <mat-datepicker\r\n                    #datePickerStartDate\r\n                    [disabled]=\"!isEditable\"\r\n                  ></mat-datepicker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row  align-items-center d-flex  mb-2 mb-sm-3\">\r\n            <label class=\"col-4 \">Assigned To</label>\r\n            <div class=\"col-8\">\r\n              <input\r\n                type=\"hidden\"\r\n                formControlName=\"assignedTo\"\r\n                [readOnly]=\"!isEditable\"\r\n                class=\"form-control\"\r\n                maxlength=\"50\"\r\n              />\r\n              <app-list-users\r\n                [isEditable]=\"isEditable\"\r\n                [userName]=\"extendedPreventiveMaintenance.assignedTo\"\r\n                (selectedUserId)=\"selectedUserId($event)\"\r\n              ></app-list-users>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6\">\r\n          <div class=\"row  align-items-center d-flex  mb-2 mb-sm-3\">\r\n            <label class=\"col-4 attachment-icon\"\r\n              >Schedule end\r\n              <span\r\n                tooltip-danger=\"Auto creation of work order will stop on this date. Leave blank if you are unsure or if this maintenance\r\n                  is required for the life of the asset\"\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 19.199 19.2\"\r\n                  width=\"14\"\r\n                  height=\"14\"\r\n                >\r\n                  <path\r\n                    d=\"M0 9.6a9.6 9.6 0 0 0 18.5 3.6 8.571 8.571 0 0 0 .7-3.6A9.6 9.6 0 1 0 0 9.6z\"\r\n                    fill=\"#fff\"\r\n                    stroke=\"#ff422e\"\r\n                  />\r\n                  <g>\r\n                    <path\r\n                      d=\"M9.6 4a1.184 1.184 0 0 1 1.2 1.3 1.2 1.2 0 1 1-2.4 0A1.24 1.24 0 0 1 9.6 4zm-1 3.3h2.1v7.9H8.6z\"\r\n                      fill=\"#ff422e\"\r\n                    />\r\n                  </g>\r\n                </svg>\r\n              </span>\r\n            </label>\r\n            <div class=\"col-8\">\r\n              <div class=\"form-group\">\r\n                <div class=\"taro-material-datepicker\">\r\n                  <input\r\n                    matInput\r\n                    [matDatepicker]=\"datePickerEndDate\"\r\n                    [min]=\"minEndDate\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"endDate\"\r\n                  />\r\n                  <mat-datepicker-toggle matSuffix [for]=\"datePickerEndDate\">\r\n                  </mat-datepicker-toggle>\r\n                  <mat-datepicker\r\n                    #datePickerEndDate\r\n                    [disabled]=\"!isEditable\"\r\n                  ></mat-datepicker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row align-items-center d-flex mb-2 mb-sm-3\">\r\n            <label class=\"col-4\">Status</label>\r\n            <div class=\"col-8\">\r\n              <select\r\n                formControlName=\"status\"\r\n                class=\"custom-select form-control\"\r\n              >\r\n                <option\r\n                  *ngFor=\"\r\n                    let status of preventiveMaintenanceStatusValues;\r\n                    let i = index\r\n                  \"\r\n                  [value]=\"preventiveMaintenanceStatusValues[i]\"\r\n                  [selected]=\"\r\n                    preventiveMaintenanceStatusValues[i] ===\r\n                    extendedPreventiveMaintenance.status\r\n                  \"\r\n                  class=\"form-control\"\r\n                >\r\n                  {{ preventiveMaintenanceStatus[status] }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        class=\"row align-items-center \"\r\n        *ngIf=\"submitted && form.controls.frequency.errors\"\r\n      >\r\n        <div class=\"col-4 col-md-2\"></div>\r\n        <div class=\"col-8 col-md-4 col-xl-3\">\r\n          <div class=\"form-group\">\r\n            <div class=\"asset-alert-msgs\">\r\n              <div class=\"alert alert-danger arrow-alert\">\r\n                You must specify frequency\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row mb-sm-4 mb-2\">\r\n        <div class=\"col-sm-2 col-4 mt-3\">\r\n          <label>Frequency</label>\r\n        </div>\r\n        <div class=\"col-sm-10 col-8\">\r\n          <div class=\"input-group input-with-frequency-wrapper\">\r\n            <input\r\n              type=\"number\"\r\n              formControlName=\"frequency\"\r\n              class=\"form-control\"\r\n              [readOnly]=\"!isEditable\"\r\n              inputmode=\"numeric\"\r\n              pattern=\"[0-9]*\"\r\n              onKeyPress=\"return (this.value.length === 4 || event.key === 'e' || isNaN(event.key)) ? false : true;\"\r\n            />\r\n            <div class=\"input-group-append\">\r\n              <span class=\"input-group-text\"> Days</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"row mb-sm-4 mb-2\">\r\n        <div class=\"col-sm-2 col-4 mt-3\">\r\n          <label>Instructions</label>\r\n        </div>\r\n        <div class=\"col-sm-10 col-8\">\r\n          <textarea\r\n            class=\"form-control\"\r\n            formControlName=\"instruction\"\r\n            [readOnly]=\"!isEditable\"\r\n            rows=\"8\"\r\n            maxlength=\"4000\"\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n      <div\r\n        [style.height.px]=\"\r\n          !isUpdatingPreventiveMaintenance && showSaveButton ? 100 : null\r\n        \"\r\n      ></div>\r\n    </div>\r\n  </form>\r\n  <app-modal\r\n    *ngIf=\"addAssetsModalVisible\"\r\n    (modalShouldClose)=\"handleDetailsModalClose()\"\r\n    (contextmenu)=\"disableRightClick($event)\"\r\n  >\r\n    <app-pick-assets\r\n      (addedAssets)=\"handleAddedPreventiveMaintenanceAssets($event)\"\r\n      [existingAssets]=\"this.extendedPreventiveMaintenance.maintenanceAssets\"\r\n    >\r\n    </app-pick-assets>\r\n  </app-modal>\r\n  <footer>\r\n    <div\r\n      *ngIf=\"form\"\r\n      class=\"form-actions\"\r\n      [class.visible]=\"!isUpdatingPreventiveMaintenance && showSaveButton\"\r\n    >\r\n      <button\r\n        class=\"btn btn-primary btn-block col-12\"\r\n        (click)=\"updatePreventiveMaintenance()\"\r\n      >\r\n        <span>Save all changes</span>\r\n      </button>\r\n    </div>\r\n  </footer>\r\n</article>\r\n","import { Injectable } from '@angular/core';\r\nimport { PreventiveMaintenance } from '../services';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PreventiveMaintenanceWizard {\r\n  public preventiveMaintenance: PreventiveMaintenance;\r\n\r\n  constructor() {}\r\n\r\n  public reset() {\r\n    this.preventiveMaintenance = undefined;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule, formatDate } from '@angular/common';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../shared-module/shared-module.module';\r\nimport { PreventiveMaintenanceRoutingModule } from './preventive-maintenance-routing.module';\r\nimport { PreventiveMaintenanceComponent } from './preventive-maintenance.component';\r\nimport { ViewPreventiveMaintenanceComponent } from './view-preventive-maintenance/view-preventive-maintenance.component';\r\nimport { CreatePreventiveMaintenanceComponent } from './create-preventive-maintenance/create-preventive-maintenance.component';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport {\r\n  MatNativeDateModule,\r\n  NativeDateAdapter,\r\n  DateAdapter,\r\n  MAT_DATE_FORMATS\r\n} from '@angular/material/core';\r\nimport { dateFormatWithMonthName } from 'src/utils/dateUtils';\r\n\r\nclass PickDateAdapter extends NativeDateAdapter {\r\n  format(date: Date, displayFormat: Object): string {\r\n    if (displayFormat === 'input') {\r\n      return formatDate(date, 'dd MMM yyyy', this.locale);\r\n    } else {\r\n      return formatDate(date, 'dd MMM yyyy', this.locale);\r\n    }\r\n  }\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PreventiveMaintenanceComponent,\r\n    ViewPreventiveMaintenanceComponent,\r\n    CreatePreventiveMaintenanceComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    SharedModule,\r\n    PreventiveMaintenanceRoutingModule,\r\n    MatDatepickerModule,\r\n    MatNativeDateModule\r\n  ],\r\n  providers: [\r\n    { provide: DateAdapter, useClass: PickDateAdapter },\r\n    { provide: MAT_DATE_FORMATS, useValue: dateFormatWithMonthName }\r\n  ]\r\n})\r\nexport class PreventiveMaintenanceModule {}\r\n"],"sourceRoot":"webpack:///"}