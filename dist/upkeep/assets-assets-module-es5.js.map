{"version":3,"sources":["webpack:///src/app/assets/asset-item/asset-item.component.ts","webpack:///src/app/assets/asset-item/asset-item.component.html","webpack:///src/app/assets/assets.component.ts","webpack:///src/app/assets/assets.component.html","webpack:///src/app/assets/view-asset/list-subgroup.wizard.ts","webpack:///src/app/assets/assets-routing.module.ts","webpack:///src/app/services/vendor/vendor.service.ts","webpack:///src/app/assets/assets.module.ts","webpack:///src/app/assets/view-asset/list-vendor/list-vendor.component.ts","webpack:///src/app/assets/view-asset/list-vendor/list-vendor.component.html","webpack:///src/app/assets/view-asset/list-sub-group/list-sub-group.component.ts","webpack:///src/app/assets/view-asset/list-sub-group/list-sub-group.component.html","webpack:///src/app/assets/view-asset/list-attached-files/list-attached-files.component.ts","webpack:///src/app/assets/view-asset/list-attached-files/list-attached-files.component.html","webpack:///src/app/assets/view-asset/list-group/list-group.component.ts","webpack:///src/app/assets/view-asset/list-group/list-group.component.html","webpack:///src/app/assets/view-asset/view-asset.component.ts","webpack:///src/app/assets/view-asset/view-asset.component.html"],"names":["AssetItemComponent","router","assetId","assetCode","navigate","handleSelectedAssetClick","AssetsComponent","formBuilder","assetService","assets","isSearching","takeSize","isGettingNextAssets","shouldGetNextAssets","searchForm","group","text","initiateFreshSearchSettings","get","valueChanges","pipe","textValue","length","subscribe","submitSearch","loadNextAssetlist","safelyDestroySearchSubscription","offset","searchSubcription","listAssets","take","value","push","closed","unsubscribe","SubGroupWizard","listSubGroup","undefined","routes","path","component","AssetsRoutingModule","forChild","VendorService","httpClient","authenticationService","vendorURL","apiBaseUrl","userProfile","currentUserProfile$","getValue","primarySite","id","vendor","primarySiteId","PickDateAdapter","date","displayFormat","locale","toDateString","AssetsModule","provide","useClass","useValue","ListVendorComponent","vendorService","listVendorResultsVisible","isVendorSearching","listVendorResults","isVendorSelected","selectedVendorId","listVendorForm","vendorId","vendorNameIsInListResults","listVendor","emit","vendorName","setValue","listVendorSubscription","dirty","getVendor","data","event","key","resultButtons","searchResultElements","toArray","nativeElement","focus","clearlistVendorForm","firstResultButton","target","searchInputElement","previousSibling","nextElementSibling","nextSibling","vendorInfo","setTimeout","searchValue","activeElement","document","dataset","sitename","searchText","result","handleVendorListBlur","handleVendorListKeyUp","ListSubGroupComponent","listSubGroupResultsVisible","isSubGroupSearching","listSubGroupResults","isSubGroupSelected","subGroupId","listSubGroupForm","subGroupNameIsInListResults","assetSubGroupName","listSubGroups","toLowerCase","filter","subGroup","name","includes","clearlistSubGroupForm","handleSubGroupListBlur","handleSubGroupListKeyUp","ListAttachedFilesComponent","deletedFileIndex","fileIndex","fileToOpen","fileURL","file","URL","createObjectURL","window","open","changes","attachedFileCollection","fileCollection","ListGroupComponent","subGroupWizard","listResultsVisible","searchResults","isGroupSelected","listSubgroups","listGroupForm","groupId","groupNameIsInListResults","listGroup","assetGroupName","listGroupsSubscription","getAssetGroup","clearlistGroupForm","selectedGroup","reset","assetSubGroups","handleListBlur","handleListKeyUp","ViewAssetComponent","activeRouter","toastService","fileUploadService","isLoading","showExpandedImage","showSaveButton","isEditable","assetTypes","Object","keys","assetTypesValues","phases","submitAttempted","fileSrcCollection","filesLimit","fileCount","isNewFilesAdded","isUpdatingAsset","filePathCollection","fileTypes","param","snapshot","params","toString","split","next","checkUserEditRights","viewAssetForId","bulidForm","extendedAsset","form","model","manufacturer","assetGroup","assetSubGroup","assetGroupId","assetSubGroupId","assetType","kw","volts","phase","loadFactor","specifications","frequencyDays","compose","maxLength","pattern","validFromDate","validToDate","assetSubGroupValue","toMinDate","Id","fileUploadForm","files","required","isOnInit","assetAttachments$","createForm","attachedFiles","assetAttachments","forEach","filePath","fileNameWithExt","replace","fileName","substring","getFile","fileData","isGettingUserRights","currentUserHasPermission","Assets","CanModifyAssetDetails","hasPermission","controls","setErrors","incorrect","valid","updateAsset","assetTypeId","updateAssetForId","uploadFiles","Asset","savedFileSrcCollection","attachments","showToast","markAsPristine","err","showErrorToast","selectedListSubGroup","inputDate","Date","setDate","getDate","isNaN","keyCode","preventDefault","Number","parseInt","noExistingFile","inputFiles","fileUploadInput","i","clearFileFormErrors","patchValue","hasError","click","splice","resetSaveButtonDisplay","deleteFile","markAsUntouched","updateValueAndValidity","acceptableFileType","acceptableFileSize"],"mappings":"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E;;AAAsC;;AAAoB;;AAC1D;;AAAqC;;;;AAA+D;;AACtG;;AACF;;AACF;;AAEA;;AACE;;AAGI;;AACE;;AACE;;AACE;;AAAsB;;AAAY;;AAClC;;AACE;;AACF;;AACF;;AACA;;AACE;;AAAsB;;AAAY;;AAClC;;AACE;;AACF;;AACF;;AACA;;AACE;;AAAsB;;AAAK;;AAC3B;;AACE;;AACC;;AAEA;AAAA;;AAAA;;AAAA;AAAA;;AACA;;AACH;;AACF;;AACA;;AACE;;AAAsB;;AAAS;;AAC/B;;AACC;;AACA;;AAEC;AAAA;;AAAA;;AAAA;AAAA;;AAEF;;AACA;;AACF;;AACA;;AACE;;AAAsB;;AAAI;;AAC1B;;AACE;;AAEE;;AAIF;;AACF;;AACF;;AACA;;AACE;;AAAsB;;AAAc;;AACpC;;AACE;;AACF;;AACF;;AACA;;AACA;;AACA;;AACF;;AACA;;AACE;;AACE;;AAAsB;;AAAW;;AACjC;;AACE;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AADF;;AASF;;AACF;;AACA;;AACE;;AAAsB;;AAAE;;AACxB;;AACE;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AADF;;AASF;;AACF;;AACA;;AACE;;AAAsB;;AAAK;;AAC3B;;AACE;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AADF;;AASF;;AACF;;AACA;;AACE;;AAAsB;;AAAK;;AAC3B;;AACE;;AAIE;;AAMF;;AACF;;AACF;;AAEA;;AACE;;AAAsB;;AACpB;;AACE;;AAAA;;AACE;;AACA;;AACE;;AACF;;AACF;;AACF;;AACF;;AACA;;AAAA;;AACE;;AACE;;AACE;;AAaA;;AAYF;;AACA;;AACE;;AACE;;AACE;;AACA;;AACA;;AACF;;AACF;;AACA;;AAAmB;;AACjB;AAAA;;AAAA;;AAAA;AAAA;;AAGD;;AAAW;;AAAS;;AACrB;;AAGE;AAAA;;AAAA;;AAAA;AAAA;;AAHF;;AAQF;;AACF;;AACF;;AACF;;AACA;;AAGA;;AACA;;AACA;;AACF;;AACF;;AACJ;;AAEA;;AAGE;;AACE;;AACE;;AACE;;AAA8B;;AAAM;;A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","file":"assets-assets-module-es5.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Asset } from 'src/app/services/asset/asset.types';\r\n\r\n@Component({\r\n  selector: 'app-asset-item',\r\n  templateUrl: './asset-item.component.html',\r\n  styleUrls: ['./asset-item.component.scss']\r\n})\r\nexport class AssetItemComponent implements OnInit {\r\n  @Input()\r\n  public assetItem: Asset;\r\n\r\n  constructor(private router: Router) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  public handleSelectedAssetClick(assetId: string, assetCode: string) {\r\n    this.router.navigate(['assets', assetId + '&&' + assetCode]);\r\n  }\r\n}\r\n","<td class=\"sm-pad\">\r\n  {{assetItem.assetId}}\r\n</td>\r\n<td class=\"sm-pad\">\r\n  {{assetItem.name}}\r\n</td>\r\n<td>\r\n  <div class=\"row-toggle\" (click) = \"handleSelectedAssetClick(assetItem.id, assetItem.assetCode)\">\r\n    <div>\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 8.797 5.194\">\r\n        <path d=\"M8,0l.8.8-4.4,4.4Q2.2,3,0,.8L.8,0C.81-.014,4.394,3.625,4.394,3.625S8.006,0,8,0Z\" />\r\n      </svg>\r\n    </div>\r\n  </div>\r\n</td>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport { Asset } from '../services/asset/asset.types';\r\nimport { AssetService } from '../services/asset/asset.service';\r\n\r\n@Component({\r\n  selector: 'app-assets',\r\n  templateUrl: './assets.component.html',\r\n  styleUrls: ['./assets.component.scss']\r\n})\r\nexport class AssetsComponent implements OnInit, OnDestroy {\r\n  public searchForm: FormGroup;\r\n  public assets: Asset[] = [];\r\n  public isSearching = false;\r\n  private offset: number;\r\n  private takeSize = 20;\r\n  public isGettingNextAssets = false;\r\n  public shouldGetNextAssets = false;\r\n  public searchSubcription: Subscription;\r\n\r\n  constructor(formBuilder: FormBuilder, private assetService: AssetService) {\r\n    this.searchForm = formBuilder.group({\r\n      text: ''\r\n    });\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.initiateFreshSearchSettings();\r\n    this.searchForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length >= 3 || textValue.length === 0)\r\n      )\r\n      .subscribe(() => this.submitSearch());\r\n    this.loadNextAssetlist();\r\n  }\r\n  public ngOnDestroy() {\r\n    this.safelyDestroySearchSubscription();\r\n  }\r\n\r\n  private submitSearch() {\r\n    this.initiateFreshSearchSettings();\r\n    this.loadNextAssetlist();\r\n  }\r\n\r\n  private initiateFreshSearchSettings() {\r\n    this.assets = [];\r\n    this.offset = 0;\r\n    this.shouldGetNextAssets = true;\r\n  }\r\n\r\n  public loadNextAssetlist() {\r\n    this.isGettingNextAssets = true;\r\n    this.safelyDestroySearchSubscription();\r\n    this.searchSubcription = this.assetService\r\n      .listAssets({\r\n        offset: this.offset,\r\n        take: this.takeSize,\r\n        text: this.searchForm.value.text\r\n      })\r\n      .subscribe((assets: Asset[]) => {\r\n        this.assets.push(...assets);\r\n        this.offset += this.takeSize;\r\n        if (assets.length < this.takeSize) {\r\n          this.shouldGetNextAssets = false;\r\n        }\r\n        this.isGettingNextAssets = false;\r\n      });\r\n  }\r\n\r\n  public safelyDestroySearchSubscription() {\r\n    this.searchSubcription &&\r\n      !this.searchSubcription.closed &&\r\n      this.searchSubcription.unsubscribe();\r\n  }\r\n}\r\n","<app-section-header></app-section-header>\r\n\r\n<div>\r\n  <h2>Assets</h2>\r\n  <form [formGroup]=\"searchForm\" class=\"row search-row\">\r\n    <div class=\"col-lg-4 col-sm-6\">\r\n      <div class=\"form-group\">\r\n        <div class=\"input-with-search-wrapper\">\r\n          <input type=\"text\" formControlName=\"text\" class=\"form-control form-control--search-prefix\" placeholder=\"Search by Id or Name\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col-12\">\r\n    <table>\r\n      <thead>\r\n        <th>Id</th>\r\n        <th>Name</th>\r\n      </thead>\r\n      <tbody *ngIf=\"isSearching || isGettingNextAssets\">\r\n        <tr>\r\n          <td colspan=\"8\">\r\n            <div class=\"spinner\"></div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody *ngIf=\"assets.length === 0 && !isSearching && !isGettingNextAssets\">\r\n        <tr>\r\n          <td colspan=\"8\">\r\n            <div class=\"mt-3\">\r\n              No assets found for this site\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody *ngIf=\"assets.length > 0 && !isSearching\">\r\n        <app-asset-item *ngFor=\"let assetItem of assets\" [assetItem]=\"assetItem\"></app-asset-item>\r\n        <tr class=\"loading-row\" *ngIf=\"isGettingNextAssets\">\r\n          <td colspan=\"7\">\r\n            <div class=\"spinner\"></div>\r\n          </td>\r\n        </tr>\r\n        <tr class=\"load-more-row\" *ngIf=\"shouldGetNextAssets && !isGettingNextAssets && assets.length > 0\">\r\n          <td colspan=\"7\" class=\"pt-3 text-center\">\r\n            <button (click)=\"loadNextAssetlist()\" class=\"btn btn-link\">Load More</button><br><br>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { SubGroup } from 'src/app/services/asset/asset.types';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SubGroupWizard {\r\n  public listSubGroup: SubGroup[];\r\n\r\n  public reset() {\r\n    this.listSubGroup = undefined;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AssetsComponent } from './assets.component';\r\nimport { ViewAssetComponent } from './view-asset/view-asset.component';\r\n\r\nexport const routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AssetsComponent\r\n  },\r\n  {\r\n    path: ':id',\r\n    component: ViewAssetComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AssetsRoutingModule {}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AuthenticationService } from '../authentication/authentication.service';\r\nimport { Vendor } from './vendor.types';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VendorService {\r\n  private vendorURL = `${environment.apiBaseUrl}/vendor`;\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private authenticationService: AuthenticationService\r\n  ) {}\r\n\r\n  public get primarySiteId(): string {\r\n    const userProfile = this.authenticationService.currentUserProfile$.getValue();\r\n    if (userProfile && userProfile.primarySite) {\r\n      return userProfile.primarySite.id;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public getVendor(vendor: string): Observable<Vendor[]> {\r\n    return this.httpClient.get<Vendor[]>(\r\n      `${this.vendorURL}?siteId=${this.primarySiteId}&Text=${vendor}`\r\n    );\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../shared-module/shared-module.module';\r\nimport { AssetItemComponent } from './asset-item/asset-item.component';\r\nimport { AssetsRoutingModule } from './assets-routing.module';\r\nimport { AssetsComponent } from './assets.component';\r\nimport { ViewAssetComponent } from './view-asset/view-asset.component';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport {\r\n  MatNativeDateModule,\r\n  MAT_DATE_FORMATS,\r\n  NativeDateAdapter,\r\n  DateAdapter\r\n} from '@angular/material/core';\r\nimport { formatDate } from '@angular/common';\r\nimport { dateFormatWithMonthName } from 'src/utils/dateUtils';\r\nimport { ListVendorComponent } from './view-asset/list-vendor/list-vendor.component';\r\nimport { ListGroupComponent } from './view-asset/list-group/list-group.component';\r\nimport { ListSubGroupComponent } from './view-asset/list-sub-group/list-sub-group.component';\r\nimport { ListAttachedFilesComponent } from './view-asset/list-attached-files/list-attached-files.component';\r\n\r\nclass PickDateAdapter extends NativeDateAdapter {\r\n  format(date: Date, displayFormat: Object): string {\r\n    if (displayFormat === 'input') {\r\n      return formatDate(date, 'dd MMM yyyy', this.locale);\r\n    } else {\r\n      return date.toDateString();\r\n    }\r\n  }\r\n}\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    ReactiveFormsModule,\r\n    AssetsRoutingModule,\r\n    MatDatepickerModule,\r\n    MatNativeDateModule\r\n  ],\r\n  declarations: [\r\n    AssetsComponent,\r\n    AssetItemComponent,\r\n    ViewAssetComponent,\r\n    ListVendorComponent,\r\n    ListGroupComponent,\r\n    ListSubGroupComponent,\r\n    ListAttachedFilesComponent\r\n  ],\r\n  providers: [\r\n    { provide: DateAdapter, useClass: PickDateAdapter },\r\n    { provide: MAT_DATE_FORMATS, useValue: dateFormatWithMonthName }\r\n  ]\r\n})\r\nexport class AssetsModule {}\r\n","import {\r\n  Component,\r\n  OnDestroy,\r\n  OnInit,\r\n  ViewChildren,\r\n  ElementRef,\r\n  ViewChild,\r\n  QueryList,\r\n  Input,\r\n  Output,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport { VendorService } from 'src/app/services/vendor/vendor.service';\r\nimport { Vendor } from 'src/app/services/vendor/vendor.types';\r\n\r\n@Component({\r\n  selector: 'app-list-vendor',\r\n  templateUrl: './list-vendor.component.html',\r\n  styleUrls: ['./list-vendor.component.scss']\r\n})\r\nexport class ListVendorComponent implements OnInit, OnDestroy {\r\n  public listVendorResultsVisible = false;\r\n  public isVendorSearching = false;\r\n  public listVendorResults: Vendor[] = [];\r\n  public listVendorForm: FormGroup;\r\n  public listVendorSubscription: Subscription;\r\n  @ViewChildren('searchResult')\r\n  public searchResultElements: QueryList<ElementRef>;\r\n  @ViewChild('searchInput')\r\n  public searchInputElement: ElementRef;\r\n  public isVendorSelected = false;\r\n  @Input() isEditable: boolean;\r\n  @Input() vendorName: string;\r\n  @Output() selectedVendorId = new EventEmitter<string>();\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private vendorService: VendorService\r\n  ) {\r\n    this.listVendorForm = this.formBuilder.group({\r\n      text: '',\r\n      vendorId: null\r\n    });\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.listVendorForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n\r\n        filter(textValue => textValue.length >= 3),\r\n        filter(textValue => !this.vendorNameIsInListResults(textValue))\r\n      )\r\n      .subscribe(() => this.listVendor());\r\n\r\n    this.listVendorForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length < 3)\r\n      )\r\n      .subscribe(() => {\r\n        this.listVendorResultsVisible = false;\r\n      });\r\n\r\n    this.listVendorForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length === 0)\r\n      )\r\n      .subscribe(() => {\r\n        this.selectedVendorId.emit(null);\r\n      });\r\n\r\n    if (this.vendorName) {\r\n      this.listVendorForm.setValue({ text: this.vendorName, vendorId: '' });\r\n    }\r\n  }\r\n\r\n  public listVendor() {\r\n    this.listVendorSubscription &&\r\n      !this.listVendorSubscription.closed &&\r\n      this.listVendorSubscription.unsubscribe();\r\n    const textValue = this.listVendorForm.get('text').value;\r\n    if (this.isVendorSelected === false) {\r\n      this.isVendorSearching = true;\r\n      this.listVendorResultsVisible = this.listVendorForm.get('text').dirty\r\n        ? true\r\n        : false;\r\n      this.listVendorSubscription = this.vendorService\r\n        .getVendor(textValue)\r\n        .subscribe((data: Vendor[]) => {\r\n          this.listVendorResults = data;\r\n          this.isVendorSearching = false;\r\n        });\r\n    }\r\n  }\r\n\r\n  public handleVendorListKeyUp(event) {\r\n    this.isVendorSelected = false;\r\n    switch (event.key) {\r\n      case 'ArrowDown':\r\n        const resultButtons = this.searchResultElements.toArray();\r\n        resultButtons.length > 0 && resultButtons[0].nativeElement.focus();\r\n        break;\r\n      case 'Escape':\r\n        this.clearlistVendorForm();\r\n        break;\r\n    }\r\n  }\r\n\r\n  public handleVendorListResultKeyUp(event) {\r\n    switch (event.key) {\r\n      case 'ArrowUp':\r\n        const firstResultButton = this.searchResultElements.toArray()[0]\r\n          .nativeElement;\r\n        if (event.target === firstResultButton) {\r\n          this.searchInputElement.nativeElement.focus();\r\n        } else {\r\n          event.target.previousSibling.focus();\r\n        }\r\n        break;\r\n      case 'ArrowDown':\r\n        if (event.target.nextElementSibling != null) {\r\n          event.target.nextSibling && event.target.nextSibling.focus();\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        this.clearlistVendorForm();\r\n        break;\r\n    }\r\n  }\r\n\r\n  public handleVendorListResultClick(vendor: Vendor) {\r\n    this.listVendorForm.setValue({\r\n      text: vendor.vendorInfo,\r\n      vendorId: vendor.id\r\n    });\r\n    this.listVendorResultsVisible = false;\r\n    this.isVendorSelected = true;\r\n    this.selectedVendorId.emit(vendor.vendorInfo);\r\n  }\r\n\r\n  public handleVendorListBlur() {\r\n    setTimeout(() => {\r\n      const searchValue = this.listVendorForm.get('text').value;\r\n      const activeElement: HTMLElement = document.activeElement as HTMLElement;\r\n      if (\r\n        this.vendorNameIsInListResults(searchValue) ||\r\n        activeElement.dataset.sitename\r\n      ) {\r\n        return;\r\n      }\r\n      if (!searchValue) {\r\n        this.clearlistVendorForm();\r\n      }\r\n    }, 0);\r\n  }\r\n\r\n  public vendorNameIsInListResults(searchText: string) {\r\n    let result = false;\r\n    for (const vendor of this.listVendorResults) {\r\n      if (vendor.vendorInfo === searchText) {\r\n        result = true;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public clearlistVendorForm() {\r\n    this.listVendorForm.setValue({ text: '', vendorId: null });\r\n    this.listVendorResultsVisible = false;\r\n  }\r\n\r\n  public ngOnDestroy() {\r\n    this.listVendorSubscription &&\r\n      !this.listVendorSubscription.closed &&\r\n      this.listVendorSubscription.unsubscribe();\r\n  }\r\n}\r\n","<form class=\"row\" [formGroup]=\"listVendorForm\">\r\n  <div >\r\n    <div class=\"form-group\">\r\n      <div class=\"find-as-you-type\" [class.find-as-you-type--suggestions-visible]=\"isVendorSearching || listVendorResultsVisible\">\r\n        <input\r\n          #searchInput\r\n          formControlName=\"text\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          placeholder=\"Select Vendor\"\r\n          (blur)=\"handleVendorListBlur()\"\r\n          (keyup)=\"handleVendorListKeyUp($event)\"\r\n          [readonly]=isEditable\r\n        >\r\n        <input formControlName=\"vendorId\" type=\"hidden\" />\r\n        <div *ngIf=\"listVendorResultsVisible\">\r\n          <div *ngIf=\"!isVendorSearching\" class=\"find-as-you-type__results dropdown-scroll\">\r\n            <button class=\"select-vendor-btn\"\r\n              #searchResult\r\n              *ngFor=\"let vendor of listVendorResults\"\r\n              (keyup)=\"handleVendorListResultKeyUp($event)\"\r\n              (click)=\"handleVendorListResultClick(vendor)\"\r\n              [attr.data-sitename] = \"vendor.vendorInfo\"\r\n            >\r\n             {{vendor.vendorInfo}}\r\n            </button>\r\n          </div>\r\n\r\n          <div *ngIf=\"listVendorResults.length === 0 && !isVendorSearching\" class=\"find-as-you-type__no-results\">\r\n            No vendor found\r\n          </div>\r\n          <div *ngIf=\"isVendorSearching\" class=\"find-as-you-type__spinner-container\">\r\n            <div class=\"spinner\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n </div>\r\n</form>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  ViewChildren,\r\n  ElementRef,\r\n  ViewChild,\r\n  QueryList,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnChanges\r\n} from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport { SubGroup } from '../../../services/asset/asset.types';\r\n\r\n@Component({\r\n  selector: 'app-list-sub-group',\r\n  templateUrl: './list-sub-group.component.html',\r\n  styleUrls: ['./list-sub-group.component.scss']\r\n})\r\nexport class ListSubGroupComponent implements OnInit, OnChanges {\r\n  public listSubGroupResultsVisible = false;\r\n  public isSubGroupSearching = false;\r\n  public listSubGroupResults: SubGroup[] = [];\r\n  public listSubGroupForm: FormGroup;\r\n  @ViewChildren('searchResult')\r\n  public searchResultElements: QueryList<ElementRef>;\r\n  @ViewChild('searchInput')\r\n  public searchInputElement: ElementRef;\r\n  public isSubGroupSelected = false;\r\n  @Input() listSubGroups: SubGroup[];\r\n  @Input() assetSubGroupName: string;\r\n  @Output() subGroupId = new EventEmitter<number>();\r\n\r\n  constructor(private formBuilder: FormBuilder) {\r\n    this.listSubGroupForm = this.formBuilder.group({\r\n      text: '',\r\n      subGroupId: null\r\n    });\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.listSubGroupForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length >= 3),\r\n        filter(textValue => !this.subGroupNameIsInListResults(textValue))\r\n      )\r\n      .subscribe(() => this.listSubGroup());\r\n\r\n    this.listSubGroupForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length < 3)\r\n      )\r\n      .subscribe(() => {\r\n        this.listSubGroupResultsVisible = false;\r\n      });\r\n    if (this.assetSubGroupName) {\r\n      this.listSubGroupForm.get('text').setValue(this.assetSubGroupName);\r\n    }\r\n  }\r\n\r\n  public listSubGroup() {\r\n    if (this.listSubGroups && this.isSubGroupSelected === false) {\r\n      const textValue = this.listSubGroupForm.get('text').value.toLowerCase();\r\n      this.isSubGroupSearching = true;\r\n      this.listSubGroupResultsVisible = this.listSubGroupForm.get('text').dirty\r\n        ? true\r\n        : false;\r\n      this.listSubGroupResults = this.listSubGroups.filter(subGroup =>\r\n        subGroup.name.toLowerCase().includes(textValue)\r\n      );\r\n      this.isSubGroupSearching = false;\r\n    }\r\n  }\r\n\r\n  public handleSubGroupListKeyUp(event) {\r\n    this.isSubGroupSelected = false;\r\n    switch (event.key) {\r\n      case 'ArrowDown':\r\n        const resultButtons = this.searchResultElements.toArray();\r\n        resultButtons.length > 0 && resultButtons[0].nativeElement.focus();\r\n        break;\r\n      case 'Escape':\r\n        this.clearlistSubGroupForm();\r\n        break;\r\n    }\r\n  }\r\n\r\n  public handleSubGroupListResultKeyUp(event) {\r\n    switch (event.key) {\r\n      case 'ArrowUp':\r\n        const firstResultButton = this.searchResultElements.toArray()[0]\r\n          .nativeElement;\r\n        if (event.target === firstResultButton) {\r\n          this.searchInputElement.nativeElement.focus();\r\n        } else {\r\n          event.target.previousSibling.focus();\r\n        }\r\n        break;\r\n      case 'ArrowDown':\r\n        if (event.target.nextElementSibling != null) {\r\n          event.target.nextSibling && event.target.nextSibling.focus();\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        this.clearlistSubGroupForm();\r\n        break;\r\n    }\r\n  }\r\n\r\n  public handleSubGroupListResultClick(subGroup: SubGroup) {\r\n    this.listSubGroupForm.setValue({\r\n      text: subGroup.name,\r\n      subGroupId: subGroup.id\r\n    });\r\n    this.listSubGroupResultsVisible = false;\r\n    this.isSubGroupSelected = true;\r\n    this.subGroupId.emit(subGroup.id);\r\n  }\r\n\r\n  public handleSubGroupListBlur() {\r\n    setTimeout(() => {\r\n      const searchValue = this.listSubGroupForm.get('text').value;\r\n      if (this.subGroupNameIsInListResults(searchValue) || searchValue !== '') {\r\n        return;\r\n      }\r\n      this.clearlistSubGroupForm();\r\n    }, 0);\r\n  }\r\n\r\n  public subGroupNameIsInListResults(searchText: string) {\r\n    let result = false;\r\n    for (const subGroup of this.listSubGroupResults) {\r\n      if (subGroup.name === searchText) {\r\n        result = true;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public clearlistSubGroupForm() {\r\n    this.listSubGroupForm.setValue({ text: '', subGroupId: null });\r\n    this.listSubGroupResultsVisible = false;\r\n  }\r\n\r\n  public ngOnChanges(): void {\r\n    this.clearlistSubGroupForm();\r\n  }\r\n}\r\n","<form class=\"row\" [formGroup]=\"listSubGroupForm\">\r\n  <div >\r\n    <div class=\"form-group\">\r\n      <div class=\"find-as-you-type\" [class.find-as-you-type--suggestions-visible]=\"isSubGroupSearching || listSubGroupResultsVisible\">\r\n        <input\r\n          #searchInput\r\n          formControlName=\"text\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          placeholder=\"Select Asset SubGroup\"\r\n          (blur)=\"handleSubGroupListBlur()\"\r\n          (keyup)=\"handleSubGroupListKeyUp($event)\"\r\n          [readonly]=\"!listSubGroups\"\r\n        >\r\n        <input formControlName=\"subGroupId\" type=\"hidden\" />\r\n        <div *ngIf=\"listSubGroupResultsVisible\">\r\n          <div *ngIf=\"!isSubGroupSearching\" class=\"find-as-you-type__results dropdown-scroll\">\r\n            <button class=\"select-subgroup-btn\"\r\n              #searchResult\r\n              *ngFor=\"let subGroup of listSubGroupResults\"\r\n              (keyup)=\"handleSubGroupListResultKeyUp($event)\"\r\n              (click)=\"handleSubGroupListResultClick(subGroup)\"\r\n              [attr.data-sitename] = \"subGroup.name\"\r\n            >\r\n             {{subGroup.name}}\r\n            </button>\r\n          </div>\r\n\r\n          <div *ngIf=\"listSubGroupResults.length === 0 && !isSubGroupSearching\" class=\"find-as-you-type__no-results\">\r\n            No subgroup found\r\n          </div>\r\n          <div *ngIf=\"isSubGroupSearching\" class=\"find-as-you-type__spinner-container\">\r\n            <div class=\"spinner\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n </div>\r\n</form>\r\n","import {\r\n  Component,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { IFileCollection } from 'src/app/services';\r\n\r\n@Component({\r\n  selector: 'app-list-attached-files',\r\n  templateUrl: './list-attached-files.component.html',\r\n  styleUrls: ['./list-attached-files.component.scss']\r\n})\r\nexport class ListAttachedFilesComponent implements OnInit, OnChanges {\r\n  @Input() public attachedFileCollection: Observable<IFileCollection[]>;\r\n  @Input() public isEditable: boolean;\r\n  public fileCollection: IFileCollection[];\r\n  @Output() public deletedFileIndex = new EventEmitter<number>();\r\n\r\n  constructor() {}\r\n\r\n  public ngOnInit() {}\r\n\r\n  public handleDeleteItem(fileIndex: number) {\r\n    this.deletedFileIndex.emit(fileIndex);\r\n  }\r\n\r\n  public handleOpenFile(fileToOpen: any) {\r\n    let fileURL;\r\n    if (fileToOpen.file) {\r\n      fileURL = URL.createObjectURL(fileToOpen.file);\r\n    } else {\r\n      fileURL = URL.createObjectURL(fileToOpen);\r\n    }\r\n    window.open(fileURL, '_blank');\r\n  }\r\n\r\n  public ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['attachedFileCollection'] && this.attachedFileCollection) {\r\n      this.attachedFileCollection.subscribe(value => {\r\n        setTimeout(() => {\r\n          this.fileCollection = value;\r\n        });\r\n      });\r\n    }\r\n  }\r\n}\r\n","<div class=\"row  d-flex  file-attach\">\r\n<div *ngFor=\"let file of fileCollection; let i = index\" class=\"file-details\" [ngClass]=\"fileCollection.length > 1 ? 'rows-'+fileCollection.length+'-file-' + i : ''\">\r\n  <div class=\"col-4 blank-color\"></div>\r\n\r\n  <div class=\"file-link col-6\">\r\n    <a (click)=\"handleOpenFile(file)\" target=\"_blank\">\r\n      <span *ngIf=\"file.name\">{{ file.name }}</span><span *ngIf=\"!file.name\">file-{{i}}</span> </a>\r\n  </div>\r\n  <div class=\"col-2\">\r\n    <button\r\n    (click)=\"handleDeleteItem(i)\"\r\n    class=\"delete-btn\"\r\n    [disabled]=\"!isEditable\"\r\n  >\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 18\">\r\n        <defs />\r\n        <path\r\n          d=\"M12.333 3.933L1.267 3.8c-.133.133-.4.133-.533.267A.8.8 0 0 0 .6 4.6l1.2 11.6c0 .4.267.533.667.533h8.267a.61.61 0 0 0 .666-.533l1.467-11.6a.8.8 0 0 0-.133-.533 1.343 1.343 0 0 0-.401-.134zm-2 11.6h-7.2L2.067 5.267h9.467z\"\r\n          class=\"cls-1\"\r\n          transform=\"translate(.2 1.267)\"\r\n        />\r\n        <path\r\n          d=\"M13.333 3.2h-2.666A3.739 3.739 0 0 0 6.933 0a3.607 3.607 0 0 0-3.6 3.2H.667A.63.63 0 0 0 0 3.867a.63.63 0 0 0 .667.667h12.666A.63.63 0 0 0 14 3.867a.63.63 0 0 0-.667-.667zm-6.4-1.867a2.442 2.442 0 0 1 2.4 1.867H4.667a2.407 2.407 0 0 1 2.266-1.867z\"\r\n          class=\"cls-1\"\r\n        />\r\n        <path\r\n          d=\"M5.367 13.467a.63.63 0 0 0 .667-.667V6.667A.63.63 0 0 0 5.367 6a.63.63 0 0 0-.667.667v6.267c0 .266.4.533.667.533z\"\r\n          class=\"cls-1\"\r\n          transform=\"translate(1.567 2)\"\r\n        />\r\n        <path\r\n          d=\"M3.9 13.5a.714.714 0 0 0 .667-.667l-.534-6.266a.714.714 0 0 0-.666-.667.845.845 0 0 0-.667.8l.533 6.267a.886.886 0 0 0 .667.533z\"\r\n          class=\"cls-1\"\r\n          transform=\"translate(.9 1.967)\"\r\n        />\r\n        <path\r\n          d=\"M6.942 13.475a.63.63 0 0 0 .667-.667l.533-6.267c.133-.267-.133-.533-.533-.533-.4-.133-.667.133-.667.533l-.533 6.267c-.134.401.133.667.533.667z\"\r\n          class=\"cls-1\"\r\n          transform=\"translate(2.125 1.991)\"\r\n        />\r\n      </svg>\r\n    </button>\r\n    </div>\r\n\r\n</div>\r\n</div>\r\n","import {\r\n  Component,\r\n  OnDestroy,\r\n  OnInit,\r\n  ViewChildren,\r\n  ElementRef,\r\n  ViewChild,\r\n  QueryList,\r\n  Input,\r\n  Output,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport {\r\n  Group,\r\n  AssetGroupAndSubGroup,\r\n  SubGroup\r\n} from '../../../services/asset/asset.types';\r\nimport { SubGroupWizard } from '../list-subgroup.wizard';\r\nimport { AssetService } from 'src/app/services/asset/asset.service';\r\n\r\n@Component({\r\n  selector: 'app-list-group',\r\n  templateUrl: './list-group.component.html',\r\n  styleUrls: ['./list-group.component.scss']\r\n})\r\nexport class ListGroupComponent implements OnInit, OnDestroy {\r\n  public listResultsVisible = false;\r\n  public isSearching = false;\r\n  public searchResults: AssetGroupAndSubGroup[] = [];\r\n  public listGroupForm: FormGroup;\r\n  public listGroupsSubscription: Subscription;\r\n  @ViewChildren('searchResult')\r\n  public searchResultElements: QueryList<ElementRef>;\r\n  @ViewChild('searchInput')\r\n  public searchInputElement: ElementRef;\r\n  public isGroupSelected = false;\r\n  @Input() isEditable: boolean;\r\n  @Input() assetGroupName: string;\r\n  @Input() assetGroupId: number;\r\n  @Output() listSubgroups = new EventEmitter<{\r\n    subGroup: SubGroup[];\r\n    groupId: number;\r\n  }>();\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private assetService: AssetService,\r\n    public subGroupWizard: SubGroupWizard\r\n  ) {\r\n    this.listGroupForm = this.formBuilder.group({\r\n      text: '',\r\n      groupId: null\r\n    });\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.listGroupForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length >= 3),\r\n        filter(textValue => !this.groupNameIsInListResults(textValue))\r\n      )\r\n      .subscribe(() => this.listGroup());\r\n\r\n    this.listGroupForm\r\n      .get('text')\r\n      .valueChanges.pipe(\r\n        debounceTime(700),\r\n        filter(textValue => textValue.length < 3)\r\n      )\r\n      .subscribe(() => {\r\n        this.listResultsVisible = false;\r\n      });\r\n    if (this.assetGroupName) {\r\n      this.listGroupForm.setValue({ text: this.assetGroupName, groupId: '' });\r\n    }\r\n  }\r\n\r\n  public listGroup() {\r\n    this.listGroupsSubscription &&\r\n      !this.listGroupsSubscription.closed &&\r\n      this.listGroupsSubscription.unsubscribe();\r\n    const textValue = this.listGroupForm.get('text').value;\r\n    if (this.isGroupSelected === false) {\r\n      this.isSearching = true;\r\n      this.listResultsVisible = this.listGroupForm.get('text').dirty\r\n        ? true\r\n        : false;\r\n      this.listGroupsSubscription = this.assetService\r\n        .getAssetGroup(textValue)\r\n        .subscribe((data: AssetGroupAndSubGroup[]) => {\r\n          this.searchResults = data;\r\n          this.isSearching = false;\r\n        });\r\n    }\r\n  }\r\n\r\n  public handleListKeyUp(event) {\r\n    this.isGroupSelected = false;\r\n    switch (event.key) {\r\n      case 'ArrowDown':\r\n        const resultButtons = this.searchResultElements.toArray();\r\n        resultButtons.length > 0 && resultButtons[0].nativeElement.focus();\r\n        break;\r\n      case 'Escape':\r\n        this.clearlistGroupForm();\r\n        break;\r\n    }\r\n  }\r\n\r\n  public handleListResultKeyUp(event) {\r\n    switch (event.key) {\r\n      case 'ArrowUp':\r\n        const firstResultButton = this.searchResultElements.toArray()[0]\r\n          .nativeElement;\r\n        if (event.target === firstResultButton) {\r\n          this.searchInputElement.nativeElement.focus();\r\n        } else {\r\n          event.target.previousSibling.focus();\r\n        }\r\n        break;\r\n      case 'ArrowDown':\r\n        if (event.target.nextElementSibling != null) {\r\n          event.target.nextSibling && event.target.nextSibling.focus();\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        this.clearlistGroupForm();\r\n        break;\r\n    }\r\n  }\r\n\r\n  public handleListResultClick(group: Group) {\r\n    let selectedGroup: AssetGroupAndSubGroup[];\r\n    this.listGroupForm.setValue({\r\n      text: group.name,\r\n      groupId: group.id\r\n    });\r\n    this.listResultsVisible = false;\r\n    this.isGroupSelected = true;\r\n    selectedGroup = this.searchResults.filter(\r\n      group => group.name === this.listGroupForm.get('text').value\r\n    );\r\n    this.subGroupWizard.reset();\r\n    this.subGroupWizard.listSubGroup = selectedGroup[0].assetSubGroups;\r\n    this.listSubgroups.emit({\r\n      subGroup: this.subGroupWizard.listSubGroup,\r\n      groupId: group.id\r\n    });\r\n  }\r\n\r\n  public handleListBlur() {\r\n    setTimeout(() => {\r\n      const searchValue = this.listGroupForm.get('text').value;\r\n      const activeElement: HTMLElement = document.activeElement as HTMLElement;\r\n      if (\r\n        this.groupNameIsInListResults(searchValue) ||\r\n        activeElement.dataset.sitename\r\n      ) {\r\n        return;\r\n      }\r\n      this.clearlistGroupForm();\r\n    }, 0);\r\n  }\r\n\r\n  public groupNameIsInListResults(searchText: string) {\r\n    let result = false;\r\n    for (const group of this.searchResults) {\r\n      if (group.name === searchText) {\r\n        result = true;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public clearlistGroupForm() {\r\n    this.listGroupForm.setValue({ text: '', groupId: null });\r\n    this.listResultsVisible = false;\r\n  }\r\n\r\n  public ngOnDestroy() {\r\n    this.listGroupsSubscription &&\r\n      !this.listGroupsSubscription.closed &&\r\n      this.listGroupsSubscription.unsubscribe();\r\n  }\r\n}\r\n","<form class=\"row\" [formGroup]=\"listGroupForm\">\r\n  <div >\r\n    <div class=\"form-group\">\r\n      <div class=\"find-as-you-type\" [class.find-as-you-type--suggestions-visible]=\"isSearching || listResultsVisible\">\r\n        <input\r\n          #searchInput\r\n          formControlName=\"text\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          placeholder=\"Select Asset Group\"\r\n          (blur)=\"handleListBlur()\"\r\n          (keyup)=\"handleListKeyUp($event)\"\r\n          [readonly]=!isEditable\r\n        >\r\n        <input formControlName=\"groupId\" type=\"hidden\" />\r\n        <div *ngIf=\"listResultsVisible\">\r\n          <div *ngIf=\"!isSearching\" class=\"find-as-you-type__results dropdown-scroll\">\r\n            <button class=\"select-group-btn\"\r\n              #searchResult\r\n              *ngFor=\"let group of searchResults\"\r\n              (keyup)=\"handleListResultKeyUp($event)\"\r\n              (click)=\"handleListResultClick(group)\"\r\n              [attr.data-sitename] = \"group.name\"\r\n            >\r\n             {{group.name}}\r\n            </button>\r\n          </div>\r\n\r\n          <div *ngIf=\"searchResults.length === 0 && !isSearching\" class=\"find-as-you-type__no-results\">\r\n            No group found\r\n          </div>\r\n          <div *ngIf=\"isSearching\" class=\"find-as-you-type__spinner-container\">\r\n            <div class=\"spinner\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n </div>\r\n</form>\r\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Toast, ToastService } from 'src/app/services/toast/toast.service';\r\nimport { enumValues } from 'src/utils/enumUtils';\r\nimport { formatDate } from '@angular/common';\r\nimport {\r\n  AssetService,\r\n  AssetType,\r\n  Phase,\r\n  ExtendedAsset,\r\n  IExtendedAsset,\r\n  IFileCollection,\r\n  IUpdateAsset,\r\n  AuthenticationService,\r\n  SubGroup,\r\n  FilehandlerService,\r\n  Modules,\r\n  PermissionGroup,\r\n  AssetsPermissions\r\n} from 'src/app/services';\r\nimport {\r\n  fileListFileTypeValidator,\r\n  fileListFileSizesValidator,\r\n  fileListNumberOfFilesValidator\r\n} from 'src/utils/formValidators';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-view-asset',\r\n  templateUrl: './view-asset.component.html',\r\n  styleUrls: ['./view-asset.component.scss']\r\n})\r\nexport class ViewAssetComponent implements OnInit {\r\n  public isLoading = false;\r\n  public showExpandedImage = false;\r\n  public showSaveButton = false;\r\n  public assetId: string;\r\n  public assetCode: string;\r\n  public extendedAsset: ExtendedAsset;\r\n  public form: FormGroup;\r\n  public isEditable = false;\r\n  public toMinDate: Date;\r\n  public assetTypes = Object.keys(AssetType);\r\n  public assetTypesValues: number[] = enumValues(AssetType);\r\n  public phases = Object.keys(Phase);\r\n  public submitAttempted = false;\r\n  public Id: string;\r\n  public selectedListSubGroup: SubGroup[];\r\n  public assetSubGroupValue: string;\r\n  public fileUploadForm: FormGroup;\r\n  @ViewChild('fileUploadInput')\r\n  public fileUploadInput: ElementRef;\r\n  public fileSrcCollection: IFileCollection[] = [];\r\n  public filesLimit = 3;\r\n  @ViewChild('alertElementRef')\r\n  public alertElementRef: ElementRef;\r\n  public attachedFileCollection = new BehaviorSubject<IFileCollection[]>([]);\r\n  public fileCount: number = 0;\r\n  public isNewFilesAdded: boolean = false;\r\n  public isUpdatingAsset = false;\r\n  public savedFileSrcCollection: any;\r\n  public filePathCollection: string[] = [];\r\n  public fileTypes = [\r\n    'image/jpeg',\r\n    'image/png',\r\n    'application/msword',\r\n    'jpeg',\r\n    'jpg',\r\n    'png',\r\n    'doc',\r\n    'docx',\r\n    'xls',\r\n    'csv',\r\n    'application/ms-excel',\r\n    'xlsx',\r\n    'pdf',\r\n    'bmp'\r\n  ];\r\n  public isGettingUserRights: boolean;\r\n\r\n  constructor(\r\n    private assetService: AssetService,\r\n    private activeRouter: ActivatedRoute,\r\n    private formBuilder: FormBuilder,\r\n    private authenticationService: AuthenticationService,\r\n    private toastService: ToastService,\r\n    private fileUploadService: FilehandlerService\r\n  ) {\r\n    const param = this.activeRouter.snapshot.params.id\r\n      .toString()\r\n      .split('&&', 2);\r\n    this.assetId = param[0];\r\n    this.assetCode = param[1];\r\n    this.attachedFileCollection.next([]);\r\n    this.checkUserEditRights();\r\n    this.viewAssetForId();\r\n  }\r\n\r\n  public ngOnInit() {}\r\n\r\n  public createForm() {\r\n    const bulidForm = (extendedAsset: IExtendedAsset) => {\r\n      this.form = this.formBuilder.group({\r\n        model: [extendedAsset.model],\r\n        manufacturer: [extendedAsset.manufacturer],\r\n        assetGroup: [\r\n          extendedAsset.assetGroup === null\r\n            ? null\r\n            : extendedAsset.assetGroup.name\r\n        ],\r\n        assetSubGroup: [\r\n          extendedAsset.assetSubGroup === null\r\n            ? null\r\n            : extendedAsset.assetSubGroup.name\r\n        ],\r\n        assetGroupId: [\r\n          extendedAsset.assetGroup === null ? null : extendedAsset.assetGroup.id\r\n        ],\r\n        assetSubGroupId: [\r\n          extendedAsset.assetSubGroup === null\r\n            ? null\r\n            : extendedAsset.assetSubGroup.id\r\n        ],\r\n        assetType: [extendedAsset.assetType.id],\r\n        kw: [extendedAsset.kw],\r\n        volts: [extendedAsset.volts],\r\n        phase: [extendedAsset.phase],\r\n        loadFactor: [extendedAsset.loadFactor],\r\n        specifications: [extendedAsset.specifications],\r\n        vendorId: [extendedAsset.vendorId],\r\n        frequencyDays: [\r\n          extendedAsset.frequencyDays,\r\n          Validators.compose([\r\n            Validators.maxLength(4),\r\n            Validators.pattern('^[0-9]*$')\r\n          ])\r\n        ],\r\n        validFromDate: [extendedAsset.validFromDate],\r\n        validToDate: [extendedAsset.validToDate]\r\n      });\r\n      this.assetSubGroupValue =\r\n        extendedAsset.assetSubGroup === null\r\n          ? null\r\n          : extendedAsset.assetSubGroup.name;\r\n      this.toMinDate = this.form.get('validFromDate').value;\r\n    };\r\n    bulidForm(this.extendedAsset);\r\n    this.Id = this.extendedAsset.id;\r\n\r\n    this.fileUploadForm = this.formBuilder.group({\r\n      files: [\r\n        null,\r\n        [\r\n          Validators.required,\r\n          fileListFileTypeValidator(this.fileTypes),\r\n          fileListFileSizesValidator(2000000)\r\n        ],\r\n        fileListNumberOfFilesValidator(this.filesLimit)\r\n      ]\r\n    });\r\n  }\r\n\r\n  public viewAssetForId(isOnInit: boolean = true) {\r\n    const assetAttachments$: Observable<string[]> = this.assetService\r\n      .viewAssetForId(this.assetId)\r\n      .pipe(\r\n        map((extendedAsset: ExtendedAsset) => {\r\n          this.extendedAsset = extendedAsset;\r\n          if (isOnInit) {\r\n            this.createForm();\r\n          }\r\n          return extendedAsset.attachedFiles;\r\n        })\r\n      );\r\n    assetAttachments$.subscribe(assetAttachments => {\r\n      this.fileCount = assetAttachments ? assetAttachments.length : 0;\r\n      this.fileSrcCollection = [];\r\n      this.filePathCollection = [];\r\n      if (assetAttachments) {\r\n        assetAttachments.forEach(filePath => {\r\n          const fileNameWithExt = filePath.replace(/^.*[\\\\\\/]/, '');\r\n          const fileName = fileNameWithExt.substring(0, fileNameWithExt.length);\r\n          if (fileName === 'blob') {\r\n            return;\r\n          }\r\n          this.filePathCollection.push(filePath);\r\n          this.fileUploadService.getFile(filePath).subscribe(fileData => {\r\n            fileData.name = fileName;\r\n            this.fileSrcCollection.push(fileData);\r\n            this.fileCount = this.fileSrcCollection\r\n              ? this.fileSrcCollection.length\r\n              : 0;\r\n          });\r\n        });\r\n        this.fileUploadForm.setValue({\r\n          files: this.fileSrcCollection\r\n        });\r\n        this.attachedFileCollection.next(this.fileSrcCollection);\r\n      }\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  public checkUserEditRights() {\r\n    this.isGettingUserRights = true;\r\n    this.authenticationService\r\n      .currentUserHasPermission({\r\n        [PermissionGroup.Assets]: [AssetsPermissions.CanModifyAssetDetails]\r\n      })\r\n      .subscribe(hasPermission => {\r\n        this.isEditable = hasPermission;\r\n        this.isGettingUserRights = false;\r\n      });\r\n  }\r\n\r\n  public updateAsset() {\r\n    this.submitAttempted = true;\r\n    this.isUpdatingAsset = true;\r\n    if (\r\n      this.form.value.validFromDate !== null &&\r\n      this.form.value.validToDate === null\r\n    ) {\r\n      this.form.controls['validToDate'].setErrors({ incorrect: true });\r\n    }\r\n    if (this.form.valid && this.form.dirty) {\r\n      const updateAsset: IUpdateAsset = {\r\n        id: this.Id,\r\n        model: this.form.value.model,\r\n        manufacturer: this.form.value.manufacturer,\r\n        assetGroupId: this.form.value.assetGroupId,\r\n        assetSubGroupId: this.form.value.assetSubGroupId,\r\n        assetTypeId: this.form.value.assetType,\r\n        kw: this.form.value.kw,\r\n        volts: this.form.value.volts,\r\n        phase: this.form.value.phase,\r\n        loadFactor: this.form.value.loadFactor,\r\n        specifications: this.form.value.specifications,\r\n        vendorId: this.form.value.vendorId,\r\n        frequencyDays: this.form.value.frequencyDays,\r\n        validFromDate: this.form.value.validFromDate\r\n          ? formatDate(this.form.value.validFromDate, 'yyyy-MM-dd', 'en-US')\r\n          : null,\r\n        validToDate: this.form.value.validToDate\r\n          ? formatDate(this.form.value.validToDate, 'yyyy-MM-dd', 'en-US')\r\n          : null\r\n      };\r\n      this.assetService.updateAssetForId(updateAsset).subscribe(\r\n        (data: ExtendedAsset) => {\r\n          if (this.fileUploadForm.valid && this.isNewFilesAdded) {\r\n            this.fileUploadService\r\n              .uploadFiles(\r\n                this.extendedAsset.assetId,\r\n                Modules.Asset,\r\n                this.fileSrcCollection\r\n              )\r\n              .subscribe(data => {\r\n                this.savedFileSrcCollection = data;\r\n                this.filePathCollection = data.attachments;\r\n                this.viewAssetForId(false);\r\n              });\r\n          } else {\r\n            this.viewAssetForId(false);\r\n          }\r\n          this.toastService.showToast(\r\n            new Toast('Asset details saved successfully')\r\n          );\r\n          this.isUpdatingAsset = false;\r\n          this.isNewFilesAdded = false;\r\n          this.showSaveButton = false;\r\n          this.extendedAsset = data;\r\n          this.form.markAsPristine();\r\n        },\r\n        err => {\r\n          this.toastService.showErrorToast(\r\n            `Asset details not saved. Please try again later or contact helpdesk`\r\n          );\r\n          this.isUpdatingAsset = false;\r\n          this.isNewFilesAdded = false;\r\n          this.showSaveButton = false;\r\n        }\r\n      );\r\n    }\r\n\r\n    if (this.fileUploadForm.valid && this.isNewFilesAdded && !this.form.dirty) {\r\n      this.fileUploadService\r\n        .uploadFiles(\r\n          this.extendedAsset.assetId,\r\n          Modules.Asset,\r\n          this.fileSrcCollection\r\n        )\r\n        .subscribe(data => {\r\n          this.savedFileSrcCollection = data;\r\n          if (this.savedFileSrcCollection.attachments) {\r\n            this.filePathCollection = data.attachments;\r\n            this.viewAssetForId(false);\r\n            this.toastService.showToast(\r\n              new Toast('Asset details saved successfully')\r\n            );\r\n          } else {\r\n            this.toastService.showErrorToast(\r\n              `Asset details not saved. Please try again later or contact helpdesk`\r\n            );\r\n          }\r\n          this.isNewFilesAdded = false;\r\n          this.showSaveButton = false;\r\n          this.isUpdatingAsset = false;\r\n        });\r\n    }\r\n    if (\r\n      !this.fileUploadForm.valid &&\r\n      this.isNewFilesAdded &&\r\n      !this.form.dirty\r\n    ) {\r\n      this.toastService.showErrorToast(`Files not saved`);\r\n    }\r\n    this.isUpdatingAsset = false;\r\n    this.showSaveButton = false;\r\n  }\r\n\r\n  public assignSubGroupList(group: any) {\r\n    this.selectedListSubGroup = group.subGroup;\r\n    this.form.get('assetGroupId').setValue(group.groupId);\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public selectedSubGroupId(subGroupId: number) {\r\n    this.form.get('assetSubGroupId').setValue(subGroupId);\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public selectedVendorId(vendorId: string) {\r\n    this.form.get('vendorId').setValue(vendorId);\r\n    if (vendorId === null) {\r\n      this.form.get('frequencyDays').setValue(null);\r\n      this.form.get('validFromDate').setValue(null);\r\n      this.form.get('validToDate').setValue(null);\r\n    }\r\n    this.showSaveButton = true;\r\n  }\r\n\r\n  public onDateChange(inputDate) {\r\n    this.toMinDate = new Date(inputDate.value);\r\n    this.toMinDate.setDate(this.toMinDate.getDate() + 1);\r\n  }\r\n\r\n  public handleDaysInputKeyDown(event) {\r\n    if (event.key === 'Backspace' || event.key === 'Delete') {\r\n      return;\r\n    }\r\n    if (isNaN(event.key) || event.keyCode === 32) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  public handleInputKeyDownNumberWithPeriod(event) {\r\n    if (\r\n      event.key === 'Backspace' ||\r\n      event.key === 'Delete' ||\r\n      event.key === '.'\r\n    ) {\r\n      return;\r\n    }\r\n    if (isNaN(event.key) || event.keyCode === 32) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  public handleDaysInput(event) {\r\n    if (Number.isNaN(parseInt(event.target.value))) {\r\n      this.form.controls['frequencyDays'].setValue(null);\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n  }\r\n\r\n  public handleSaveButtonView() {\r\n    this.form.markAsPristine();\r\n    this.showSaveButton = false;\r\n  }\r\n\r\n  public handleFileInputChange(): void {\r\n    this.showSaveButton = true;\r\n    this.isNewFilesAdded = true;\r\n    let noExistingFile = this.fileSrcCollection.length === 0;\r\n\r\n    const inputFiles: any[] = this.fileUploadInput.nativeElement.files;\r\n\r\n    for (let i = 0; i < inputFiles.length; i++) {\r\n      if (\r\n        this.fileSrcCollection.filter(file => file.name === inputFiles[i].name)\r\n          .length === 0\r\n      ) {\r\n        this.fileSrcCollection.push(inputFiles[i]);\r\n\r\n        this.filePathCollection.push('NewFile');\r\n      } else {\r\n        this.toastService.showErrorToast('Cannot upload duplicate file.');\r\n      }\r\n    }\r\n    this.clearFileFormErrors();\r\n\r\n    if (noExistingFile) {\r\n      this.fileUploadForm.setValue({\r\n        files: this.fileSrcCollection\r\n      });\r\n    } else {\r\n      this.fileUploadForm.patchValue({\r\n        files: this.fileSrcCollection\r\n      });\r\n    }\r\n    if (\r\n      this.fileUploadForm.controls['files'].hasError('acceptableFileType') ||\r\n      this.fileUploadForm.controls['files'].hasError(\r\n        'acceptableNumberOfFiles'\r\n      ) ||\r\n      this.fileUploadForm.controls['files'].hasError('acceptableFileSize')\r\n    ) {\r\n      this.showSaveButton = false;\r\n    }\r\n    this.fileCount = this.fileSrcCollection.length;\r\n    this.attachedFileCollection.next(this.fileSrcCollection);\r\n  }\r\n\r\n  public launchFileInput(): void {\r\n    this.fileUploadForm.reset({});\r\n    this.fileUploadInput.nativeElement.value = '';\r\n    this.fileUploadInput.nativeElement.click();\r\n  }\r\n\r\n  public handleDeleteFileAttached(fileIndex: number) {\r\n    const filePath = this.filePathCollection[fileIndex];\r\n    if (filePath === 'NewFile') {\r\n      this.fileSrcCollection.splice(fileIndex, 1);\r\n      this.filePathCollection.splice(fileIndex, 1);\r\n      this.fileCount = this.fileSrcCollection.length;\r\n      this.attachedFileCollection.next([]);\r\n      this.attachedFileCollection.next(this.fileSrcCollection);\r\n      this.fileUploadForm.patchValue({\r\n        files: this.fileSrcCollection\r\n      });\r\n      this.toastService.showToast(new Toast('File has been deleted.'));\r\n      this.resetSaveButtonDisplay();\r\n    } else {\r\n      this.fileUploadService.deleteFile(filePath, false).subscribe(\r\n        () => {\r\n          this.fileSrcCollection.splice(fileIndex, 1);\r\n          this.filePathCollection.splice(fileIndex, 1);\r\n          this.fileCount = this.fileSrcCollection.length;\r\n          this.attachedFileCollection.next([]);\r\n          this.attachedFileCollection.next(this.fileSrcCollection);\r\n          this.toastService.showToast(new Toast('File has been deleted.'));\r\n          this.fileUploadForm.patchValue({\r\n            files: this.fileSrcCollection\r\n          });\r\n          this.resetSaveButtonDisplay();\r\n        },\r\n        (err: HttpErrorResponse) => {\r\n          this.toastService.showErrorToast('Unable to delete the file.');\r\n          return;\r\n        }\r\n      );\r\n    }\r\n\r\n    this.fileUploadForm.markAsPristine();\r\n    this.fileUploadForm.markAsUntouched();\r\n    this.fileUploadForm.updateValueAndValidity();\r\n  }\r\n\r\n  public resetSaveButtonDisplay() {\r\n    if (this.fileSrcCollection.length === 0) {\r\n      this.showSaveButton = false;\r\n    }\r\n    if (this.fileSrcCollection.length === 3) {\r\n      this.showSaveButton = true;\r\n    }\r\n  }\r\n\r\n  public clearFileFormErrors() {\r\n    this.fileUploadForm.controls['files'].setErrors({\r\n      acceptableFileType: false,\r\n      acceptableFileSize: false\r\n    });\r\n  }\r\n}\r\n","<app-section-header [customCurrentPageTitle]=\"assetCode\"></app-section-header>\r\n\r\n<div *ngIf=\"isLoading || isGettingUserRights\">\r\n  <div class=\"spinner\"></div>\r\n</div>\r\n<app-loading-modal\r\n  *ngIf=\"isUpdatingAsset\"\r\n></app-loading-modal>\r\n<article *ngIf=\"!isLoading && extendedAsset && !isGettingUserRights\">\r\n  <header>\r\n    <h1>{{ extendedAsset.name }}</h1>\r\n    <h1> #{{ extendedAsset.assetCode }}</h1>\r\n  </header>\r\n  <div class=\"core-info row mt-5\">\r\n    <div class=\"col-sm-4\">\r\n      <img\r\n        src=\"/assets/asset/awaiting-image.png\"\r\n        alt=\"Image of product with ID {{ extendedAsset.id }}\"\r\n        onerror=\"this.src='/assets/asset/awaiting-image.png'\"\r\n        (click)=\"showExpandedImage = true\"\r\n      />\r\n    </div>\r\n    <div class=\"col-sm-8 asset-basic-details\">\r\n      <div class=\"row\">\r\n        <div class=\"col-sm-5 col-md-6 col-6\" >ID</div>\r\n        <div class=\"col-sm-7 col-md-6 col-6\">{{ extendedAsset.assetId }}</div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-sm-5 col-md-6 col-6\" >Description</div>\r\n        <div class=\"col-sm-7 col-md-6 col-6\">{{ extendedAsset.description }}</div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-sm-5 col-md-6 col-6\" >Supplier</div>\r\n        <div class=\"col-sm-7 col-md-6 col-6\">{{ extendedAsset.supplier }}</div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-sm-5 col-md-6 col-6\" >Location</div>\r\n        <div class=\"col-sm-7 col-md-6 col-6\">{{ extendedAsset.location }}</div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-sm-5 col-md-6 col-6\" >Next Maintenance Due</div>\r\n        <div class=\"col-sm-7 col-md-6 col-6\">{{ extendedAsset.nextMaintenanceDate | date : 'dd MMMM YYYY' }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <form [formGroup] = \"form\"  >\r\n    <app-accordion\r\n      [titleDetails]=\"'Asset Details'\"\r\n    >\r\n        <div class=\"row asset-detail\">\r\n          <div class=\"col-sm-6\">\r\n            <div class=\"row  d-flex mb-3\">\r\n              <label class=\"col-4 \">Model / S.No</label>\r\n              <div class=\"col-8\">\r\n                <input type=\"text\" formControlName=\"model\" class=\"form-control\" [readonly]=\"!isEditable\"/>\r\n              </div>\r\n            </div>\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">Manufacturer</label>\r\n              <div class=\"col-8\">\r\n                <input type=\"text\" formControlName=\"manufacturer\" class=\"form-control\" [readonly]=\"!isEditable\"/>\r\n              </div>\r\n            </div>\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">Group</label>\r\n              <div class=\"col-8\">\r\n                <input formControlName=\"assetGroupId\" type=\"hidden\" />\r\n                 <app-list-group [isEditable] = \"isEditable\"\r\n                 [assetGroupName]=\"extendedAsset.assetGroup === null ? null : extendedAsset.assetGroup.name\"\r\n                 (listSubgroups) = \"assignSubGroupList($event)\"\r\n                ></app-list-group>\r\n              </div>\r\n            </div>\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">Sub Group</label>\r\n              <div class=\"col-8\">\r\n               <input formControlName=\"assetSubGroupId\" type=\"hidden\" />\r\n               <app-list-sub-group [listSubGroups]=\"selectedListSubGroup\"\r\n                [assetSubGroupName]=\"assetSubGroupValue\"\r\n                (subGroupId)=\"selectedSubGroupId($event)\"\r\n                >\r\n              </app-list-sub-group>\r\n              </div>\r\n            </div>\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">Type</label>\r\n              <div class=\"col-8\">\r\n                <select  formControlName=\"assetType\"  class=\"form-control custom-select\"\r\n                         [ngClass]=\"{'select-readonly' : !isEditable}\">\r\n                  <option *ngFor=\"let assetType of assetTypes; let i = index\" [value]=\"assetTypesValues[i]\"\r\n                          class=\"form-control\">\r\n                          {{assetType}}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">Specifications</label>\r\n              <div class=\"col-8\">\r\n                <textarea type=\"text\" formControlName=\"specifications\" class=\"form-control\" [readonly]=\"!isEditable\"></textarea>\r\n              </div>\r\n            </div>\r\n            <div  *ngIf=\"fileSrcCollection && fileSrcCollection.length > 1\" class=\"row d-flex mb-3 mobile-view\"></div>\r\n            <div  *ngIf=\"fileSrcCollection && fileSrcCollection.length > 1\" class=\"row d-flex mb-3 mobile-view\"></div>\r\n            <div  *ngIf=\"fileSrcCollection && fileSrcCollection.length > 1\" class=\"row d-flex mb-3 mobile-view\"></div>\r\n          </div>\r\n          <div class=\"col-sm-6\">\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">Load Factor</label>\r\n              <div class=\"col-8\">\r\n                <input\r\n                  (keydown)=\"handleInputKeyDownNumberWithPeriod($event)\"\r\n                  type=\"number\"\r\n                  pattern=\"[0-9.]*\"\r\n                  ng-pattern=\"[0-9.]*\"\r\n                  formControlName=\"loadFactor\"\r\n                  class=\"form-control\"\r\n                  [readonly]=\"!isEditable\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">KW</label>\r\n              <div class=\"col-8\">\r\n                <input\r\n                  (keydown)=\"handleInputKeyDownNumberWithPeriod($event)\"\r\n                  type=\"number\"\r\n                  pattern=\"[0-9.]*\"\r\n                  ng-pattern=\"[0-9.]*\"\r\n                  formControlName=\"kw\"\r\n                  class=\"form-control\"\r\n                  [readonly]=\"!isEditable\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">Volts</label>\r\n              <div class=\"col-8\">\r\n                <input\r\n                  (keydown)=\"handleInputKeyDownNumberWithPeriod($event)\"\r\n                  type=\"number\"\r\n                  pattern=\"[0-9.]*\"\r\n                  ng-pattern=\"[0-9.]*\"\r\n                  formControlName=\"volts\"\r\n                  class=\"form-control\"\r\n                  [readonly]=\"!isEditable\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"row  d-flex  mb-3\">\r\n              <label class=\"col-4 \">Phase</label>\r\n              <div class=\"col-8\">\r\n                <select formControlName=\"phase\"\r\n                        class=\"form-control custom-select\"\r\n                        [ngClass]=\"{'select-readonly' : !isEditable}\"\r\n                >\r\n                  <option *ngFor=\"let phaseType of phases\"\r\n                          [value]=\"phaseType\"\r\n                          [selected]=\"phaseType === extendedAsset.phase\"\r\n                          class=\"form-control\">\r\n                          {{phaseType}}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row  d-flex  mb-3 file-attach\">\r\n              <label class=\"col-4 \">Attachments\r\n                <span tooltip-danger=\"Allowed file types are doc, docx, xls, xlsx, csv, pdf, jpeg, png, bmp. Max file size allowed 2 MB.\">\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 19.199 19.2\"   width=\"13\" height=\"13\">\r\n                    <path d=\"M0 9.6a9.6 9.6 0 0 0 18.5 3.6 8.571 8.571 0 0 0 .7-3.6A9.6 9.6 0 1 0 0 9.6z\" fill=\"#fff\" stroke=\"#ff422e\"/>\r\n                    <g>\r\n                      <path d=\"M9.6 4a1.184 1.184 0 0 1 1.2 1.3 1.2 1.2 0 1 1-2.4 0A1.24 1.24 0 0 1 9.6 4zm-1 3.3h2.1v7.9H8.6z\" fill=\"#ff422e\"/>\r\n                    </g>\r\n                  </svg>\r\n                </span>\r\n              </label>\r\n              <form [formGroup]=\"fileUploadForm\" class=\"col-8\">\r\n                <div class=\"form-group\">\r\n                  <div #alertElementRef class=\"alert-msgs\">\r\n                    <div\r\n                      class=\"alert alert-danger arrow-alert\"\r\n                      *ngIf=\"\r\n                        fileUploadForm.controls['files'].hasError(\r\n                          'acceptableFileType'\r\n                        ) ||\r\n                        fileUploadForm.controls['files'].hasError(\r\n                          'acceptableFileSize'\r\n                        )\r\n                      \"\r\n                    >\r\n                    Allowed file types are doc, docx, xls, xlsx, csv, pdf, jpeg, png, bmp. Max file size allowed is 2 mb.\r\n                    </div>\r\n                    <div\r\n                      class=\"alert alert-danger arrow-alert\"\r\n                      *ngIf=\"\r\n                        fileUploadForm.controls['files'].hasError(\r\n                          'acceptableNumberOfFiles'\r\n                        ) && fileCount > 3\r\n                      \">\r\n\r\n\r\n                      Too many files selected. Total number of files cannot exceed\r\n                      {{ filesLimit }}.\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"file-input\">\r\n                    <div class=\"col-7\">\r\n                      <label>\r\n                        <span *ngIf=\"fileCount === 0\">No file selected</span>\r\n                        <span *ngIf=\"fileCount === 1\">{{fileCount}} file added</span>\r\n                        <span *ngIf=\"fileCount > 1\">{{fileCount}} files added</span>\r\n                      </label>\r\n                    </div>\r\n                    <div class=\"col-5\"><button\r\n                      (click)=\"launchFileInput()\"\r\n                      class=\"btn-file-upload\"\r\n                      [disabled]=\"fileCount > 2 || !isEditable\"\r\n                    >Choose file</button></div>\r\n                    <input\r\n                      hidden\r\n                      multiple\r\n                      (change)=\"handleFileInputChange()\"\r\n                      type=\"file\"\r\n                      #fileUploadInput\r\n                      [readonly]=\"!isEditable\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n            <div  *ngIf=\"fileSrcCollection && fileSrcCollection.length > 0\" class=\"row  d-flex  file-row\">\r\n              <app-list-attached-files [attachedFileCollection]=\"attachedFileCollection\"[isEditable]=\"isEditable\" (deletedFileIndex)=\"handleDeleteFileAttached($event)\"></app-list-attached-files>\r\n            </div>\r\n            <ng-container  *ngIf=\"fileSrcCollection && fileSrcCollection.length > 1\" class=\"row d-flex mb-3\"> </ng-container>\r\n            <ng-container  *ngIf=\"fileSrcCollection && fileSrcCollection.length > 1\" class=\"row d-flex mb-3\"> </ng-container>\r\n            <ng-container  *ngIf=\"fileSrcCollection && fileSrcCollection.length > 1\" class=\"row d-flex mb-3\"> </ng-container>\r\n          </div>\r\n        </div>\r\n    </app-accordion>\r\n\r\n    <app-accordion\r\n      [titleDetails]=\"'Maintenance Contract'\"\r\n    >\r\n      <div class=\"row asset-contract\">\r\n        <div class=\"col-sm-12\">\r\n          <div class=\"row  d-flex mb-3\">\r\n            <label class=\"col-sm-2 col-4\">Vendor</label>\r\n            <div class=\"col-sm-9 col-8\">\r\n              <input formControlName=\"vendorId\" type=\"hidden\" />\r\n              <app-list-vendor [vendorName]=\"extendedAsset.vendorId\"\r\n                              (selectedVendorId) = \"selectedVendorId($event)\"></app-list-vendor>\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"col-sm-6\">\r\n              <div class=\"row  d-flex  service-frequency\">\r\n                <label class=\"col-sm-4 col-4\">\r\n                  Service Frequency\r\n                  </label>\r\n                <div class=\"col-sm-8 col-8\">\r\n                  <div class=\"form-group date-box\">\r\n                    <div class=\" d-flex\">\r\n                      <input\r\n                        (keydown)=\"handleDaysInputKeyDown($event)\"\r\n                        (input)=\"handleDaysInput($event)\"\r\n                        type=\"text\"\r\n                        pattern=\"[0-9]*\"\r\n                        inputmode=\"numeric\"\r\n                        ng-pattern=\"[0-9]*\"\r\n                        maxlength=\"4\"\r\n                        formControlName=\"frequencyDays\"\r\n                        class=\"form-control\"\r\n                        [readOnly]=\"form.controls.vendorId.value === null\"\r\n                      /> <span>Days</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"row  d-flex  mb-3\">\r\n                <label class=\"col-sm-4 col-4\">\r\n                  Valid From</label>\r\n                <div class=\"col-sm-8 col-8\">\r\n                  <div class=\"form-group date-box\">\r\n                    <div class=\"taro-material-datepicker\">\r\n                      <input\r\n                        matInput\r\n                        placeholder=\"Select from date...\"\r\n                        [matDatepicker]=\"datePicker\"\r\n                        class=\"form-control\"\r\n                        formControlName=\"validFromDate\"\r\n                        (dateChange) = \"onDateChange($event)\"\r\n                      />\r\n                      <mat-datepicker-toggle\r\n                        matSuffix\r\n                        [for]=\"datePicker\" (click)=\"handleSaveButtonView()\"\r\n                        [ngClass]=\"{'select-readonly' : form.controls.vendorId.value === null}\"\r\n                      >\r\n                      </mat-datepicker-toggle>\r\n                      <mat-datepicker #datePicker disabled=\"false\"></mat-datepicker>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n              <div class=\"row  d-flex alertMessage\" [ngClass]=\"{'alertMessages' : submitAttempted && form.controls.validToDate.errors}\">\r\n                <label class=\"col-sm-2 col-4\"></label>\r\n                <div class=\"col-sm-8 col-8\">\r\n                    <div\r\n                      class=\"alert alert-danger arrow-alert\"\r\n                      *ngIf=\"submitAttempted && form.controls.validToDate.errors \"\r\n                    >\r\n                      You must specify valid to date\r\n                    </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"row  d-flex  mb-3\">\r\n                <label class=\"col-sm-2 col-4 text-sm-center\">\r\n                  To</label>\r\n                <div class=\"col-sm-8 col-8\">\r\n                  <div class=\"form-group date-box\">\r\n                    <div class=\"taro-material-datepicker\">\r\n                      <input\r\n                        matInput\r\n                        placeholder=\"Select to date...\"\r\n                        [matDatepicker]=\"toDatePicker\"\r\n                        [min]=\"toMinDate\"\r\n                        class=\"form-control\"\r\n                        formControlName=\"validToDate\"\r\n                      />\r\n                      <mat-datepicker-toggle\r\n                        matSuffix\r\n                        [for]=\"toDatePicker\" (click)=\"hangleSaveButtonView()\"\r\n                        [ngClass]=\"{'select-readonly' : form.controls.validFromDate.value === null}\"\r\n                      >\r\n                      </mat-datepicker-toggle>\r\n                      <mat-datepicker #toDatePicker disabled=\"false\"></mat-datepicker>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </app-accordion>\r\n\r\n    <app-accordion\r\n    [titleDetails]=\"'Maintenance History'\"\r\n    >\r\n      <div class=\"row pl-10\">\r\n        <div class=\"col-sm-12 asset-history\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <td >Date</td>\r\n                <td >WO#</td>\r\n                <td >Attended By</td>\r\n                <td >Comments</td>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </app-accordion>\r\n\r\n    <footer *ngIf=\"form.dirty || fileUploadForm.dirty || showSaveButton\">\r\n    <div class=\"form-actions\" [class.visible]=\"form.dirty || fileUploadForm.dirty || showSaveButton\">\r\n      <button\r\n        class=\"btn btn-primary btn-block col-12\"\r\n        (click)=\"updateAsset()\"\r\n      >\r\n      <span *ngIf=\"!isUpdatingAsset\">Save all changes</span>\r\n      </button>\r\n    </div>\r\n  </footer>\r\n\r\n  </form>\r\n\r\n</article>\r\n\r\n"]}